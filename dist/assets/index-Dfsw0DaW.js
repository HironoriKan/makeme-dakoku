(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o0(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Yh={exports:{}},eo={},Xh={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=Symbol.for("react.element"),l0=Symbol.for("react.portal"),c0=Symbol.for("react.fragment"),u0=Symbol.for("react.strict_mode"),d0=Symbol.for("react.profiler"),f0=Symbol.for("react.provider"),h0=Symbol.for("react.context"),p0=Symbol.for("react.forward_ref"),m0=Symbol.for("react.suspense"),g0=Symbol.for("react.memo"),v0=Symbol.for("react.lazy"),Id=Symbol.iterator;function y0(e){return e===null||typeof e!="object"?null:(e=Id&&e[Id]||e["@@iterator"],typeof e=="function"?e:null)}var Zh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ep=Object.assign,tp={};function Jn(e,t,r){this.props=e,this.context=t,this.refs=tp,this.updater=r||Zh}Jn.prototype.isReactComponent={};Jn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rp(){}rp.prototype=Jn.prototype;function Jc(e,t,r){this.props=e,this.context=t,this.refs=tp,this.updater=r||Zh}var Qc=Jc.prototype=new rp;Qc.constructor=Jc;ep(Qc,Jn.prototype);Qc.isPureReactComponent=!0;var Pd=Array.isArray,np=Object.prototype.hasOwnProperty,Yc={current:null},sp={key:!0,ref:!0,__self:!0,__source:!0};function ap(e,t,r){var n,s={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)np.call(t,n)&&!sp.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ha,type:e,key:a,ref:i,props:s,_owner:Yc.current}}function x0(e,t){return{$$typeof:ha,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ha}function b0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Td=/\/+/g;function Ho(e,t){return typeof e=="object"&&e!==null&&e.key!=null?b0(""+e.key):t.toString(36)}function si(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ha:case l0:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+Ho(i,0):n,Pd(s)?(r="",e!=null&&(r=e.replace(Td,"$&/")+"/"),si(s,t,r,"",function(u){return u})):s!=null&&(Xc(s)&&(s=x0(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Td,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",Pd(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Ho(a,l);i+=si(a,t,r,c,s)}else if(c=y0(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Ho(a,l++),i+=si(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Aa(e,t,r){if(e==null)return e;var n=[],s=0;return si(e,n,"","",function(a){return t.call(r,a,s++)}),n}function w0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ge={current:null},ai={transition:null},_0={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:ai,ReactCurrentOwner:Yc};function ip(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:Aa,forEach:function(e,t,r){Aa(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Aa(e,function(){t++}),t},toArray:function(e){return Aa(e,function(t){return t})||[]},only:function(e){if(!Xc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=Jn;X.Fragment=c0;X.Profiler=d0;X.PureComponent=Jc;X.StrictMode=u0;X.Suspense=m0;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_0;X.act=ip;X.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ep({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=Yc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)np.call(t,c)&&!sp.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ha,type:e.type,key:s,ref:a,props:n,_owner:i}};X.createContext=function(e){return e={$$typeof:h0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:f0,_context:e},e.Consumer=e};X.createElement=ap;X.createFactory=function(e){var t=ap.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:p0,render:e}};X.isValidElement=Xc;X.lazy=function(e){return{$$typeof:v0,_payload:{_status:-1,_result:e},_init:w0}};X.memo=function(e,t){return{$$typeof:g0,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=ai.transition;ai.transition={};try{e()}finally{ai.transition=t}};X.unstable_act=ip;X.useCallback=function(e,t){return Ge.current.useCallback(e,t)};X.useContext=function(e){return Ge.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return Ge.current.useDeferredValue(e)};X.useEffect=function(e,t){return Ge.current.useEffect(e,t)};X.useId=function(){return Ge.current.useId()};X.useImperativeHandle=function(e,t,r){return Ge.current.useImperativeHandle(e,t,r)};X.useInsertionEffect=function(e,t){return Ge.current.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return Ge.current.useLayoutEffect(e,t)};X.useMemo=function(e,t){return Ge.current.useMemo(e,t)};X.useReducer=function(e,t,r){return Ge.current.useReducer(e,t,r)};X.useRef=function(e){return Ge.current.useRef(e)};X.useState=function(e){return Ge.current.useState(e)};X.useSyncExternalStore=function(e,t,r){return Ge.current.useSyncExternalStore(e,t,r)};X.useTransition=function(){return Ge.current.useTransition()};X.version="18.3.1";Xh.exports=X;var j=Xh.exports;const se=Kc(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0=j,S0=Symbol.for("react.element"),N0=Symbol.for("react.fragment"),k0=Object.prototype.hasOwnProperty,C0=j0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E0={key:!0,ref:!0,__self:!0,__source:!0};function op(e,t,r){var n,s={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)k0.call(t,n)&&!E0.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:S0,type:e,key:a,ref:i,props:s,_owner:C0.current}}eo.Fragment=N0;eo.jsx=op;eo.jsxs=op;Yh.exports=eo;var o=Yh.exports,lp={exports:{}},ut={},cp={exports:{}},up={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,L){var U=T.length;T.push(L);e:for(;0<U;){var V=U-1>>>1,J=T[V];if(0<s(J,L))T[V]=L,T[U]=J,U=V;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var L=T[0],U=T.pop();if(U!==L){T[0]=U;e:for(var V=0,J=T.length,ge=J>>>1;V<ge;){var te=2*(V+1)-1,Ee=T[te],xe=te+1,St=T[xe];if(0>s(Ee,U))xe<J&&0>s(St,Ee)?(T[V]=St,T[xe]=U,V=xe):(T[V]=Ee,T[te]=U,V=te);else if(xe<J&&0>s(St,U))T[V]=St,T[xe]=U,V=xe;else break e}}return L}function s(T,L){var U=T.sortIndex-L.sortIndex;return U!==0?U:T.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(T){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=T)n(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(u)}}function b(T){if(x=!1,v(T),!g)if(r(c)!==null)g=!0,I(S);else{var L=r(u);L!==null&&B(b,L.startTime-T)}}function S(T,L){g=!1,x&&(x=!1,y(O),O=-1),p=!0;var U=h;try{for(v(L),f=r(c);f!==null&&(!(f.expirationTime>L)||T&&!A());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var J=V(f.expirationTime<=L);L=e.unstable_now(),typeof J=="function"?f.callback=J:f===r(c)&&n(c),v(L)}else n(c);f=r(c)}if(f!==null)var ge=!0;else{var te=r(u);te!==null&&B(b,te.startTime-L),ge=!1}return ge}finally{f=null,h=U,p=!1}}var N=!1,D=null,O=-1,P=5,_=-1;function A(){return!(e.unstable_now()-_<P)}function E(){if(D!==null){var T=e.unstable_now();_=T;var L=!0;try{L=D(!0,T)}finally{L?R():(N=!1,D=null)}}else N=!1}var R;if(typeof m=="function")R=function(){m(E)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,C=k.port2;k.port1.onmessage=E,R=function(){C.postMessage(null)}}else R=function(){w(E,0)};function I(T){D=T,N||(N=!0,R())}function B(T,L){O=w(function(){T(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,I(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var U=h;h=L;try{return T()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,L){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var U=h;h=T;try{return L()}finally{h=U}},e.unstable_scheduleCallback=function(T,L,U){var V=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?V+U:V):U=V,T){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=U+J,T={id:d++,callback:L,priorityLevel:T,startTime:U,expirationTime:J,sortIndex:-1},U>V?(T.sortIndex=U,t(u,T),r(c)===null&&T===r(u)&&(x?(y(O),O=-1):x=!0,B(b,U-V))):(T.sortIndex=J,t(c,T),g||p||(g=!0,I(S))),T},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(T){var L=h;return function(){var U=h;h=L;try{return T.apply(this,arguments)}finally{h=U}}}})(up);cp.exports=up;var D0=cp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0=j,ct=D0;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dp=new Set,zs={};function nn(e,t){Mn(e,t),Mn(e+"Capture",t)}function Mn(e,t){for(zs[e]=t,e=0;e<t.length;e++)dp.add(t[e])}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ll=Object.prototype.hasOwnProperty,P0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Od={},Ad={};function T0(e){return Ll.call(Ad,e)?!0:Ll.call(Od,e)?!1:P0.test(e)?Ad[e]=!0:(Od[e]=!0,!1)}function O0(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A0(e,t,r,n){if(t===null||typeof t>"u"||O0(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ve(e,t,r,n,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oe[e]=new Ve(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oe[t]=new Ve(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oe[e]=new Ve(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oe[e]=new Ve(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oe[e]=new Ve(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oe[e]=new Ve(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oe[e]=new Ve(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oe[e]=new Ve(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oe[e]=new Ve(e,5,!1,e.toLowerCase(),null,!1,!1)});var Zc=/[\-:]([a-z])/g;function eu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Zc,eu);Oe[t]=new Ve(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Zc,eu);Oe[t]=new Ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Zc,eu);Oe[t]=new Ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oe[e]=new Ve(e,1,!1,e.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oe[e]=new Ve(e,1,!1,e.toLowerCase(),null,!0,!0)});function tu(e,t,r,n){var s=Oe.hasOwnProperty(t)?Oe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A0(t,r,s,n)&&(r=null),n||s===null?T0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var tr=I0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ra=Symbol.for("react.element"),bn=Symbol.for("react.portal"),wn=Symbol.for("react.fragment"),ru=Symbol.for("react.strict_mode"),$l=Symbol.for("react.profiler"),fp=Symbol.for("react.provider"),hp=Symbol.for("react.context"),nu=Symbol.for("react.forward_ref"),Ml=Symbol.for("react.suspense"),Bl=Symbol.for("react.suspense_list"),su=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),pp=Symbol.for("react.offscreen"),Rd=Symbol.iterator;function cs(e){return e===null||typeof e!="object"?null:(e=Rd&&e[Rd]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,qo;function _s(e){if(qo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);qo=t&&t[1]||""}return`
`+qo+e}var Go=!1;function Vo(e,t){if(!e||Go)return"";Go=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Go=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?_s(e):""}function R0(e){switch(e.tag){case 5:return _s(e.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 2:case 15:return e=Vo(e.type,!1),e;case 11:return e=Vo(e.type.render,!1),e;case 1:return e=Vo(e.type,!0),e;default:return""}}function Ul(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case wn:return"Fragment";case bn:return"Portal";case $l:return"Profiler";case ru:return"StrictMode";case Ml:return"Suspense";case Bl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hp:return(e.displayName||"Context")+".Consumer";case fp:return(e._context.displayName||"Context")+".Provider";case nu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case su:return t=e.displayName||null,t!==null?t:Ul(e.type)||"Memo";case or:t=e._payload,e=e._init;try{return Ul(e(t))}catch{}}return null}function L0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ul(t);case 8:return t===ru?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $0(e){var t=mp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function La(e){e._valueTracker||(e._valueTracker=$0(e))}function gp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=mp(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function vi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fl(e,t){var r=t.checked;return pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ld(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Nr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function vp(e,t){t=t.checked,t!=null&&tu(e,"checked",t,!1)}function zl(e,t){vp(e,t);var r=Nr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Wl(e,t.type,Nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $d(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Wl(e,t,r){(t!=="number"||vi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var js=Array.isArray;function Tn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Nr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Hl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Md(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(M(92));if(js(r)){if(1<r.length)throw Error(M(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Nr(r)}}function yp(e,t){var r=Nr(t.value),n=Nr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Bd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ql(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $a,bp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$a.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ws(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M0=["Webkit","ms","Moz","O"];Object.keys(Cs).forEach(function(e){M0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cs[t]=Cs[e]})});function wp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Cs.hasOwnProperty(e)&&Cs[e]?(""+t).trim():t+"px"}function _p(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=wp(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var B0=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gl(e,t){if(t){if(B0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function Vl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kl=null;function au(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jl=null,On=null,An=null;function Ud(e){if(e=ga(e)){if(typeof Jl!="function")throw Error(M(280));var t=e.stateNode;t&&(t=ao(t),Jl(e.stateNode,e.type,t))}}function jp(e){On?An?An.push(e):An=[e]:On=e}function Sp(){if(On){var e=On,t=An;if(An=On=null,Ud(e),t)for(e=0;e<t.length;e++)Ud(t[e])}}function Np(e,t){return e(t)}function kp(){}var Ko=!1;function Cp(e,t,r){if(Ko)return e(t,r);Ko=!0;try{return Np(e,t,r)}finally{Ko=!1,(On!==null||An!==null)&&(kp(),Sp())}}function Hs(e,t){var r=e.stateNode;if(r===null)return null;var n=ao(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(M(231,t,typeof r));return r}var Ql=!1;if(Yt)try{var us={};Object.defineProperty(us,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",us,us),window.removeEventListener("test",us,us)}catch{Ql=!1}function U0(e,t,r,n,s,a,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Es=!1,yi=null,xi=!1,Yl=null,F0={onError:function(e){Es=!0,yi=e}};function z0(e,t,r,n,s,a,i,l,c){Es=!1,yi=null,U0.apply(F0,arguments)}function W0(e,t,r,n,s,a,i,l,c){if(z0.apply(this,arguments),Es){if(Es){var u=yi;Es=!1,yi=null}else throw Error(M(198));xi||(xi=!0,Yl=u)}}function sn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ep(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fd(e){if(sn(e)!==e)throw Error(M(188))}function H0(e){var t=e.alternate;if(!t){if(t=sn(e),t===null)throw Error(M(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Fd(s),e;if(a===n)return Fd(s),t;a=a.sibling}throw Error(M(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i)throw Error(M(189))}}if(r.alternate!==n)throw Error(M(190))}if(r.tag!==3)throw Error(M(188));return r.stateNode.current===r?e:t}function Dp(e){return e=H0(e),e!==null?Ip(e):null}function Ip(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ip(e);if(t!==null)return t;e=e.sibling}return null}var Pp=ct.unstable_scheduleCallback,zd=ct.unstable_cancelCallback,q0=ct.unstable_shouldYield,G0=ct.unstable_requestPaint,ve=ct.unstable_now,V0=ct.unstable_getCurrentPriorityLevel,iu=ct.unstable_ImmediatePriority,Tp=ct.unstable_UserBlockingPriority,bi=ct.unstable_NormalPriority,K0=ct.unstable_LowPriority,Op=ct.unstable_IdlePriority,to=null,Ut=null;function J0(e){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(to,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:X0,Q0=Math.log,Y0=Math.LN2;function X0(e){return e>>>=0,e===0?32:31-(Q0(e)/Y0|0)|0}var Ma=64,Ba=4194304;function Ss(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=Ss(l):(a&=i,a!==0&&(n=Ss(a)))}else i=r&~s,i!==0?n=Ss(i):a!==0&&(n=Ss(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Tt(t),s=1<<r,n|=e[r],t&=~s;return n}function Z0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ey(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Tt(a),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=Z0(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Xl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ap(){var e=Ma;return Ma<<=1,!(Ma&4194240)&&(Ma=64),e}function Jo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function pa(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tt(t),e[t]=r}function ty(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Tt(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function ou(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Tt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var re=0;function Rp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lp,lu,$p,Mp,Bp,Zl=!1,Ua=[],pr=null,mr=null,gr=null,qs=new Map,Gs=new Map,cr=[],ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wd(e,t){switch(e){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":qs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(t.pointerId)}}function ds(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=ga(t),t!==null&&lu(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function ny(e,t,r,n,s){switch(t){case"focusin":return pr=ds(pr,e,t,r,n,s),!0;case"dragenter":return mr=ds(mr,e,t,r,n,s),!0;case"mouseover":return gr=ds(gr,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return qs.set(a,ds(qs.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Gs.set(a,ds(Gs.get(a)||null,e,t,r,n,s)),!0}return!1}function Up(e){var t=qr(e.target);if(t!==null){var r=sn(t);if(r!==null){if(t=r.tag,t===13){if(t=Ep(r),t!==null){e.blockedOn=t,Bp(e.priority,function(){$p(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ii(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ec(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Kl=n,r.target.dispatchEvent(n),Kl=null}else return t=ga(r),t!==null&&lu(t),e.blockedOn=r,!1;t.shift()}return!0}function Hd(e,t,r){ii(e)&&r.delete(t)}function sy(){Zl=!1,pr!==null&&ii(pr)&&(pr=null),mr!==null&&ii(mr)&&(mr=null),gr!==null&&ii(gr)&&(gr=null),qs.forEach(Hd),Gs.forEach(Hd)}function fs(e,t){e.blockedOn===t&&(e.blockedOn=null,Zl||(Zl=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,sy)))}function Vs(e){function t(s){return fs(s,e)}if(0<Ua.length){fs(Ua[0],e);for(var r=1;r<Ua.length;r++){var n=Ua[r];n.blockedOn===e&&(n.blockedOn=null)}}for(pr!==null&&fs(pr,e),mr!==null&&fs(mr,e),gr!==null&&fs(gr,e),qs.forEach(t),Gs.forEach(t),r=0;r<cr.length;r++)n=cr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<cr.length&&(r=cr[0],r.blockedOn===null);)Up(r),r.blockedOn===null&&cr.shift()}var Rn=tr.ReactCurrentBatchConfig,_i=!0;function ay(e,t,r,n){var s=re,a=Rn.transition;Rn.transition=null;try{re=1,cu(e,t,r,n)}finally{re=s,Rn.transition=a}}function iy(e,t,r,n){var s=re,a=Rn.transition;Rn.transition=null;try{re=4,cu(e,t,r,n)}finally{re=s,Rn.transition=a}}function cu(e,t,r,n){if(_i){var s=ec(e,t,r,n);if(s===null)al(e,t,n,ji,r),Wd(e,n);else if(ny(s,e,t,r,n))n.stopPropagation();else if(Wd(e,n),t&4&&-1<ry.indexOf(e)){for(;s!==null;){var a=ga(s);if(a!==null&&Lp(a),a=ec(e,t,r,n),a===null&&al(e,t,n,ji,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else al(e,t,n,null,r)}}var ji=null;function ec(e,t,r,n){if(ji=null,e=au(n),e=qr(e),e!==null)if(t=sn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ep(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ji=e,null}function Fp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V0()){case iu:return 1;case Tp:return 4;case bi:case K0:return 16;case Op:return 536870912;default:return 16}default:return 16}}var fr=null,uu=null,oi=null;function zp(){if(oi)return oi;var e,t=uu,r=t.length,n,s="value"in fr?fr.value:fr.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[a-n];n++);return oi=s.slice(e,1<n?1-n:void 0)}function li(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fa(){return!0}function qd(){return!1}function dt(e){function t(r,n,s,a,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Fa:qd,this.isPropagationStopped=qd,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),t}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},du=dt(Qn),ma=pe({},Qn,{view:0,detail:0}),oy=dt(ma),Qo,Yo,hs,ro=pe({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hs&&(hs&&e.type==="mousemove"?(Qo=e.screenX-hs.screenX,Yo=e.screenY-hs.screenY):Yo=Qo=0,hs=e),Qo)},movementY:function(e){return"movementY"in e?e.movementY:Yo}}),Gd=dt(ro),ly=pe({},ro,{dataTransfer:0}),cy=dt(ly),uy=pe({},ma,{relatedTarget:0}),Xo=dt(uy),dy=pe({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),fy=dt(dy),hy=pe({},Qn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),py=dt(hy),my=pe({},Qn,{data:0}),Vd=dt(my),gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yy[e])?!!t[e]:!1}function fu(){return xy}var by=pe({},ma,{key:function(e){if(e.key){var t=gy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wy=dt(by),_y=pe({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kd=dt(_y),jy=pe({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),Sy=dt(jy),Ny=pe({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ky=dt(Ny),Cy=pe({},ro,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ey=dt(Cy),Dy=[9,13,27,32],hu=Yt&&"CompositionEvent"in window,Ds=null;Yt&&"documentMode"in document&&(Ds=document.documentMode);var Iy=Yt&&"TextEvent"in window&&!Ds,Wp=Yt&&(!hu||Ds&&8<Ds&&11>=Ds),Jd=" ",Qd=!1;function Hp(e,t){switch(e){case"keyup":return Dy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _n=!1;function Py(e,t){switch(e){case"compositionend":return qp(t);case"keypress":return t.which!==32?null:(Qd=!0,Jd);case"textInput":return e=t.data,e===Jd&&Qd?null:e;default:return null}}function Ty(e,t){if(_n)return e==="compositionend"||!hu&&Hp(e,t)?(e=zp(),oi=uu=fr=null,_n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wp&&t.locale!=="ko"?null:t.data;default:return null}}var Oy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Oy[e.type]:t==="textarea"}function Gp(e,t,r,n){jp(n),t=Si(t,"onChange"),0<t.length&&(r=new du("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Is=null,Ks=null;function Ay(e){nm(e,0)}function no(e){var t=Nn(e);if(gp(t))return e}function Ry(e,t){if(e==="change")return t}var Vp=!1;if(Yt){var Zo;if(Yt){var el="oninput"in document;if(!el){var Xd=document.createElement("div");Xd.setAttribute("oninput","return;"),el=typeof Xd.oninput=="function"}Zo=el}else Zo=!1;Vp=Zo&&(!document.documentMode||9<document.documentMode)}function Zd(){Is&&(Is.detachEvent("onpropertychange",Kp),Ks=Is=null)}function Kp(e){if(e.propertyName==="value"&&no(Ks)){var t=[];Gp(t,Ks,e,au(e)),Cp(Ay,t)}}function Ly(e,t,r){e==="focusin"?(Zd(),Is=t,Ks=r,Is.attachEvent("onpropertychange",Kp)):e==="focusout"&&Zd()}function $y(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return no(Ks)}function My(e,t){if(e==="click")return no(t)}function By(e,t){if(e==="input"||e==="change")return no(t)}function Uy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:Uy;function Js(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ll.call(t,s)||!At(e[s],t[s]))return!1}return!0}function ef(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tf(e,t){var r=ef(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ef(r)}}function Jp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qp(){for(var e=window,t=vi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=vi(e.document)}return t}function pu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Fy(e){var t=Qp(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Jp(r.ownerDocument.documentElement,r)){if(n!==null&&pu(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=tf(r,a);var i=tf(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zy=Yt&&"documentMode"in document&&11>=document.documentMode,jn=null,tc=null,Ps=null,rc=!1;function rf(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rc||jn==null||jn!==vi(n)||(n=jn,"selectionStart"in n&&pu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ps&&Js(Ps,n)||(Ps=n,n=Si(tc,"onSelect"),0<n.length&&(t=new du("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=jn)))}function za(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Sn={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},tl={},Yp={};Yt&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);function so(e){if(tl[e])return tl[e];if(!Sn[e])return e;var t=Sn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Yp)return tl[e]=t[r];return e}var Xp=so("animationend"),Zp=so("animationiteration"),em=so("animationstart"),tm=so("transitionend"),rm=new Map,nf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){rm.set(e,t),nn(t,[e])}for(var rl=0;rl<nf.length;rl++){var nl=nf[rl],Wy=nl.toLowerCase(),Hy=nl[0].toUpperCase()+nl.slice(1);Ir(Wy,"on"+Hy)}Ir(Xp,"onAnimationEnd");Ir(Zp,"onAnimationIteration");Ir(em,"onAnimationStart");Ir("dblclick","onDoubleClick");Ir("focusin","onFocus");Ir("focusout","onBlur");Ir(tm,"onTransitionEnd");Mn("onMouseEnter",["mouseout","mouseover"]);Mn("onMouseLeave",["mouseout","mouseover"]);Mn("onPointerEnter",["pointerout","pointerover"]);Mn("onPointerLeave",["pointerout","pointerover"]);nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nn("onBeforeInput",["compositionend","keypress","textInput","paste"]);nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ns));function sf(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,W0(n,t,void 0,e),e.currentTarget=null}function nm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;sf(s,l,u),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;sf(s,l,u),a=c}}}if(xi)throw e=Yl,xi=!1,Yl=null,e}function le(e,t){var r=t[oc];r===void 0&&(r=t[oc]=new Set);var n=e+"__bubble";r.has(n)||(sm(t,e,2,!1),r.add(n))}function sl(e,t,r){var n=0;t&&(n|=4),sm(r,e,n,t)}var Wa="_reactListening"+Math.random().toString(36).slice(2);function Qs(e){if(!e[Wa]){e[Wa]=!0,dp.forEach(function(r){r!=="selectionchange"&&(qy.has(r)||sl(r,!1,e),sl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wa]||(t[Wa]=!0,sl("selectionchange",!1,t))}}function sm(e,t,r,n){switch(Fp(t)){case 1:var s=ay;break;case 4:s=iy;break;default:s=cu}r=s.bind(null,t,r,e),s=void 0,!Ql||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function al(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=qr(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}Cp(function(){var u=a,d=au(r),f=[];e:{var h=rm.get(e);if(h!==void 0){var p=du,g=e;switch(e){case"keypress":if(li(r)===0)break e;case"keydown":case"keyup":p=wy;break;case"focusin":g="focus",p=Xo;break;case"focusout":g="blur",p=Xo;break;case"beforeblur":case"afterblur":p=Xo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Sy;break;case Xp:case Zp:case em:p=fy;break;case tm:p=ky;break;case"scroll":p=oy;break;case"wheel":p=Ey;break;case"copy":case"cut":case"paste":p=py;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Kd}var x=(t&4)!==0,w=!x&&e==="scroll",y=x?h!==null?h+"Capture":null:h;x=[];for(var m=u,v;m!==null;){v=m;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,y!==null&&(b=Hs(m,y),b!=null&&x.push(Ys(m,b,v)))),w)break;m=m.return}0<x.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Kl&&(g=r.relatedTarget||r.fromElement)&&(qr(g)||g[Xt]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?qr(g):null,g!==null&&(w=sn(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(x=Gd,b="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=Kd,b="onPointerLeave",y="onPointerEnter",m="pointer"),w=p==null?h:Nn(p),v=g==null?h:Nn(g),h=new x(b,m+"leave",p,r,d),h.target=w,h.relatedTarget=v,b=null,qr(d)===u&&(x=new x(y,m+"enter",g,r,d),x.target=v,x.relatedTarget=w,b=x),w=b,p&&g)t:{for(x=p,y=g,m=0,v=x;v;v=dn(v))m++;for(v=0,b=y;b;b=dn(b))v++;for(;0<m-v;)x=dn(x),m--;for(;0<v-m;)y=dn(y),v--;for(;m--;){if(x===y||y!==null&&x===y.alternate)break t;x=dn(x),y=dn(y)}x=null}else x=null;p!==null&&af(f,h,p,x,!1),g!==null&&w!==null&&af(f,w,g,x,!0)}}e:{if(h=u?Nn(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=Ry;else if(Yd(h))if(Vp)S=By;else{S=$y;var N=Ly}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=My);if(S&&(S=S(e,u))){Gp(f,S,r,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Wl(h,"number",h.value)}switch(N=u?Nn(u):window,e){case"focusin":(Yd(N)||N.contentEditable==="true")&&(jn=N,tc=u,Ps=null);break;case"focusout":Ps=tc=jn=null;break;case"mousedown":rc=!0;break;case"contextmenu":case"mouseup":case"dragend":rc=!1,rf(f,r,d);break;case"selectionchange":if(zy)break;case"keydown":case"keyup":rf(f,r,d)}var D;if(hu)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else _n?Hp(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(Wp&&r.locale!=="ko"&&(_n||O!=="onCompositionStart"?O==="onCompositionEnd"&&_n&&(D=zp()):(fr=d,uu="value"in fr?fr.value:fr.textContent,_n=!0)),N=Si(u,O),0<N.length&&(O=new Vd(O,e,null,r,d),f.push({event:O,listeners:N}),D?O.data=D:(D=qp(r),D!==null&&(O.data=D)))),(D=Iy?Py(e,r):Ty(e,r))&&(u=Si(u,"onBeforeInput"),0<u.length&&(d=new Vd("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=D))}nm(f,t)})}function Ys(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Si(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Hs(e,r),a!=null&&n.unshift(Ys(e,a,s)),a=Hs(e,t),a!=null&&n.push(Ys(e,a,s))),e=e.return}return n}function dn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function af(e,t,r,n,s){for(var a=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Hs(r,a),c!=null&&i.unshift(Ys(r,c,l))):s||(c=Hs(r,a),c!=null&&i.push(Ys(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Gy=/\r\n?/g,Vy=/\u0000|\uFFFD/g;function of(e){return(typeof e=="string"?e:""+e).replace(Gy,`
`).replace(Vy,"")}function Ha(e,t,r){if(t=of(t),of(e)!==t&&r)throw Error(M(425))}function Ni(){}var nc=null,sc=null;function ac(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ic=typeof setTimeout=="function"?setTimeout:void 0,Ky=typeof clearTimeout=="function"?clearTimeout:void 0,lf=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof lf<"u"?function(e){return lf.resolve(null).then(e).catch(Qy)}:ic;function Qy(e){setTimeout(function(){throw e})}function il(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Vs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Vs(t)}function vr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yn=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Yn,Xs="__reactProps$"+Yn,Xt="__reactContainer$"+Yn,oc="__reactEvents$"+Yn,Yy="__reactListeners$"+Yn,Xy="__reactHandles$"+Yn;function qr(e){var t=e[Bt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Xt]||r[Bt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=cf(e);e!==null;){if(r=e[Bt])return r;e=cf(e)}return t}e=r,r=e.parentNode}return null}function ga(e){return e=e[Bt]||e[Xt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function ao(e){return e[Xs]||null}var lc=[],kn=-1;function Pr(e){return{current:e}}function ce(e){0>kn||(e.current=lc[kn],lc[kn]=null,kn--)}function oe(e,t){kn++,lc[kn]=e.current,e.current=t}var kr={},Fe=Pr(kr),Ze=Pr(!1),Yr=kr;function Bn(e,t){var r=e.type.contextTypes;if(!r)return kr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function et(e){return e=e.childContextTypes,e!=null}function ki(){ce(Ze),ce(Fe)}function uf(e,t,r){if(Fe.current!==kr)throw Error(M(168));oe(Fe,t),oe(Ze,r)}function am(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(M(108,L0(e)||"Unknown",s));return pe({},r,n)}function Ci(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kr,Yr=Fe.current,oe(Fe,e),oe(Ze,Ze.current),!0}function df(e,t,r){var n=e.stateNode;if(!n)throw Error(M(169));r?(e=am(e,t,Yr),n.__reactInternalMemoizedMergedChildContext=e,ce(Ze),ce(Fe),oe(Fe,e)):ce(Ze),oe(Ze,r)}var Vt=null,io=!1,ol=!1;function im(e){Vt===null?Vt=[e]:Vt.push(e)}function Zy(e){io=!0,im(e)}function Tr(){if(!ol&&Vt!==null){ol=!0;var e=0,t=re;try{var r=Vt;for(re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Vt=null,io=!1}catch(s){throw Vt!==null&&(Vt=Vt.slice(e+1)),Pp(iu,Tr),s}finally{re=t,ol=!1}}return null}var Cn=[],En=0,Ei=null,Di=0,pt=[],mt=0,Xr=null,Kt=1,Jt="";function Ur(e,t){Cn[En++]=Di,Cn[En++]=Ei,Ei=e,Di=t}function om(e,t,r){pt[mt++]=Kt,pt[mt++]=Jt,pt[mt++]=Xr,Xr=e;var n=Kt;e=Jt;var s=32-Tt(n)-1;n&=~(1<<s),r+=1;var a=32-Tt(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Kt=1<<32-Tt(t)+s|r<<s|n,Jt=a+e}else Kt=1<<a|r<<s|n,Jt=e}function mu(e){e.return!==null&&(Ur(e,1),om(e,1,0))}function gu(e){for(;e===Ei;)Ei=Cn[--En],Cn[En]=null,Di=Cn[--En],Cn[En]=null;for(;e===Xr;)Xr=pt[--mt],pt[mt]=null,Jt=pt[--mt],pt[mt]=null,Kt=pt[--mt],pt[mt]=null}var it=null,st=null,ue=!1,It=null;function lm(e,t){var r=vt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ff(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,it=e,st=vr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,it=e,st=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Xr!==null?{id:Kt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=vt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,it=e,st=null,!0):!1;default:return!1}}function cc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function uc(e){if(ue){var t=st;if(t){var r=t;if(!ff(e,t)){if(cc(e))throw Error(M(418));t=vr(r.nextSibling);var n=it;t&&ff(e,t)?lm(n,r):(e.flags=e.flags&-4097|2,ue=!1,it=e)}}else{if(cc(e))throw Error(M(418));e.flags=e.flags&-4097|2,ue=!1,it=e}}}function hf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;it=e}function qa(e){if(e!==it)return!1;if(!ue)return hf(e),ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ac(e.type,e.memoizedProps)),t&&(t=st)){if(cc(e))throw cm(),Error(M(418));for(;t;)lm(e,t),t=vr(t.nextSibling)}if(hf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){st=vr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}st=null}}else st=it?vr(e.stateNode.nextSibling):null;return!0}function cm(){for(var e=st;e;)e=vr(e.nextSibling)}function Un(){st=it=null,ue=!1}function vu(e){It===null?It=[e]:It.push(e)}var ex=tr.ReactCurrentBatchConfig;function ps(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(M(309));var n=r.stateNode}if(!n)throw Error(M(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(M(284));if(!r._owner)throw Error(M(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pf(e){var t=e._init;return t(e._payload)}function um(e){function t(y,m){if(e){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function r(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=wr(y,m),y.index=0,y.sibling=null,y}function a(y,m,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,m,v,b){return m===null||m.tag!==6?(m=pl(v,y.mode,b),m.return=y,m):(m=s(m,v),m.return=y,m)}function c(y,m,v,b){var S=v.type;return S===wn?d(y,m,v.props.children,b,v.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===or&&pf(S)===m.type)?(b=s(m,v.props),b.ref=ps(y,m,v),b.return=y,b):(b=mi(v.type,v.key,v.props,null,y.mode,b),b.ref=ps(y,m,v),b.return=y,b)}function u(y,m,v,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=ml(v,y.mode,b),m.return=y,m):(m=s(m,v.children||[]),m.return=y,m)}function d(y,m,v,b,S){return m===null||m.tag!==7?(m=Qr(v,y.mode,b,S),m.return=y,m):(m=s(m,v),m.return=y,m)}function f(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=pl(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ra:return v=mi(m.type,m.key,m.props,null,y.mode,v),v.ref=ps(y,null,m),v.return=y,v;case bn:return m=ml(m,y.mode,v),m.return=y,m;case or:var b=m._init;return f(y,b(m._payload),v)}if(js(m)||cs(m))return m=Qr(m,y.mode,v,null),m.return=y,m;Ga(y,m)}return null}function h(y,m,v,b){var S=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:l(y,m,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ra:return v.key===S?c(y,m,v,b):null;case bn:return v.key===S?u(y,m,v,b):null;case or:return S=v._init,h(y,m,S(v._payload),b)}if(js(v)||cs(v))return S!==null?null:d(y,m,v,b,null);Ga(y,v)}return null}function p(y,m,v,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(v)||null,l(m,y,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ra:return y=y.get(b.key===null?v:b.key)||null,c(m,y,b,S);case bn:return y=y.get(b.key===null?v:b.key)||null,u(m,y,b,S);case or:var N=b._init;return p(y,m,v,N(b._payload),S)}if(js(b)||cs(b))return y=y.get(v)||null,d(m,y,b,S,null);Ga(m,b)}return null}function g(y,m,v,b){for(var S=null,N=null,D=m,O=m=0,P=null;D!==null&&O<v.length;O++){D.index>O?(P=D,D=null):P=D.sibling;var _=h(y,D,v[O],b);if(_===null){D===null&&(D=P);break}e&&D&&_.alternate===null&&t(y,D),m=a(_,m,O),N===null?S=_:N.sibling=_,N=_,D=P}if(O===v.length)return r(y,D),ue&&Ur(y,O),S;if(D===null){for(;O<v.length;O++)D=f(y,v[O],b),D!==null&&(m=a(D,m,O),N===null?S=D:N.sibling=D,N=D);return ue&&Ur(y,O),S}for(D=n(y,D);O<v.length;O++)P=p(D,y,O,v[O],b),P!==null&&(e&&P.alternate!==null&&D.delete(P.key===null?O:P.key),m=a(P,m,O),N===null?S=P:N.sibling=P,N=P);return e&&D.forEach(function(A){return t(y,A)}),ue&&Ur(y,O),S}function x(y,m,v,b){var S=cs(v);if(typeof S!="function")throw Error(M(150));if(v=S.call(v),v==null)throw Error(M(151));for(var N=S=null,D=m,O=m=0,P=null,_=v.next();D!==null&&!_.done;O++,_=v.next()){D.index>O?(P=D,D=null):P=D.sibling;var A=h(y,D,_.value,b);if(A===null){D===null&&(D=P);break}e&&D&&A.alternate===null&&t(y,D),m=a(A,m,O),N===null?S=A:N.sibling=A,N=A,D=P}if(_.done)return r(y,D),ue&&Ur(y,O),S;if(D===null){for(;!_.done;O++,_=v.next())_=f(y,_.value,b),_!==null&&(m=a(_,m,O),N===null?S=_:N.sibling=_,N=_);return ue&&Ur(y,O),S}for(D=n(y,D);!_.done;O++,_=v.next())_=p(D,y,O,_.value,b),_!==null&&(e&&_.alternate!==null&&D.delete(_.key===null?O:_.key),m=a(_,m,O),N===null?S=_:N.sibling=_,N=_);return e&&D.forEach(function(E){return t(y,E)}),ue&&Ur(y,O),S}function w(y,m,v,b){if(typeof v=="object"&&v!==null&&v.type===wn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ra:e:{for(var S=v.key,N=m;N!==null;){if(N.key===S){if(S=v.type,S===wn){if(N.tag===7){r(y,N.sibling),m=s(N,v.props.children),m.return=y,y=m;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===or&&pf(S)===N.type){r(y,N.sibling),m=s(N,v.props),m.ref=ps(y,N,v),m.return=y,y=m;break e}r(y,N);break}else t(y,N);N=N.sibling}v.type===wn?(m=Qr(v.props.children,y.mode,b,v.key),m.return=y,y=m):(b=mi(v.type,v.key,v.props,null,y.mode,b),b.ref=ps(y,m,v),b.return=y,y=b)}return i(y);case bn:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(y,m.sibling),m=s(m,v.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else t(y,m);m=m.sibling}m=ml(v,y.mode,b),m.return=y,y=m}return i(y);case or:return N=v._init,w(y,m,N(v._payload),b)}if(js(v))return g(y,m,v,b);if(cs(v))return x(y,m,v,b);Ga(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(y,m.sibling),m=s(m,v),m.return=y,y=m):(r(y,m),m=pl(v,y.mode,b),m.return=y,y=m),i(y)):r(y,m)}return w}var Fn=um(!0),dm=um(!1),Ii=Pr(null),Pi=null,Dn=null,yu=null;function xu(){yu=Dn=Pi=null}function bu(e){var t=Ii.current;ce(Ii),e._currentValue=t}function dc(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ln(e,t){Pi=e,yu=Dn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xe=!0),e.firstContext=null)}function _t(e){var t=e._currentValue;if(yu!==e)if(e={context:e,memoizedValue:t,next:null},Dn===null){if(Pi===null)throw Error(M(308));Dn=e,Pi.dependencies={lanes:0,firstContext:e}}else Dn=Dn.next=e;return t}var Gr=null;function wu(e){Gr===null?Gr=[e]:Gr.push(e)}function fm(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,wu(t)):(r.next=s.next,s.next=r),t.interleaved=r,Zt(e,n)}function Zt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var lr=!1;function _u(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ee&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Zt(e,r)}return s=n.interleaved,s===null?(t.next=t,wu(n)):(t.next=s.next,s.next=t),n.interleaved=t,Zt(e,r)}function ci(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ou(e,r)}}function mf(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ti(e,t,r,n){var s=e.updateQueue;lr=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;i=0,d=u=c=null,l=a;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,x=l;switch(h=t,p=r,x.tag){case 1:if(g=x.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=pe({},f,h);break e;case 2:lr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,i|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);en|=i,e.lanes=i,e.memoizedState=f}}function gf(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(M(191,s));s.call(n)}}}var va={},Ft=Pr(va),Zs=Pr(va),ea=Pr(va);function Vr(e){if(e===va)throw Error(M(174));return e}function ju(e,t){switch(oe(ea,t),oe(Zs,e),oe(Ft,va),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ql(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ql(t,e)}ce(Ft),oe(Ft,t)}function zn(){ce(Ft),ce(Zs),ce(ea)}function pm(e){Vr(ea.current);var t=Vr(Ft.current),r=ql(t,e.type);t!==r&&(oe(Zs,e),oe(Ft,r))}function Su(e){Zs.current===e&&(ce(Ft),ce(Zs))}var fe=Pr(0);function Oi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ll=[];function Nu(){for(var e=0;e<ll.length;e++)ll[e]._workInProgressVersionPrimary=null;ll.length=0}var ui=tr.ReactCurrentDispatcher,cl=tr.ReactCurrentBatchConfig,Zr=0,he=null,be=null,je=null,Ai=!1,Ts=!1,ta=0,tx=0;function Le(){throw Error(M(321))}function ku(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!At(e[r],t[r]))return!1;return!0}function Cu(e,t,r,n,s,a){if(Zr=a,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ui.current=e===null||e.memoizedState===null?ax:ix,e=r(n,s),Ts){a=0;do{if(Ts=!1,ta=0,25<=a)throw Error(M(301));a+=1,je=be=null,t.updateQueue=null,ui.current=ox,e=r(n,s)}while(Ts)}if(ui.current=Ri,t=be!==null&&be.next!==null,Zr=0,je=be=he=null,Ai=!1,t)throw Error(M(300));return e}function Eu(){var e=ta!==0;return ta=0,e}function Mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?he.memoizedState=je=e:je=je.next=e,je}function jt(){if(be===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var t=je===null?he.memoizedState:je.next;if(t!==null)je=t,be=e;else{if(e===null)throw Error(M(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},je===null?he.memoizedState=je=e:je=je.next=e}return je}function ra(e,t){return typeof t=="function"?t(e):t}function ul(e){var t=jt(),r=t.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=e;var n=be,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=i=null,c=null,u=a;do{var d=u.lane;if((Zr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,he.lanes|=d,en|=d}u=u.next}while(u!==null&&u!==a);c===null?i=n:c.next=l,At(n,t.memoizedState)||(Xe=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,he.lanes|=a,en|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function dl(e){var t=jt(),r=t.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);At(a,t.memoizedState)||(Xe=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function mm(){}function gm(e,t){var r=he,n=jt(),s=t(),a=!At(n.memoizedState,s);if(a&&(n.memoizedState=s,Xe=!0),n=n.queue,Du(xm.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||je!==null&&je.memoizedState.tag&1){if(r.flags|=2048,na(9,ym.bind(null,r,n,s,t),void 0,null),Se===null)throw Error(M(349));Zr&30||vm(r,t,s)}return s}function vm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ym(e,t,r,n){t.value=r,t.getSnapshot=n,bm(t)&&wm(e)}function xm(e,t,r){return r(function(){bm(t)&&wm(e)})}function bm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!At(e,r)}catch{return!0}}function wm(e){var t=Zt(e,1);t!==null&&Ot(t,e,1,-1)}function vf(e){var t=Mt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:e},t.queue=e,e=e.dispatch=sx.bind(null,he,e),[t.memoizedState,e]}function na(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function _m(){return jt().memoizedState}function di(e,t,r,n){var s=Mt();he.flags|=e,s.memoizedState=na(1|t,r,void 0,n===void 0?null:n)}function oo(e,t,r,n){var s=jt();n=n===void 0?null:n;var a=void 0;if(be!==null){var i=be.memoizedState;if(a=i.destroy,n!==null&&ku(n,i.deps)){s.memoizedState=na(t,r,a,n);return}}he.flags|=e,s.memoizedState=na(1|t,r,a,n)}function yf(e,t){return di(8390656,8,e,t)}function Du(e,t){return oo(2048,8,e,t)}function jm(e,t){return oo(4,2,e,t)}function Sm(e,t){return oo(4,4,e,t)}function Nm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function km(e,t,r){return r=r!=null?r.concat([e]):null,oo(4,4,Nm.bind(null,t,e),r)}function Iu(){}function Cm(e,t){var r=jt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ku(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Em(e,t){var r=jt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ku(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Dm(e,t,r){return Zr&21?(At(r,t)||(r=Ap(),he.lanes|=r,en|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xe=!0),e.memoizedState=r)}function rx(e,t){var r=re;re=r!==0&&4>r?r:4,e(!0);var n=cl.transition;cl.transition={};try{e(!1),t()}finally{re=r,cl.transition=n}}function Im(){return jt().memoizedState}function nx(e,t,r){var n=br(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Pm(e))Tm(t,r);else if(r=fm(e,t,r,n),r!==null){var s=He();Ot(r,e,n,s),Om(r,t,n)}}function sx(e,t,r){var n=br(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pm(e))Tm(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,At(l,i)){var c=t.interleaved;c===null?(s.next=s,wu(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=fm(e,t,s,n),r!==null&&(s=He(),Ot(r,e,n,s),Om(r,t,n))}}function Pm(e){var t=e.alternate;return e===he||t!==null&&t===he}function Tm(e,t){Ts=Ai=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Om(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ou(e,r)}}var Ri={readContext:_t,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},ax={readContext:_t,useCallback:function(e,t){return Mt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:yf,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,di(4194308,4,Nm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return di(4194308,4,e,t)},useInsertionEffect:function(e,t){return di(4,2,e,t)},useMemo:function(e,t){var r=Mt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Mt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=nx.bind(null,he,e),[n.memoizedState,e]},useRef:function(e){var t=Mt();return e={current:e},t.memoizedState=e},useState:vf,useDebugValue:Iu,useDeferredValue:function(e){return Mt().memoizedState=e},useTransition:function(){var e=vf(!1),t=e[0];return e=rx.bind(null,e[1]),Mt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=he,s=Mt();if(ue){if(r===void 0)throw Error(M(407));r=r()}else{if(r=t(),Se===null)throw Error(M(349));Zr&30||vm(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,yf(xm.bind(null,n,a,e),[e]),n.flags|=2048,na(9,ym.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Mt(),t=Se.identifierPrefix;if(ue){var r=Jt,n=Kt;r=(n&~(1<<32-Tt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ta++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=tx++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ix={readContext:_t,useCallback:Cm,useContext:_t,useEffect:Du,useImperativeHandle:km,useInsertionEffect:jm,useLayoutEffect:Sm,useMemo:Em,useReducer:ul,useRef:_m,useState:function(){return ul(ra)},useDebugValue:Iu,useDeferredValue:function(e){var t=jt();return Dm(t,be.memoizedState,e)},useTransition:function(){var e=ul(ra)[0],t=jt().memoizedState;return[e,t]},useMutableSource:mm,useSyncExternalStore:gm,useId:Im,unstable_isNewReconciler:!1},ox={readContext:_t,useCallback:Cm,useContext:_t,useEffect:Du,useImperativeHandle:km,useInsertionEffect:jm,useLayoutEffect:Sm,useMemo:Em,useReducer:dl,useRef:_m,useState:function(){return dl(ra)},useDebugValue:Iu,useDeferredValue:function(e){var t=jt();return be===null?t.memoizedState=e:Dm(t,be.memoizedState,e)},useTransition:function(){var e=dl(ra)[0],t=jt().memoizedState;return[e,t]},useMutableSource:mm,useSyncExternalStore:gm,useId:Im,unstable_isNewReconciler:!1};function Ct(e,t){if(e&&e.defaultProps){t=pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function fc(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var lo={isMounted:function(e){return(e=e._reactInternals)?sn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=He(),s=br(e),a=Qt(n,s);a.payload=t,r!=null&&(a.callback=r),t=yr(e,a,s),t!==null&&(Ot(t,e,s,n),ci(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=He(),s=br(e),a=Qt(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=yr(e,a,s),t!==null&&(Ot(t,e,s,n),ci(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=He(),n=br(e),s=Qt(r,n);s.tag=2,t!=null&&(s.callback=t),t=yr(e,s,n),t!==null&&(Ot(t,e,n,r),ci(t,e,n))}};function xf(e,t,r,n,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!Js(r,n)||!Js(s,a):!0}function Am(e,t,r){var n=!1,s=kr,a=t.contextType;return typeof a=="object"&&a!==null?a=_t(a):(s=et(t)?Yr:Fe.current,n=t.contextTypes,a=(n=n!=null)?Bn(e,s):kr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function bf(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&lo.enqueueReplaceState(t,t.state,null)}function hc(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},_u(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=_t(a):(a=et(t)?Yr:Fe.current,s.context=Bn(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(fc(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&lo.enqueueReplaceState(s,s.state,null),Ti(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Wn(e,t){try{var r="",n=t;do r+=R0(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function fl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function pc(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var lx=typeof WeakMap=="function"?WeakMap:Map;function Rm(e,t,r){r=Qt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$i||($i=!0,Sc=n),pc(e,t)},r}function Lm(e,t,r){r=Qt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){pc(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){pc(e,t),typeof n!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function wf(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new lx;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=_x.bind(null,e,t,r),t.then(e,e))}function _f(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function jf(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Qt(-1,1),t.tag=2,yr(r,t,1))),r.lanes|=1),e)}var cx=tr.ReactCurrentOwner,Xe=!1;function We(e,t,r,n){t.child=e===null?dm(t,null,r,n):Fn(t,e.child,r,n)}function Sf(e,t,r,n,s){r=r.render;var a=t.ref;return Ln(t,s),n=Cu(e,t,r,n,a,s),r=Eu(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,er(e,t,s)):(ue&&r&&mu(t),t.flags|=1,We(e,t,n,s),t.child)}function Nf(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!Mu(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,$m(e,t,a,n,s)):(e=mi(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Js,r(i,n)&&e.ref===t.ref)return er(e,t,s)}return t.flags|=1,e=wr(a,n),e.ref=t.ref,e.return=t,t.child=e}function $m(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(Js(a,n)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(Xe=!0);else return t.lanes=e.lanes,er(e,t,s)}return mc(e,t,r,n,s)}function Mm(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Pn,nt),nt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oe(Pn,nt),nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,oe(Pn,nt),nt|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,oe(Pn,nt),nt|=n;return We(e,t,s,r),t.child}function Bm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function mc(e,t,r,n,s){var a=et(r)?Yr:Fe.current;return a=Bn(t,a),Ln(t,s),r=Cu(e,t,r,n,a,s),n=Eu(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,er(e,t,s)):(ue&&n&&mu(t),t.flags|=1,We(e,t,r,s),t.child)}function kf(e,t,r,n,s){if(et(r)){var a=!0;Ci(t)}else a=!1;if(Ln(t,s),t.stateNode===null)fi(e,t),Am(t,r,n),hc(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=_t(u):(u=et(r)?Yr:Fe.current,u=Bn(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&bf(t,i,n,u),lr=!1;var h=t.memoizedState;i.state=h,Ti(t,n,i,s),c=t.memoizedState,l!==n||h!==c||Ze.current||lr?(typeof d=="function"&&(fc(t,r,d,n),c=t.memoizedState),(l=lr||xf(t,r,l,n,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,hm(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ct(t.type,l),i.props=u,f=t.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=_t(c):(c=et(r)?Yr:Fe.current,c=Bn(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||h!==c)&&bf(t,i,n,c),lr=!1,h=t.memoizedState,i.state=h,Ti(t,n,i,s);var g=t.memoizedState;l!==f||h!==g||Ze.current||lr?(typeof p=="function"&&(fc(t,r,p,n),g=t.memoizedState),(u=lr||xf(t,r,u,n,h,g,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),i.props=n,i.state=g,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return gc(e,t,r,n,a,s)}function gc(e,t,r,n,s,a){Bm(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&df(t,r,!1),er(e,t,a);n=t.stateNode,cx.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Fn(t,e.child,null,a),t.child=Fn(t,null,l,a)):We(e,t,l,a),t.memoizedState=n.state,s&&df(t,r,!0),t.child}function Um(e){var t=e.stateNode;t.pendingContext?uf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&uf(e,t.context,!1),ju(e,t.containerInfo)}function Cf(e,t,r,n,s){return Un(),vu(s),t.flags|=256,We(e,t,r,n),t.child}var vc={dehydrated:null,treeContext:null,retryLane:0};function yc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fm(e,t,r){var n=t.pendingProps,s=fe.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),oe(fe,s&1),e===null)return uc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=fo(i,n,0,null),e=Qr(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=yc(r),t.memoizedState=vc,e):Pu(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ux(e,t,i,n,l,s,r);if(a){a=n.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=wr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=wr(l,a):(a=Qr(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?yc(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=vc,n}return a=e.child,e=a.sibling,n=wr(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Pu(e,t){return t=fo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Va(e,t,r,n){return n!==null&&vu(n),Fn(t,e.child,null,r),e=Pu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ux(e,t,r,n,s,a,i){if(r)return t.flags&256?(t.flags&=-257,n=fl(Error(M(422))),Va(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=fo({mode:"visible",children:n.children},s,0,null),a=Qr(a,s,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Fn(t,e.child,null,i),t.child.memoizedState=yc(i),t.memoizedState=vc,a);if(!(t.mode&1))return Va(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(M(419)),n=fl(a,n,void 0),Va(e,t,i,n)}if(l=(i&e.childLanes)!==0,Xe||l){if(n=Se,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Zt(e,s),Ot(n,e,s,-1))}return $u(),n=fl(Error(M(421))),Va(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=jx.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,st=vr(s.nextSibling),it=t,ue=!0,It=null,e!==null&&(pt[mt++]=Kt,pt[mt++]=Jt,pt[mt++]=Xr,Kt=e.id,Jt=e.overflow,Xr=t),t=Pu(t,n.children),t.flags|=4096,t)}function Ef(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),dc(e.return,t,r)}function hl(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function zm(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(We(e,t,n.children,r),n=fe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ef(e,r,t);else if(e.tag===19)Ef(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(oe(fe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Oi(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),hl(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Oi(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}hl(t,!0,r,null,a);break;case"together":hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function er(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),en|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,r=wr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function dx(e,t,r){switch(t.tag){case 3:Um(t),Un();break;case 5:pm(t);break;case 1:et(t.type)&&Ci(t);break;case 4:ju(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;oe(Ii,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(oe(fe,fe.current&1),t.flags|=128,null):r&t.child.childLanes?Fm(e,t,r):(oe(fe,fe.current&1),e=er(e,t,r),e!==null?e.sibling:null);oe(fe,fe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return zm(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oe(fe,fe.current),n)break;return null;case 22:case 23:return t.lanes=0,Mm(e,t,r)}return er(e,t,r)}var Wm,xc,Hm,qm;Wm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xc=function(){};Hm=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Vr(Ft.current);var a=null;switch(r){case"input":s=Fl(e,s),n=Fl(e,n),a=[];break;case"select":s=pe({},s,{value:void 0}),n=pe({},n,{value:void 0}),a=[];break;case"textarea":s=Hl(e,s),n=Hl(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ni)}Gl(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zs.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&le("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};qm=function(e,t,r,n){r!==n&&(t.flags|=4)};function ms(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function fx(e,t,r){var n=t.pendingProps;switch(gu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return et(t.type)&&ki(),$e(t),null;case 3:return n=t.stateNode,zn(),ce(Ze),ce(Fe),Nu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(qa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,It!==null&&(Cc(It),It=null))),xc(e,t),$e(t),null;case 5:Su(t);var s=Vr(ea.current);if(r=t.type,e!==null&&t.stateNode!=null)Hm(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(M(166));return $e(t),null}if(e=Vr(Ft.current),qa(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Bt]=t,n[Xs]=a,e=(t.mode&1)!==0,r){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(s=0;s<Ns.length;s++)le(Ns[s],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":Ld(n,a),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},le("invalid",n);break;case"textarea":Md(n,a),le("invalid",n)}Gl(r,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Ha(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Ha(n.textContent,l,e),s=["children",""+l]):zs.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&le("scroll",n)}switch(r){case"input":La(n),$d(n,a,!0);break;case"textarea":La(n),Bd(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ni)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Bt]=t,e[Xs]=n,Wm(e,t,!1,!1),t.stateNode=e;e:{switch(i=Vl(r,n),r){case"dialog":le("cancel",e),le("close",e),s=n;break;case"iframe":case"object":case"embed":le("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ns.length;s++)le(Ns[s],e);s=n;break;case"source":le("error",e),s=n;break;case"img":case"image":case"link":le("error",e),le("load",e),s=n;break;case"details":le("toggle",e),s=n;break;case"input":Ld(e,n),s=Fl(e,n),le("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=pe({},n,{value:void 0}),le("invalid",e);break;case"textarea":Md(e,n),s=Hl(e,n),le("invalid",e);break;default:s=n}Gl(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?_p(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bp(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ws(e,c):typeof c=="number"&&Ws(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(zs.hasOwnProperty(a)?c!=null&&a==="onScroll"&&le("scroll",e):c!=null&&tu(e,a,c,i))}switch(r){case"input":La(e),$d(e,n,!1);break;case"textarea":La(e),Bd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Nr(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Tn(e,!!n.multiple,a,!1):n.defaultValue!=null&&Tn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ni)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $e(t),null;case 6:if(e&&t.stateNode!=null)qm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(M(166));if(r=Vr(ea.current),Vr(Ft.current),qa(t)){if(n=t.stateNode,r=t.memoizedProps,n[Bt]=t,(a=n.nodeValue!==r)&&(e=it,e!==null))switch(e.tag){case 3:Ha(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ha(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Bt]=t,t.stateNode=n}return $e(t),null;case 13:if(ce(fe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ue&&st!==null&&t.mode&1&&!(t.flags&128))cm(),Un(),t.flags|=98560,a=!1;else if(a=qa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(M(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(M(317));a[Bt]=t}else Un(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$e(t),a=!1}else It!==null&&(Cc(It),It=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||fe.current&1?we===0&&(we=3):$u())),t.updateQueue!==null&&(t.flags|=4),$e(t),null);case 4:return zn(),xc(e,t),e===null&&Qs(t.stateNode.containerInfo),$e(t),null;case 10:return bu(t.type._context),$e(t),null;case 17:return et(t.type)&&ki(),$e(t),null;case 19:if(ce(fe),a=t.memoizedState,a===null)return $e(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)ms(a,!1);else{if(we!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Oi(e),i!==null){for(t.flags|=128,ms(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return oe(fe,fe.current&1|2),t.child}e=e.sibling}a.tail!==null&&ve()>Hn&&(t.flags|=128,n=!0,ms(a,!1),t.lanes=4194304)}else{if(!n)if(e=Oi(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ms(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ue)return $e(t),null}else 2*ve()-a.renderingStartTime>Hn&&r!==1073741824&&(t.flags|=128,n=!0,ms(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ve(),t.sibling=null,r=fe.current,oe(fe,n?r&1|2:r&1),t):($e(t),null);case 22:case 23:return Lu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?nt&1073741824&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function hx(e,t){switch(gu(t),t.tag){case 1:return et(t.type)&&ki(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zn(),ce(Ze),ce(Fe),Nu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Su(t),null;case 13:if(ce(fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Un()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(fe),null;case 4:return zn(),null;case 10:return bu(t.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var Ka=!1,Ue=!1,px=typeof WeakSet=="function"?WeakSet:Set,W=null;function In(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){me(e,t,n)}else r.current=null}function bc(e,t,r){try{r()}catch(n){me(e,t,n)}}var Df=!1;function mx(e,t){if(nc=_i,e=Qp(),pu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=i+s),f!==a||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=i),h===a&&++d===n&&(c=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(sc={focusedElem:e,selectionRange:r},_i=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,w=g.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:Ct(t.type,x),w);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(b){me(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return g=Df,Df=!1,g}function Os(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&bc(t,r,a)}s=s.next}while(s!==n)}}function co(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function wc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Gm(e){var t=e.alternate;t!==null&&(e.alternate=null,Gm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bt],delete t[Xs],delete t[oc],delete t[Yy],delete t[Xy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vm(e){return e.tag===5||e.tag===3||e.tag===4}function If(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _c(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ni));else if(n!==4&&(e=e.child,e!==null))for(_c(e,t,r),e=e.sibling;e!==null;)_c(e,t,r),e=e.sibling}function jc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(jc(e,t,r),e=e.sibling;e!==null;)jc(e,t,r),e=e.sibling}var Ie=null,Et=!1;function sr(e,t,r){for(r=r.child;r!==null;)Km(e,t,r),r=r.sibling}function Km(e,t,r){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(to,r)}catch{}switch(r.tag){case 5:Ue||In(r,t);case 6:var n=Ie,s=Et;Ie=null,sr(e,t,r),Ie=n,Et=s,Ie!==null&&(Et?(e=Ie,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ie.removeChild(r.stateNode));break;case 18:Ie!==null&&(Et?(e=Ie,r=r.stateNode,e.nodeType===8?il(e.parentNode,r):e.nodeType===1&&il(e,r),Vs(e)):il(Ie,r.stateNode));break;case 4:n=Ie,s=Et,Ie=r.stateNode.containerInfo,Et=!0,sr(e,t,r),Ie=n,Et=s;break;case 0:case 11:case 14:case 15:if(!Ue&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&bc(r,t,i),s=s.next}while(s!==n)}sr(e,t,r);break;case 1:if(!Ue&&(In(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){me(r,t,l)}sr(e,t,r);break;case 21:sr(e,t,r);break;case 22:r.mode&1?(Ue=(n=Ue)||r.memoizedState!==null,sr(e,t,r),Ue=n):sr(e,t,r);break;default:sr(e,t,r)}}function Pf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new px),t.forEach(function(n){var s=Sx.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Nt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ie=l.stateNode,Et=!1;break e;case 3:Ie=l.stateNode.containerInfo,Et=!0;break e;case 4:Ie=l.stateNode.containerInfo,Et=!0;break e}l=l.return}if(Ie===null)throw Error(M(160));Km(a,i,s),Ie=null,Et=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){me(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jm(t,e),t=t.sibling}function Jm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nt(t,e),$t(e),n&4){try{Os(3,e,e.return),co(3,e)}catch(x){me(e,e.return,x)}try{Os(5,e,e.return)}catch(x){me(e,e.return,x)}}break;case 1:Nt(t,e),$t(e),n&512&&r!==null&&In(r,r.return);break;case 5:if(Nt(t,e),$t(e),n&512&&r!==null&&In(r,r.return),e.flags&32){var s=e.stateNode;try{Ws(s,"")}catch(x){me(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&vp(s,a),Vl(l,i);var u=Vl(l,a);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?_p(s,f):d==="dangerouslySetInnerHTML"?bp(s,f):d==="children"?Ws(s,f):tu(s,d,f,u)}switch(l){case"input":zl(s,a);break;case"textarea":yp(s,a);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Tn(s,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?Tn(s,!!a.multiple,a.defaultValue,!0):Tn(s,!!a.multiple,a.multiple?[]:"",!1))}s[Xs]=a}catch(x){me(e,e.return,x)}}break;case 6:if(Nt(t,e),$t(e),n&4){if(e.stateNode===null)throw Error(M(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(x){me(e,e.return,x)}}break;case 3:if(Nt(t,e),$t(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vs(t.containerInfo)}catch(x){me(e,e.return,x)}break;case 4:Nt(t,e),$t(e);break;case 13:Nt(t,e),$t(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Au=ve())),n&4&&Pf(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ue=(u=Ue)||d,Nt(t,e),Ue=u):Nt(t,e),$t(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(W=e,d=e.child;d!==null;){for(f=W=d;W!==null;){switch(h=W,p=h.child,h.tag){case 0:case 11:case 14:case 15:Os(4,h,h.return);break;case 1:In(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){me(n,r,x)}}break;case 5:In(h,h.return);break;case 22:if(h.memoizedState!==null){Of(f);continue}}p!==null?(p.return=h,W=p):Of(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=wp("display",i))}catch(x){me(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){me(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Nt(t,e),$t(e),n&4&&Pf(e);break;case 21:break;default:Nt(t,e),$t(e)}}function $t(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Vm(r)){var n=r;break e}r=r.return}throw Error(M(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ws(s,""),n.flags&=-33);var a=If(e);jc(e,a,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=If(e);_c(e,l,i);break;default:throw Error(M(161))}}catch(c){me(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gx(e,t,r){W=e,Qm(e)}function Qm(e,t,r){for(var n=(e.mode&1)!==0;W!==null;){var s=W,a=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Ka;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ue;l=Ka;var u=Ue;if(Ka=i,(Ue=c)&&!u)for(W=s;W!==null;)i=W,c=i.child,i.tag===22&&i.memoizedState!==null?Af(s):c!==null?(c.return=i,W=c):Af(s);for(;a!==null;)W=a,Qm(a),a=a.sibling;W=s,Ka=l,Ue=u}Tf(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,W=a):Tf(e)}}function Tf(e){for(;W!==null;){var t=W;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ue||co(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ue)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ct(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&gf(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}gf(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Vs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ue||t.flags&512&&wc(t)}catch(h){me(t,t.return,h)}}if(t===e){W=null;break}if(r=t.sibling,r!==null){r.return=t.return,W=r;break}W=t.return}}function Of(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var r=t.sibling;if(r!==null){r.return=t.return,W=r;break}W=t.return}}function Af(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{co(4,t)}catch(c){me(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){me(t,s,c)}}var a=t.return;try{wc(t)}catch(c){me(t,a,c)}break;case 5:var i=t.return;try{wc(t)}catch(c){me(t,i,c)}}}catch(c){me(t,t.return,c)}if(t===e){W=null;break}var l=t.sibling;if(l!==null){l.return=t.return,W=l;break}W=t.return}}var vx=Math.ceil,Li=tr.ReactCurrentDispatcher,Tu=tr.ReactCurrentOwner,xt=tr.ReactCurrentBatchConfig,ee=0,Se=null,ye=null,Te=0,nt=0,Pn=Pr(0),we=0,sa=null,en=0,uo=0,Ou=0,As=null,Qe=null,Au=0,Hn=1/0,Ht=null,$i=!1,Sc=null,xr=null,Ja=!1,hr=null,Mi=0,Rs=0,Nc=null,hi=-1,pi=0;function He(){return ee&6?ve():hi!==-1?hi:hi=ve()}function br(e){return e.mode&1?ee&2&&Te!==0?Te&-Te:ex.transition!==null?(pi===0&&(pi=Ap()),pi):(e=re,e!==0||(e=window.event,e=e===void 0?16:Fp(e.type)),e):1}function Ot(e,t,r,n){if(50<Rs)throw Rs=0,Nc=null,Error(M(185));pa(e,r,n),(!(ee&2)||e!==Se)&&(e===Se&&(!(ee&2)&&(uo|=r),we===4&&ur(e,Te)),tt(e,n),r===1&&ee===0&&!(t.mode&1)&&(Hn=ve()+500,io&&Tr()))}function tt(e,t){var r=e.callbackNode;ey(e,t);var n=wi(e,e===Se?Te:0);if(n===0)r!==null&&zd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&zd(r),t===1)e.tag===0?Zy(Rf.bind(null,e)):im(Rf.bind(null,e)),Jy(function(){!(ee&6)&&Tr()}),r=null;else{switch(Rp(n)){case 1:r=iu;break;case 4:r=Tp;break;case 16:r=bi;break;case 536870912:r=Op;break;default:r=bi}r=sg(r,Ym.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ym(e,t){if(hi=-1,pi=0,ee&6)throw Error(M(327));var r=e.callbackNode;if($n()&&e.callbackNode!==r)return null;var n=wi(e,e===Se?Te:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Bi(e,n);else{t=n;var s=ee;ee|=2;var a=Zm();(Se!==e||Te!==t)&&(Ht=null,Hn=ve()+500,Jr(e,t));do try{bx();break}catch(l){Xm(e,l)}while(!0);xu(),Li.current=a,ee=s,ye!==null?t=0:(Se=null,Te=0,t=we)}if(t!==0){if(t===2&&(s=Xl(e),s!==0&&(n=s,t=kc(e,s))),t===1)throw r=sa,Jr(e,0),ur(e,n),tt(e,ve()),r;if(t===6)ur(e,n);else{if(s=e.current.alternate,!(n&30)&&!yx(s)&&(t=Bi(e,n),t===2&&(a=Xl(e),a!==0&&(n=a,t=kc(e,a))),t===1))throw r=sa,Jr(e,0),ur(e,n),tt(e,ve()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(M(345));case 2:Fr(e,Qe,Ht);break;case 3:if(ur(e,n),(n&130023424)===n&&(t=Au+500-ve(),10<t)){if(wi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){He(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ic(Fr.bind(null,e,Qe,Ht),t);break}Fr(e,Qe,Ht);break;case 4:if(ur(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-Tt(n);a=1<<i,i=t[i],i>s&&(s=i),n&=~a}if(n=s,n=ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vx(n/1960))-n,10<n){e.timeoutHandle=ic(Fr.bind(null,e,Qe,Ht),n);break}Fr(e,Qe,Ht);break;case 5:Fr(e,Qe,Ht);break;default:throw Error(M(329))}}}return tt(e,ve()),e.callbackNode===r?Ym.bind(null,e):null}function kc(e,t){var r=As;return e.current.memoizedState.isDehydrated&&(Jr(e,t).flags|=256),e=Bi(e,t),e!==2&&(t=Qe,Qe=r,t!==null&&Cc(t)),e}function Cc(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function yx(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!At(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ur(e,t){for(t&=~Ou,t&=~uo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Tt(t),n=1<<r;e[r]=-1,t&=~n}}function Rf(e){if(ee&6)throw Error(M(327));$n();var t=wi(e,0);if(!(t&1))return tt(e,ve()),null;var r=Bi(e,t);if(e.tag!==0&&r===2){var n=Xl(e);n!==0&&(t=n,r=kc(e,n))}if(r===1)throw r=sa,Jr(e,0),ur(e,t),tt(e,ve()),r;if(r===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,Qe,Ht),tt(e,ve()),null}function Ru(e,t){var r=ee;ee|=1;try{return e(t)}finally{ee=r,ee===0&&(Hn=ve()+500,io&&Tr())}}function tn(e){hr!==null&&hr.tag===0&&!(ee&6)&&$n();var t=ee;ee|=1;var r=xt.transition,n=re;try{if(xt.transition=null,re=1,e)return e()}finally{re=n,xt.transition=r,ee=t,!(ee&6)&&Tr()}}function Lu(){nt=Pn.current,ce(Pn)}function Jr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Ky(r)),ye!==null)for(r=ye.return;r!==null;){var n=r;switch(gu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ki();break;case 3:zn(),ce(Ze),ce(Fe),Nu();break;case 5:Su(n);break;case 4:zn();break;case 13:ce(fe);break;case 19:ce(fe);break;case 10:bu(n.type._context);break;case 22:case 23:Lu()}r=r.return}if(Se=e,ye=e=wr(e.current,null),Te=nt=t,we=0,sa=null,Ou=uo=en=0,Qe=As=null,Gr!==null){for(t=0;t<Gr.length;t++)if(r=Gr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=s,n.next=i}r.pending=n}Gr=null}return e}function Xm(e,t){do{var r=ye;try{if(xu(),ui.current=Ri,Ai){for(var n=he.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ai=!1}if(Zr=0,je=be=he=null,Ts=!1,ta=0,Tu.current=null,r===null||r.return===null){we=1,sa=t,ye=null;break}e:{var a=e,i=r.return,l=r,c=t;if(t=Te,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=_f(i);if(p!==null){p.flags&=-257,jf(p,i,l,a,t),p.mode&1&&wf(a,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var x=new Set;x.add(c),t.updateQueue=x}else g.add(c);break e}else{if(!(t&1)){wf(a,u,t),$u();break e}c=Error(M(426))}}else if(ue&&l.mode&1){var w=_f(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),jf(w,i,l,a,t),vu(Wn(c,l));break e}}a=c=Wn(c,l),we!==4&&(we=2),As===null?As=[a]:As.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=Rm(a,c,t);mf(a,y);break e;case 1:l=c;var m=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(xr===null||!xr.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=Lm(a,l,t);mf(a,b);break e}}a=a.return}while(a!==null)}tg(r)}catch(S){t=S,ye===r&&r!==null&&(ye=r=r.return);continue}break}while(!0)}function Zm(){var e=Li.current;return Li.current=Ri,e===null?Ri:e}function $u(){(we===0||we===3||we===2)&&(we=4),Se===null||!(en&268435455)&&!(uo&268435455)||ur(Se,Te)}function Bi(e,t){var r=ee;ee|=2;var n=Zm();(Se!==e||Te!==t)&&(Ht=null,Jr(e,t));do try{xx();break}catch(s){Xm(e,s)}while(!0);if(xu(),ee=r,Li.current=n,ye!==null)throw Error(M(261));return Se=null,Te=0,we}function xx(){for(;ye!==null;)eg(ye)}function bx(){for(;ye!==null&&!q0();)eg(ye)}function eg(e){var t=ng(e.alternate,e,nt);e.memoizedProps=e.pendingProps,t===null?tg(e):ye=t,Tu.current=null}function tg(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=hx(r,t),r!==null){r.flags&=32767,ye=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{we=6,ye=null;return}}else if(r=fx(r,t,nt),r!==null){ye=r;return}if(t=t.sibling,t!==null){ye=t;return}ye=t=e}while(t!==null);we===0&&(we=5)}function Fr(e,t,r){var n=re,s=xt.transition;try{xt.transition=null,re=1,wx(e,t,r,n)}finally{xt.transition=s,re=n}return null}function wx(e,t,r,n){do $n();while(hr!==null);if(ee&6)throw Error(M(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(ty(e,a),e===Se&&(ye=Se=null,Te=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ja||(Ja=!0,sg(bi,function(){return $n(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=xt.transition,xt.transition=null;var i=re;re=1;var l=ee;ee|=4,Tu.current=null,mx(e,r),Jm(r,e),Fy(sc),_i=!!nc,sc=nc=null,e.current=r,gx(r),G0(),ee=l,re=i,xt.transition=a}else e.current=r;if(Ja&&(Ja=!1,hr=e,Mi=s),a=e.pendingLanes,a===0&&(xr=null),J0(r.stateNode),tt(e,ve()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if($i)throw $i=!1,e=Sc,Sc=null,e;return Mi&1&&e.tag!==0&&$n(),a=e.pendingLanes,a&1?e===Nc?Rs++:(Rs=0,Nc=e):Rs=0,Tr(),null}function $n(){if(hr!==null){var e=Rp(Mi),t=xt.transition,r=re;try{if(xt.transition=null,re=16>e?16:e,hr===null)var n=!1;else{if(e=hr,hr=null,Mi=0,ee&6)throw Error(M(331));var s=ee;for(ee|=4,W=e.current;W!==null;){var a=W,i=a.child;if(W.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(W=u;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:Os(8,d,a)}var f=d.child;if(f!==null)f.return=d,W=f;else for(;W!==null;){d=W;var h=d.sibling,p=d.return;if(Gm(d),d===u){W=null;break}if(h!==null){h.return=p,W=h;break}W=p}}}var g=a.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}W=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,W=i;else e:for(;W!==null;){if(a=W,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Os(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,W=y;break e}W=a.return}}var m=e.current;for(W=m;W!==null;){i=W;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,W=v;else e:for(i=m;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:co(9,l)}}catch(S){me(l,l.return,S)}if(l===i){W=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,W=b;break e}W=l.return}}if(ee=s,Tr(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(to,e)}catch{}n=!0}return n}finally{re=r,xt.transition=t}}return!1}function Lf(e,t,r){t=Wn(r,t),t=Rm(e,t,1),e=yr(e,t,1),t=He(),e!==null&&(pa(e,1,t),tt(e,t))}function me(e,t,r){if(e.tag===3)Lf(e,e,r);else for(;t!==null;){if(t.tag===3){Lf(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xr===null||!xr.has(n))){e=Wn(r,e),e=Lm(t,e,1),t=yr(t,e,1),e=He(),t!==null&&(pa(t,1,e),tt(t,e));break}}t=t.return}}function _x(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=He(),e.pingedLanes|=e.suspendedLanes&r,Se===e&&(Te&r)===r&&(we===4||we===3&&(Te&130023424)===Te&&500>ve()-Au?Jr(e,0):Ou|=r),tt(e,t)}function rg(e,t){t===0&&(e.mode&1?(t=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):t=1);var r=He();e=Zt(e,t),e!==null&&(pa(e,t,r),tt(e,r))}function jx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),rg(e,r)}function Sx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(M(314))}n!==null&&n.delete(t),rg(e,r)}var ng;ng=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ze.current)Xe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xe=!1,dx(e,t,r);Xe=!!(e.flags&131072)}else Xe=!1,ue&&t.flags&1048576&&om(t,Di,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;fi(e,t),e=t.pendingProps;var s=Bn(t,Fe.current);Ln(t,r),s=Cu(null,t,n,e,s,r);var a=Eu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,et(n)?(a=!0,Ci(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_u(t),s.updater=lo,t.stateNode=s,s._reactInternals=t,hc(t,n,e,r),t=gc(null,t,n,!0,a,r)):(t.tag=0,ue&&a&&mu(t),We(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(fi(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=kx(n),e=Ct(n,e),s){case 0:t=mc(null,t,n,e,r);break e;case 1:t=kf(null,t,n,e,r);break e;case 11:t=Sf(null,t,n,e,r);break e;case 14:t=Nf(null,t,n,Ct(n.type,e),r);break e}throw Error(M(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ct(n,s),mc(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ct(n,s),kf(e,t,n,s,r);case 3:e:{if(Um(t),e===null)throw Error(M(387));n=t.pendingProps,a=t.memoizedState,s=a.element,hm(e,t),Ti(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Wn(Error(M(423)),t),t=Cf(e,t,n,r,s);break e}else if(n!==s){s=Wn(Error(M(424)),t),t=Cf(e,t,n,r,s);break e}else for(st=vr(t.stateNode.containerInfo.firstChild),it=t,ue=!0,It=null,r=dm(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Un(),n===s){t=er(e,t,r);break e}We(e,t,n,r)}t=t.child}return t;case 5:return pm(t),e===null&&uc(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,ac(n,s)?i=null:a!==null&&ac(n,a)&&(t.flags|=32),Bm(e,t),We(e,t,i,r),t.child;case 6:return e===null&&uc(t),null;case 13:return Fm(e,t,r);case 4:return ju(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fn(t,null,n,r):We(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ct(n,s),Sf(e,t,n,s,r);case 7:return We(e,t,t.pendingProps,r),t.child;case 8:return We(e,t,t.pendingProps.children,r),t.child;case 12:return We(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,oe(Ii,n._currentValue),n._currentValue=i,a!==null)if(At(a.value,i)){if(a.children===s.children&&!Ze.current){t=er(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Qt(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),dc(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(M(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),dc(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}We(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ln(t,r),s=_t(s),n=n(s),t.flags|=1,We(e,t,n,r),t.child;case 14:return n=t.type,s=Ct(n,t.pendingProps),s=Ct(n.type,s),Nf(e,t,n,s,r);case 15:return $m(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ct(n,s),fi(e,t),t.tag=1,et(n)?(e=!0,Ci(t)):e=!1,Ln(t,r),Am(t,n,s),hc(t,n,s,r),gc(null,t,n,!0,e,r);case 19:return zm(e,t,r);case 22:return Mm(e,t,r)}throw Error(M(156,t.tag))};function sg(e,t){return Pp(e,t)}function Nx(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(e,t,r,n){return new Nx(e,t,r,n)}function Mu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kx(e){if(typeof e=="function")return Mu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nu)return 11;if(e===su)return 14}return 2}function wr(e,t){var r=e.alternate;return r===null?(r=vt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function mi(e,t,r,n,s,a){var i=2;if(n=e,typeof e=="function")Mu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case wn:return Qr(r.children,s,a,t);case ru:i=8,s|=8;break;case $l:return e=vt(12,r,t,s|2),e.elementType=$l,e.lanes=a,e;case Ml:return e=vt(13,r,t,s),e.elementType=Ml,e.lanes=a,e;case Bl:return e=vt(19,r,t,s),e.elementType=Bl,e.lanes=a,e;case pp:return fo(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fp:i=10;break e;case hp:i=9;break e;case nu:i=11;break e;case su:i=14;break e;case or:i=16,n=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=vt(i,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function Qr(e,t,r,n){return e=vt(7,e,n,t),e.lanes=r,e}function fo(e,t,r,n){return e=vt(22,e,n,t),e.elementType=pp,e.lanes=r,e.stateNode={isHidden:!1},e}function pl(e,t,r){return e=vt(6,e,null,t),e.lanes=r,e}function ml(e,t,r){return t=vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cx(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jo(0),this.expirationTimes=Jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bu(e,t,r,n,s,a,i,l,c){return e=new Cx(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=vt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_u(a),e}function Ex(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function ag(e){if(!e)return kr;e=e._reactInternals;e:{if(sn(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var r=e.type;if(et(r))return am(e,r,t)}return t}function ig(e,t,r,n,s,a,i,l,c){return e=Bu(r,n,!0,e,s,a,i,l,c),e.context=ag(null),r=e.current,n=He(),s=br(r),a=Qt(n,s),a.callback=t??null,yr(r,a,s),e.current.lanes=s,pa(e,s,n),tt(e,n),e}function ho(e,t,r,n){var s=t.current,a=He(),i=br(s);return r=ag(r),t.context===null?t.context=r:t.pendingContext=r,t=Qt(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=yr(s,t,i),e!==null&&(Ot(e,s,i,a),ci(e,s,i)),i}function Ui(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $f(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Uu(e,t){$f(e,t),(e=e.alternate)&&$f(e,t)}function Dx(){return null}var og=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fu(e){this._internalRoot=e}po.prototype.render=Fu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));ho(e,t,null,null)};po.prototype.unmount=Fu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tn(function(){ho(null,e,null,null)}),t[Xt]=null}};function po(e){this._internalRoot=e}po.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cr.length&&t!==0&&t<cr[r].priority;r++);cr.splice(r,0,e),r===0&&Up(e)}};function zu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mf(){}function Ix(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Ui(i);a.call(u)}}var i=ig(t,n,e,0,null,!1,!1,"",Mf);return e._reactRootContainer=i,e[Xt]=i.current,Qs(e.nodeType===8?e.parentNode:e),tn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Ui(c);l.call(u)}}var c=Bu(e,0,!1,null,null,!1,!1,"",Mf);return e._reactRootContainer=c,e[Xt]=c.current,Qs(e.nodeType===8?e.parentNode:e),tn(function(){ho(t,c,r,n)}),c}function go(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=Ui(i);l.call(c)}}ho(t,i,e,s)}else i=Ix(r,t,e,s,n);return Ui(i)}Lp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ss(t.pendingLanes);r!==0&&(ou(t,r|1),tt(t,ve()),!(ee&6)&&(Hn=ve()+500,Tr()))}break;case 13:tn(function(){var n=Zt(e,1);if(n!==null){var s=He();Ot(n,e,1,s)}}),Uu(e,1)}};lu=function(e){if(e.tag===13){var t=Zt(e,134217728);if(t!==null){var r=He();Ot(t,e,134217728,r)}Uu(e,134217728)}};$p=function(e){if(e.tag===13){var t=br(e),r=Zt(e,t);if(r!==null){var n=He();Ot(r,e,t,n)}Uu(e,t)}};Mp=function(){return re};Bp=function(e,t){var r=re;try{return re=e,t()}finally{re=r}};Jl=function(e,t,r){switch(t){case"input":if(zl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ao(n);if(!s)throw Error(M(90));gp(n),zl(n,s)}}}break;case"textarea":yp(e,r);break;case"select":t=r.value,t!=null&&Tn(e,!!r.multiple,t,!1)}};Np=Ru;kp=tn;var Px={usingClientEntryPoint:!1,Events:[ga,Nn,ao,jp,Sp,Ru]},gs={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tx={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dp(e),e===null?null:e.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||Dx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{to=Qa.inject(Tx),Ut=Qa}catch{}}ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Px;ut.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zu(t))throw Error(M(200));return Ex(e,t,null,r)};ut.createRoot=function(e,t){if(!zu(e))throw Error(M(299));var r=!1,n="",s=og;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Bu(e,1,!1,null,null,r,!1,n,s),e[Xt]=t.current,Qs(e.nodeType===8?e.parentNode:e),new Fu(t)};ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=Dp(t),e=e===null?null:e.stateNode,e};ut.flushSync=function(e){return tn(e)};ut.hydrate=function(e,t,r){if(!mo(t))throw Error(M(200));return go(null,e,t,!0,r)};ut.hydrateRoot=function(e,t,r){if(!zu(e))throw Error(M(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",i=og;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=ig(t,null,e,1,r??null,s,!1,a,i),e[Xt]=t.current,Qs(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new po(t)};ut.render=function(e,t,r){if(!mo(t))throw Error(M(200));return go(null,e,t,!1,r)};ut.unmountComponentAtNode=function(e){if(!mo(e))throw Error(M(40));return e._reactRootContainer?(tn(function(){go(null,null,e,!1,function(){e._reactRootContainer=null,e[Xt]=null})}),!0):!1};ut.unstable_batchedUpdates=Ru;ut.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!mo(r))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return go(e,t,r,!1,n)};ut.version="18.3.1-next-f1338f8080-20240426";function lg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lg)}catch(e){console.error(e)}}lg(),lp.exports=ut;var Wu=lp.exports;const Ox=Kc(Wu);var cg,Bf=Wu;cg=Bf.createRoot,Bf.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ax={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(e,t)=>{const r=j.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:l="",children:c,...u},d)=>j.createElement("svg",{ref:d,...Ax,width:s,height:s,stroke:n,strokeWidth:i?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Rx(e)}`,l].join(" "),...u},[...t.map(([f,h])=>j.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Q("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=Q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=Q("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=Q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Q("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=Q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=Q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=Q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Q("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=Q("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=Q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Q("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=Q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=Q("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Q("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=Q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Q("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=Q("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=Q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=Q("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=Q("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=Q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=Q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=Q("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Yx=async e=>{try{const t="a18021ea544a00d65b5befab61e61a34",n=await fetch("https://api.line.me/oauth2/v2.1/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:"http://localhost:5173/auth/callback",client_id:"2007845041",client_secret:t})});if(!n.ok){const s=await n.json().catch(()=>({}));throw console.error("LINE API :",s),new Error("")}return n.json()}catch(t){throw console.error(":",t),t instanceof TypeError&&t.message.includes("fetch")?new Error(""):t}},Xx=e=>{try{const t=JSON.parse(atob(e.split(".")[1])),r=Math.floor(Date.now()/1e3);if(t.exp&&t.exp<r)throw new Error("ID");if(t.iss!=="https://access.line.me")throw new Error("IDissuer");if(t.aud!=="2007845041")throw new Error("IDaudience");return{userId:t.sub,displayName:t.name||"LINE ",pictureUrl:t.picture,email:t.email}}catch(t){throw console.error("ID:",t),new Error("ID")}},Zx=async e=>{const r=await fetch("https://api.line.me/v2/profile",{headers:{Authorization:`Bearer ${e}`}});if(!r.ok){const s=await r.json().catch(()=>({}));throw console.error(":",s),new Error("")}const n=await r.json();return{userId:n.userId,displayName:n.displayName,pictureUrl:n.pictureUrl,email:void 0}},zf=e=>{const t=localStorage.getItem("line_auth_timestamp");if(!t)return!0;const r=parseInt(t),n=Date.now(),s=24*60*60*1e3;return n-r>s},pg=()=>{localStorage.setItem("line_auth_timestamp",Date.now().toString())},vs="line_auth_user",eb={user:null,isAuthenticated:!1,isLoading:!0,error:null};function tb(e,t){switch(t.type){case"LOGIN_START":return{...e,isLoading:!0,error:null};case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_ERROR":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:t.payload};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"CLEAR_ERROR":return{...e,error:null};case"SET_LOADING":return{...e,isLoading:t.payload};default:return e}}const gl={channelId:"2007845041",redirectUri:"http://localhost:5173/auth/callback",scope:"profile openid email"},mg=j.createContext(void 0),on=()=>{const e=j.useContext(mg);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},rb=({children:e})=>{const[t,r]=j.useReducer(tb,eb);j.useEffect(()=>{(async()=>{try{const d=localStorage.getItem(vs);if(d){const f=JSON.parse(d);zf(f)?(console.log(""),localStorage.removeItem(vs),localStorage.removeItem("line_auth_timestamp"),r({type:"SET_LOADING",payload:!1})):(pg(),r({type:"LOGIN_SUCCESS",payload:f}))}else r({type:"SET_LOADING",payload:!1})}catch(d){console.error(":",d),localStorage.removeItem(vs),localStorage.removeItem("line_auth_timestamp"),r({type:"SET_LOADING",payload:!1})}})();const u=setInterval(()=>{const d=localStorage.getItem(vs);d&&(JSON.parse(d),zf()&&(console.log(""),a()))},60*60*1e3);return()=>clearInterval(u)},[]);const n=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),s=()=>{r({type:"LOGIN_START"});const c=n();localStorage.setItem("line_login_state",c);const d=`https://access.line.me/oauth2/v2.1/authorize?${new URLSearchParams({response_type:"code",client_id:gl.channelId,redirect_uri:gl.redirectUri,state:c,scope:gl.scope}).toString()}`;try{window.location.href=d}catch(f){console.error(":",f),r({type:"LOGIN_ERROR",payload:""})}},a=()=>{localStorage.removeItem(vs),localStorage.removeItem("line_login_state"),localStorage.removeItem("line_auth_timestamp"),r({type:"LOGOUT"})},l={...t,login:s,logout:a,clearError:()=>{r({type:"CLEAR_ERROR"})}};return o.jsx(mg.Provider,{value:l,children:e})},nb="modulepreload",sb=function(e){return"/"+e},Wf={},ya=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=sb(c),c in Wf)return;Wf[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":nb,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},ab=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ya(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Qu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class ib extends Qu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Hf extends Qu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class qf extends Qu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ic;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ic||(Ic={}));var ob=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class lb{constructor(t,{headers:r={},customFetch:n,region:s=Ic.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=ab(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return ob(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:i}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(x=>{throw new ib(x)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new Hf(f);if(!f.ok)throw new qf(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield f.json():p==="application/octet-stream"?g=yield f.blob():p==="text/event-stream"?g=f:p==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof qf||s instanceof Hf?s.context:void 0}}})}}var Ye={},Yu={},vo={},xa={},yo={},xo={},cb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qn=cb();const ub=qn.fetch,gg=qn.fetch.bind(qn),vg=qn.Headers,db=qn.Request,fb=qn.Response,Zn=Object.freeze(Object.defineProperty({__proto__:null,Headers:vg,Request:db,Response:fb,default:gg,fetch:ub},Symbol.toStringTag,{value:"Module"})),hb=o0(Zn);var bo={};Object.defineProperty(bo,"__esModule",{value:!0});let pb=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};bo.default=pb;var yg=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xo,"__esModule",{value:!0});const mb=yg(hb),gb=yg(bo);let vb=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=mb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c;let u=null,d=null,f=null,h=a.status,p=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const x=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),w=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&w&&w.length>1&&(f=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await a.text();try{u=JSON.parse(x),Array.isArray(u)&&a.status===404&&(d=[],u=null,h=200,p="OK")}catch{a.status===404&&x===""?(h=204,p="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new gb.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};xo.default=vb;var yb=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yo,"__esModule",{value:!0});const xb=yb(xo);let bb=class extends xb.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};yo.default=bb;var wb=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xa,"__esModule",{value:!0});const _b=wb(yo);let jb=class extends _b.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};xa.default=jb;var Sb=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vo,"__esModule",{value:!0});const ys=Sb(xa);let Nb=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new ys.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ys.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const i="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ys.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new ys.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ys.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vo.default=Nb;var wo={},_o={};Object.defineProperty(_o,"__esModule",{value:!0});_o.version=void 0;_o.version="0.0.0-automated";Object.defineProperty(wo,"__esModule",{value:!0});wo.DEFAULT_HEADERS=void 0;const kb=_o;wo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${kb.version}`};var xg=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yu,"__esModule",{value:!0});const Cb=xg(vo),Eb=xg(xa),Db=wo;let Ib=class bg{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Db.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new Cb.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new bg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(i="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new Eb.default({method:i,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Yu.default=Ib;var es=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.PostgrestError=Ye.PostgrestBuilder=Ye.PostgrestTransformBuilder=Ye.PostgrestFilterBuilder=Ye.PostgrestQueryBuilder=Ye.PostgrestClient=void 0;const wg=es(Yu);Ye.PostgrestClient=wg.default;const _g=es(vo);Ye.PostgrestQueryBuilder=_g.default;const jg=es(xa);Ye.PostgrestFilterBuilder=jg.default;const Sg=es(yo);Ye.PostgrestTransformBuilder=Sg.default;const Ng=es(xo);Ye.PostgrestBuilder=Ng.default;const kg=es(bo);Ye.PostgrestError=kg.default;var Pb=Ye.default={PostgrestClient:wg.default,PostgrestQueryBuilder:_g.default,PostgrestFilterBuilder:jg.default,PostgrestTransformBuilder:Sg.default,PostgrestBuilder:Ng.default,PostgrestError:kg.default};const{PostgrestClient:Tb,PostgrestQueryBuilder:Ok,PostgrestFilterBuilder:Ak,PostgrestTransformBuilder:Rk,PostgrestBuilder:Lk,PostgrestError:$k}=Pb;function Ob(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Ab=Ob(),Rb="2.11.15",Lb=`realtime-js/${Rb}`,$b="1.0.0",Cg=1e4,Mb=1e3;var $s;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($s||($s={}));var Be;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Be||(Be={}));var Dt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Dt||(Dt={}));var Pc;(function(e){e.websocket="websocket"})(Pc||(Pc={}));var Hr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Hr||(Hr={}));class Bb{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+s));i=i+s;const c=n.decode(t.slice(i,i+a));i=i+a;const u=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Eg{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ie;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ie||(ie={}));const Gf=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,i)=>(a[i]=Ub(i,e,t,s),a),{})},Ub=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,i=r[e];return a&&!n.includes(a)?Dg(a,i):Tc(i)},Dg=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Hb(t,r)}switch(e){case ie.bool:return Fb(t);case ie.float4:case ie.float8:case ie.int2:case ie.int4:case ie.int8:case ie.numeric:case ie.oid:return zb(t);case ie.json:case ie.jsonb:return Wb(t);case ie.timestamp:return qb(t);case ie.abstime:case ie.date:case ie.daterange:case ie.int4range:case ie.int8range:case ie.money:case ie.reltime:case ie.text:case ie.time:case ie.timestamptz:case ie.timetz:case ie.tsrange:case ie.tstzrange:return Tc(t);default:return Tc(t)}},Tc=e=>e,Fb=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},zb=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Wb=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Hb=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const i=e.slice(1,r);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>Dg(t,l))}return e},qb=e=>typeof e=="string"?e.replace(" ","T"):e,Ig=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class vl{constructor(t,r,n={},s=Cg){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Vf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Vf||(Vf={}));class Ms{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ms.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=Ms.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ms.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const f=a[u];if(f){const h=d.map(w=>w.presence_ref),p=f.map(w=>w.presence_ref),g=d.filter(w=>p.indexOf(w.presence_ref)<0),x=f.filter(w=>h.indexOf(w.presence_ref)<0);g.length>0&&(l[u]=g),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(i,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Kf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Kf||(Kf={}));var Jf;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Jf||(Jf={}));var qt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qt||(qt={}));class Xu{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new vl(this,Dt.join,this.params,this.timeout),this.rejoinTimer=new Eg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Ms(this),this.broadcastEndpointURL=Ig(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:a,presence:i,private:l}}=this.params;this._onError(d=>t==null?void 0:t(qt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(qt.CLOSED));const c={},u={broadcast:a,presence:i,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(qt.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,g=[];for(let x=0;x<p;x++){const w=h[x],{filter:{event:y,schema:m,table:v,filter:b}}=w,S=d&&d[x];if(S&&S.event===y&&S.schema===m&&S.table===v&&S.filter===b)g.push(Object.assign(Object.assign({},w),{id:S.id}));else{this.unsubscribe(),this.state=Be.errored,t==null||t(qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(qt.SUBSCRIBED);return}}).receive("error",d=>{this.state=Be.errored,t==null||t(qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Be.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new vl(this,Dt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new vl(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Dt;if(n&&[l,c,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let h=this._onMessage(i,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,x,w;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((w=(x=p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(p=>p.callback(h,n)):(a=this.bindings[i])===null||a===void 0||a.filter(p=>{var g,x,w,y,m,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const b=p.id,S=(g=p.filter)===null||g===void 0?void 0:g.event;return b&&((x=r.ids)===null||x===void 0?void 0:x.includes(b))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return b==="*"||b===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:x,table:w,commit_timestamp:y,type:m,errors:v}=g;h=Object.assign(Object.assign({},{schema:x,table:w,commit_timestamp:y,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Xu.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Dt.close,{},t)}_onError(t){this._on(Dt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Gf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Gf(t.columns,t.old_record)),r}}const Qf=()=>{},Gb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vb{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cg,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qf,this.ref=0,this.logger=Qf,this.conn=null,this.sendBuffer=[],this.serializer=new Bb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>ya(async()=>{const{default:c}=await Promise.resolve().then(()=>Zn);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${Pc.websocket}`,this.httpEndpoint=Ig(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,i)=>i(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Eg(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Ab),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$b}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case $s.connecting:return Hr.Connecting;case $s.open:return Hr.Open;case $s.closing:return Hr.Closing;default:return Hr.Closed}}isConnected(){return this.connectionState()===Hr.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Xu(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Lb};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Dt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Mb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:a,ref:i}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${i&&"("+i+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,a,i)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Dt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Gb],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Zu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function _e(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Kb extends Zu{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Oc extends Zu{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Jb=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Pg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ya(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Qb=()=>Jb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ya(()=>Promise.resolve().then(()=>Zn),void 0)).Response:Response}),Ac=e=>{if(Array.isArray(e))return e.map(r=>Ac(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Ac(n)}),t},Yb=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ln=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const yl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Xb=(e,t,r)=>ln(void 0,void 0,void 0,function*(){const n=yield Qb();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";t(new Kb(yl(s),a,i))}).catch(s=>{t(new Oc(yl(s),s))}):t(new Oc(yl(e),e))}),Zb=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Yb(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function ba(e,t,r,n,s,a){return ln(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,Zb(t,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Xb(c,l,n))})})}function Wi(e,t,r,n){return ln(this,void 0,void 0,function*(){return ba(e,"GET",t,r,n)})}function Gt(e,t,r,n,s){return ln(this,void 0,void 0,function*(){return ba(e,"POST",t,n,s,r)})}function Rc(e,t,r,n,s){return ln(this,void 0,void 0,function*(){return ba(e,"PUT",t,n,s,r)})}function ew(e,t,r,n){return ln(this,void 0,void 0,function*(){return ba(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Tg(e,t,r,n,s){return ln(this,void 0,void 0,function*(){return ba(e,"DELETE",t,n,s,r)})}var Ke=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const tw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rw{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Pg(s)}uploadOrUpdate(t,r,n,s){return Ke(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Yf),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?Rc:Gt)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(_e(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Ke(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Yf.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Rc(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(_e(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ke(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield Gt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new Zu("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ke(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Ke(this,void 0,void 0,function*(){try{return{data:{path:(yield Gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Ke(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield Gt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Ke(this,void 0,void 0,function*(){try{const s=yield Gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}download(t,r){return Ke(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Wi(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(_e(l))return{data:null,error:l};throw l}})}info(t){return Ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Wi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ac(n),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}exists(t){return Ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield ew(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(_e(n)&&n instanceof Oc){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ke(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ke(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},tw),r),{prefix:t||""});return{data:yield Gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const nw="2.10.4",sw={"X-Client-Info":`storage-js/${nw}`};var fn=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class aw{constructor(t,r={},n,s){const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},sw),r),this.fetch=Pg(n)}listBuckets(){return fn(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(_e(t))return{data:null,error:t};throw t}})}getBucket(t){return fn(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return fn(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return fn(this,void 0,void 0,function*(){try{return{data:yield Rc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}emptyBucket(t){return fn(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}deleteBucket(t){return fn(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}}class iw extends aw{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new rw(this.url,this.headers,t,this.fetch)}}const ow="2.53.0";let ks="";typeof Deno<"u"?ks="deno":typeof document<"u"?ks="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ks="react-native":ks="node";const lw={"X-Client-Info":`supabase-js-${ks}/${ow}`},cw={headers:lw},uw={schema:"public"},dw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fw={};var hw=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const pw=e=>{let t;return e?t=e:typeof fetch>"u"?t=gg:t=fetch,(...r)=>t(...r)},mw=()=>typeof Headers>"u"?vg:Headers,gw=(e,t,r)=>{const n=pw(r),s=mw();return(a,i)=>hw(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},i),{headers:u}))})};var vw=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function yw(e){return e.endsWith("/")?e:e+"/"}function xw(e,t){var r,n;const{db:s,auth:a,realtime:i,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>vw(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Og="2.71.1",yn=30*1e3,Lc=3,xl=Lc*yn,bw="http://localhost:9999",ww="supabase.auth.token",_w={"X-Client-Info":`gotrue-js/${Og}`},$c="X-Supabase-Api-Version",Ag={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sw=10*60*1e3;class ed extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function K(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Nw extends ed{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function kw(e){return K(e)&&e.name==="AuthApiError"}class Rg extends ed{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Or extends ed{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class ir extends Or{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Cw(e){return K(e)&&e.name==="AuthSessionMissingError"}class Ya extends Or{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xa extends Or{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Za extends Or{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ew(e){return K(e)&&e.name==="AuthImplicitGrantRedirectError"}class Xf extends Or{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mc extends Or{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function bl(e){return K(e)&&e.name==="AuthRetryableFetchError"}class Zf extends Or{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Bc extends Or{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),eh=` 	
\r=`.split(""),Dw=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<eh.length;t+=1)e[eh[t].charCodeAt(0)]=-2;for(let t=0;t<Hi.length;t+=1)e[Hi[t].charCodeAt(0)]=t;return e})();function th(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Hi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Hi[n]),t.queuedBits-=6}}function Lg(e,t,r){const n=Dw[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function rh(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{Tw(i,n,r)};for(let i=0;i<e.length;i+=1)Lg(e.charCodeAt(i),s,a);return t.join("")}function Iw(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Pw(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Iw(n,t)}}function Tw(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ow(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Lg(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Aw(e){const t=[];return Pw(e,r=>t.push(r)),new Uint8Array(t)}function Rw(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>th(s,r,n)),th(null,r,n),t.join("")}function Lw(e){return Math.round(Date.now()/1e3)+e}function $w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const kt=()=>typeof window<"u"&&typeof document<"u",$r={tested:!1,writable:!1},$g=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($r.tested)return $r.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),$r.tested=!0,$r.writable=!0}catch{$r.tested=!0,$r.writable=!1}return $r.writable};function Mw(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Mg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ya(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Bw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",xn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Mr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ar=async(e,t)=>{await e.removeItem(t)};class jo{constructor(){this.promise=new jo.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}jo.promiseConstructor=Promise;function wl(e){const t=e.split(".");if(t.length!==3)throw new Bc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!jw.test(t[n]))throw new Bc("JWT not in base64url format");return{header:JSON.parse(rh(t[0])),payload:JSON.parse(rh(t[1])),signature:Ow(t[2]),raw:{header:t[0],payload:t[1]}}}async function Uw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Fw(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){n(i);return}}catch(i){if(!t(a,i)){s(i);return}}})()})}function zw(e){return("0"+e.toString(16)).substr(-2)}function Ww(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,zw).join("")}async function Hw(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function qw(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Hw(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hn(e,t,r=!1){const n=Ww();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await xn(e,`${t}-code-verifier`,s);const a=await qw(n);return[a,n===a?"plain":"s256"]}const Gw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vw(e){const t=e.headers.get($c);if(!t||!t.match(Gw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Kw(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Jw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pn(e){if(!Qw.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _l(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nh(e){return JSON.parse(JSON.stringify(e))}var Yw=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const zr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Xw=[502,503,504];async function sh(e){var t;if(!Bw(e))throw new Mc(zr(e),0);if(Xw.includes(e.status))throw new Mc(zr(e),e.status);let r;try{r=await e.json()}catch(a){throw new Rg(zr(a),a)}let n;const s=Vw(e);if(s&&s.getTime()>=Ag["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Zf(zr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ir}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Zf(zr(r),e.status,r.weak_password.reasons);throw new Nw(zr(r),e.status||500,n)}const Zw=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Y(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[$c]||(a[$c]=Ag["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await e1(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function e1(e,t,r,n,s,a){const i=Zw(t,n,s,a);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new Mc(zr(c),0)}if(l.ok||await sh(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await sh(c)}}function Wt(e){var t;let r=null;s1(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Lw(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function ah(e){const t=Wt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function dr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function t1(e){return{data:e,error:null}}function r1(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,i=Yw(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function n1(e){return e}function s1(e){return e.access_token&&e.refresh_token&&e.expires_in}const jl=["global","local","others"];var a1=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class i1{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Mg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=jl[0]){if(jl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jl.join(", ")}`);try{return await Y(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Y(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:dr})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=a1(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Y(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:r1,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(K(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Y(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:dr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Y(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:n1});if(d.error)throw d.error;const f=await d.json(),h=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(K(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){pn(t);try{return await Y(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:dr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){pn(t);try{return await Y(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:dr})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){pn(t);try{return await Y(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:dr})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){pn(t.userId);try{const{data:r,error:n}=await Y(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(K(r))return{data:null,error:r};throw r}}async _deleteFactor(t){pn(t.userId),pn(t.id);try{return{data:await Y(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}}function ih(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function o1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const mn={debug:!!(globalThis&&$g()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class l1 extends Bg{}async function c1(e,t,r){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),mn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new l1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(mn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}o1();const u1={url:bw,storageKey:ww,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_w,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function oh(e,t,r){return await r()}const gn={};class ia{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ia.nextInstanceID,ia.nextInstanceID+=1,this.instanceID>0&&kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},u1),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new i1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Mg(s.fetch),this.lock=s.lock||oh,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:kt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=c1:this.lock=oh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:$g()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ih(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ih(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=gn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=gn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Og}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Mw(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),kt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Ew(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return K(r)?{error:r}:{error:new Rg("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Wt}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await hn(this.storage,this.storageKey)),a=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:Wt})}else if("phone"in t){const{phone:d,password:f,options:h}=t;a=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Wt})}else throw new Xa("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:i,options:l}=t;r=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ah})}else if("phone"in t){const{phone:a,password:i,options:l}=t;r=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ah})}else throw new Xa("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ya}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,a,i,l,c,u,d,f,h,p;let g,x;if("message"in t)g=t.message,x=t.signature;else{const{chain:w,wallet:y,statement:m,options:v}=t;let b;if(kt())if(typeof y=="object")b=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))b=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const N=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),m?{statement:m}:null));let D;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")D=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)D=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)g=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),x=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const N=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:w,error:y}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Rw(x)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Wt});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Ya}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(K(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await Mr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:i}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Wt});if(await ar(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ya}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(K(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:i}=t,l=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Wt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ya}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,i;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await hn(this.storage,this.storageKey));const{error:f}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Xa("You must provide either an email or phone number.")}catch(l){if(K(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await Y(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Wt});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await hn(this.storage,this.storageKey)),await Y(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:t1})}catch(a){if(K(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ir;const{error:s}=await Y(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:i}=await Y(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:i,error:l}=await Y(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Xa("You must provide either an email or phone number and a type")}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<xl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await Mr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=_l()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:dr}):await this._useSession(async r=>{var n,s,a;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ir}:await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:dr})})}catch(r){if(K(r))return Cw(r)&&(await this._removeSession(),await ar(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new ir;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await hn(this.storage,this.storageKey));const{data:u,error:d}=await Y(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:dr});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ir;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:i}=wl(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(K(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ir;const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!kt())throw new Za("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Za(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Xf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Za("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Xf("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!i||!u)throw new Za("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=yn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:x,error:w}=await this._getUser(a);if(w)throw w;const y={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:h,refresh_token:i,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(K(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Mr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(kw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ar(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=$w(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await hn(this.storage,this.storageKey,!0));try{return await Y(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(K(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var i,l,c,u,d;const{data:f,error:h}=a;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Y(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return kt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(K(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)throw i;return await Y(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Fw(async s=>(s>0&&await Uw(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Y(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Wt})),(s,a)=>{const i=200*Math.pow(2,s);return a&&bl(a)&&Date.now()+i-n<yn})}catch(n){if(this._debug(r,"error",n),K(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),kt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Mr(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Mr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await xn(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:_l()}else if(s&&!s.user&&!s.user){const i=await Mr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await ar(this.storage,this.storageKey+"-user"),await xn(this.storage,this.storageKey,s)):s.user=_l()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xl;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${xl}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),bl(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ir;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new jo;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new ir;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),K(a)){const i={session:null,error:a};return bl(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await xn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=nh(s);await xn(this.storage,this.storageKey,a)}else{const s=nh(r);await xn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ar(this.storage,this.storageKey),await ar(this.storage,this.storageKey+"-code-verifier"),await ar(this.storage,this.storageKey+"-user"),this.userStorage&&await ar(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/yn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${yn}ms, refresh threshold is ${Lc} ticks`),s<=Lc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await hn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Y(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Y(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:i,error:l}=await Y(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(K(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Y(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(K(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=wl(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Sw>s)return n;const{data:a,error:i}=await Y(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=wl(n);r!=null&&r.allowExpired||Kw(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:s,signature:i},error:null}}const d=Jw(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,Aw(`${l}.${c}`)))throw new Bc("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}}ia.nextInstanceID=0;const d1=ia;class f1 extends d1{constructor(t){super(t)}}var h1=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class p1{constructor(t,r,n){var s,a,i;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=yw(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:uw,realtime:fw,auth:Object.assign(Object.assign({},dw),{storageKey:u}),global:cw},f=xw(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=gw(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Tb(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new iw(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new lb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return h1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:i,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f1({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Vb(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const m1=(e,t,r)=>new p1(e,t,r);function g1(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}g1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const v1="https://gbfqtdcgoiuwuhvmamdo.supabase.co",y1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdiZnF0ZGNnb2l1d3Vodm1hbWRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NjE1MjAsImV4cCI6MjA2OTQzNzUyMH0.P88rqeA3iq5DC_DLfA5c7r79E6VwZvAxYhwPfzF0Ja8",z=m1(v1,y1);class Me{static async setUserContext(t){return console.log(" User context (RLS):",t),!0}static async createOrUpdateShift(t,r){if(console.log(" /:",{lineUser:t.userId,shiftData:r}),await this.setUserContext(t.userId),!r.shiftType)return console.log(" "),await this.deleteShift(t,r.date),null;const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(s||!n)throw console.error(" :",s),new Error(`: ${s==null?void 0:s.message}`);console.log(" ID:",n.id);const{data:a,error:i}=await z.from("shifts").select("*").eq("user_id",n.id).eq("shift_date",r.date).maybeSingle();if(i)throw console.error(" :",i),new Error(`: ${i.message}`);const l={user_id:n.id,shift_date:r.date,shift_type:r.shiftType,shift_status:r.shiftStatus||"adjusting",start_time:r.startTime||null,end_time:r.endTime||null,note:r.note||null,updated_at:new Date().toISOString()};console.log(" upsert");const{data:c,error:u}=await z.from("shifts").upsert(l,{onConflict:"user_id,shift_date"}).select("*").single();if(u)throw console.error(" upsert:",u),new Error(`: ${u.message}`);return console.log(" upsert:",c),c}static async getMonthlyShifts(t,r,n){console.log(" :",{user:t.userId,year:r,month:n}),await this.setUserContext(t.userId);const s=`${r}-${n.toString().padStart(2,"0")}-01`,a=new Date(r,n,0).toISOString().split("T")[0],{data:i,error:l}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(l||!i)return console.error(" :",l),[];const{data:c,error:u}=await z.from("shifts").select("*").eq("user_id",i.id).gte("shift_date",s).lte("shift_date",a).order("shift_date",{ascending:!0});return u?(console.error(" :",u),[]):(console.log(" :",c==null?void 0:c.length,""),c||[])}static async deleteShift(t,r){console.log(" :",{user:t.userId,date:r}),await this.setUserContext(t.userId);const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(s||!n)throw new Error(`: ${s==null?void 0:s.message}`);const{error:a}=await z.from("shifts").delete().eq("user_id",n.id).eq("shift_date",r);if(a)throw console.error(" :",a),new Error(`: ${a.message}`);console.log(" ")}static getShiftTypeLabel(t){return{early:"()",late:"()",normal:"",off:""}[t]||t}static getShiftTypeColor(t){return{early:"#059669",late:"#dc2626",normal:"#CB8585",off:"#6b7280"}[t]||"#6b7280"}static formatTime(t){return t?t.substring(0,5):""}static getShiftStatusLabel(t){return{adjusting:"",confirmed:""}[t]||t}static isShiftEditable(t){return t.shift_status==="adjusting"}static canConfirmShift(t){return t.shift_status==="adjusting"}}const x1=({availableDates:e=[]})=>{const{user:t}=on(),[r,n]=j.useState(new Date),[s,a]=j.useState([]),[i,l]=j.useState([]),[c,u]=j.useState(!1),[d,f]=j.useState(null),[h,p]=j.useState(null),g=r.getFullYear(),x=r.getMonth(),w=new Date(g,x,1),y=new Date(g,x+1,0);w.getDay(),y.getDate();const m=async()=>{if(t){u(!0);try{const C=await Me.getMonthlyShifts(t,g,x+1);a(C);const I=x+1,B=I>11?g+1:g,T=I>11?0:I,L=await Me.getMonthlyShifts(t,B,T+1);l(L),console.log(" :",{current:C.length,next:L.length})}catch(C){console.error(" :",C)}finally{u(!1)}}};j.useEffect(()=>{m()},[t,r]);const v=(C,I)=>C.find(B=>B.shift_date===I),b=()=>{n(new Date(g,x-1,1))},S=()=>{n(new Date(g,x+1,1))},N=(C,I,B,T=!1)=>{const L=new Date(C,I,1),U=new Date(C,I+1,0),V=L.getDay(),J=U.getDate(),ge=[];for(let te=0;te<V;te++)ge.push(o.jsx("div",{className:"aspect-square flex items-center justify-center text-gray-300",children:"-"},`empty-${te}`));for(let te=1;te<=J;te++){const Ee=`${C}-${(I+1).toString().padStart(2,"0")}-${te.toString().padStart(2,"0")}`,xe=v(B,Ee);ge.push(o.jsxs("div",{className:"aspect-square flex items-center justify-center text-sm font-medium relative cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>D(Ee,xe),children:[xe?o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-medium text-sm",style:{backgroundColor:Me.getShiftTypeColor(xe.shift_type)},children:te}):o.jsx("span",{className:"text-gray-800 hover:text-gray-600",children:te}),!xe&&o.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-gray-300 rounded-full flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:o.jsx(Ku,{className:"w-2 h-2 text-white"})})]},te))}return ge},D=(C,I)=>{if(!t)return;const B=new Date(C),T=r.getMonth(),L=r.getFullYear();(B.getMonth()!==T||B.getFullYear()!==L)&&n(new Date(B.getFullYear(),B.getMonth(),1)),f(C),p(I?{date:C,shiftType:I.shift_type,shiftStatus:I.shift_status,startTime:I.start_time?Me.formatTime(I.start_time):"",endTime:I.end_time?Me.formatTime(I.end_time):"",note:I.note||""}:{date:C,shiftType:"",shiftStatus:"adjusting",startTime:"09:00",endTime:"17:00",note:""})},O=async()=>{if(!(!t||!h))try{await Me.createOrUpdateShift(t,h),p(null),f(null),await m(),console.log(" ")}catch(C){console.error(" :",C),alert(": "+(C instanceof Error?C.message:""))}},P=async()=>{if(!(!t||!d))try{await Me.deleteShift(t,d),p(null),f(null),await m(),console.log(" ")}catch(C){console.error(" :",C),alert(": "+(C instanceof Error?C.message:""))}},_=["1","2","3","4","5","6","7","8","9","10","11","12"],A=["","","","","","",""],E=x+1,R=E>11?g+1:g,k=E>11?0:E;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 aspect-square",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:b,className:"p-1 hover:bg-gray-100 rounded transition-colors",style:{color:"#CB8585"},children:o.jsx(qu,{className:"w-5 h-5"})}),o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[g," ",_[x]]}),o.jsx("button",{onClick:S,className:"p-1 hover:bg-gray-100 rounded transition-colors",style:{color:"#CB8585"},children:o.jsx(Gu,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:A.map((C,I)=>o.jsx("div",{className:`aspect-square flex items-center justify-center text-sm font-medium ${I===5?"text-blue-600":I===6?"text-red-600":"text-gray-600"}`,children:C},C))}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4 flex-1",children:N(g,x,s,!0)}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("early")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("late")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("normal")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("off")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]})]}),o.jsx("span",{className:"text-gray-500",children:c?"...":`${s.length}`})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 aspect-square",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"w-6 h-6"})," ",o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[R," ",_[k]]}),o.jsx("div",{className:"w-6 h-6"})," "]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:A.map((C,I)=>o.jsx("div",{className:`aspect-square flex items-center justify-center text-sm font-medium ${I===5?"text-blue-600":I===6?"text-red-600":"text-gray-600"}`,children:C},C))}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4 flex-1",children:N(R,k,i,!0)}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("early")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("late")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("normal")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("off")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]})]}),o.jsxs("span",{className:"text-gray-500",children:["",i.length,""]})]})]}),h&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[" - ",new Date(h.date).toLocaleDateString("ja-JP")]}),o.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${h.shiftStatus==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Me.getShiftStatusLabel(h.shiftStatus||"adjusting")})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:h.shiftType,onChange:C=>p({...h,shiftType:C.target.value}),disabled:h.shiftStatus==="confirmed",className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.shiftStatus==="confirmed"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`,children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"early",children:"()"}),o.jsx("option",{value:"late",children:"()"}),o.jsx("option",{value:"normal",children:""}),o.jsx("option",{value:"off",children:""})]})]}),h.shiftType&&h.shiftType!=="off"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"time",value:h.startTime||"",onChange:C=>p({...h,startTime:C.target.value}),disabled:h.shiftStatus==="confirmed",className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.shiftStatus==="confirmed"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),h.shiftType&&h.shiftType!=="off"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"time",value:h.endTime||"",onChange:C=>p({...h,endTime:C.target.value}),disabled:h.shiftStatus==="confirmed",className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.shiftStatus==="confirmed"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("textarea",{value:h.note||"",onChange:C=>p({...h,note:C.target.value}),disabled:h.shiftStatus==="confirmed",rows:3,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.shiftStatus==="confirmed"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`,placeholder:""})]})]}),o.jsxs("div",{className:"flex justify-between items-center mt-6",children:[o.jsx("div",{children:d&&(v(s,d)||v(i,d))&&(h.shiftStatus==="adjusting"||!h.shiftStatus)&&o.jsx("button",{onClick:P,className:"px-4 py-2 text-red-600 hover:text-red-800 transition-colors",children:""})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>{p(null),f(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:h.shiftStatus==="confirmed"?"":""}),(h.shiftStatus==="adjusting"||!h.shiftStatus)&&o.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:""})]})]})]})})]})},Ug=j.createContext(void 0),b1=({children:e})=>{const[t,r]=j.useState(new Set),[n,s]=j.useState(new Set),u={notifyTimeRecordUpdate:()=>{console.log(" :",t.size,""),t.forEach(d=>{try{d()}catch(f){console.error(":",f)}})},onTimeRecordUpdate:d=>(r(f=>new Set(f).add(d)),()=>{r(f=>{const h=new Set(f);return h.delete(d),h})}),notifyAttendanceUpdate:()=>{console.log(" :",n.size,""),n.forEach(d=>{try{d()}catch(f){console.error(":",f)}})},onAttendanceUpdate:d=>(s(f=>new Set(f).add(d)),()=>{s(f=>{const h=new Set(f);return h.delete(d),h})})};return o.jsx(Ug.Provider,{value:u,children:e})},Fg=()=>{const e=j.useContext(Ug);if(e===void 0)throw new Error("useRealtime must be used within a RealtimeProvider");return e};class Bs{static async createTimeRecord(t,r){var c,u,d;console.log(" :",{lineUser:t.userId,recordData:r});const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(s||!n)throw console.error(" :",s),new Error(`: ${s==null?void 0:s.message}`);console.log(" ID:",n.id);const a={user_id:n.id,record_type:r.recordType,recorded_at:new Date().toISOString(),location_id:r.locationId||null,location_lat:(c=r.location)==null?void 0:c.latitude,location_lng:(u=r.location)==null?void 0:u.longitude,location_name:(d=r.location)==null?void 0:d.locationName,note:r.note};console.log(" :",a);const{data:i,error:l}=await z.from("time_records").insert(a).select("*").single();if(l)throw console.error(" :",l),new Error(`: ${l.message}`);return console.log(" :",i),i}static async getUserTimeRecords(t,r=20){console.log(" :",t.userId);const{data:n,error:s}=await z.from("time_records").select(`
        *,
        users!inner(line_user_id)
      `).eq("users.line_user_id",t.userId).order("recorded_at",{ascending:!1}).limit(r);if(s)throw console.error(" :",s),new Error(`: ${s.message}`);return console.log(" :",n==null?void 0:n.length,""),n||[]}static async getTodayTimeRecords(t){console.log(" :",t.userId);const r=new Date,n=new Date(r.getFullYear(),r.getMonth(),r.getDate()),s=new Date(n);s.setDate(s.getDate()+1);const{data:a,error:i}=await z.from("time_records").select(`
        *,
        users!inner(line_user_id)
      `).eq("users.line_user_id",t.userId).gte("recorded_at",n.toISOString()).lt("recorded_at",s.toISOString()).order("recorded_at",{ascending:!0});if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a==null?void 0:a.length,""),a||[]}static getRecordTypeLabel(t){return{clock_in:"",clock_out:"",break_start:"",break_end:""}[t]||t}static getNextRecordType(t){if(t.length===0)return"clock_in";switch(t[t.length-1].record_type){case"clock_in":return"break_start";case"break_start":return"break_end";case"break_end":return"break_start";case"clock_out":return"clock_in";default:return"clock_in"}}static canClockOut(t){if(t.length===0)return!1;const r=t[t.length-1];return r.record_type==="clock_in"||r.record_type==="break_end"}static async getMonthlyTimeRecords(t,r,n){console.log(" :",{user:t.userId,year:r,month:n});const s=`${r}-${n.toString().padStart(2,"0")}-01`,a=new Date(r,n,0).toISOString().split("T")[0],{data:i,error:l}=await z.from("time_records").select(`
        *,
        users!inner(line_user_id)
      `).eq("users.line_user_id",t.userId).gte("recorded_at",s).lte("recorded_at",a+"T23:59:59.999Z").order("recorded_at",{ascending:!0});return l?(console.error(" :",l),[]):(console.log(" :",i==null?void 0:i.length,""),i||[])}static async getDayTimeRecords(t,r){console.log(" :",{user:t.userId,date:r});const n=`${r}T00:00:00.000Z`,s=`${r}T23:59:59.999Z`,{data:a,error:i}=await z.from("time_records").select(`
        *,
        users!inner(line_user_id)
      `).eq("users.line_user_id",t.userId).gte("recorded_at",n).lte("recorded_at",s).order("recorded_at",{ascending:!0});return i?(console.error(" :",i),[]):(console.log(" :",a==null?void 0:a.length,""),a||[])}}class lh{static async setUserContext(t){return console.log(" User context (RLS):",t),!0}static async editTimeRecord(t,r,n){console.log(" :",{user:t.userId,timeRecordId:r,editData:n}),await this.setUserContext(t.userId);const{data:s,error:a}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(a||!s)throw console.error(" :",a),new Error(`: ${a==null?void 0:a.message}`);const{data:i,error:l}=await z.from("time_records").select("*").eq("id",r).eq("user_id",s.id).single();if(l||!i)throw console.error(" :",l),new Error(`: ${l==null?void 0:l.message}`);const{data:c,error:u}=await z.from("time_records").update({record_type:n.recordType,recorded_at:n.recordedAt,location_name:n.locationName||null,note:n.note||null,updated_at:new Date().toISOString()}).eq("id",r).eq("user_id",s.id).select("*").single();if(u)throw console.error(" :",u),new Error(`: ${u.message}`);const{error:d}=await z.from("time_record_changes").insert({user_id:s.id,time_record_id:r,change_type:"edit",reason:n.reason,original_record_type:i.record_type,original_recorded_at:i.recorded_at,original_location_name:i.location_name,original_note:i.note,new_record_type:n.recordType,new_recorded_at:n.recordedAt,new_location_name:n.locationName||null,new_note:n.note||null});return d&&(console.error(" :",d),console.warn("")),console.log(" :",c),c}static async deleteTimeRecord(t,r,n){console.log(" :",{user:t.userId,timeRecordId:r,deleteData:n}),await this.setUserContext(t.userId);const{data:s,error:a}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(a||!s)throw console.error(" :",a),new Error(`: ${a==null?void 0:a.message}`);const{data:i,error:l}=await z.from("time_records").select("*").eq("id",r).eq("user_id",s.id).single();if(l||!i)throw console.error(" :",l),new Error(`: ${l==null?void 0:l.message}`);const{error:c}=await z.from("time_record_changes").insert({user_id:s.id,time_record_id:r,change_type:"delete",reason:n.reason,original_record_type:i.record_type,original_recorded_at:i.recorded_at,original_location_name:i.location_name,original_note:i.note,new_record_type:null,new_recorded_at:null,new_location_name:null,new_note:null});if(c)throw console.error(" :",c),new Error(`: ${c.message}`);const{error:u}=await z.from("time_records").delete().eq("id",r).eq("user_id",s.id);if(u)throw console.error(" :",u),new Error(`: ${u.message}`);console.log(" ")}static async getChangeHistory(t,r){console.log(" :",{user:t.userId,timeRecordId:r}),await this.setUserContext(t.userId);const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(s||!n)return console.error(" :",s),[];let a=z.from("time_record_changes").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});r&&(a=a.eq("time_record_id",r));const{data:i,error:l}=await a;return l?(console.error(" :",l),[]):(console.log(" :",i==null?void 0:i.length,""),i||[])}static getChangeTypeLabel(t){return{edit:"",delete:""}[t]||t}static formatChangeDescription(t){if(t.change_type==="delete")return`${this.getRecordTypeLabel(t.original_record_type)}`;const r=[];if(t.original_record_type!==t.new_record_type&&r.push(`: ${this.getRecordTypeLabel(t.original_record_type)}  ${this.getRecordTypeLabel(t.new_record_type)}`),t.original_recorded_at!==t.new_recorded_at){const n=new Date(t.original_recorded_at).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),s=new Date(t.new_recorded_at).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});r.push(`: ${n}  ${s}`)}return r.length>0?r.join(", "):""}static getRecordTypeLabel(t){return{clock_in:"",clock_out:"",break_start:"",break_end:""}[t]||t}}class Kr{static async setUserContext(t){return console.log(" User context (RLS):",t),!0}static async createDailyReport(t,r){console.log(" :",{lineUser:t.userId,reportData:r}),await this.setUserContext(t.userId);const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(s||!n)throw console.error(" :",s),new Error(`: ${s==null?void 0:s.message}`);console.log(" ID:",n.id);const a=new Date().toISOString().split("T")[0],i=r.customerCount>0?Math.round(r.salesAmount/r.customerCount):0,l=r.customerCount>0?Math.round(r.itemsSold/r.customerCount*10)/10:0,{data:c,error:u}=await z.from("daily_reports").select("*").eq("user_id",n.id).eq("report_date",a).maybeSingle();if(u)throw console.error(" :",u),new Error(`: ${u.message}`);if(c){console.log(" :",c.id);const p={sales_amount:r.salesAmount,customer_count:r.customerCount,items_sold:r.itemsSold,customer_unit_price:i,items_per_customer:l,checkout_time:r.checkoutTime,notes:r.notes||null,updated_at:new Date().toISOString()},{data:g,error:x}=await z.from("daily_reports").update(p).eq("id",c.id).select("*").single();if(x)throw console.error(" :",x),new Error(`: ${x.message}`);return console.log(" :",g),g}const d={user_id:n.id,report_date:a,sales_amount:r.salesAmount,customer_count:r.customerCount,items_sold:r.itemsSold,customer_unit_price:i,items_per_customer:l,checkout_time:r.checkoutTime,notes:r.notes||null};console.log(" ");const{data:f,error:h}=await z.from("daily_reports").insert(d).select("*").single();if(h)throw console.error(" :",h),new Error(`: ${h.message}`);return console.log(" :",f),f}static async getTodayReport(t){console.log(" :",{user:t.userId}),await this.setUserContext(t.userId);const{data:r,error:n}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(n||!r)return console.error(" :",n),null;const s=new Date().toISOString().split("T")[0],{data:a,error:i}=await z.from("daily_reports").select("*").eq("user_id",r.id).eq("report_date",s).maybeSingle();return i?(console.error(" :",i),null):(console.log(" :",a?"":""),a)}static async getMonthlyReports(t,r,n){console.log(" :",{user:t.userId,year:r,month:n}),await this.setUserContext(t.userId);const{data:s,error:a}=await z.from("users").select("id").eq("line_user_id",t.userId).single();if(a||!s)return console.error(" :",a),[];const i=`${r}-${n.toString().padStart(2,"0")}-01`,l=new Date(r,n,0).toISOString().split("T")[0],{data:c,error:u}=await z.from("daily_reports").select("*").eq("user_id",s.id).gte("report_date",i).lte("report_date",l).order("report_date",{ascending:!1});return u?(console.error(" :",u),[]):(console.log(" :",c==null?void 0:c.length,""),c||[])}}const w1=()=>{const{user:e}=on(),[t,r]=j.useState("day"),[n,s]=j.useState([]),[a,i]=j.useState(!1),[l,c]=j.useState(0),[u,d]=j.useState(0),[f,h]=j.useState(0),p=async()=>{if(e){i(!0);try{const w=new Date;let y=[];if(t==="day"){const S=await Kr.getMonthlyReports(e,w.getFullYear(),w.getMonth()+1),N=await Kr.getMonthlyReports(e,w.getFullYear(),w.getMonth()),D=[...S,...N];for(let O=30;O>=0;O--){const P=new Date(w);P.setDate(P.getDate()-O);const _=P.toISOString().split("T")[0],A=D.find(E=>E.report_date===_);y.push({label:P.getDate().toString(),value:(A==null?void 0:A.sales_amount)||0,date:_})}}else if(t==="week"){const N=[];for(let D=2;D>=0;D--){const O=new Date(w);O.setMonth(O.getMonth()-D);const P=await Kr.getMonthlyReports(e,O.getFullYear(),O.getMonth()+1);N.push(...P)}for(let D=11;D>=0;D--){const O=new Date(w);O.setDate(O.getDate()-D*7-(w.getDay()||7)+1);const P=new Date(O);P.setDate(O.getDate()+6);const _=N.filter(A=>{const E=new Date(A.report_date);return E>=O&&E<=P}).reduce((A,E)=>A+E.sales_amount,0);y.push({label:`${O.getMonth()+1}/${O.getDate()}`,value:_,date:O.toISOString().split("T")[0]})}}else if(t==="month")for(let S=11;S>=0;S--){const N=new Date(w);N.setMonth(N.getMonth()-S);const O=(await Kr.getMonthlyReports(e,N.getFullYear(),N.getMonth()+1)).reduce((P,_)=>P+_.sales_amount,0);y.push({label:`${N.getFullYear()}/${N.getMonth()+1}`,value:O,date:N.toISOString().split("T")[0]})}s(y);const m=y.reduce((S,N)=>S+N.value,0),v=Math.max(...y.map(S=>S.value)),b=y.length>0?m/y.length:0;c(m),d(v),h(b)}catch(w){console.error(":",w)}finally{i(!1)}}};j.useEffect(()=>{p()},[e,t]);const g=()=>{if(n.length===0)return o.jsx("div",{className:"h-40 flex items-center justify-center text-gray-500",children:o.jsx("span",{className:"text-sm",children:""})});const w=Math.max(...n.map(I=>I.value)),y=120,m=40,v=12,b=280,S=n.length*(m+v),N=Math.max(b,S),D=Math.max(m,(N-n.length*v)/n.length),O=0,P=25,A=y+P+25,E=N+O,k=(I=>{if(I===0)return[0];const B=Math.pow(10,Math.floor(Math.log10(I))),T=I/B;let L;T<=1?L=.2*B:T<=2?L=.4*B:T<=5?L=B:L=2*B;const U=[];for(let V=0;V<=Math.ceil(I/L);V++)U.push(V*L);return U})(w),C=Math.max(...k);return o.jsx("div",{className:"relative overflow-x-auto",children:o.jsx("div",{style:{width:`${Math.max(b,E)}px`},children:o.jsxs("svg",{width:E,height:A,children:[k.map((I,B)=>{const T=P+y*(1-I/C);return o.jsx("g",{children:o.jsx("line",{x1:0,y1:T,x2:E,y2:T,stroke:"#e5e7eb",strokeWidth:"1",opacity:"0.5"})},B)}),n.map((I,B)=>{const T=C>0?I.value/C*y:0,L=O+B*(D+v)+v/2,U=P+y-T;return o.jsxs("g",{children:[o.jsx("rect",{x:L,y:U,width:D,height:T,fill:"#CB8585",rx:"2",opacity:"0.8"}),I.value>0&&o.jsxs("text",{x:L+D/2,y:U-5,textAnchor:"middle",fontSize:"9",fill:"#6b7280",children:["",I.value.toLocaleString()]}),o.jsx("text",{x:L+D/2,y:P+y+18,textAnchor:"middle",fontSize:"10",fill:"#6b7280",children:I.label})]},B)})]})})})},x=()=>{switch(t){case"day":return"31";case"week":return"3";case"month":return"1";default:return""}};return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx(Dc,{className:"w-5 h-5",style:{color:"#CB8585"}}),o.jsx("h4",{className:"text-md font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1",children:[{key:"day",label:"",icon:Rt},{key:"week",label:"",icon:Hu},{key:"month",label:"",icon:Dc}].map(({key:w,label:y,icon:m})=>o.jsxs("button",{onClick:()=>r(w),className:`flex-1 flex items-center justify-center space-x-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${t===w?"bg-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,style:t===w?{color:"#CB8585"}:{},children:[o.jsx(m,{className:"w-4 h-4"}),o.jsx("span",{children:y})]},w))}),o.jsx("div",{className:"rounded-lg p-3 mb-4",style:{backgroundColor:"#FDF2F2"},children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-sm text-gray-600 flex-shrink-0",children:[x(),""]}),o.jsxs("p",{className:"text-lg font-bold text-right",style:{color:"#CB8585"},children:["",l.toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-gray-600 flex-shrink-0",children:""}),o.jsxs("p",{className:"text-lg font-semibold text-right",style:{color:"#CB8585"},children:["",u.toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-gray-600 flex-shrink-0",children:""}),o.jsxs("p",{className:"text-lg font-semibold text-right",style:{color:"#CB8585"},children:["",Math.round(f).toLocaleString()]})]})]})}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:a?o.jsx("div",{className:"h-40 flex items-center justify-center",children:o.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-t-transparent rounded-full",style:{borderColor:"#CB8585",borderTopColor:"transparent"}}),o.jsx("span",{className:"text-sm",children:"..."})]})}):g()})]})},_1=({availableDates:e=[]})=>{const{user:t}=on(),{onAttendanceUpdate:r,notifyTimeRecordUpdate:n,notifyAttendanceUpdate:s}=Fg(),[a,i]=j.useState(new Date),[l,c]=j.useState([]),[u,d]=j.useState([]),[f,h]=j.useState({workingDays:0,totalMinutes:0}),[p,g]=j.useState(!1),[x,w]=j.useState(null),[y,m]=j.useState([]),[v,b]=j.useState(null),[S,N]=j.useState(null),[D,O]=j.useState(null),[P,_]=j.useState({recordType:"",recordedAt:"",locationName:"",note:"",reason:""}),[A,E]=j.useState(""),R=a.getFullYear(),k=a.getMonth(),C=new Date(R,k,1),I=new Date(R,k+1,0),B=C.getDay(),T=I.getDate(),L=async()=>{if(t){g(!0);try{const $=await Bs.getMonthlyTimeRecords(t,R,k+1),H={};$.forEach(Ae=>{const Re=new Date(Ae.recorded_at).toLocaleDateString("sv-SE");H[Re]||(H[Re]={date:Re,hasAttendance:!1,records:[],workingHours:0}),H[Re].records.push(Ae),H[Re].hasAttendance=!0}),Object.values(H).forEach(Ae=>{Ae.workingHours=U(Ae.records)});const de=Object.values(H);c(de),V(de),console.log(" :",Object.keys(H).length,"")}catch($){console.error(" :",$)}finally{g(!1)}}},U=$=>{let H=0,de=null;for(const Ae of $){const Re=new Date(Ae.recorded_at);switch(Ae.record_type){case"clock_in":de=Re;break;case"break_start":de&&(H+=(Re.getTime()-de.getTime())/(1e3*60));break;case"break_end":de=Re;break;case"clock_out":de&&(H+=(Re.getTime()-de.getTime())/(1e3*60)),de=null;break}}return Math.round(H)},V=$=>{const H=new Map;let de=0,Ae=0;$.forEach(rt=>{if(!rt.hasAttendance||!rt.records.length)return;const nr=new Set;rt.records.forEach(un=>{if(un.note){const ls=un.note.match(/(.+)/);ls&&nr.add(ls[1])}}),nr.size===0&&nr.add(""),nr.forEach(un=>{H.has(un)||H.set(un,{workingDays:new Set,totalMinutes:0});const ls=H.get(un);ls.workingDays.add(rt.date),ls.totalMinutes+=rt.workingHours||0}),de++,Ae+=rt.workingHours||0});const Re=[];H.forEach((rt,nr)=>{Re.push({location:nr,workingDays:rt.workingDays.size,totalMinutes:rt.totalMinutes})}),Re.sort((rt,nr)=>rt.location.localeCompare(nr.location)),d(Re),h({workingDays:de,totalMinutes:Ae})};j.useEffect(()=>{L()},[t,a]),j.useEffect(()=>r(()=>{console.log(" AttendanceCalendar: "),L()}),[r,L]);const J=$=>l.find(H=>H.date===$),ge=()=>{i(new Date(R,k-1,1))},te=()=>{i(new Date(R,k+1,1))},Ee=async $=>{if(!t)return;const H=J($);if(!(!H||!H.hasAttendance)){w($),m(H.records);try{const de=new Date($),Re=(await Kr.getMonthlyReports(t,de.getFullYear(),de.getMonth()+1)).find(rt=>rt.report_date===$);b(Re||null)}catch(de){console.error(":",de),b(null)}}},xe=$=>{N($);const H=new Date($.recorded_at);_({recordType:$.record_type,recordedAt:H.toISOString().slice(0,16),locationName:$.location_name||"",note:$.note||"",reason:""})},St=async()=>{if(!(!t||!S)){if(!P.reason.trim()){alert("");return}try{const $={recordType:P.recordType,recordedAt:new Date(P.recordedAt).toISOString(),locationName:P.locationName||void 0,note:P.note||void 0,reason:P.reason};await lh.editTimeRecord(t,S.id,$),n(),s(),await L(),N(null),w(null),m([]),b(null),_({recordType:"",recordedAt:"",locationName:"",note:"",reason:""}),alert("")}catch($){console.error(":",$),alert(`: ${$ instanceof Error?$.message:""}`)}}},cn=$=>{O($),E("")},ss=async()=>{if(!(!t||!D)){if(!A.trim()){alert("");return}try{const $={reason:A};await lh.deleteTimeRecord(t,D.id,$),n(),s(),await L(),O(null),w(null),m([]),b(null),E(""),alert("")}catch($){console.error(":",$),alert(`: ${$ instanceof Error?$.message:""}`)}}},rr=$=>{if(!$.hasAttendance)return"#e5e7eb";const H=($.workingHours||0)/60;return H>=8?"#059669":H>=4?"#CB8585":"#f59e0b"},as=()=>{const $=[];for(let H=0;H<B;H++)$.push(o.jsx("div",{className:"aspect-square flex items-center justify-center text-gray-300",children:"-"},`empty-${H}`));for(let H=1;H<=T;H++){const de=`${R}-${(k+1).toString().padStart(2,"0")}-${H.toString().padStart(2,"0")}`,Ae=J(de);$.push(o.jsx("div",{className:"aspect-square flex items-center justify-center text-sm font-medium relative cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>Ee(de),children:Ae&&Ae.hasAttendance?o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-medium text-sm",style:{backgroundColor:rr(Ae)},children:H}):o.jsx("span",{className:"text-gray-800 hover:text-gray-600",children:H})},H))}return $},Ta=["1","2","3","4","5","6","7","8","9","10","11","12"],is=["","","","","","",""],Rr=$=>new Date($).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1}),Oa=$=>{const H=Math.floor($/60),de=$%60;return`${H}:${de.toString().padStart(2,"0")}`},Lr=$=>`${Math.floor($/60)}${$%60}`,os=($,H)=>H===0?0:Math.round($/H),Wo=($,H)=>H===0?0:Math.round($/H*10)/10;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 aspect-square",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:ge,className:"p-1 hover:bg-gray-100 rounded transition-colors",style:{color:"#CB8585"},children:o.jsx(qu,{className:"w-5 h-5"})}),o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[R," ",Ta[k]," "]}),o.jsx("button",{onClick:te,className:"p-1 hover:bg-gray-100 rounded transition-colors",style:{color:"#CB8585"},children:o.jsx(Gu,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:is.map(($,H)=>o.jsx("div",{className:`aspect-square flex items-center justify-center text-sm font-medium ${H===5?"text-blue-600":H===6?"text-red-600":"text-gray-600"}`,children:$},$))}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4 flex-1",children:as()}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-600"}),o.jsx("span",{className:"text-gray-600 text-xs",children:"8"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#CB8585"}}),o.jsx("span",{className:"text-gray-600 text-xs",children:"4-8"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),o.jsx("span",{className:"text-gray-600 text-xs",children:"4"})]})]}),o.jsx("span",{className:"text-gray-500",children:p?"...":`${l.length}`})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx(Hu,{className:"w-5 h-5 text-blue-600"}),o.jsx("h4",{className:"text-md font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:""}),o.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[f.workingDays,""]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Lr(f.totalMinutes)})]})]})})]}),u.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx(Cr,{className:"w-5 h-5 text-gray-600"}),o.jsx("h4",{className:"text-md font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"space-y-3",children:u.map(($,H)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:`hsl(${H*60}, 60%, 50%)`}}),o.jsx("span",{className:"font-medium text-gray-900",children:$.location})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[$.workingDays," / ",Lr($.totalMinutes)]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[" ",Lr(Math.round($.totalMinutes/$.workingDays))," / "]})]})]},$.location))})]}),o.jsx(w1,{})]}),x&&y.length>0&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>{w(null),m([])},children:o.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-96 overflow-y-auto",onClick:$=>$.stopPropagation(),children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[new Date(x).toLocaleDateString("ja-JP")," "]}),o.jsx("div",{className:"space-y-3",children:y.map(($,H)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:"flex items-center space-x-3",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[$.record_type==="clock_in"&&o.jsx(Ec,{className:"w-4 h-4 text-green-600"}),$.record_type==="clock_out"&&o.jsx(aa,{className:"w-4 h-4 text-red-600"}),($.record_type==="break_start"||$.record_type==="break_end")&&o.jsx(Fi,{className:"w-4 h-4 text-orange-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:Bs.getRecordTypeLabel($.record_type)})]})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:Rr($.recorded_at)}),$.note&&o.jsx("p",{className:"text-xs text-gray-500",children:$.note})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("button",{onClick:()=>xe($),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:o.jsx(Vu,{className:"w-3 h-3 text-gray-600"})}),o.jsx("button",{onClick:()=>cn($),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:o.jsx(Ju,{className:"w-3 h-3 text-red-600"})})]})]})]},$.id))}),o.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:""}),o.jsx("span",{className:"text-lg font-bold text-blue-600",children:Oa(U(y))})]})}),v&&o.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-green-700",children:["",v.sales_amount.toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-green-700",children:[v.customer_count,""]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-green-700",children:[v.items_sold,""]})]})]}),o.jsx("div",{className:"border-t border-green-200 pt-2 mb-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["",(v.customer_unit_price||os(v.sales_amount,v.customer_count)).toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[v.items_per_customer||Wo(v.items_sold,v.customer_count),"/"]})]})]})}),v.notes&&o.jsxs("div",{className:"mb-2",children:[o.jsx("span",{className:"text-xs text-gray-600",children:":"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:v.notes})]}),o.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t border-green-200 space-y-1",children:[v.checkout_time&&o.jsxs("div",{children:[": ",new Date(v.checkout_time).toLocaleString("ja-JP")]}),o.jsxs("div",{children:[": ",new Date(v.created_at).toLocaleString("ja-JP")]})]})]}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsx("button",{onClick:()=>{w(null),m([]),b(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:""})})]})}),S&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-96 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:P.recordType,onChange:$=>_({...P,recordType:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"clock_in",children:""}),o.jsx("option",{value:"clock_out",children:""}),o.jsx("option",{value:"break_start",children:""}),o.jsx("option",{value:"break_end",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"datetime-local",value:P.recordedAt,onChange:$=>_({...P,recordedAt:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:P.locationName,onChange:$=>_({...P,locationName:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:": "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:P.note,onChange:$=>_({...P,note:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{value:P.reason,onChange:$=>_({...P,reason:$.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx("button",{onClick:()=>N(null),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:""}),o.jsx("button",{onClick:St,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:""})]})]})}),D&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsx("button",{onClick:()=>O(null),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-gray-700 mb-2",children:""}),o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[D.record_type==="clock_in"&&o.jsx(Ec,{className:"w-4 h-4 text-green-600"}),D.record_type==="clock_out"&&o.jsx(aa,{className:"w-4 h-4 text-red-600"}),(D.record_type==="break_start"||D.record_type==="break_end")&&o.jsx(Fi,{className:"w-4 h-4 text-orange-600"}),o.jsx("span",{className:"font-medium",children:Bs.getRecordTypeLabel(D.record_type)})]}),o.jsx("p",{className:"text-sm text-gray-600",children:Rr(D.recorded_at)}),D.note&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D.note})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{value:A,onChange:$=>E($.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:""})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:""}),o.jsx("button",{onClick:ss,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors",children:""})]})]})})]})},j1=()=>{const[e,t]=j.useState("schedule");return o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:o.jsxs("div",{className:"flex border-b border-gray-200",children:[o.jsxs("button",{onClick:()=>t("schedule"),className:`flex-1 flex items-center justify-center px-4 py-3 text-sm font-medium transition-colors ${e==="schedule"?"text-white border-b-2 border-transparent":"text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300"}`,style:e==="schedule"?{backgroundColor:"#CB8585",borderBottomColor:"#CB8585"}:{},children:[o.jsx(Rt,{className:"w-4 h-4 mr-2"}),""]}),o.jsxs("button",{onClick:()=>t("attendance"),className:`flex-1 flex items-center justify-center px-4 py-3 text-sm font-medium transition-colors ${e==="attendance"?"text-white border-b-2 border-transparent":"text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300"}`,style:e==="attendance"?{backgroundColor:"#CB8585",borderBottomColor:"#CB8585"}:{},children:[o.jsx(an,{className:"w-4 h-4 mr-2"}),""]})]})}),o.jsxs("div",{className:"min-h-0",children:[e==="schedule"&&o.jsx(x1,{}),e==="attendance"&&o.jsx(_1,{})]})]})},S1=({isOpen:e,onClose:t,checkoutTime:r})=>{var x;const{user:n}=on(),[s,a]=j.useState({sales:"",customerCount:"",itemsSold:"",notes:""}),[i,l]=j.useState(!1),[c,u]=j.useState(!1),[d,f]=j.useState(null);se.useEffect(()=>{(async()=>{if(!(!e||!n))try{const y=await Kr.getTodayReport(n);y?(f(y),a({sales:y.sales_amount>0?y.sales_amount.toString():"",customerCount:y.customer_count>0?y.customer_count.toString():"",itemsSold:y.items_sold>0?y.items_sold.toString():"",notes:y.notes?y.notes.split(`
[`)[0]:""})):a({sales:"",customerCount:"",itemsSold:"",notes:""})}catch(y){console.error(":",y)}})()},[e,n]);const h=(w,y)=>{a(m=>({...m,[w]:y}))},p=async w=>{if(w.preventDefault(),!n){alert("");return}u(!0);try{const y={salesAmount:parseInt(s.sales)||0,customerCount:parseInt(s.customerCount)||0,itemsSold:parseInt(s.itemsSold)||0,notes:s.notes.trim()||void 0,checkoutTime:r||new Date().toISOString()};console.log("DB:",y),await Kr.createDailyReport(n,y),l(!0),setTimeout(()=>{g()},3e3)}catch(y){console.error(":",y);const m=y instanceof Error?y.message:"";alert(`: ${m}`),u(!1)}},g=()=>{a({sales:"",customerCount:"",itemsSold:"",notes:""}),l(!1),u(!1),f(null),t()};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:i?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"#E8F5E8"},children:o.jsx(ug,{className:"w-8 h-8",style:{color:"#059669"}})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:""}),o.jsx("p",{className:"text-gray-600 mb-4",children:""}),o.jsx("div",{className:"text-2xl font-medium mb-6",style:{color:"#CB8585"},children:""}),o.jsx("p",{className:"text-sm text-gray-500",children:""})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""}),o.jsx("button",{onClick:g,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),d&&o.jsx("div",{className:"mx-6 mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:""}),o.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[o.jsx("p",{children:""}),o.jsxs("p",{className:"mt-1",children:[o.jsx("strong",{children:":"})," ",((x=d.sales_amount)==null?void 0:x.toLocaleString())||"0","",o.jsx("strong",{children:":"})," ",d.customer_count||0,"",o.jsx("strong",{children:":"})," ",d.items_sold||0,""]}),o.jsx("p",{className:"mt-1 text-xs",children:" "})]})]})]})}),o.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[o.jsx(zi,{className:"w-4 h-4 mr-2",style:{color:"#CB8585"}}),""]}),o.jsx("input",{type:"number",value:s.sales,onChange:w=>h("sales",w.target.value),required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#CB8585] focus:border-transparent",placeholder:": 150000"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[o.jsx(zt,{className:"w-4 h-4 mr-2",style:{color:"#CB8585"}}),""]}),o.jsx("input",{type:"number",value:s.customerCount,onChange:w=>h("customerCount",w.target.value),required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#CB8585] focus:border-transparent",placeholder:": 25"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Vx,{className:"w-4 h-4 mr-2",style:{color:"#CB8585"}}),""]}),o.jsx("input",{type:"number",value:s.itemsSold,onChange:w=>h("itemsSold",w.target.value),required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#CB8585] focus:border-transparent",placeholder:": 40"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Gx,{className:"w-4 h-4 mr-2",style:{color:"#CB8585"}}),""]}),o.jsx("textarea",{value:s.notes,onChange:w=>h("notes",w.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#CB8585] focus:border-transparent resize-none",placeholder:""})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:g,disabled:c,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:""}),o.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#CB8585"},onMouseEnter:w=>{c||(w.currentTarget.style.backgroundColor="#B87575")},onMouseLeave:w=>{c||(w.currentTarget.style.backgroundColor="#CB8585")},children:c?"...":""})]})]})]})})}):null},N1=()=>{const e=new Date().getFullYear();return o.jsx("footer",{className:"mt-8",style:{backgroundColor:"#9c9c9c"},children:o.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:o.jsxs("div",{className:"text-left space-y-2",children:[o.jsx("div",{children:o.jsx("h3",{className:"text-sm font-medium text-white",children:""})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("a",{href:"#",className:"block text-xs text-white hover:text-gray-200 transition-colors",onClick:t=>{t.preventDefault()},children:""}),o.jsx("a",{href:"#",className:"block text-xs text-white hover:text-gray-200 transition-colors",onClick:t=>{t.preventDefault()},children:""}),o.jsx("a",{href:"#",className:"block text-xs text-white hover:text-gray-200 transition-colors",onClick:t=>{t.preventDefault()},children:""})]}),o.jsx("div",{className:"pt-2 border-t border-gray-400",children:o.jsxs("p",{className:"text-xs text-white",children:[" ",e," Make Me Team. All rights reserved."]})})]})})})},zg=j.createContext(void 0),k1=()=>{const e=j.useContext(zg);if(e===void 0)throw new Error("useAdmin must be used within an AdminProvider");return e},C1=({children:e})=>{const[t,r]=j.useState(!1);j.useEffect(()=>{sessionStorage.getItem("admin_authenticated")==="true"&&r(!0)},[]);const a={isAdminAuthenticated:t,login:i=>i==="admin123"?(r(!0),sessionStorage.setItem("admin_authenticated","true"),!0):!1,logout:()=>{r(!1),sessionStorage.removeItem("admin_authenticated")}};return o.jsx(zg.Provider,{value:a,children:e})},E1=()=>{const{login:e,error:t,isLoading:r,clearError:n}=on();return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 flex items-center justify-center px-6",children:o.jsx("div",{className:"max-w-md w-full",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-slate-800 via-gray-700 to-slate-600 bg-clip-text text-transparent mb-4 tracking-tight whitespace-nowrap",children:""}),o.jsx("p",{className:"text-gray-600 text-base",children:"LINE"})]}),t&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:[o.jsx("div",{className:"text-sm text-red-700 mb-2",children:t}),o.jsx("button",{type:"button",className:"text-xs text-red-600 hover:text-red-800",onClick:n,children:""})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("button",{onClick:e,disabled:r,className:`w-full py-4 text-lg font-medium rounded-xl text-white transition-all duration-200 ${r?"bg-gray-400 cursor-not-allowed":"bg-[#00B900] hover:bg-[#009900]"}`,children:r?"...":"LINE"}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["",o.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 underline",children:""}),"",o.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 underline",children:""}),""]})})]})]})})})};class D1{static async findOrCreateUser(t){console.log(" :",t.userId);let{data:r,error:n}=await z.from("users").select("*").eq("line_user_id",t.userId).single();if(console.log(" :",{existingUser:r,findError:n}),n&&n.code!=="PGRST116")throw console.error(" :",n),new Error(`: ${n.message}`);if(r){console.log(" ");const s={display_name:t.displayName,picture_url:t.pictureUrl,email:t.email,updated_at:new Date().toISOString()},{data:a,error:i}=await z.from("users").update(s).eq("id",r.id).select("*").single();if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a),a}else{console.log(" ");const s={line_user_id:t.userId,display_name:t.displayName,picture_url:t.pictureUrl,email:t.email},{data:a,error:i}=await z.from("users").insert(s).select("*").single();if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a),a}}}const I1=()=>{const{logout:e}=on();return j.useEffect(()=>{(async()=>{try{const r=new URLSearchParams(window.location.search),n=r.get("code"),s=r.get("state"),a=r.get("error");if(a){console.error("LINE:",a),alert(""),window.location.href="/";return}if(!n||!s){console.error(""),alert(""),window.location.href="/";return}const i=localStorage.getItem("line_login_state");if(console.log(" State:",{received:s,stored:i,match:s===i}),s!==i){console.error("State "),localStorage.removeItem("line_login_state"),alert(""),window.location.href="/";return}const l=await Yx(n);let c;l.id_token?c=Xx(l.id_token):c=await Zx(l.access_token);try{console.log(" Supabase");const u=await D1.findOrCreateUser(c);console.log(" DB:",u)}catch(u){console.error(" DB:",u)}localStorage.setItem("line_auth_user",JSON.stringify(c)),localStorage.removeItem("line_login_state"),pg(),console.log(":",c.displayName),window.location.href="/"}catch(r){console.error(":",r),r instanceof Error?r.message.includes("")?alert("LINE"):r.message.includes("ID")?alert(""):r.message.includes("Channel Secret")?alert("Channel Secret"):alert(`: ${r.message}`):alert(""),localStorage.removeItem("line_auth_user"),localStorage.removeItem("line_login_state"),localStorage.removeItem("line_auth_timestamp"),window.location.href="/"}})()},[e]),o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 rounded-lg flex items-center justify-center mb-4",style:{backgroundColor:"#CB8585"},children:o.jsxs("svg",{className:"animate-spin h-8 w-8 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"..."}),o.jsx("p",{className:"text-gray-600",children:"LINE"}),o.jsx("div",{className:"mt-4",children:o.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-400 text-sm",children:[o.jsx("span",{children:""}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse"}),o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse delay-75"}),o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse delay-150"})]})]})})]})})},P1=({onLogin:e})=>{const[t,r]=j.useState(""),[n,s]=j.useState(null),[a,i]=j.useState(!1),l=c=>{c.preventDefault(),s(null),i(!0),e(t)||(s(""),r("")),i(!1)};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 flex items-center justify-center px-6",children:o.jsx("div",{className:"max-w-md w-full",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-8 shadow-md bg-red-600",children:o.jsx("div",{className:"text-white text-3xl font-bold",children:""})}),o.jsx("h1",{className:"text-4xl font-black text-slate-800 mb-4 tracking-tight",children:""}),o.jsx("p",{className:"text-gray-600 text-base",children:""})]}),n&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:o.jsx("div",{className:"text-sm text-red-700 mb-2",children:n})}),o.jsxs("form",{onSubmit:l,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"password",id:"password",value:t,onChange:c=>r(c.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",disabled:a,className:`w-full py-4 text-lg font-medium rounded-xl text-white transition-all duration-200 ${a?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:a?"...":""})]})]})})})};class T1{static async getTotalUsers(){const{count:t,error:r}=await z.from("users").select("*",{count:"exact",head:!0});if(r)throw r;return t||0}static async getTodayAttendance(){const t=new Date().toISOString().split("T")[0],{data:r,error:n}=await z.from("time_records").select("user_id").eq("record_type","clock_in").gte("recorded_at",`${t}T00:00:00`).lt("recorded_at",`${t}T23:59:59`);if(n)throw n;return new Set(r==null?void 0:r.map(a=>a.user_id)).size}static async getCurrentlyWorking(){const t=new Date().toISOString().split("T")[0],{data:r,error:n}=await z.from("time_records").select("user_id, record_type, recorded_at").gte("recorded_at",`${t}T00:00:00`).lt("recorded_at",`${t}T23:59:59`).order("recorded_at",{ascending:!0});if(n)throw n;const s=new Map;r==null||r.forEach(i=>{s.set(i.user_id,i.record_type)});let a=0;return s.forEach(i=>{(i==="clock_in"||i==="break_end")&&a++}),a}static async getTodaySales(){const t=new Date().toISOString().split("T")[0],{data:r,error:n}=await z.from("daily_reports").select("sales_amount").eq("report_date",t);if(n)throw n;return(r==null?void 0:r.reduce((a,i)=>a+i.sales_amount,0))||0}static async getAvgSalesPerUser(){const t=new Date().toISOString().split("T")[0],{data:r,error:n}=await z.from("daily_reports").select("sales_amount").eq("report_date",t);if(n)throw n;if(!r||r.length===0)return 0;const s=r.reduce((a,i)=>a+i.sales_amount,0);return Math.round(s/r.length)}static async getMonthlyShifts(){const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],n=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().split("T")[0],{data:s,error:a}=await z.from("shifts").select("shift_status").gte("shift_date",r).lte("shift_date",n);if(a)throw a;const i=(s==null?void 0:s.length)||0,l=(s==null?void 0:s.filter(c=>c.shift_status==="confirmed").length)||0;return{total:i,completed:l}}static async getMonthlyAttendanceRate(){const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],n=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().split("T")[0],{data:s,error:a}=await z.from("shifts").select("id").gte("shift_date",r).lte("shift_date",n).neq("shift_type","off");if(a)throw a;const{data:i,error:l}=await z.from("time_records").select("id").eq("record_type","clock_in").gte("recorded_at",`${r}T00:00:00`).lt("recorded_at",`${n}T23:59:59`);if(l)throw l;const c=(s==null?void 0:s.length)||0,u=(i==null?void 0:i.length)||0;return c>0?Math.round(u/c*100):0}static async getAvgWorkingHours(){const t=new Date,r=new Date(t.setDate(t.getDate()-t.getDay())).toISOString().split("T")[0],n=new Date(t.setDate(t.getDate()-t.getDay()+6)).toISOString().split("T")[0],{data:s,error:a}=await z.from("time_records").select("user_id, record_type, recorded_at").gte("recorded_at",`${r}T00:00:00`).lt("recorded_at",`${n}T23:59:59`).order("recorded_at",{ascending:!0});if(a)throw a;const i=new Map,l=new Map;s==null||s.forEach(d=>{const f=d.user_id,h=new Date(d.recorded_at);if(i.has(f)||i.set(f,0),d.record_type==="clock_in")l.set(f,{type:"work",startTime:h});else if(d.record_type==="clock_out"){const p=l.get(f);if(p&&p.type==="work"){const g=(h.getTime()-p.startTime.getTime())/36e5;i.set(f,i.get(f)+g)}l.set(f,{type:"off"})}});const c=Array.from(i.values()).reduce((d,f)=>d+f,0),u=i.size;return u>0?Math.round(c/u*10)/10:0}static async getRecentActivity(){const{data:t,error:r}=await z.from("time_records").select(`
        record_type,
        recorded_at,
        users (
          display_name
        )
      `).order("recorded_at",{ascending:!1}).limit(10);if(r)throw r;const n={clock_in:"",clock_out:"",break_start:"",break_end:""};return(t==null?void 0:t.map(s=>{var a;return{user_display_name:((a=s.users)==null?void 0:a.display_name)||"",action:n[s.record_type]||s.record_type,timestamp:s.recorded_at}}))||[]}static async getAllKPIData(){try{const[t,r,n,s,a,i,l,c,u]=await Promise.all([this.getTotalUsers(),this.getTodayAttendance(),this.getCurrentlyWorking(),this.getTodaySales(),this.getAvgSalesPerUser(),this.getMonthlyShifts(),this.getMonthlyAttendanceRate(),this.getAvgWorkingHours(),this.getRecentActivity()]);return{totalUsers:t,todayAttendance:r,currentlyWorking:n,todaySales:s,avgSalesPerUser:a,totalShifts:i.total,completedShifts:i.completed,monthlyAttendanceRate:l,avgWorkingHours:c,recentActivity:u}}catch(t){throw console.error("KPI data fetch error:",t),t}}}class gt{static async setUserContext(t){return console.log(" User context (RLS):",t),!0}static async getAllLocations(){console.log(" ");try{const{data:t,error:r}=await z.from("locations").select("*").order("display_order",{ascending:!0});if(r)throw console.error(" :",r),new Error(`: ${r.message}`);return console.log(" :",t==null?void 0:t.length,""),t||[]}catch(t){throw console.error(" :",t),t}}static async createLocation(t){console.log(" :",t.name);try{const{data:r}=await z.from("locations").select("display_order").order("display_order",{ascending:!1}).limit(1).single(),n=((r==null?void 0:r.display_order)||0)+1,s={...t};s.start_date===""&&(s.start_date=void 0),s.end_date===""&&(s.end_date=void 0);const{data:a,error:i}=await z.from("locations").insert([{...s,is_active:s.is_active??!0,display_order:s.display_order??n,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a.name),a}catch(r){throw console.error(" :",r),r}}static async updateLocation(t,r){console.log(" :",t);try{const n={...r};n.start_date===""&&(n.start_date=null),n.end_date===""&&(n.end_date=null);const{data:s,error:a}=await z.from("locations").update({...n,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw console.error(" :",a),new Error(`: ${a.message}`);return console.log(" :",s.name),s}catch(n){throw console.error(" :",n),n}}static async deleteLocation(t){console.log(" :",t);try{const{error:r}=await z.from("locations").update({is_active:!1,updated_at:new Date().toISOString()}).eq("id",t);if(r)throw console.error(" :",r),new Error(`: ${r.message}`);console.log(" ")}catch(r){throw console.error(" :",r),r}}static async checkCodeDuplicate(t,r){console.log(" :",t);try{let n=z.from("locations").select("id").eq("code",t);r&&(n=n.neq("id",r));const{data:s,error:a}=await n;if(a)throw console.error(" :",a),new Error(`: ${a.message}`);const i=(s||[]).length>0;return console.log(" :",i?"":""),i}catch(n){throw console.error(" :",n),n}}static async getActiveLocations(){console.log(" ");try{const{data:t,error:r}=await z.from("locations").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(r)throw console.error(" :",r),new Error(`: ${r.message}`);return console.log(" :",t==null?void 0:t.length,""),t||[]}catch(t){throw console.error(" :",t),t}}static async getLocationById(t){console.log(" :",t);try{const{data:r,error:n}=await z.from("locations").select("*").eq("id",t).single();return n?(console.error(" :",n),null):(console.log(" :",r==null?void 0:r.name),r)}catch(r){return console.error(" :",r),null}}static async getLocationByCode(t){console.log(" :",t);try{const{data:r,error:n}=await z.from("locations").select("*").eq("code",t).eq("is_active",!0).single();return n?(console.error(" :",n),null):(console.log(" :",r==null?void 0:r.name),r)}catch(r){return console.error(" :",r),null}}static async getDefaultLocation(){console.log(" ");try{const{data:t,error:r}=await z.from("locations").select("*").eq("is_active",!0).order("display_order",{ascending:!0}).limit(1).single();return r?(console.error(" :",r),null):(console.log(" :",t==null?void 0:t.name),t)}catch(t){return console.error(" :",t),null}}static async getLocationUsageStats(t,r,n){console.log(" :",{startDate:r,endDate:n}),await this.setUserContext(t.userId);try{let s=z.from("time_records").select(`
          location_id,
          locations!inner(name),
          count()
        `).not("location_id","is",null);r&&(s=s.gte("recorded_at",r)),n&&(s=s.lte("recorded_at",n));const{data:a,error:i}=await s;if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a==null?void 0:a.length,""),a||[]}catch(s){throw console.error(" :",s),s}}static async getCurrentLocation(){return console.log(" "),new Promise((t,r)=>{if(!navigator.geolocation){console.error(" Geolocation API not supported"),r(new Error(""));return}navigator.geolocation.getCurrentPosition(n=>{const s={latitude:n.coords.latitude,longitude:n.coords.longitude,locationName:""};console.log(" :",s),t(s)},n=>{console.error(" :",n),r(new Error(""))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}}const Uc=(e,t)=>{if(!e)return"";try{let r=e.replace(/[\x00-\x1F\x7F-\x9F]/g,"").replace(/\uFFFD/g,"").replace(/\s+/g," ").trim();return t&&r.length>t,r}catch(r){return console.warn(":",r),""}},qe=e=>Uc(e)||"Unknown User",O1=(e,t=10)=>{const r=qe(e);return r.length<=t?r:r.substring(0,t)+"..."},A1=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[s,a]=j.useState([]),[i,l]=j.useState("all"),[c,u]=j.useState(new Date().toISOString().split("T")[0]),[d,f]=j.useState(!0),[h,p]=j.useState(null),g=8,x=23,w=x-g,y=60,m=15;j.useEffect(()=>{v()},[c,i]);const v=async()=>{f(!0),p(null);try{const _=await gt.getAllLocations();a(_);let A=z.from("users").select("*");if(i!=="all"){const{data:L}=await z.from("user_location_access").select("user_id").eq("location_id",i);if(L&&L.length>0){const U=L.map(V=>V.user_id);A=A.in("id",U)}else{t([]),n([]),f(!1);return}}const{data:E,error:R}=await A.order("display_name");if(R)throw R;t(E||[]);const k=new Date(c);k.setHours(0,0,0,0);const C=new Date(c);C.setHours(23,59,59,999);const{data:I,error:B}=await z.from("time_records").select("*").gte("recorded_at",k.toISOString()).lte("recorded_at",C.toISOString()).order("recorded_at");if(B)throw B;const T={};(E||[]).forEach(L=>{T[L.id]={user:L,timeRecords:[],workPeriods:[]}}),(I||[]).forEach(L=>{T[L.user_id]&&T[L.user_id].timeRecords.push(L)}),Object.values(T).forEach(L=>{L.workPeriods=b(L.timeRecords)}),n(Object.values(T))}catch(_){p(_ instanceof Error?_.message:"")}finally{f(!1)}},b=_=>{const A=[];let E=null,R=null;return _.forEach(k=>{const C=new Date(k.recorded_at);switch(k.record_type){case"clock_in":E||(E=C);break;case"break_start":E&&!R&&(A.push({start:E,end:C,type:"work",location:k.location_name||void 0}),R=C);break;case"break_end":R&&(A.push({start:R,end:C,type:"break",location:k.location_name||void 0}),R=null,E=C);break;case"clock_out":E&&(A.push({start:E,end:C,type:"work",location:k.location_name||void 0}),E=null),R&&(A.push({start:R,end:C,type:"break",location:k.location_name||void 0}),R=null);break}}),E&&A.push({start:E,end:null,type:"work"}),A},S=()=>{const _=[];for(let A=g;A<=x;A++)_.push(o.jsx("div",{className:"flex-none w-24 text-center",children:o.jsxs("div",{className:"text-xs font-medium text-gray-700 border-r border-gray-200 py-2",children:[A.toString().padStart(2,"0"),":00"]})},A));return _},N=()=>{const _=[];for(let A=g;A<=x;A++)for(let E=0;E<y;E+=m){const R=E===0;_.push(o.jsx("div",{className:`absolute top-0 bottom-0 w-px ${R?"bg-gray-300":"bg-gray-100"}`,style:{left:`${((A-g)*y+E)*(96/y)}px`}},`${A}-${E}`))}return _},D=_=>{const A=_.getHours(),E=_.getMinutes(),R=(A-g)*y+E;return Math.max(0,R/y*96)},O=(_,A)=>{const E=D(_.start),R=_.end?D(_.end):w*96,k=Math.max(8,R-E);return E<0&&R<0?null:o.jsx("div",{className:`absolute h-6 rounded-sm shadow-sm border ${_.type==="work"?"bg-green-100 border-green-300 text-green-800":"bg-orange-100 border-orange-300 text-orange-800"} ${_.end?"":"animate-pulse"}`,style:{left:`${Math.max(0,E)}px`,width:`${k}px`,top:`${A*48+12}px`},title:`${_.type==="work"?"":""}: ${_.start.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})} - ${_.end?_.end.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):""}${_.location?` (${_.location})`:""}`,children:o.jsxs("div",{className:"text-xs px-1 truncate",children:[_.type==="work"?"":"",!_.end&&" ()"]})},`${_.start.getTime()}-${_.type}`)},P=_=>new Date(_).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"long"});return d?o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]})}):o.jsxs("div",{className:"bg-white rounded-lg shadow",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Rt,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:P(c)})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{className:"w-4 h-4 text-gray-500"}),o.jsx("input",{type:"date",value:c,onChange:_=>u(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Cr,{className:"w-4 h-4 text-gray-500"}),o.jsxs("select",{value:i,onChange:_=>l(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"all",children:""}),s.map(_=>o.jsx("option",{value:_.id,children:_.brand_name&&_.store_name?`${_.brand_name} ${_.store_name}`:_.name},_.id))]})]})]})]})}),h&&o.jsx("div",{className:"p-6 bg-red-50 border-b border-red-200",children:o.jsx("div",{className:"text-sm text-red-700",children:h})}),o.jsx("div",{className:"p-6",children:r.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(zt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:i==="all"?"":""})]}):o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"relative overflow-x-auto border border-gray-200 rounded-lg",children:o.jsxs("div",{className:"flex",children:[o.jsxs("div",{className:"flex-none w-48 bg-gray-50 border-r border-gray-200",children:[o.jsxs("div",{className:"h-10 border-b border-gray-200 bg-gray-100 flex items-center px-4",children:[o.jsx(an,{className:"w-4 h-4 text-gray-500 mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:""})]}),r.map((_,A)=>o.jsx("div",{className:"h-12 flex items-center px-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[_.user.picture_url?o.jsx("img",{src:_.user.picture_url,alt:qe(_.user.display_name),className:"w-8 h-8 rounded-full object-cover flex-shrink-0 ring-2 ring-white shadow-sm"}):o.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(zt,{className:"w-4 h-4 text-gray-500"})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded-full flex-shrink-0",children:["#",_.user.employee_number||"---"]}),o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:qe(_.user.display_name)})]})})]})},_.user.id))]}),o.jsx("div",{className:"flex-1 overflow-x-auto",children:o.jsxs("div",{style:{width:`${w*96+96}px`},children:[o.jsx("div",{className:"h-10 border-b border-gray-200 bg-gray-50 flex",children:S()}),o.jsxs("div",{className:"relative bg-white",style:{height:`${r.length*48}px`},children:[N(),r.map((_,A)=>o.jsxs("div",{children:[o.jsx("div",{className:"absolute left-0 right-0 h-px bg-gray-100",style:{top:`${(A+1)*48}px`}}),_.workPeriods.map(E=>O(E,A))]},_.user.id))]})]})})]})}),o.jsxs("div",{className:"mt-6 flex items-center space-x-6 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded-sm"}),o.jsx("span",{className:"text-gray-600",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 bg-orange-100 border border-orange-300 rounded-sm"}),o.jsx("span",{className:"text-gray-600",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded-sm animate-pulse"}),o.jsx("span",{className:"text-gray-600",children:""})]})]})]})})]})},R1=()=>{const[e,t]=j.useState(null),[r,n]=j.useState(!0),[s,a]=j.useState(null),[i,l]=j.useState(new Date),[c,u]=j.useState(!0),d=async()=>{n(!0),a(null);try{const g=await T1.getAllKPIData();t(g),l(new Date)}catch(g){a(g instanceof Error?g.message:"KPI")}finally{n(!1)}};j.useEffect(()=>{d()},[]);const f=g=>`${g.toLocaleString()}`,h=g=>new Date(g).toLocaleString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=g=>g.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return r&&!e?o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"KPI..."})]})}):s&&!e?o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[o.jsx("div",{className:"text-sm text-red-700",children:s}),o.jsx("button",{onClick:d,className:"mt-2 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 text-sm rounded",children:""})]})}):o.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"KPI "}),o.jsxs("p",{className:"text-gray-600",children:[": ",p(i)]})]}),o.jsx("button",{onClick:d,disabled:r,className:`px-4 py-2 text-white text-sm font-medium rounded-lg transition-colors ${r?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:r?"...":""})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(zt,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e==null?void 0:e.totalUsers})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(Qx,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e==null?void 0:e.todayAttendance})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:o.jsx(an,{className:"w-6 h-6 text-orange-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e==null?void 0:e.currentlyWorking})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(zi,{className:"w-6 h-6 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f((e==null?void 0:e.todaySales)||0)})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:o.jsx(Dc,{className:"w-6 h-6 text-indigo-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f((e==null?void 0:e.avgSalesPerUser)||0)})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-cyan-100 rounded-lg",children:o.jsx(Rt,{className:"w-6 h-6 text-cyan-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e==null?void 0:e.completedShifts," / ",e==null?void 0:e.totalShifts]})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:o.jsx(ug,{className:"w-6 h-6 text-emerald-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e==null?void 0:e.monthlyAttendanceRate,"%"]})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-rose-100 rounded-lg",children:o.jsx(Hu,{className:"w-6 h-6 text-rose-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e==null?void 0:e.avgWorkingHours,"h"]})]})]})})]}),o.jsx(A1,{}),o.jsxs("div",{className:"bg-white rounded-lg shadow",children:[o.jsx("div",{className:"p-6 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>u(!c),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Lx,{className:"w-5 h-5 text-gray-500 mr-2"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"flex items-center text-gray-400",children:c?o.jsx(fg,{className:"w-5 h-5"}):o.jsx(Ux,{className:"w-5 h-5"})})]})}),!c&&o.jsx("div",{className:"p-6",children:e!=null&&e.recentActivity&&e.recentActivity.length>0?o.jsx("div",{className:"space-y-4",children:e.recentActivity.map((g,x)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.user_display_name}),o.jsx("p",{className:"text-sm text-gray-500",children:g.action})]})]}),o.jsx("div",{className:"text-xs text-gray-400",children:h(g.timestamp)})]},x))}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:""})})]})]})},L1=({selectedUserId:e,onUserSelect:t,placeholder:r=""})=>{const[n,s]=j.useState([]),[a,i]=j.useState(!0),[l,c]=j.useState(null),[u,d]=j.useState(!1);j.useEffect(()=>{f()},[]);const f=async()=>{i(!0),c(null);try{const{data:g,error:x}=await z.from("users").select("*").order("display_name",{ascending:!0});if(x)throw x;s(g||[])}catch(g){c(g instanceof Error?g.message:"")}finally{i(!1)}},h=n.find(g=>g.id===e),p=g=>{t(g),d(!1)};return a?o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent mr-2"}),o.jsx("span",{className:"text-gray-500",children:"..."})]})}):l?o.jsx("div",{className:"relative",children:o.jsx("div",{className:"w-full px-4 py-3 bg-red-50 border border-red-300 rounded-lg",children:o.jsx("span",{className:"text-red-700 text-sm",children:l})})}):o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",onClick:()=>d(!u),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ls,{className:"w-4 h-4 text-gray-400 mr-3"}),o.jsx("span",{className:h?"text-gray-900":"text-gray-500",children:h?qe(h.display_name):r})]}),o.jsx(fg,{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${u?"transform rotate-180":""}`})]}),u&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),o.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[o.jsxs("button",{type:"button",onClick:()=>p(null),className:`w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center ${e?"text-gray-900":"bg-blue-50 text-blue-700"}`,children:[o.jsx(Ls,{className:"w-4 h-4 mr-3 text-gray-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:""}),o.jsx("div",{className:"text-sm text-gray-500",children:""})]})]}),n.map(g=>o.jsxs("button",{type:"button",onClick:()=>p(g.id),className:`w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center ${e===g.id?"bg-blue-50 text-blue-700":"text-gray-900"}`,children:[g.picture_url?o.jsx("img",{src:g.picture_url,alt:qe(g.display_name),className:"w-8 h-8 rounded-full mr-3 object-cover"}):o.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-3 flex items-center justify-center",children:o.jsx(Ls,{className:"w-4 h-4 text-gray-500"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:qe(g.display_name)}),o.jsxs("div",{className:"text-sm text-gray-500 truncate",children:["ID: ",g.id.slice(0,8),"..."]})]}),e===g.id&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2"})]},g.id)),n.length===0&&o.jsx("div",{className:"px-4 py-3 text-gray-500 text-center",children:""})]})]})]})},$1=({selectedUserId:e,onShiftEdit:t,onAddShift:r})=>{const[n,s]=j.useState(new Date),[a,i]=j.useState([]),[l,c]=j.useState(!1),[u,d]=j.useState(null);j.useEffect(()=>{f()},[n,e]);const f=async()=>{c(!0),d(null);try{const b=new Date(n.getFullYear(),n.getMonth(),1),S=new Date(n.getFullYear(),n.getMonth()+1,0);let N=z.from("shifts").select(`
          *,
          users (
            display_name,
            picture_url
          )
        `).gte("shift_date",b.toISOString().split("T")[0]).lte("shift_date",S.toISOString().split("T")[0]).order("shift_date",{ascending:!0});e&&(N=N.eq("user_id",e));const{data:D,error:O}=await N;if(O)throw O;i(D||[])}catch(b){d(b instanceof Error?b.message:"")}finally{c(!1)}},h=async b=>{try{const{error:S}=await z.from("shifts").update({shift_status:"confirmed"}).eq("id",b);if(S)throw S;i(N=>N.map(D=>D.id===b?{...D,shift_status:"confirmed"}:D))}catch(S){console.error("Shift approval error:",S),alert("")}},p=()=>{const b=n.getFullYear(),S=n.getMonth(),N=new Date(b,S,1),O=new Date(b,S+1,0).getDate(),P=N.getDay(),_=[];for(let E=P-1;E>=0;E--){const R=new Date(b,S,-E);_.push({date:R,isCurrentMonth:!1})}for(let E=1;E<=O;E++){const R=new Date(b,S,E);_.push({date:R,isCurrentMonth:!0})}const A=42-_.length;for(let E=1;E<=A;E++){const R=new Date(b,S+1,E);_.push({date:R,isCurrentMonth:!1})}return _},g=b=>{const S=b.toISOString().split("T")[0];return a.filter(N=>N.shift_date===S)},x=b=>({normal:"",early:"",late:"",off:""})[b]||b,w=b=>({normal:"bg-blue-100 text-blue-800",early:"bg-yellow-100 text-yellow-800",late:"bg-purple-100 text-purple-800",off:"bg-gray-100 text-gray-800"})[b]||"bg-gray-100 text-gray-800",y=b=>{s(S=>{const N=new Date(S);return b==="prev"?N.setMonth(N.getMonth()-1):N.setMonth(N.getMonth()+1),N})},m=["1","2","3","4","5","6","7","8","9","10","11","12"],v=["","","","","","",""];return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Rt,{className:"w-6 h-6 text-gray-500"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>y("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(qu,{className:"w-5 h-5 text-gray-600"})}),o.jsx("div",{className:"px-4 py-2 bg-gray-50 rounded-lg min-w-[120px] text-center",children:o.jsxs("span",{className:"text-lg font-medium text-gray-900",children:[n.getFullYear(),"",m[n.getMonth()]]})}),o.jsx("button",{onClick:()=>y("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Gu,{className:"w-5 h-5 text-gray-600"})})]})]}),e&&o.jsx("div",{className:"mt-2 text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"p-6",children:[u&&o.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:u})}),l?o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]}):o.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[v.map((b,S)=>o.jsx("div",{className:`p-3 text-center text-sm font-medium ${S===0?"text-red-600":S===6?"text-blue-600":"text-gray-700"}`,children:b},b)),p().map(({date:b,isCurrentMonth:S},N)=>{const D=g(b),O=b.toDateString()===new Date().toDateString();return o.jsxs("div",{className:`min-h-[120px] border border-gray-200 p-2 relative group ${S?"bg-white":"bg-gray-50"} ${O?"ring-2 ring-blue-500":""}`,children:[o.jsx("div",{className:`text-sm font-medium mb-2 ${S?"text-gray-900":"text-gray-400"} ${N%7===0?"text-red-600":N%7===6?"text-blue-600":""}`,children:b.getDate()}),o.jsxs("div",{className:"space-y-1 flex-1",children:[D.map(P=>{var _;return o.jsx("div",{className:"relative group",children:o.jsxs("div",{className:`text-xs px-2 py-1 rounded cursor-pointer hover:shadow-sm transition-shadow ${w(P.shift_type)}`,onClick:()=>t(P),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"truncate",children:!e&&((_=P.users)==null?void 0:_.display_name)&&o.jsx("span",{className:"font-medium",children:O1(P.users.display_name,4)})}),o.jsxs("div",{className:"flex items-center space-x-1",children:[P.shift_status==="adjusting"&&o.jsx("button",{onClick:A=>{A.stopPropagation(),h(P.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-0.5 hover:bg-green-200 rounded",title:"",children:o.jsx(dg,{className:"w-3 h-3 text-green-600"})}),o.jsx(Jx,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-1",children:[o.jsx("span",{children:x(P.shift_type)}),o.jsxs("div",{className:"flex items-center space-x-1",children:[P.shift_status==="adjusting"&&o.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full",title:""}),P.shift_status==="confirmed"&&o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full",title:""})]})]}),(P.start_time||P.end_time)&&o.jsxs("div",{className:"text-xs text-gray-600 mt-1 flex items-center",children:[o.jsx(an,{className:"w-3 h-3 mr-1"}),P.start_time||"--","",P.end_time||"--"]})]})},P.id)}),e&&r&&S&&o.jsxs("button",{onClick:()=>r(b),className:"w-full mt-1 p-1 text-xs text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors opacity-0 group-hover:opacity-100 flex items-center justify-center",title:"",children:[o.jsx(Ku,{className:"w-3 h-3 mr-1"}),""]})]})]},N)})]})]}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:o.jsxs("div",{className:"flex flex-wrap items-center space-x-6",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:""})]})]})})]})},M1=({isOpen:e,onClose:t,shift:r,onSave:n})=>{const[s,a]=j.useState({shift_date:"",shift_type:"normal",shift_status:"adjusting",start_time:"",end_time:"",note:""}),[i,l]=j.useState(!1),[c,u]=j.useState(null),[d,f]=j.useState(null);j.useEffect(()=>{r&&e&&(a({shift_date:r.shift_date,shift_type:r.shift_type,shift_status:r.shift_status,start_time:r.start_time||"",end_time:r.end_time||"",note:r.note||""}),h(r.user_id))},[r,e]),j.useEffect(()=>{u(null)},[s]);const h=async m=>{try{const{data:v,error:b}=await z.from("users").select("display_name, picture_url").eq("id",m).single();if(b)throw b;f(v)}catch(v){console.error("User info fetch error:",v)}},p=(m,v)=>{a(b=>({...b,[m]:v}))},g=async()=>{if(r){l(!0),u(null);try{const m={user_id:r.user_id,shift_date:s.shift_date,shift_type:s.shift_type,shift_status:s.shift_status,start_time:s.start_time||null,end_time:s.end_time||null,note:s.note||null,updated_at:new Date().toISOString()};if(r.id){const{error:v}=await z.from("shifts").update(m).eq("id",r.id);if(v)throw v}else{const{error:v}=await z.from("shifts").insert([{...m,created_at:new Date().toISOString()}]);if(v)throw v}n(),t()}catch(m){u(m instanceof Error?m.message:"")}finally{l(!1)}}},x=async()=>{if(r&&window.confirm("")){l(!0),u(null);try{const{error:m}=await z.from("shifts").delete().eq("id",r.id);if(m)throw m;n(),t()}catch(m){u(m instanceof Error?m.message:"")}finally{l(!1)}}},w=async()=>{if(r){l(!0),u(null);try{const{error:m}=await z.from("shifts").update({shift_status:"confirmed",updated_at:new Date().toISOString()}).eq("id",r.id);if(m)throw m;a(v=>({...v,shift_status:"confirmed"})),n()}catch(m){u(m instanceof Error?m.message:"")}finally{l(!1)}}},y=m=>new Date(m).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short"});return!e||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Rt,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r!=null&&r.id?"":""}),o.jsx("p",{className:"text-sm text-gray-600",children:y(r.shift_date)})]})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[d&&o.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[d.picture_url?o.jsx("img",{src:d.picture_url,alt:qe(d.display_name),className:"w-10 h-10 rounded-full object-cover"}):o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:o.jsx(Ls,{className:"w-5 h-5 text-gray-500"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:qe(d.display_name)}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ID: ",r.user_id.slice(0,8),"..."]})]})]})}),c&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:c})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"date",value:s.shift_date,onChange:m=>p("shift_date",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:s.shift_type,onChange:m=>p("shift_type",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"normal",children:""}),o.jsx("option",{value:"early",children:""}),o.jsx("option",{value:"late",children:""}),o.jsx("option",{value:"off",children:""})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"time",value:s.start_time,onChange:m=>p("start_time",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"time",value:s.end_time,onChange:m=>p("end_time",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:s.shift_status,onChange:m=>p("shift_status",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"adjusting",children:""}),o.jsx("option",{value:"confirmed",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("textarea",{value:s.note,onChange:m=>p("note",m.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:""})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[o.jsxs("div",{className:"flex space-x-3",children:[s.shift_status==="adjusting"&&o.jsxs("button",{onClick:w,disabled:i,className:"flex items-center px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(an,{className:"w-4 h-4 mr-2"}),""]}),(r==null?void 0:r.id)&&o.jsxs("button",{onClick:x,disabled:i,className:"flex items-center px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Ju,{className:"w-4 h-4 mr-2"}),""]})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,disabled:i,className:"px-4 py-2 text-gray-700 font-medium border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),o.jsxs("button",{onClick:g,disabled:i,className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),i?"...":""]})]})]})]})]})})},B1=()=>{const[e,t]=j.useState(null),[r,n]=j.useState(null),[s,a]=j.useState(!1),[i,l]=j.useState(0),[c,u]=j.useState(null),d=x=>{t(x)},f=x=>{n(x),a(!0)},h=()=>{a(!1),n(null)},p=()=>{l(x=>x+1),a(!1),n(null),u(null)},g=x=>{if(!e){alert("");return}const w={id:"",user_id:e,shift_date:x.toISOString().split("T")[0],shift_type:"normal",shift_status:"confirmed",start_time:null,end_time:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(w),u(x),a(!0)};return o.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx(Kx,{className:"w-6 h-6 text-blue-600"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),o.jsx("p",{className:"text-gray-600",children:""})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(zt,{className:"w-5 h-5 text-gray-500"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"max-w-md",children:o.jsx(L1,{selectedUserId:e,onUserSelect:d,placeholder:""})}),e&&o.jsx("div",{className:"mt-3 text-sm text-gray-600",children:""})]}),o.jsx($1,{selectedUserId:e,onShiftEdit:f,onAddShift:g},i),o.jsx(M1,{isOpen:s,onClose:h,shift:r,onSave:p})]})};function Fc(e,t){return Fc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Fc(e,t)}function Wg(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Fc(e,t)}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G.apply(null,arguments)}function oa(e){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oa(e)}function U1(e,t){if(oa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(oa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F1(e){var t=U1(e,"string");return oa(t)=="symbol"?t:t+""}function z1(e,t,r){return(t=F1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ch(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ch(Object(r),!0).forEach(function(n){z1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ch(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Je(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var dh=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Sl=function(){return Math.random().toString(36).substring(7).split("").join(".")},fh={INIT:"@@redux/INIT"+Sl(),REPLACE:"@@redux/REPLACE"+Sl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Sl()}};function W1(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Hg(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Je(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Je(1));return r(Hg)(e,t)}if(typeof e!="function")throw new Error(Je(2));var s=e,a=t,i=[],l=i,c=!1;function u(){l===i&&(l=i.slice())}function d(){if(c)throw new Error(Je(3));return a}function f(x){if(typeof x!="function")throw new Error(Je(4));if(c)throw new Error(Je(5));var w=!0;return u(),l.push(x),function(){if(w){if(c)throw new Error(Je(6));w=!1,u();var m=l.indexOf(x);l.splice(m,1),i=null}}}function h(x){if(!W1(x))throw new Error(Je(7));if(typeof x.type>"u")throw new Error(Je(8));if(c)throw new Error(Je(9));try{c=!0,a=s(a,x)}finally{c=!1}for(var w=i=l,y=0;y<w.length;y++){var m=w[y];m()}return x}function p(x){if(typeof x!="function")throw new Error(Je(10));s=x,h({type:fh.REPLACE})}function g(){var x,w=f;return x={subscribe:function(m){if(typeof m!="object"||m===null)throw new Error(Je(11));function v(){m.next&&m.next(d())}v();var b=w(v);return{unsubscribe:b}}},x[dh]=function(){return this},x}return h({type:fh.INIT}),n={dispatch:h,subscribe:f,getState:d,replaceReducer:p},n[dh]=g,n}function hh(e,t){return function(){return t(e.apply(this,arguments))}}function ph(e,t){if(typeof e=="function")return hh(e,t);if(typeof e!="object"||e===null)throw new Error(Je(16));var r={};for(var n in e){var s=e[n];typeof s=="function"&&(r[n]=hh(s,t))}return r}function qg(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}function H1(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var s=n.apply(void 0,arguments),a=function(){throw new Error(Je(15))},i={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=t.map(function(c){return c(i)});return a=qg.apply(void 0,l)(s.dispatch),uh(uh({},s),{},{dispatch:a})}}}var Gg=se.createContext(null);function q1(e){e()}var Vg=q1,G1=function(t){return Vg=t},V1=function(){return Vg};function K1(){var e=V1(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var s=t;s;)s.callback(),s=s.next})},get:function(){for(var s=[],a=t;a;)s.push(a),a=a.next;return s},subscribe:function(s){var a=!0,i=r={callback:s,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var mh={notify:function(){},get:function(){return[]}};function Kg(e,t){var r,n=mh;function s(f){return c(),n.subscribe(f)}function a(){n.notify()}function i(){d.onStateChange&&d.onStateChange()}function l(){return!!r}function c(){r||(r=t?t.addNestedSub(i):e.subscribe(i),n=K1())}function u(){r&&(r(),r=void 0,n.clear(),n=mh)}var d={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:i,isSubscribed:l,trySubscribe:c,tryUnsubscribe:u,getListeners:function(){return n}};return d}var Jg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect;function J1(e){var t=e.store,r=e.context,n=e.children,s=j.useMemo(function(){var l=Kg(t);return{store:t,subscription:l}},[t]),a=j.useMemo(function(){return t.getState()},[t]);Jg(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,a]);var i=r||Gg;return se.createElement(i.Provider,{value:s},n)}function qi(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Qg={exports:{}},ne={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ce=typeof Symbol=="function"&&Symbol.for,td=Ce?Symbol.for("react.element"):60103,rd=Ce?Symbol.for("react.portal"):60106,So=Ce?Symbol.for("react.fragment"):60107,No=Ce?Symbol.for("react.strict_mode"):60108,ko=Ce?Symbol.for("react.profiler"):60114,Co=Ce?Symbol.for("react.provider"):60109,Eo=Ce?Symbol.for("react.context"):60110,nd=Ce?Symbol.for("react.async_mode"):60111,Do=Ce?Symbol.for("react.concurrent_mode"):60111,Io=Ce?Symbol.for("react.forward_ref"):60112,Po=Ce?Symbol.for("react.suspense"):60113,Q1=Ce?Symbol.for("react.suspense_list"):60120,To=Ce?Symbol.for("react.memo"):60115,Oo=Ce?Symbol.for("react.lazy"):60116,Y1=Ce?Symbol.for("react.block"):60121,X1=Ce?Symbol.for("react.fundamental"):60117,Z1=Ce?Symbol.for("react.responder"):60118,e_=Ce?Symbol.for("react.scope"):60119;function ft(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case td:switch(e=e.type,e){case nd:case Do:case So:case ko:case No:case Po:return e;default:switch(e=e&&e.$$typeof,e){case Eo:case Io:case Oo:case To:case Co:return e;default:return t}}case rd:return t}}}function Yg(e){return ft(e)===Do}ne.AsyncMode=nd;ne.ConcurrentMode=Do;ne.ContextConsumer=Eo;ne.ContextProvider=Co;ne.Element=td;ne.ForwardRef=Io;ne.Fragment=So;ne.Lazy=Oo;ne.Memo=To;ne.Portal=rd;ne.Profiler=ko;ne.StrictMode=No;ne.Suspense=Po;ne.isAsyncMode=function(e){return Yg(e)||ft(e)===nd};ne.isConcurrentMode=Yg;ne.isContextConsumer=function(e){return ft(e)===Eo};ne.isContextProvider=function(e){return ft(e)===Co};ne.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===td};ne.isForwardRef=function(e){return ft(e)===Io};ne.isFragment=function(e){return ft(e)===So};ne.isLazy=function(e){return ft(e)===Oo};ne.isMemo=function(e){return ft(e)===To};ne.isPortal=function(e){return ft(e)===rd};ne.isProfiler=function(e){return ft(e)===ko};ne.isStrictMode=function(e){return ft(e)===No};ne.isSuspense=function(e){return ft(e)===Po};ne.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===So||e===Do||e===ko||e===No||e===Po||e===Q1||typeof e=="object"&&e!==null&&(e.$$typeof===Oo||e.$$typeof===To||e.$$typeof===Co||e.$$typeof===Eo||e.$$typeof===Io||e.$$typeof===X1||e.$$typeof===Z1||e.$$typeof===e_||e.$$typeof===Y1)};ne.typeOf=ft;Qg.exports=ne;var t_=Qg.exports,sd=t_,r_={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n_={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s_={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xg={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ad={};ad[sd.ForwardRef]=s_;ad[sd.Memo]=Xg;function gh(e){return sd.isMemo(e)?Xg:ad[e.$$typeof]||r_}var a_=Object.defineProperty,i_=Object.getOwnPropertyNames,vh=Object.getOwnPropertySymbols,o_=Object.getOwnPropertyDescriptor,l_=Object.getPrototypeOf,yh=Object.prototype;function Zg(e,t,r){if(typeof t!="string"){if(yh){var n=l_(t);n&&n!==yh&&Zg(e,n,r)}var s=i_(t);vh&&(s=s.concat(vh(t)));for(var a=gh(e),i=gh(t),l=0;l<s.length;++l){var c=s[l];if(!n_[c]&&!(r&&r[c])&&!(i&&i[c])&&!(a&&a[c])){var u=o_(t,c);try{a_(e,c,u)}catch{}}}}return e}var c_=Zg;const xh=Kc(c_);var ev={exports:{}},ae={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ao=60103,Ro=60106,wa=60107,_a=60108,ja=60114,Sa=60109,Na=60110,ka=60112,Ca=60113,id=60120,Ea=60115,Da=60116,tv=60121,rv=60122,nv=60117,sv=60129,av=60131;if(typeof Symbol=="function"&&Symbol.for){var De=Symbol.for;Ao=De("react.element"),Ro=De("react.portal"),wa=De("react.fragment"),_a=De("react.strict_mode"),ja=De("react.profiler"),Sa=De("react.provider"),Na=De("react.context"),ka=De("react.forward_ref"),Ca=De("react.suspense"),id=De("react.suspense_list"),Ea=De("react.memo"),Da=De("react.lazy"),tv=De("react.block"),rv=De("react.server.block"),nv=De("react.fundamental"),sv=De("react.debug_trace_mode"),av=De("react.legacy_hidden")}function Lt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ao:switch(e=e.type,e){case wa:case ja:case _a:case Ca:case id:return e;default:switch(e=e&&e.$$typeof,e){case Na:case ka:case Da:case Ea:case Sa:return e;default:return t}}case Ro:return t}}}var u_=Sa,d_=Ao,f_=ka,h_=wa,p_=Da,m_=Ea,g_=Ro,v_=ja,y_=_a,x_=Ca;ae.ContextConsumer=Na;ae.ContextProvider=u_;ae.Element=d_;ae.ForwardRef=f_;ae.Fragment=h_;ae.Lazy=p_;ae.Memo=m_;ae.Portal=g_;ae.Profiler=v_;ae.StrictMode=y_;ae.Suspense=x_;ae.isAsyncMode=function(){return!1};ae.isConcurrentMode=function(){return!1};ae.isContextConsumer=function(e){return Lt(e)===Na};ae.isContextProvider=function(e){return Lt(e)===Sa};ae.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ao};ae.isForwardRef=function(e){return Lt(e)===ka};ae.isFragment=function(e){return Lt(e)===wa};ae.isLazy=function(e){return Lt(e)===Da};ae.isMemo=function(e){return Lt(e)===Ea};ae.isPortal=function(e){return Lt(e)===Ro};ae.isProfiler=function(e){return Lt(e)===ja};ae.isStrictMode=function(e){return Lt(e)===_a};ae.isSuspense=function(e){return Lt(e)===Ca};ae.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===wa||e===ja||e===sv||e===_a||e===Ca||e===id||e===av||typeof e=="object"&&e!==null&&(e.$$typeof===Da||e.$$typeof===Ea||e.$$typeof===Sa||e.$$typeof===Na||e.$$typeof===ka||e.$$typeof===nv||e.$$typeof===tv||e[0]===rv)};ae.typeOf=Lt;ev.exports=ae;var b_=ev.exports,w_=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],__=["reactReduxForwardedRef"],j_=[],S_=[null,null];function N_(e,t){var r=e[1];return[t.payload,r+1]}function bh(e,t,r){Jg(function(){return e.apply(void 0,t)},r)}function k_(e,t,r,n,s,a,i){e.current=n,t.current=s,r.current=!1,a.current&&(a.current=null,i())}function C_(e,t,r,n,s,a,i,l,c,u){if(e){var d=!1,f=null,h=function(){if(!d){var x=t.getState(),w,y;try{w=n(x,s.current)}catch(m){y=m,f=m}y||(f=null),w===a.current?i.current||c():(a.current=w,l.current=w,i.current=!0,u({type:"STORE_UPDATED",payload:{error:y}}))}};r.onStateChange=h,r.trySubscribe(),h();var p=function(){if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return p}}var E_=function(){return[null,0]};function D_(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,s=n===void 0?function(v){return"ConnectAdvanced("+v+")"}:n,a=r.methodName,i=a===void 0?"connectAdvanced":a,l=r.renderCountProp,c=l===void 0?void 0:l,u=r.shouldHandleStateChanges,d=u===void 0?!0:u,f=r.storeKey,h=f===void 0?"store":f;r.withRef;var p=r.forwardRef,g=p===void 0?!1:p,x=r.context,w=x===void 0?Gg:x,y=qi(r,w_),m=w;return function(b){var S=b.displayName||b.name||"Component",N=s(S),D=G({},y,{getDisplayName:s,methodName:i,renderCountProp:c,shouldHandleStateChanges:d,storeKey:h,displayName:N,wrappedComponentName:S,WrappedComponent:b}),O=y.pure;function P(k){return e(k.dispatch,D)}var _=O?j.useMemo:function(k){return k()};function A(k){var C=j.useMemo(function(){var $=k.reactReduxForwardedRef,H=qi(k,__);return[k.context,$,H]},[k]),I=C[0],B=C[1],T=C[2],L=j.useMemo(function(){return I&&I.Consumer&&b_.isContextConsumer(se.createElement(I.Consumer,null))?I:m},[I,m]),U=j.useContext(L),V=!!k.store&&!!k.store.getState&&!!k.store.dispatch;U&&U.store;var J=V?k.store:U.store,ge=j.useMemo(function(){return P(J)},[J]),te=j.useMemo(function(){if(!d)return S_;var $=Kg(J,V?null:U.subscription),H=$.notifyNestedSubs.bind($);return[$,H]},[J,V,U]),Ee=te[0],xe=te[1],St=j.useMemo(function(){return V?U:G({},U,{subscription:Ee})},[V,U,Ee]),cn=j.useReducer(N_,j_,E_),ss=cn[0],rr=ss[0],as=cn[1];if(rr&&rr.error)throw rr.error;var Ta=j.useRef(),is=j.useRef(T),Rr=j.useRef(),Oa=j.useRef(!1),Lr=_(function(){return Rr.current&&T===is.current?Rr.current:ge(J.getState(),T)},[J,rr,T]);bh(k_,[is,Ta,Oa,T,Lr,Rr,xe]),bh(C_,[d,J,Ee,ge,is,Ta,Oa,Rr,xe,as],[J,Ee,ge]);var os=j.useMemo(function(){return se.createElement(b,G({},Lr,{ref:B}))},[B,b,Lr]),Wo=j.useMemo(function(){return d?se.createElement(L.Provider,{value:St},os):os},[L,os,St]);return Wo}var E=O?se.memo(A):A;if(E.WrappedComponent=b,E.displayName=A.displayName=N,g){var R=se.forwardRef(function(C,I){return se.createElement(E,G({},C,{reactReduxForwardedRef:I}))});return R.displayName=N,R.WrappedComponent=b,xh(R,b)}return xh(E,b)}}function wh(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Nl(e,t){if(wh(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!wh(e[r[s]],t[r[s]]))return!1;return!0}function I_(e,t){var r={},n=function(i){var l=e[i];typeof l=="function"&&(r[i]=function(){return t(l.apply(void 0,arguments))})};for(var s in e)n(s);return r}function od(e){return function(r,n){var s=e(r,n);function a(){return s}return a.dependsOnOwnProps=!1,a}}function _h(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function iv(e,t){return function(n,s){s.displayName;var a=function(l,c){return a.dependsOnOwnProps?a.mapToProps(l,c):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,c){a.mapToProps=e,a.dependsOnOwnProps=_h(e);var u=a(l,c);return typeof u=="function"&&(a.mapToProps=u,a.dependsOnOwnProps=_h(u),u=a(l,c)),u},a}}function P_(e){return typeof e=="function"?iv(e):void 0}function T_(e){return e?void 0:od(function(t){return{dispatch:t}})}function O_(e){return e&&typeof e=="object"?od(function(t){return I_(e,t)}):void 0}const A_=[P_,T_,O_];function R_(e){return typeof e=="function"?iv(e):void 0}function L_(e){return e?void 0:od(function(){return{}})}const $_=[R_,L_];function M_(e,t,r){return G({},r,e,t)}function B_(e){return function(r,n){n.displayName;var s=n.pure,a=n.areMergedPropsEqual,i=!1,l;return function(u,d,f){var h=e(u,d,f);return i?(!s||!a(h,l))&&(l=h):(i=!0,l=h),l}}}function U_(e){return typeof e=="function"?B_(e):void 0}function F_(e){return e?void 0:function(){return M_}}const z_=[U_,F_];var W_=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function H_(e,t,r,n){return function(a,i){return r(e(a,i),t(n,i),i)}}function q_(e,t,r,n,s){var a=s.areStatesEqual,i=s.areOwnPropsEqual,l=s.areStatePropsEqual,c=!1,u,d,f,h,p;function g(v,b){return u=v,d=b,f=e(u,d),h=t(n,d),p=r(f,h,d),c=!0,p}function x(){return f=e(u,d),t.dependsOnOwnProps&&(h=t(n,d)),p=r(f,h,d),p}function w(){return e.dependsOnOwnProps&&(f=e(u,d)),t.dependsOnOwnProps&&(h=t(n,d)),p=r(f,h,d),p}function y(){var v=e(u,d),b=!l(v,f);return f=v,b&&(p=r(f,h,d)),p}function m(v,b){var S=!i(b,d),N=!a(v,u,b,d);return u=v,d=b,S&&N?x():S?w():N?y():p}return function(b,S){return c?m(b,S):g(b,S)}}function G_(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,s=t.initMergeProps,a=qi(t,W_),i=r(e,a),l=n(e,a),c=s(e,a),u=a.pure?q_:H_;return u(i,l,c,e,a)}var V_=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function kl(e,t,r){for(var n=t.length-1;n>=0;n--){var s=t[n](e);if(s)return s}return function(a,i){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+i.wrappedComponentName+".")}}function K_(e,t){return e===t}function J_(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?D_:r,s=t.mapStateToPropsFactories,a=s===void 0?$_:s,i=t.mapDispatchToPropsFactories,l=i===void 0?A_:i,c=t.mergePropsFactories,u=c===void 0?z_:c,d=t.selectorFactory,f=d===void 0?G_:d;return function(p,g,x,w){w===void 0&&(w={});var y=w,m=y.pure,v=m===void 0?!0:m,b=y.areStatesEqual,S=b===void 0?K_:b,N=y.areOwnPropsEqual,D=N===void 0?Nl:N,O=y.areStatePropsEqual,P=O===void 0?Nl:O,_=y.areMergedPropsEqual,A=_===void 0?Nl:_,E=qi(y,V_),R=kl(p,a,"mapStateToProps"),k=kl(g,l,"mapDispatchToProps"),C=kl(x,u,"mergeProps");return n(f,G({methodName:"connect",getDisplayName:function(B){return"Connect("+B+")"},shouldHandleStateChanges:!!p,initMapStateToProps:R,initMapDispatchToProps:k,initMergeProps:C,pure:v,areStatesEqual:S,areOwnPropsEqual:D,areStatePropsEqual:P,areMergedPropsEqual:A},E))}}const ov=J_();G1(Wu.unstable_batchedUpdates);function Q_(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function lv(e,t){var r=j.useState(function(){return{inputs:t,result:e()}})[0],n=j.useRef(!0),s=j.useRef(r),a=n.current||!!(t&&s.current.inputs&&Q_(t,s.current.inputs)),i=a?s.current:{inputs:t,result:e()};return j.useEffect(function(){n.current=!1,s.current=i},[i]),i.result}function Y_(e,t){return lv(function(){return e},t)}var Z=lv,q=Y_,X_="Invariant failed";function Z_(e,t){throw new Error(X_)}var Pt=function(t){var r=t.top,n=t.right,s=t.bottom,a=t.left,i=n-a,l=s-r,c={top:r,right:n,bottom:s,left:a,width:i,height:l,x:a,y:r,center:{x:(n+a)/2,y:(s+r)/2}};return c},ld=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},jh=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},ej=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Cl={top:0,right:0,bottom:0,left:0},cd=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?Cl:n,a=t.border,i=a===void 0?Cl:a,l=t.padding,c=l===void 0?Cl:l,u=Pt(ld(r,s)),d=Pt(jh(r,i)),f=Pt(jh(d,c));return{marginBox:u,borderBox:Pt(r),paddingBox:d,contentBox:f,margin:s,border:i,padding:c}},ht=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&Z_(),s},tj=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Gi=function(t,r){var n=t.borderBox,s=t.border,a=t.margin,i=t.padding,l=ej(n,r);return cd({borderBox:l,border:s,margin:a,padding:i})},Vi=function(t,r){return r===void 0&&(r=tj()),Gi(t,r)},cv=function(t,r){var n={top:ht(r.marginTop),right:ht(r.marginRight),bottom:ht(r.marginBottom),left:ht(r.marginLeft)},s={top:ht(r.paddingTop),right:ht(r.paddingRight),bottom:ht(r.paddingBottom),left:ht(r.paddingLeft)},a={top:ht(r.borderTopWidth),right:ht(r.borderRightWidth),bottom:ht(r.borderBottomWidth),left:ht(r.borderLeftWidth)};return cd({borderBox:t,margin:n,padding:s,border:a})},uv=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return cv(r,n)},Sh=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function rj(e,t){return!!(e===t||Sh(e)&&Sh(t))}function nj(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!rj(e[r],t[r]))return!1;return!0}function Ne(e,t){t===void 0&&(t=nj);var r,n=[],s,a=!1;function i(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return a&&r===this&&t(l,n)||(s=e.apply(this,l),a=!0,r=this,n=l),s}return i}var la=function(t){var r=[],n=null,s=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};function dv(e,t){}dv.bind(null,"warn");dv.bind(null,"error");function _r(){}function sj(e,t){return G({},e,{},t)}function yt(e,t,r){var n=t.map(function(s){var a=sj(r,s.options);return e.addEventListener(s.eventName,s.fn,a),function(){e.removeEventListener(s.eventName,s.fn,a)}});return function(){n.forEach(function(a){a()})}}var aj="Invariant failed";function Ki(e){this.message=e}Ki.prototype.toString=function(){return this.message};function F(e,t){throw new Ki(aj)}var ij=function(e){Wg(t,e);function t(){for(var n,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.callbacks=null,n.unbind=_r,n.onWindowError=function(l){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var u=l.error;u instanceof Ki&&l.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(l){n.callbacks=l},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=yt(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof Ki){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(se.Component),oj=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ji=function(t){return t+1},lj=function(t){return`
  You have lifted an item in position `+Ji(t.source.index)+`
`},fv=function(t,r){var n=t.droppableId===r.droppableId,s=Ji(t.index),a=Ji(r.index);return n?`
      You have moved the item from position `+s+`
      to position `+a+`
    `:`
    You have moved the item from position `+s+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},hv=function(t,r,n){var s=r.droppableId===n.droppableId;return s?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},cj=function(t){var r=t.destination;if(r)return fv(t.source,r);var n=t.combine;return n?hv(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},Nh=function(t){return`
  The item has returned to its starting position
  of `+Ji(t.index)+`
`},uj=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Nh(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+fv(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+hv(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Nh(t.source)+`
  `},gi={dragHandleUsageInstructions:oj,onDragStart:lj,onDragUpdate:cj,onDragEnd:uj},ke={x:0,y:0},Pe=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},at=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},jr=function(t,r){return t.x===r.x&&t.y===r.y},ts=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},rn=function(t,r,n){var s;return n===void 0&&(n=0),s={},s[t]=r,s[t==="x"?"y":"x"]=n,s},ca=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},kh=function(t,r){return Math.min.apply(Math,r.map(function(n){return ca(t,n)}))},pv=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},dj=function(e,t){var r=Pt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Ia=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Ch=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},fj={top:0,right:0,bottom:0,left:0},hj=function(t,r){return r?Ia(t,r.scroll.diff.displacement):t},pj=function(t,r,n){if(n&&n.increasedBy){var s;return G({},t,(s={},s[r.end]=t[r.end]+n.increasedBy[r.line],s))}return t},mj=function(t,r){return r&&r.shouldClipSubject?dj(r.pageMarginBox,t):Pt(t)},Gn=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,s=e.frame,a=hj(t.marginBox,s),i=pj(a,n,r),l=mj(i,s);return{page:t,withPlaceholder:r,active:l}},ud=function(e,t){e.frame||F();var r=e.frame,n=at(t,r.scroll.initial),s=ts(n),a=G({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}}),i=Gn({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),l=G({},e,{frame:a,subject:i});return l};function Qi(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function dd(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Ar(e,t){if(e.find)return e.find(t);var r=dd(e,t);if(r!==-1)return e[r]}function mv(e){return Array.prototype.slice.call(e)}var gv=Ne(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),vv=Ne(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Lo=Ne(function(e){return Qi(e)}),gj=Ne(function(e){return Qi(e)}),rs=Ne(function(e,t){var r=gj(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,s){return n.descriptor.index-s.descriptor.index});return r});function fd(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function $o(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Mo=Ne(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),vj=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,s=e.insideDestination,a=e.previousImpact;if(!n.isCombineEnabled)return null;var i=fd(a);if(!i)return null;function l(x){var w={type:"COMBINE",combine:{draggableId:x,droppableId:n.descriptor.id}};return G({},a,{at:w})}var c=a.displaced.all,u=c.length?c[0]:null;if(t)return u?l(u):null;var d=Mo(r,s);if(!u){if(!d.length)return null;var f=d[d.length-1];return l(f.descriptor.id)}var h=dd(d,function(x){return x.descriptor.id===u});h===-1&&F();var p=h-1;if(p<0)return null;var g=d[p];return l(g.descriptor.id)},ns=function(e,t){return e.descriptor.droppableId===t.descriptor.id},yv={point:ke,value:0},ua={invisible:{},visible:{},all:[]},yj={displaced:ua,displacedBy:yv,at:null},bt=function(e,t){return function(r){return e<=r&&r<=t}},xv=function(e){var t=bt(e.top,e.bottom),r=bt(e.left,e.right);return function(n){var s=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(s)return!0;var a=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right),l=a&&i;if(l)return!0;var c=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right,d=c&&u;if(d)return!0;var f=c&&i||u&&a;return f}},xj=function(e){var t=bt(e.top,e.bottom),r=bt(e.left,e.right);return function(n){var s=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return s}},hd={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},bv={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},bj=function(e){return function(t){var r=bt(t.top,t.bottom),n=bt(t.left,t.right);return function(s){return e===hd?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)}}},wj=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:ke;return Ia(t,n)},_j=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},jj=function(t,r,n){return n(r)(t)},pd=function(t){var r=t.target,n=t.destination,s=t.viewport,a=t.withDroppableDisplacement,i=t.isVisibleThroughFrameFn,l=a?wj(r,n):r;return _j(l,n,i)&&jj(l,s,i)},Sj=function(t){return pd(G({},t,{isVisibleThroughFrameFn:xv}))},wv=function(t){return pd(G({},t,{isVisibleThroughFrameFn:xj}))},Nj=function(t){return pd(G({},t,{isVisibleThroughFrameFn:bj(t.destination.axis)}))},kj=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var s=r.invisible,a=r.visible;if(s[t])return!1;var i=a[t];return i?i.shouldAnimate:!0};function Cj(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Pt(ld(r,n))}function da(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,s=e.viewport,a=e.forceShouldAnimate,i=e.last;return t.reduce(function(c,u){var d=Cj(u,n),f=u.descriptor.id;c.all.push(f);var h=Sj({target:d,destination:r,viewport:s,withDroppableDisplacement:!0});if(!h)return c.invisible[u.descriptor.id]=!0,c;var p=kj(f,i,a),g={draggableId:f,shouldAnimate:p};return c.visible[f]=g,c},{all:[],visible:{},invisible:{}})}function Ej(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Eh(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,s=e.destination,a=Ej(t,{inHomeList:r});return{displaced:ua,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Yi(e){var t=e.draggable,r=e.insideDestination,n=e.destination,s=e.viewport,a=e.displacedBy,i=e.last,l=e.index,c=e.forceShouldAnimate,u=ns(t,n);if(l==null)return Eh({insideDestination:r,inHomeList:u,displacedBy:a,destination:n});var d=Ar(r,function(x){return x.descriptor.index===l});if(!d)return Eh({insideDestination:r,inHomeList:u,displacedBy:a,destination:n});var f=Mo(t,r),h=r.indexOf(d),p=f.slice(h),g=da({afterDragging:p,destination:n,displacedBy:a,last:i,viewport:s.frame,forceShouldAnimate:c});return{displaced:g,displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function Dr(e,t){return!!t.effected[e]}var Dj=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,s=e.combine,a=e.afterCritical;if(!r.isCombineEnabled)return null;var i=s.draggableId,l=n[i],c=l.descriptor.index,u=Dr(i,a);return u?t?c:c-1:t?c+1:c},Ij=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,s=e.location;if(!n.length)return null;var a=s.index,i=t?a+1:a-1,l=n[0].descriptor.index,c=n[n.length-1].descriptor.index,u=r?c:c+1;return i<l||i>u?null:i},Pj=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,s=e.draggables,a=e.destination,i=e.insideDestination,l=e.previousImpact,c=e.viewport,u=e.afterCritical,d=l.at;if(d||F(),d.type==="REORDER"){var f=Ij({isMovingForward:t,isInHomeList:r,location:d.destination,insideDestination:i});return f==null?null:Yi({draggable:n,insideDestination:i,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:f})}var h=Dj({isMovingForward:t,destination:a,displaced:l.displaced,draggables:s,combine:d.combine,afterCritical:u});return h==null?null:Yi({draggable:n,insideDestination:i,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})},Tj=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,s=e.displacedBy,a=!!(t.visible[n]||t.invisible[n]);return Dr(n,r)?a?ke:ts(s.point):a?s.point:ke},Oj=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,s=$o(r);s||F();var a=s.draggableId,i=n[a].page.borderBox.center,l=Tj({displaced:r.displaced,afterCritical:t,combineWith:a,displacedBy:r.displacedBy});return Pe(i,l)},_v=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},Aj=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},md=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},Dh=function(t){var r=t.axis,n=t.moveRelativeTo,s=t.isMoving;return rn(r.line,n.marginBox[r.end]+_v(r,s),md(r,n.marginBox,s))},Ih=function(t){var r=t.axis,n=t.moveRelativeTo,s=t.isMoving;return rn(r.line,n.marginBox[r.start]-Aj(r,s),md(r,n.marginBox,s))},Rj=function(t){var r=t.axis,n=t.moveInto,s=t.isMoving;return rn(r.line,n.contentBox[r.start]+_v(r,s),md(r,n.contentBox,s))},Lj=function(e){var t=e.impact,r=e.draggable,n=e.draggables,s=e.droppable,a=e.afterCritical,i=rs(s.descriptor.id,n),l=r.page,c=s.axis;if(!i.length)return Rj({axis:c,moveInto:s.page,isMoving:l});var u=t.displaced,d=t.displacedBy,f=u.all[0];if(f){var h=n[f];if(Dr(f,a))return Ih({axis:c,moveRelativeTo:h.page,isMoving:l});var p=Gi(h.page,d.point);return Ih({axis:c,moveRelativeTo:p,isMoving:l})}var g=i[i.length-1];if(g.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Dr(g.descriptor.id,a)){var x=Gi(g.page,ts(a.displacedBy.point));return Dh({axis:c,moveRelativeTo:x,isMoving:l})}return Dh({axis:c,moveRelativeTo:g.page,isMoving:l})},zc=function(e,t){var r=e.frame;return r?Pe(t,r.scroll.diff.displacement):t},$j=function(t){var r=t.impact,n=t.draggable,s=t.droppable,a=t.draggables,i=t.afterCritical,l=n.page.borderBox.center,c=r.at;return!s||!c?l:c.type==="REORDER"?Lj({impact:r,draggable:n,draggables:a,droppable:s,afterCritical:i}):Oj({impact:r,draggables:a,afterCritical:i})},Bo=function(e){var t=$j(e),r=e.droppable,n=r?zc(r,t):t;return n},jv=function(e,t){var r=at(t,e.scroll.initial),n=ts(r),s=Pt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),a={frame:s,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return a};function Ph(e,t){return e.map(function(r){return t[r]})}function Mj(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var Bj=function(e){var t=e.impact,r=e.viewport,n=e.destination,s=e.draggables,a=e.maxScrollChange,i=jv(r,Pe(r.scroll.current,a)),l=n.frame?ud(n,Pe(n.frame.scroll.current,a)):n,c=t.displaced,u=da({afterDragging:Ph(c.all,s),destination:n,displacedBy:t.displacedBy,viewport:i.frame,last:c,forceShouldAnimate:!1}),d=da({afterDragging:Ph(c.all,s),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),f={},h={},p=[c,u,d];c.all.forEach(function(x){var w=Mj(x,p);if(w){h[x]=w;return}f[x]=!0});var g=G({},t,{displaced:{all:c.all,invisible:f,visible:h}});return g},Uj=function(e,t){return Pe(e.scroll.diff.displacement,t)},gd=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,s=Uj(n,t),a=at(s,r.page.borderBox.center);return Pe(r.client.borderBox.center,a)},Sv=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,s=e.viewport,a=e.withDroppableDisplacement,i=e.onlyOnMainAxis,l=i===void 0?!1:i,c=at(n,t.page.borderBox.center),u=Ia(t.page.borderBox,c),d={target:u,destination:r,withDroppableDisplacement:a,viewport:s};return l?Nj(d):wv(d)},Fj=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,s=e.draggables,a=e.previousImpact,i=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,u=e.afterCritical;if(!n.isEnabled)return null;var d=rs(n.descriptor.id,s),f=ns(r,n),h=vj({isMovingForward:t,draggable:r,destination:n,insideDestination:d,previousImpact:a})||Pj({isMovingForward:t,isInHomeList:f,draggable:r,draggables:s,destination:n,insideDestination:d,previousImpact:a,viewport:i,afterCritical:u});if(!h)return null;var p=Bo({impact:h,draggable:r,droppable:n,draggables:s,afterCritical:u}),g=Sv({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(g){var x=gd({pageBorderBoxCenter:p,draggable:r,viewport:i});return{clientSelection:x,impact:h,scrollJumpRequest:null}}var w=at(p,l),y=Bj({impact:h,viewport:i,destination:n,draggables:s,maxScrollChange:w});return{clientSelection:c,impact:y,scrollJumpRequest:w}},ze=function(t){var r=t.subject.active;return r||F(),r},zj=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,s=e.droppables,a=e.viewport,i=n.subject.active;if(!i)return null;var l=n.axis,c=bt(i[l.start],i[l.end]),u=Lo(s).filter(function(f){return f!==n}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return xv(a.frame)(ze(f))}).filter(function(f){var h=ze(f);return t?i[l.crossAxisEnd]<h[l.crossAxisEnd]:h[l.crossAxisStart]<i[l.crossAxisStart]}).filter(function(f){var h=ze(f),p=bt(h[l.start],h[l.end]);return c(h[l.start])||c(h[l.end])||p(i[l.start])||p(i[l.end])}).sort(function(f,h){var p=ze(f)[l.crossAxisStart],g=ze(h)[l.crossAxisStart];return t?p-g:g-p}).filter(function(f,h,p){return ze(f)[l.crossAxisStart]===ze(p[0])[l.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var d=u.filter(function(f){var h=bt(ze(f)[l.start],ze(f)[l.end]);return h(r[l.line])});return d.length===1?d[0]:d.length>1?d.sort(function(f,h){return ze(f)[l.start]-ze(h)[l.start]})[0]:u.sort(function(f,h){var p=kh(r,Ch(ze(f))),g=kh(r,Ch(ze(h)));return p!==g?p-g:ze(f)[l.start]-ze(h)[l.start]})[0]},Th=function(t,r){var n=t.page.borderBox.center;return Dr(t.descriptor.id,r)?at(n,r.displacedBy.point):n},Wj=function(t,r){var n=t.page.borderBox;return Dr(t.descriptor.id,r)?Ia(n,ts(r.displacedBy.point)):n},Hj=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,s=e.insideDestination,a=e.afterCritical,i=s.filter(function(l){return wv({target:Wj(l,a),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var u=ca(t,zc(n,Th(l,a))),d=ca(t,zc(n,Th(c,a)));return u<d?-1:d<u?1:l.descriptor.index-c.descriptor.index});return i[0]||null},Pa=Ne(function(t,r){var n=r[t.line];return{value:n,point:rn(t.line,n)}}),qj=function(t,r,n){var s=t.axis;if(t.descriptor.mode==="virtual")return rn(s.line,r[s.line]);var a=t.subject.page.contentBox[s.size],i=rs(t.descriptor.id,n),l=i.reduce(function(d,f){return d+f.client.marginBox[s.size]},0),c=l+r[s.line],u=c-a;return u<=0?null:rn(s.line,u)},Nv=function(t,r){return G({},t,{scroll:G({},t.scroll,{max:r})})},kv=function(t,r,n){var s=t.frame;ns(r,t)&&F(),t.subject.withPlaceholder&&F();var a=Pa(t.axis,r.displaceBy).point,i=qj(t,a,n),l={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!s){var c=Gn({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return G({},t,{subject:c})}var u=i?Pe(s.scroll.max,i):s.scroll.max,d=Nv(s,u),f=Gn({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:d});return G({},t,{subject:f,frame:d})},Gj=function(t){var r=t.subject.withPlaceholder;r||F();var n=t.frame;if(!n){var s=Gn({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return G({},t,{subject:s})}var a=r.oldFrameMaxScroll;a||F();var i=Nv(n,a),l=Gn({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return G({},t,{subject:l,frame:i})},Vj=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,s=e.draggable,a=e.draggables,i=e.destination,l=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var u={displaced:ua,displacedBy:yv,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},d=Bo({impact:u,draggable:s,droppable:i,draggables:a,afterCritical:c}),f=ns(s,i)?i:kv(i,s,a),h=Sv({draggable:s,destination:f,newPageBorderBoxCenter:d,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?u:null}var p=t[i.axis.line]<=r.page.borderBox.center[i.axis.line],g=function(){var w=r.descriptor.index;return r.descriptor.id===s.descriptor.id||p?w:w+1}(),x=Pa(i.axis,s.displaceBy);return Yi({draggable:s,insideDestination:n,destination:i,viewport:l,displacedBy:x,last:ua,index:g})},Kj=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,s=e.isOver,a=e.draggables,i=e.droppables,l=e.viewport,c=e.afterCritical,u=zj({isMovingForward:t,pageBorderBoxCenter:r,source:s,droppables:i,viewport:l});if(!u)return null;var d=rs(u.descriptor.id,a),f=Hj({pageBorderBoxCenter:r,viewport:l,destination:u,insideDestination:d,afterCritical:c}),h=Vj({previousPageBorderBoxCenter:r,destination:u,draggable:n,draggables:a,moveRelativeTo:f,insideDestination:d,viewport:l,afterCritical:c});if(!h)return null;var p=Bo({impact:h,draggable:n,droppable:u,draggables:a,afterCritical:c}),g=gd({pageBorderBoxCenter:p,draggable:n,viewport:l});return{clientSelection:g,impact:h,scrollJumpRequest:null}},ot=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Jj=function(t,r){var n=ot(t);return n?r[n]:null},Qj=function(e){var t=e.state,r=e.type,n=Jj(t.impact,t.dimensions.droppables),s=!!n,a=t.dimensions.droppables[t.critical.droppable.id],i=n||a,l=i.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!s)return null;var u=r==="MOVE_DOWN"||r==="MOVE_RIGHT",d=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,h=t.dimensions,p=h.draggables,g=h.droppables;return c?Fj({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,destination:i,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Kj({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,isOver:i,draggables:p,droppables:g,viewport:t.viewport,afterCritical:t.afterCritical})};function Wr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Cv(e){var t=bt(e.top,e.bottom),r=bt(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function Yj(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Xj(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,s=r.page.borderBox.center,a=n.map(function(i){var l=i.axis,c=rn(i.axis.line,t.center[l.line],i.page.borderBox.center[l.crossAxisLine]);return{id:i.descriptor.id,distance:ca(s,c)}}).sort(function(i,l){return l.distance-i.distance});return a[0]?a[0].id:null}function Zj(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,s=Lo(n).filter(function(a){if(!a.isEnabled)return!1;var i=a.subject.active;if(!i||!Yj(t,i))return!1;if(Cv(i)(t.center))return!0;var l=a.axis,c=i.center[l.crossAxisLine],u=t[l.crossAxisStart],d=t[l.crossAxisEnd],f=bt(i[l.crossAxisStart],i[l.crossAxisEnd]),h=f(u),p=f(d);return!h&&!p?!0:h?u<c:d>c});return s.length?s.length===1?s[0].descriptor.id:Xj({pageBorderBox:t,draggable:r,candidates:s}):null}var Ev=function(t,r){return Pt(Ia(t,r))},eS=function(e,t){var r=e.frame;return r?Ev(t,r.scroll.diff.value):t};function Dv(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function tS(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var rS=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,s=e.insideDestination,a=e.last,i=e.viewport,l=e.afterCritical,c=n.axis,u=Pa(n.axis,r.displaceBy),d=u.value,f=t[c.start],h=t[c.end],p=Mo(r,s),g=Ar(p,function(w){var y=w.descriptor.id,m=w.page.borderBox.center[c.line],v=Dr(y,l),b=Dv({displaced:a,id:y});return v?b?h<=m:f<m-d:b?h<=m+d:f<m}),x=tS({draggable:r,closest:g,inHomeList:ns(r,n)});return Yi({draggable:r,insideDestination:s,destination:n,viewport:i,last:a,displacedBy:u,index:x})},nS=4,sS=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,s=e.destination,a=e.insideDestination,i=e.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,c=Pa(s.axis,t.displaceBy),u=c.value,d=r[l.start],f=r[l.end],h=Mo(t,a),p=Ar(h,function(x){var w=x.descriptor.id,y=x.page.borderBox,m=y[l.size],v=m/nS,b=Dr(w,i),S=Dv({displaced:n.displaced,id:w});return b?S?f>y[l.start]+v&&f<y[l.end]-v:d>y[l.start]-u+v&&d<y[l.end]-u-v:S?f>y[l.start]+u+v&&f<y[l.end]+u-v:d>y[l.start]+v&&d<y[l.end]-v});if(!p)return null;var g={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:s.descriptor.id}}};return g},Iv=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,s=e.droppables,a=e.previousImpact,i=e.viewport,l=e.afterCritical,c=Ev(r.page.borderBox,t),u=Zj({pageBorderBox:c,draggable:r,droppables:s});if(!u)return yj;var d=s[u],f=rs(d.descriptor.id,n),h=eS(d,c);return sS({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:a,destination:d,insideDestination:f,afterCritical:l})||rS({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:d,insideDestination:f,last:a.displaced,viewport:i,afterCritical:l})},vd=function(e,t){var r;return G({},e,(r={},r[t.descriptor.id]=t,r))},aS=function(t){var r=t.previousImpact,n=t.impact,s=t.droppables,a=ot(r),i=ot(n);if(!a||a===i)return s;var l=s[a];if(!l.subject.withPlaceholder)return s;var c=Gj(l);return vd(s,c)},iS=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,s=e.previousImpact,a=e.impact,i=aS({previousImpact:s,impact:a,droppables:n}),l=ot(a);if(!l)return i;var c=n[l];if(ns(t,c)||c.subject.withPlaceholder)return i;var u=kv(c,t,r);return vd(i,u)},Us=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,s=e.viewport,a=e.impact,i=e.scrollJumpRequest,l=s||t.viewport,c=n||t.dimensions,u=r||t.current.client.selection,d=at(u,t.initial.client.selection),f={offset:d,selection:u,borderBoxCenter:Pe(t.initial.client.borderBoxCenter,d)},h={selection:Pe(f.selection,l.scroll.current),borderBoxCenter:Pe(f.borderBoxCenter,l.scroll.current),offset:Pe(f.offset,l.scroll.diff.value)},p={client:f,page:h};if(t.phase==="COLLECTING")return G({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:p});var g=c.draggables[t.critical.draggable.id],x=a||Iv({pageOffset:h.offset,draggable:g,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),w=iS({draggable:g,impact:x,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),y=G({},t,{current:p,dimensions:{draggables:c.draggables,droppables:w},impact:x,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null});return y};function oS(e,t){return e.map(function(r){return t[r]})}var Pv=function(e){var t=e.impact,r=e.viewport,n=e.draggables,s=e.destination,a=e.forceShouldAnimate,i=t.displaced,l=oS(i.all,n),c=da({afterDragging:l,destination:s,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:i});return G({},t,{displaced:c})},Tv=function(e){var t=e.impact,r=e.draggable,n=e.droppable,s=e.draggables,a=e.viewport,i=e.afterCritical,l=Bo({impact:t,draggable:r,draggables:s,droppable:n,afterCritical:i});return gd({pageBorderBoxCenter:l,draggable:r,viewport:a})},Ov=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&F();var s=t.impact,a=n||t.viewport,i=r||t.dimensions,l=i.draggables,c=i.droppables,u=l[t.critical.draggable.id],d=ot(s);d||F();var f=c[d],h=Pv({impact:s,viewport:a,destination:f,draggables:l}),p=Tv({impact:h,draggable:u,droppable:f,draggables:l,viewport:a,afterCritical:t.afterCritical});return Us({impact:h,clientSelection:p,state:t,dimensions:i,viewport:a})},lS=function(e){return{index:e.index,droppableId:e.droppableId}},Av=function(e){var t=e.draggable,r=e.home,n=e.draggables,s=e.viewport,a=Pa(r.axis,t.displaceBy),i=rs(r.descriptor.id,n),l=i.indexOf(t);l===-1&&F();var c=i.slice(l+1),u=c.reduce(function(p,g){return p[g.descriptor.id]=!0,p},{}),d={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:u},f=da({afterDragging:c,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),h={displaced:f,displacedBy:a,at:{type:"REORDER",destination:lS(t.descriptor)}};return{impact:h,afterCritical:d}},cS=function(e,t){return{draggables:e.draggables,droppables:vd(e.droppables,t)}},uS=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,s=Gi(t.client,r),a=Vi(s,n),i=G({},t,{placeholder:G({},t.placeholder,{client:s}),client:s,page:a});return i},dS=function(e){var t=e.frame;return t||F(),t},fS=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,s=n.scroll.diff.value;return t.map(function(a){var i=a.descriptor.droppableId,l=r[i],c=dS(l),u=c.scroll.diff.value,d=Pe(s,u),f=uS({draggable:a,offset:d,initialWindowScroll:n.scroll.initial});return f})},hS=function(e){var t=e.state,r=e.published,n=r.modified.map(function(v){var b=t.dimensions.droppables[v.droppableId],S=ud(b,v.scroll);return S}),s=G({},t.dimensions.droppables,{},gv(n)),a=vv(fS({additions:r.additions,updatedDroppables:s,viewport:t.viewport})),i=G({},t.dimensions.draggables,{},a);r.removals.forEach(function(v){delete i[v]});var l={droppables:s,draggables:i},c=ot(t.impact),u=c?l.droppables[c]:null,d=l.draggables[t.critical.draggable.id],f=l.droppables[t.critical.droppable.id],h=Av({draggable:d,home:f,draggables:i,viewport:t.viewport}),p=h.impact,g=h.afterCritical,x=u&&u.isCombineEnabled?t.impact:p,w=Iv({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:x,viewport:t.viewport,afterCritical:g}),y=G({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:w,onLiftImpact:p,dimensions:l,afterCritical:g,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return y;var m=G({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return m},Wc=function(t){return t.movementMode==="SNAP"},El=function(t,r,n){var s=cS(t.dimensions,r);return!Wc(t)||n?Us({state:t,dimensions:s}):Ov({state:t,dimensions:s})};function Dl(e){return e.isDragging&&e.movementMode==="SNAP"?G({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Oh={phase:"IDLE",completed:null,shouldFlush:!1},pS=function(e,t){if(e===void 0&&(e=Oh),t.type==="FLUSH")return G({},Oh,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&F();var r=t.payload,n=r.critical,s=r.clientSelection,a=r.viewport,i=r.dimensions,l=r.movementMode,c=i.draggables[n.draggable.id],u=i.droppables[n.droppable.id],d={selection:s,borderBoxCenter:c.client.borderBox.center,offset:ke},f={client:d,page:{selection:Pe(d.selection,a.scroll.initial),borderBoxCenter:Pe(d.selection,a.scroll.initial),offset:Pe(d.selection,a.scroll.diff.value)}},h=Lo(i.droppables).every(function(as){return!as.isFixedOnPage}),p=Av({draggable:c,home:u,draggables:i.draggables,viewport:a}),g=p.impact,x=p.afterCritical,w={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:i,initial:f,current:f,isWindowScrollAllowed:h,impact:g,afterCritical:x,onLiftImpact:g,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return w}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&F();var y=G({phase:"COLLECTING"},e,{phase:"COLLECTING"});return y}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||F(),hS({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Wr(e)||F();var m=t.payload.client;return jr(m,e.current.client.selection)?e:Us({state:e,clientSelection:m,impact:Wc(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Dl(e);Wr(e)||F();var v=t.payload,b=v.id,S=v.newScroll,N=e.dimensions.droppables[b];if(!N)return e;var D=ud(N,S);return El(e,D,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Wr(e)||F();var O=t.payload,P=O.id,_=O.isEnabled,A=e.dimensions.droppables[P];A||F(),A.isEnabled===_&&F();var E=G({},A,{isEnabled:_});return El(e,E,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Wr(e)||F();var R=t.payload,k=R.id,C=R.isCombineEnabled,I=e.dimensions.droppables[k];I||F(),I.isCombineEnabled===C&&F();var B=G({},I,{isCombineEnabled:C});return El(e,B,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Wr(e)||F(),e.isWindowScrollAllowed||F();var T=t.payload.newScroll;if(jr(e.viewport.scroll.current,T))return Dl(e);var L=jv(e.viewport,T);return Wc(e)?Ov({state:e,viewport:L}):Us({state:e,viewport:L})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Wr(e))return e;var U=t.payload.maxScroll;if(jr(U,e.viewport.scroll.max))return e;var V=G({},e.viewport,{scroll:G({},e.viewport.scroll,{max:U})});return G({phase:"DRAGGING"},e,{viewport:V})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&F();var J=Qj({state:e,type:t.type});return J?Us({state:e,impact:J.impact,clientSelection:J.clientSelection,scrollJumpRequest:J.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var ge=t.payload.reason;e.phase!=="COLLECTING"&&F();var te=G({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:ge});return te}if(t.type==="DROP_ANIMATE"){var Ee=t.payload,xe=Ee.completed,St=Ee.dropDuration,cn=Ee.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||F();var ss={phase:"DROP_ANIMATING",completed:xe,dropDuration:St,newHomeClientOffset:cn,dimensions:e.dimensions};return ss}if(t.type==="DROP_COMPLETE"){var rr=t.payload.completed;return{phase:"IDLE",completed:rr,shouldFlush:!1}}return e},mS=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},gS=function(t){return{type:"LIFT",payload:t}},vS=function(t){return{type:"INITIAL_PUBLISH",payload:t}},yS=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},xS=function(){return{type:"COLLECTION_STARTING",payload:null}},bS=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},wS=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},_S=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Rv=function(t){return{type:"MOVE",payload:t}},jS=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},SS=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},NS=function(){return{type:"MOVE_UP",payload:null}},kS=function(){return{type:"MOVE_DOWN",payload:null}},CS=function(){return{type:"MOVE_RIGHT",payload:null}},ES=function(){return{type:"MOVE_LEFT",payload:null}},yd=function(){return{type:"FLUSH",payload:null}},DS=function(t){return{type:"DROP_ANIMATE",payload:t}},xd=function(t){return{type:"DROP_COMPLETE",payload:t}},Lv=function(t){return{type:"DROP",payload:t}},IS=function(t){return{type:"DROP_PENDING",payload:t}},$v=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},PS=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(s){return function(a){if(a.type!=="LIFT"){s(a);return}var i=a.payload,l=i.id,c=i.clientSelection,u=i.movementMode,d=r();d.phase==="DROP_ANIMATING"&&n(xd({completed:d.completed})),r().phase!=="IDLE"&&F(),n(yd()),n(mS({draggableId:l,movementMode:u}));var f={shouldPublishImmediately:u==="SNAP"},h={draggableId:l,scrollOptions:f},p=e.startPublishing(h),g=p.critical,x=p.dimensions,w=p.viewport;n(vS({critical:g,dimensions:x,clientSelection:c,movementMode:u,viewport:w}))}}}},TS=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},bd={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},fa={opacity:{drop:0,combining:.7},scale:{drop:.75}},wd={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Br=wd.outOfTheWay+"s "+bd.outOfTheWay,Fs={fluid:"opacity "+Br,snap:"transform "+Br+", opacity "+Br,drop:function(t){var r=t+"s "+bd.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Br,placeholder:"height "+Br+", width "+Br+", margin "+Br},Ah=function(t){return jr(t,ke)?null:"translate("+t.x+"px, "+t.y+"px)"},Hc={moveTo:Ah,drop:function(t,r){var n=Ah(t);return n?r?n+" scale("+fa.scale.drop+")":n:null}},qc=wd.minDropTime,Mv=wd.maxDropTime,OS=Mv-qc,Rh=1500,AS=.6,RS=function(e){var t=e.current,r=e.destination,n=e.reason,s=ca(t,r);if(s<=0)return qc;if(s>=Rh)return Mv;var a=s/Rh,i=qc+OS*a,l=n==="CANCEL"?i*AS:i;return Number(l.toFixed(2))},LS=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,s=e.viewport,a=e.afterCritical,i=n.draggables,l=n.droppables,c=ot(t),u=c?l[c]:null,d=l[r.descriptor.droppableId],f=Tv({impact:t,draggable:r,draggables:i,afterCritical:a,droppable:u||d,viewport:s}),h=at(f,r.client.borderBox.center);return h},$S=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,s=e.home,a=e.viewport,i=e.onLiftImpact;if(!n.at||r!=="DROP"){var l=Pv({draggables:t,impact:i,destination:s,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=G({},n,{displaced:ua});return{impact:c,didDropInsideDroppable:!0}},MS=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(s){if(s.type!=="DROP"){n(s);return}var a=t(),i=s.payload.reason;if(a.phase==="COLLECTING"){r(IS({reason:i}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&F(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||F();var c=a.critical,u=a.dimensions,d=u.draggables[a.critical.draggable.id],f=$S({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),h=f.impact,p=f.didDropInsideDroppable,g=p?fd(h):null,x=p?$o(h):null,w={index:c.draggable.index,droppableId:c.droppable.id},y={draggableId:d.descriptor.id,type:d.descriptor.type,source:w,reason:i,mode:a.movementMode,destination:g,combine:x},m=LS({impact:h,draggable:d,dimensions:u,viewport:a.viewport,afterCritical:a.afterCritical}),v={critical:a.critical,afterCritical:a.afterCritical,result:y,impact:h},b=!jr(a.current.client.offset,m)||!!y.combine;if(!b){r(xd({completed:v}));return}var S=RS({current:a.current.client.offset,destination:m,reason:i}),N={newHomeClientOffset:m,dropDuration:S,completed:v};r(DS(N))}}}},Bv=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function BS(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function US(e){var t=e.onWindowScroll;function r(){t(Bv())}var n=la(r),s=BS(n),a=_r;function i(){return a!==_r}function l(){i()&&F(),a=yt(window,[s])}function c(){i()||F(),n.cancel(),a(),a=_r}return{start:l,stop:c,isActive:i}}var FS=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},zS=function(e){var t=US({onWindowScroll:function(n){e.dispatch(jS({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&FS(n)&&t.stop(),r(n)}}},WS=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),s=function(i){t||r||(t=!0,e(i),clearTimeout(n))};return s.wasCalled=function(){return t},s},HS=function(){var e=[],t=function(a){var i=dd(e,function(u){return u.timerId===a});i===-1&&F();var l=e.splice(i,1),c=l[0];c.callback()},r=function(a){var i=setTimeout(function(){return t(i)}),l={timerId:i,callback:a};e.push(l)},n=function(){if(e.length){var a=[].concat(e);e.length=0,a.forEach(function(i){clearTimeout(i.timerId),i.callback()})}};return{add:r,flush:n}},qS=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},GS=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},VS=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,s=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&s},xs=function(t,r){r()},ei=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Il=function(t,r,n,s){if(!t){n(s(r));return}var a=WS(n),i={announce:a};t(r,i),a.wasCalled()||n(s(r))},KS=function(e,t){var r=HS(),n=null,s=function(h,p){n&&F(),xs("onBeforeCapture",function(){var g=e().onBeforeCapture;if(g){var x={draggableId:h,mode:p};g(x)}})},a=function(h,p){n&&F(),xs("onBeforeDragStart",function(){var g=e().onBeforeDragStart;g&&g(ei(h,p))})},i=function(h,p){n&&F();var g=ei(h,p);n={mode:p,lastCritical:h,lastLocation:g.source,lastCombine:null},r.add(function(){xs("onDragStart",function(){return Il(e().onDragStart,g,t,gi.onDragStart)})})},l=function(h,p){var g=fd(p),x=$o(p);n||F();var w=!VS(h,n.lastCritical);w&&(n.lastCritical=h);var y=!qS(n.lastLocation,g);y&&(n.lastLocation=g);var m=!GS(n.lastCombine,x);if(m&&(n.lastCombine=x),!(!w&&!y&&!m)){var v=G({},ei(h,n.mode),{combine:x,destination:g});r.add(function(){xs("onDragUpdate",function(){return Il(e().onDragUpdate,v,t,gi.onDragUpdate)})})}},c=function(){n||F(),r.flush()},u=function(h){n||F(),n=null,xs("onDragEnd",function(){return Il(e().onDragEnd,h,t,gi.onDragEnd)})},d=function(){if(n){var h=G({},ei(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});u(h)}};return{beforeCapture:s,beforeStart:a,start:i,update:l,flush:c,drop:u,abort:d}},JS=function(e,t){var r=KS(e,t);return function(n){return function(s){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var i=a.payload.critical;r.beforeStart(i,a.payload.movementMode),s(a),r.start(i,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),a.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},QS=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&F(),e.dispatch(xd({completed:n.completed}))}}},YS=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(s){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&n(),s(a),a.type==="DROP_ANIMATE"){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch($v())}};r=requestAnimationFrame(function(){r=null,t=yt(window,[i])})}}}},XS=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},ZS=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},eN=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},tN=function(e){return function(t){return function(r){return function(n){if(eN(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var s=t.getState();s.phase!=="DRAGGING"&&F(),e.start(s);return}r(n),e.scroll(t.getState())}}}},rN=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Lv({reason:n.reason})))}}}},nN=qg,sN=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,s=e.getResponders,a=e.announce,i=e.autoScroller;return Hg(pS,nN(H1(TS(n),XS(t),PS(t),MS,QS,YS,rN,tN(i),zS,ZS(r),JS(s,a))))},Pl=function(){return{additions:{},removals:{},modified:{}}};function aN(e){var t=e.registry,r=e.callbacks,n=Pl(),s=null,a=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var d=n,f=d.additions,h=d.removals,p=d.modified,g=Object.keys(f).map(function(y){return t.draggable.getById(y).getDimension(ke)}).sort(function(y,m){return y.descriptor.index-m.descriptor.index}),x=Object.keys(p).map(function(y){var m=t.droppable.getById(y),v=m.callbacks.getScrollWhileDragging();return{droppableId:y,scroll:v}}),w={additions:g,removals:Object.keys(h),modified:x};n=Pl(),r.publish(w)}))},i=function(d){var f=d.descriptor.id;n.additions[f]=d,n.modified[d.descriptor.droppableId]=!0,n.removals[f]&&delete n.removals[f],a()},l=function(d){var f=d.descriptor;n.removals[f.id]=!0,n.modified[f.droppableId]=!0,n.additions[f.id]&&delete n.additions[f.id],a()},c=function(){s&&(cancelAnimationFrame(s),s=null,n=Pl())};return{add:i,remove:l,stop:c}}var Uv=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,s=e.width,a=at({x:r,y:t},{x:s,y:n}),i={x:Math.max(0,a.x),y:Math.max(0,a.y)};return i},Fv=function(){var e=document.documentElement;return e||F(),e},zv=function(){var e=Fv(),t=Uv({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},iN=function(){var e=Bv(),t=zv(),r=e.y,n=e.x,s=Fv(),a=s.clientWidth,i=s.clientHeight,l=n+a,c=r+i,u=Pt({top:r,left:n,right:l,bottom:c}),d={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:ke,displacement:ke}}};return d},oN=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,s=iN(),a=s.scroll.current,i=t.droppable,l=n.droppable.getAllByType(i.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(a,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(f){return f.getDimension(a)}),u={draggables:vv(c),droppables:gv(l)},d={dimensions:u,critical:t,viewport:s};return d};function Lh(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var lN=function(e,t){var r=null,n=aN({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=function(p,g){e.droppable.exists(p)||F(),r&&t.updateDroppableIsEnabled({id:p,isEnabled:g})},a=function(p,g){r&&(e.droppable.exists(p)||F(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:g}))},i=function(p,g){r&&(e.droppable.exists(p)||F(),t.updateDroppableScroll({id:p,newScroll:g}))},l=function(p,g){r&&e.droppable.getById(p).callbacks.scroll(g)},c=function(){if(r){n.stop();var p=r.critical.droppable;e.droppable.getAllByType(p.type).forEach(function(g){return g.callbacks.dragStopped()}),r.unsubscribe(),r=null}},u=function(p){r||F();var g=r.critical.draggable;p.type==="ADDITION"&&Lh(e,g,p.value)&&n.add(p.value),p.type==="REMOVAL"&&Lh(e,g,p.value)&&n.remove(p.value)},d=function(p){r&&F();var g=e.draggable.getById(p.draggableId),x=e.droppable.getById(g.descriptor.droppableId),w={draggable:g.descriptor,droppable:x.descriptor},y=e.subscribe(u);return r={critical:w,unsubscribe:y},oN({critical:w,registry:e,scrollOptions:p.scrollOptions})},f={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:i,startPublishing:d,stopPublishing:c};return f},Wv=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},cN=function(e){window.scrollBy(e.x,e.y)},uN=Ne(function(e){return Lo(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),dN=function(t,r){var n=Ar(uN(r),function(s){return s.frame||F(),Cv(s.frame.pageMarginBox)(t)});return n},fN=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var s=n[r];return s.frame?s:null}var a=dN(t,n);return a},Sr={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},hN=function(e,t){var r=e[t.size]*Sr.startFromPercentage,n=e[t.size]*Sr.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:n};return s},Hv=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,s=r-t;if(s===0)return 0;var a=n-t,i=a/s;return i},_d=1,pN=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Sr.maxPixelScroll;if(e===t.startScrollingFrom)return _d;var r=Hv({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,s=Sr.maxPixelScroll*Sr.ease(n);return Math.ceil(s)},$h=Sr.durationDampening.accelerateAt,Mh=Sr.durationDampening.stopDampeningAt,mN=function(e,t){var r=t,n=Mh,s=Date.now(),a=s-r;if(a>=Mh)return e;if(a<$h)return _d;var i=Hv({startOfRange:$h,endOfRange:n,current:a}),l=e*Sr.ease(i);return Math.ceil(l)},Bh=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,s=e.shouldUseTimeDampening,a=pN(t,r);return a===0?0:s?Math.max(mN(a,n),_d):a},Uh=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,s=e.axis,a=e.shouldUseTimeDampening,i=hN(t,s),l=r[s.end]<r[s.start];return l?Bh({distanceToEdge:r[s.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a}):-1*Bh({distanceToEdge:r[s.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a})},gN=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,s=r.height>t.height,a=r.width>t.width;return!a&&!s?n:a&&s?null:{x:a?0:n.x,y:s?0:n.y}},vN=pv(function(e){return e===0?0:e}),qv=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,s=e.center,a=e.shouldUseTimeDampening,i={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=Uh({container:r,distanceToEdges:i,dragStartTime:t,axis:hd,shouldUseTimeDampening:a}),c=Uh({container:r,distanceToEdges:i,dragStartTime:t,axis:bv,shouldUseTimeDampening:a}),u=vN({x:c,y:l});if(jr(u,ke))return null;var d=gN({container:r,subject:n,proposedScroll:u});return d?jr(d,ke)?null:d:null},yN=pv(function(e){return e===0?0:e>0?1:-1}),jd=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,s=t.change,a=Pe(r,s),i={x:e(a.x,n.x),y:e(a.y,n.y)};return jr(i,ke)?null:i}}(),Gv=function(t){var r=t.max,n=t.current,s=t.change,a={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},i=yN(s),l=jd({max:a,current:n,change:i});return!l||i.x!==0&&l.x===0||i.y!==0&&l.y===0},Sd=function(t,r){return Gv({current:t.scroll.current,max:t.scroll.max,change:r})},xN=function(t,r){if(!Sd(t,r))return null;var n=t.scroll.max,s=t.scroll.current;return jd({current:s,max:n,change:r})},Nd=function(t,r){var n=t.frame;return n?Gv({current:n.scroll.current,max:n.scroll.max,change:r}):!1},bN=function(t,r){var n=t.frame;return!n||!Nd(t,r)?null:jd({current:n.scroll.current,max:n.scroll.max,change:r})},wN=function(e){var t=e.viewport,r=e.subject,n=e.center,s=e.dragStartTime,a=e.shouldUseTimeDampening,i=qv({dragStartTime:s,container:t.frame,subject:r,center:n,shouldUseTimeDampening:a});return i&&Sd(t,i)?i:null},_N=function(e){var t=e.droppable,r=e.subject,n=e.center,s=e.dragStartTime,a=e.shouldUseTimeDampening,i=t.frame;if(!i)return null;var l=qv({dragStartTime:s,container:i.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:a});return l&&Nd(t,l)?l:null},Fh=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,s=e.scrollWindow,a=e.scrollDroppable,i=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],c=l.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,d=wN({dragStartTime:r,viewport:u,subject:c,center:i,shouldUseTimeDampening:n});if(d){s(d);return}}var f=fN({center:i,destination:ot(t.impact),droppables:t.dimensions.droppables});if(f){var h=_N({dragStartTime:r,droppable:f,subject:c,center:i,shouldUseTimeDampening:n});h&&a(f.descriptor.id,h)}},jN=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=la(t),s=la(r),a=null,i=function(d){a||F();var f=a,h=f.shouldUseTimeDampening,p=f.dragStartTime;Fh({state:d,scrollWindow:n,scrollDroppable:s,dragStartTime:p,shouldUseTimeDampening:h})},l=function(d){a&&F();var f=Date.now(),h=!1,p=function(){h=!0};Fh({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),a={dragStartTime:f,shouldUseTimeDampening:h},h&&i(d)},c=function(){a&&(n.cancel(),s.cancel(),a=null)};return{start:l,stop:c,scroll:i}},SN=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,s=function(u,d){var f=Pe(u.current.client.selection,d);t({client:f})},a=function(u,d){if(!Nd(u,d))return d;var f=bN(u,d);if(!f)return r(u.descriptor.id,d),null;var h=at(d,f);r(u.descriptor.id,h);var p=at(d,h);return p},i=function(u,d,f){if(!u||!Sd(d,f))return f;var h=xN(d,f);if(!h)return n(f),null;var p=at(f,h);n(p);var g=at(f,p);return g},l=function(u){var d=u.scrollJumpRequest;if(d){var f=ot(u.impact);f||F();var h=a(u.dimensions.droppables[f],d);if(h){var p=u.viewport,g=i(u.isWindowScrollAllowed,p,h);g&&s(u,g)}}};return l},NN=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,s=jN({scrollWindow:r,scrollDroppable:t}),a=SN({move:n,scrollWindow:r,scrollDroppable:t}),i=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){s.scroll(u);return}u.scrollJumpRequest&&a(u)}},l={scroll:i,start:s.start,stop:s.stop};return l},Vn="data-rbd",Kn=function(){var e=Vn+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Gc=function(){var e=Vn+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),kN=function(){var e=Vn+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),zh={contextId:Vn+"-scroll-container-context-id"},CN=function(t){return function(r){return"["+r+'="'+t+'"]'}},bs=function(t,r){return t.map(function(n){var s=n.styles[r];return s?n.selector+" { "+s+" }":""}).join(" ")},EN="pointer-events: none;",DN=function(e){var t=CN(e),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Kn.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:EN,dropAnimating:l}}}(),n=function(){var l=`
      transition: `+Fs.outOfTheWay+`;
    `;return{selector:t(Gc.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:t(kN.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},i=[n,r,s,a];return{always:bs(i,"always"),resting:bs(i,"resting"),dragging:bs(i,"dragging"),dropAnimating:bs(i,"dropAnimating"),userCancel:bs(i,"userCancel")}},lt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect,Tl=function(){var t=document.querySelector("head");return t||F(),t},Wh=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function IN(e,t){var r=Z(function(){return DN(e)},[e]),n=j.useRef(null),s=j.useRef(null),a=q(Ne(function(f){var h=s.current;h||F(),h.textContent=f}),[]),i=q(function(f){var h=n.current;h||F(),h.textContent=f},[]);lt(function(){!n.current&&!s.current||F();var f=Wh(t),h=Wh(t);return n.current=f,s.current=h,f.setAttribute(Vn+"-always",e),h.setAttribute(Vn+"-dynamic",e),Tl().appendChild(f),Tl().appendChild(h),i(r.always),a(r.resting),function(){var p=function(x){var w=x.current;w||F(),Tl().removeChild(w),x.current=null};p(n),p(s)}},[t,i,a,r.always,r.resting,e]);var l=q(function(){return a(r.dragging)},[a,r.dragging]),c=q(function(f){if(f==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),u=q(function(){s.current&&a(r.resting)},[a,r.resting]),d=Z(function(){return{dragging:l,dropping:c,resting:u}},[l,c,u]);return d}var Vv=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Uo(e){return e instanceof Vv(e).HTMLElement}function PN(e,t){var r="["+Kn.contextId+'="'+e+'"]',n=mv(document.querySelectorAll(r));if(!n.length)return null;var s=Ar(n,function(a){return a.getAttribute(Kn.draggableId)===t});return!s||!Uo(s)?null:s}function TN(e){var t=j.useRef({}),r=j.useRef(null),n=j.useRef(null),s=j.useRef(!1),a=q(function(h,p){var g={id:h,focus:p};return t.current[h]=g,function(){var w=t.current,y=w[h];y!==g&&delete w[h]}},[]),i=q(function(h){var p=PN(e,h);p&&p!==document.activeElement&&p.focus()},[e]),l=q(function(h,p){r.current===h&&(r.current=p)},[]),c=q(function(){n.current||s.current&&(n.current=requestAnimationFrame(function(){n.current=null;var h=r.current;h&&i(h)}))},[i]),u=q(function(h){r.current=null;var p=document.activeElement;p&&p.getAttribute(Kn.draggableId)===h&&(r.current=h)},[]);lt(function(){return s.current=!0,function(){s.current=!1;var h=n.current;h&&cancelAnimationFrame(h)}},[]);var d=Z(function(){return{register:a,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[a,u,c,l]);return d}function ON(){var e={draggables:{},droppables:{}},t=[];function r(f){return t.push(f),function(){var p=t.indexOf(f);p!==-1&&t.splice(p,1)}}function n(f){t.length&&t.forEach(function(h){return h(f)})}function s(f){return e.draggables[f]||null}function a(f){var h=s(f);return h||F(),h}var i={register:function(h){e.draggables[h.descriptor.id]=h,n({type:"ADDITION",value:h})},update:function(h,p){var g=e.draggables[p.descriptor.id];g&&g.uniqueId===h.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:function(h){var p=h.descriptor.id,g=s(p);g&&h.uniqueId===g.uniqueId&&(delete e.draggables[p],n({type:"REMOVAL",value:h}))},getById:a,findById:s,exists:function(h){return!!s(h)},getAllByType:function(h){return Qi(e.draggables).filter(function(p){return p.descriptor.type===h})}};function l(f){return e.droppables[f]||null}function c(f){var h=l(f);return h||F(),h}var u={register:function(h){e.droppables[h.descriptor.id]=h},unregister:function(h){var p=l(h.descriptor.id);p&&h.uniqueId===p.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:function(h){return!!l(h)},getAllByType:function(h){return Qi(e.droppables).filter(function(p){return p.descriptor.type===h})}};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:u,subscribe:r,clean:d}}function AN(){var e=Z(ON,[]);return j.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var kd=se.createContext(null),Xi=function(){var e=document.body;return e||F(),e},RN={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},LN=function(t){return"rbd-announcement-"+t};function $N(e){var t=Z(function(){return LN(e)},[e]),r=j.useRef(null);j.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),G(a.style,RN),Xi().appendChild(a),function(){setTimeout(function(){var c=Xi();c.contains(a)&&c.removeChild(a),a===r.current&&(r.current=null)})}},[t]);var n=q(function(s){var a=r.current;if(a){a.textContent=s;return}},[]);return n}var MN=0,BN={separator:"::"};function Cd(e,t){return t===void 0&&(t=BN),Z(function(){return""+e+t.separator+MN++},[t.separator,e])}function UN(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function FN(e){var t=e.contextId,r=e.text,n=Cd("hidden-text",{separator:"-"}),s=Z(function(){return UN({contextId:t,uniqueId:n})},[n,t]);return j.useEffect(function(){var i=document.createElement("div");return i.id=s,i.textContent=r,i.style.display="none",Xi().appendChild(i),function(){var c=Xi();c.contains(i)&&c.removeChild(i)}},[s,r]),s}var Fo=se.createContext(null);function Kv(e){var t=j.useRef(e);return j.useEffect(function(){t.current=e}),t}function zN(){var e=null;function t(){return!!e}function r(i){return i===e}function n(i){e&&F();var l={abandon:i};return e=l,l}function s(){e||F(),e=null}function a(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:a}}var WN=9,HN=13,Ed=27,Jv=32,qN=33,GN=34,VN=35,KN=36,JN=37,QN=38,YN=39,XN=40,ti,ZN=(ti={},ti[HN]=!0,ti[WN]=!0,ti),Qv=function(e){ZN[e.keyCode]&&e.preventDefault()},zo=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Ar(t,function(n){return"on"+n in document});return r||e}(),Yv=0,Hh=5;function e2(e,t){return Math.abs(t.x-e.x)>=Hh||Math.abs(t.y-e.y)>=Hh}var qh={type:"IDLE"};function t2(e){var t=e.cancel,r=e.completed,n=e.getPhase,s=e.setPhase;return[{eventName:"mousemove",fn:function(i){var l=i.button,c=i.clientX,u=i.clientY;if(l===Yv){var d={x:c,y:u},f=n();if(f.type==="DRAGGING"){i.preventDefault(),f.actions.move(d);return}f.type!=="PENDING"&&F();var h=f.point;if(e2(h,d)){i.preventDefault();var p=f.actions.fluidLift(d);s({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(i){var l=n();if(l.type!=="DRAGGING"){t();return}i.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(i){n().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:function(i){var l=n();if(l.type==="PENDING"){t();return}if(i.keyCode===Ed){i.preventDefault(),t();return}Qv(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(i){var l=n();if(l.type==="IDLE"&&F(),l.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:zo,fn:t}]}function r2(e){var t=j.useRef(qh),r=j.useRef(_r),n=Z(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===Yv&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var h=e.findClosestDraggableId(f);if(h){var p=e.tryGetLock(h,i,{sourceEvent:f});if(p){f.preventDefault();var g={x:f.clientX,y:f.clientY};r.current(),u(p,g)}}}}}},[e]),s=Z(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var h=e.findClosestDraggableId(f);if(h){var p=e.findOptionsForDraggable(h);p&&(p.shouldRespectForcePress||e.canGetLock(h)&&f.preventDefault())}}}}},[e]),a=q(function(){var f={passive:!1,capture:!0};r.current=yt(window,[s,n],f)},[s,n]),i=q(function(){var d=t.current;d.type!=="IDLE"&&(t.current=qh,r.current(),a())},[a]),l=q(function(){var d=t.current;i(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[i]),c=q(function(){var f={capture:!0,passive:!1},h=t2({cancel:l,completed:i,getPhase:function(){return t.current},setPhase:function(g){t.current=g}});r.current=yt(window,h,f)},[l,i]),u=q(function(f,h){t.current.type!=="IDLE"&&F(),t.current={type:"PENDING",point:h,actions:f},c()},[c]);lt(function(){return a(),function(){r.current()}},[a])}var vn;function n2(){}var s2=(vn={},vn[GN]=!0,vn[qN]=!0,vn[KN]=!0,vn[VN]=!0,vn);function a2(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===Ed){a.preventDefault(),r();return}if(a.keyCode===Jv){a.preventDefault(),n();return}if(a.keyCode===XN){a.preventDefault(),e.moveDown();return}if(a.keyCode===QN){a.preventDefault(),e.moveUp();return}if(a.keyCode===YN){a.preventDefault(),e.moveRight();return}if(a.keyCode===JN){a.preventDefault(),e.moveLeft();return}if(s2[a.keyCode]){a.preventDefault();return}Qv(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:zo,fn:r}]}function i2(e){var t=j.useRef(n2),r=Z(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Jv)return;var i=e.findClosestDraggableId(a);if(!i)return;var l=e.tryGetLock(i,d,{sourceEvent:a});if(!l)return;a.preventDefault();var c=!0,u=l.snapLift();t.current();function d(){c||F(),c=!1,t.current(),n()}t.current=yt(window,a2(u,d),{capture:!0,passive:!1})}}},[e]),n=q(function(){var a={passive:!1,capture:!0};t.current=yt(window,[r],a)},[r]);lt(function(){return n(),function(){t.current()}},[n])}var Ol={type:"IDLE"},o2=120,l2=.15;function c2(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){t();return}s.keyCode===Ed&&s.preventDefault(),t()}},{eventName:zo,fn:t}]}function u2(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var i=n();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;var l=a.touches[0],c=l.clientX,u=l.clientY,d={x:c,y:u};a.preventDefault(),i.actions.move(d)}},{eventName:"touchend",fn:function(a){var i=n();if(i.type!=="DRAGGING"){t();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(n().type!=="DRAGGING"){t();return}a.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(a){var i=n();i.type==="IDLE"&&F();var l=a.touches[0];if(l){var c=l.force>=l2;if(c){var u=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){u&&t();return}if(u){if(i.hasMoved){a.preventDefault();return}t();return}a.preventDefault()}}}},{eventName:zo,fn:t}]}function d2(e){var t=j.useRef(Ol),r=j.useRef(_r),n=q(function(){return t.current},[]),s=q(function(p){t.current=p},[]),a=Z(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var g=e.findClosestDraggableId(p);if(g){var x=e.tryGetLock(g,l,{sourceEvent:p});if(x){var w=p.touches[0],y=w.clientX,m=w.clientY,v={x:y,y:m};r.current(),f(x,v)}}}}}},[e]),i=q(function(){var p={capture:!0,passive:!1};r.current=yt(window,[a],p)},[a]),l=q(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(Ol),r.current(),i())},[i,s]),c=q(function(){var h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),u=q(function(){var p={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:n},x=yt(window,u2(g),p),w=yt(window,c2(g),p);r.current=function(){x(),w()}},[c,n,l]),d=q(function(){var p=n();p.type!=="PENDING"&&F();var g=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:g,hasMoved:!1})},[n,s]),f=q(function(p,g){n().type!=="IDLE"&&F();var x=setTimeout(d,o2);s({type:"PENDING",point:g,actions:p,longPressTimerId:x}),u()},[u,n,s,d]);lt(function(){return i(),function(){r.current();var g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),s(Ol))}},[n,i,s]),lt(function(){var p=yt(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var f2={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Xv(e,t){if(t==null)return!1;var r=!!f2[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Xv(e,t.parentElement)}function h2(e,t){var r=t.target;return Uo(r)?Xv(e,r):!1}var p2=function(e){return Pt(e.getBoundingClientRect()).center};function m2(e){return e instanceof Vv(e).Element}var g2=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Ar(t,function(n){return n in Element.prototype});return r||e}();function Zv(e,t){return e==null?null:e[g2](t)?e:Zv(e.parentElement,t)}function v2(e,t){return e.closest?e.closest(t):Zv(e,t)}function y2(e){return"["+Kn.contextId+'="'+e+'"]'}function x2(e,t){var r=t.target;if(!m2(r))return null;var n=y2(e),s=v2(r,n);return!s||!Uo(s)?null:s}function b2(e,t){var r=x2(e,t);return r?r.getAttribute(Kn.draggableId):null}function w2(e,t){var r="["+Gc.contextId+'="'+e+'"]',n=mv(document.querySelectorAll(r)),s=Ar(n,function(a){return a.getAttribute(Gc.id)===t});return!s||!Uo(s)?null:s}function _2(e){e.preventDefault()}function ri(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function e0(e){var t=e.lockAPI,r=e.store,n=e.registry,s=e.draggableId;if(t.isClaimed())return!1;var a=n.draggable.findById(s);return!(!a||!a.options.isEnabled||!Wv(r.getState(),s))}function j2(e){var t=e.lockAPI,r=e.contextId,n=e.store,s=e.registry,a=e.draggableId,i=e.forceSensorStop,l=e.sourceEvent,c=e0({lockAPI:t,store:n,registry:s,draggableId:a});if(!c)return null;var u=s.draggable.getById(a),d=w2(r,u.descriptor.id);if(!d||l&&!u.options.canDragInteractiveElements&&h2(d,l))return null;var f=t.claim(i||_r),h="PRE_DRAG";function p(){return u.options.shouldRespectForcePress}function g(){return t.isActive(f)}function x(N,D){ri({expected:N,phase:h,isLockActive:g,shouldWarn:!0})&&n.dispatch(D())}var w=x.bind(null,"DRAGGING");function y(N){function D(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(D(),h!=="PRE_DRAG"&&F()),n.dispatch(gS(N.liftActionArgs)),h="DRAGGING";function O(P,_){if(_===void 0&&(_={shouldBlockNextClick:!1}),N.cleanup(),_.shouldBlockNextClick){var A=yt(window,[{eventName:"click",fn:_2,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(A)}D(),n.dispatch(Lv({reason:P}))}return G({isActive:function(){return ri({expected:"DRAGGING",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(_){return O("DROP",_)},cancel:function(_){return O("CANCEL",_)}},N.actions)}function m(N){var D=la(function(P){w(function(){return Rv({client:P})})}),O=y({liftActionArgs:{id:a,clientSelection:N,movementMode:"FLUID"},cleanup:function(){return D.cancel()},actions:{move:D}});return G({},O,{move:D})}function v(){var N={moveUp:function(){return w(NS)},moveRight:function(){return w(CS)},moveDown:function(){return w(kS)},moveLeft:function(){return w(ES)}};return y({liftActionArgs:{id:a,clientSelection:p2(d),movementMode:"SNAP"},cleanup:_r,actions:N})}function b(){var N=ri({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!0});N&&t.release()}var S={isActive:function(){return ri({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:m,snapLift:v,abort:b};return S}var S2=[r2,i2,d2];function N2(e){var t=e.contextId,r=e.store,n=e.registry,s=e.customSensors,a=e.enableDefaultSensors,i=[].concat(a?S2:[],s||[]),l=j.useState(function(){return zN()})[0],c=q(function(m,v){m.isDragging&&!v.isDragging&&l.tryAbandon()},[l]);lt(function(){var m=r.getState(),v=r.subscribe(function(){var b=r.getState();c(m,b),m=b});return v},[l,r,c]),lt(function(){return l.tryAbandon},[l.tryAbandon]);for(var u=q(function(y){return e0({lockAPI:l,registry:n,store:r,draggableId:y})},[l,n,r]),d=q(function(y,m,v){return j2({lockAPI:l,registry:n,contextId:t,store:r,draggableId:y,forceSensorStop:m,sourceEvent:v&&v.sourceEvent?v.sourceEvent:null})},[t,l,n,r]),f=q(function(y){return b2(t,y)},[t]),h=q(function(y){var m=n.draggable.findById(y);return m?m.options:null},[n.draggable]),p=q(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(yd()))},[l,r]),g=q(l.isClaimed,[l]),x=Z(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:g}},[u,d,f,h,p,g]),w=0;w<i.length;w++)i[w](x)}var k2=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function ws(e){return e.current||F(),e.current}function C2(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,s=e.nonce,a=e.dragHandleUsageInstructions,i=j.useRef(null),l=Kv(e),c=q(function(){return k2(l.current)},[l]),u=$N(t),d=FN({contextId:t,text:a}),f=IN(t,s),h=q(function(P){ws(i).dispatch(P)},[]),p=Z(function(){return ph({publishWhileDragging:yS,updateDroppableScroll:bS,updateDroppableIsEnabled:wS,updateDroppableIsCombineEnabled:_S,collectionStarting:xS},h)},[h]),g=AN(),x=Z(function(){return lN(g,p)},[g,p]),w=Z(function(){return NN(G({scrollWindow:cN,scrollDroppable:x.scrollDroppable},ph({move:Rv},h)))},[x.scrollDroppable,h]),y=TN(t),m=Z(function(){return sN({announce:u,autoScroller:w,dimensionMarshal:x,focusMarshal:y,getResponders:c,styleMarshal:f})},[u,w,x,y,c,f]);i.current=m;var v=q(function(){var P=ws(i),_=P.getState();_.phase!=="IDLE"&&P.dispatch(yd())},[]),b=q(function(){var P=ws(i).getState();return P.isDragging||P.phase==="DROP_ANIMATING"},[]),S=Z(function(){return{isDragging:b,tryAbort:v}},[b,v]);r(S);var N=q(function(P){return Wv(ws(i).getState(),P)},[]),D=q(function(){return Wr(ws(i).getState())},[]),O=Z(function(){return{marshal:x,focus:y,contextId:t,canLift:N,isMovementAllowed:D,dragHandleUsageInstructionsId:d,registry:g}},[t,x,d,y,N,D,g]);return N2({contextId:t,store:m,registry:g,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),j.useEffect(function(){return v},[v]),se.createElement(Fo.Provider,{value:O},se.createElement(J1,{context:kd,store:m},e.children))}var E2=0;function D2(){return Z(function(){return""+E2++},[])}function I2(e){var t=D2(),r=e.dragHandleUsageInstructions||gi.dragHandleUsageInstructions;return se.createElement(ij,null,function(n){return se.createElement(C2,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var t0=function(t){return function(r){return t===r}},P2=t0("scroll"),T2=t0("auto"),Gh=function(t,r){return r(t.overflowX)||r(t.overflowY)},O2=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return Gh(n,P2)||Gh(n,T2)},A2=function(){return!1},R2=function e(t){return t==null?null:t===document.body?A2()?t:null:t===document.documentElement?null:O2(t)?t:e(t.parentElement)},Vc=function(e){return{x:e.scrollLeft,y:e.scrollTop}},L2=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},$2=function(e){var t=R2(e),r=L2(e);return{closestScrollable:t,isFixedOnPage:r}},M2=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,s=e.isFixedOnPage,a=e.direction,i=e.client,l=e.page,c=e.closest,u=function(){if(!c)return null;var p=c.scrollSize,g=c.client,x=Uv({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:g,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:x,diff:{value:ke,displacement:ke}}}}(),d=a==="vertical"?hd:bv,f=Gn({page:l,withPlaceholder:null,axis:d,frame:u}),h={descriptor:t,isCombineEnabled:n,isFixedOnPage:s,axis:d,isEnabled:r,client:i,page:l,frame:u,subject:f};return h},B2=function(t,r){var n=uv(t);if(!r||t!==r)return n;var s=n.paddingBox.top-r.scrollTop,a=n.paddingBox.left-r.scrollLeft,i=s+r.scrollHeight,l=a+r.scrollWidth,c={top:s,right:l,bottom:i,left:a},u=ld(c,n.border),d=cd({borderBox:u,margin:n.margin,border:n.border,padding:n.padding});return d},U2=function(e){var t=e.ref,r=e.descriptor,n=e.env,s=e.windowScroll,a=e.direction,i=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,u=n.closestScrollable,d=B2(t,u),f=Vi(d,s),h=function(){if(!u)return null;var g=uv(u),x={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:g,page:Vi(g,s),scroll:Vc(u),scrollSize:x,shouldClipSubject:c}}(),p=M2({descriptor:r,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:a,client:d,page:f,closest:h});return p},F2={passive:!1},z2={passive:!0},Vh=function(e){return e.shouldPublishImmediately?F2:z2};function Zi(e){var t=j.useContext(e);return t||F(),t}var ni=function(t){return t&&t.env.closestScrollable||null};function W2(e){var t=j.useRef(null),r=Zi(Fo),n=Cd("droppable"),s=r.registry,a=r.marshal,i=Kv(e),l=Z(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=j.useRef(l),u=Z(function(){return Ne(function(b,S){t.current||F();var N={x:b,y:S};a.updateDroppableScroll(l.id,N)})},[l.id,a]),d=q(function(){var b=t.current;return!b||!b.env.closestScrollable?ke:Vc(b.env.closestScrollable)},[]),f=q(function(){var b=d();u(b.x,b.y)},[d,u]),h=Z(function(){return la(f)},[f]),p=q(function(){var b=t.current,S=ni(b);b&&S||F();var N=b.scrollOptions;if(N.shouldPublishImmediately){f();return}h()},[h,f]),g=q(function(b,S){t.current&&F();var N=i.current,D=N.getDroppableRef();D||F();var O=$2(D),P={ref:D,descriptor:l,env:O,scrollOptions:S};t.current=P;var _=U2({ref:D,descriptor:l,env:O,windowScroll:b,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),A=O.closestScrollable;return A&&(A.setAttribute(zh.contextId,r.contextId),A.addEventListener("scroll",p,Vh(P.scrollOptions))),_},[r.contextId,l,p,i]),x=q(function(){var b=t.current,S=ni(b);return b&&S||F(),Vc(S)},[]),w=q(function(){var b=t.current;b||F();var S=ni(b);t.current=null,S&&(h.cancel(),S.removeAttribute(zh.contextId),S.removeEventListener("scroll",p,Vh(b.scrollOptions)))},[p,h]),y=q(function(b){var S=t.current;S||F();var N=ni(S);N||F(),N.scrollTop+=b.y,N.scrollLeft+=b.x},[]),m=Z(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:x,dragStopped:w,scroll:y}},[w,g,x,y]),v=Z(function(){return{uniqueId:n,descriptor:l,callbacks:m}},[m,l,n]);lt(function(){return c.current=v.descriptor,s.droppable.register(v),function(){t.current&&w(),s.droppable.unregister(v)}},[m,l,w,v,a,s.droppable]),lt(function(){t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),lt(function(){t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function Al(){}var Kh={width:0,height:0,margin:fj},H2=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,s=t.animate;return r||s==="close"?Kh:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},q2=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,s=t.animate,a=H2({isAnimatingOpenOnMount:r,placeholder:n,animate:s});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?Fs.placeholder:null}};function G2(e){var t=j.useRef(null),r=q(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,s=e.onTransitionEnd,a=e.onClose,i=e.contextId,l=j.useState(e.animate==="open"),c=l[0],u=l[1];j.useEffect(function(){return c?n!=="open"?(r(),u(!1),Al):t.current?Al:(t.current=setTimeout(function(){t.current=null,u(!1)}),r):Al},[n,c,r]);var d=q(function(h){h.propertyName==="height"&&(s(),n==="close"&&a())},[n,a,s]),f=q2({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return se.createElement(e.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":i,onTransitionEnd:d,ref:e.innerRef})}var V2=se.memo(G2),Dd=se.createContext(null),K2=function(e){Wg(t,e);function t(){for(var n,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},t}(se.PureComponent),Jh={dragging:5e3,dropAnimating:4500},J2=function(t,r){return r?Fs.drop(r.duration):t?Fs.snap:Fs.fluid},Q2=function(t,r){return t?r?fa.opacity.drop:fa.opacity.combining:null},Y2=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function X2(e){var t=e.dimension,r=t.client,n=e.offset,s=e.combineWith,a=e.dropping,i=!!s,l=Y2(e),c=!!a,u=c?Hc.drop(n,i):Hc.moveTo(n),d={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:J2(l,a),transform:u,opacity:Q2(i,c),zIndex:c?Jh.dropAnimating:Jh.dragging,pointerEvents:"none"};return d}function Z2(e){return{transform:Hc.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function ek(e){return e.type==="DRAGGING"?X2(e):Z2(e)}function tk(e,t,r){r===void 0&&(r=ke);var n=window.getComputedStyle(t),s=t.getBoundingClientRect(),a=cv(s,n),i=Vi(a,r),l={client:a,tagName:t.tagName.toLowerCase(),display:n.display},c={x:a.marginBox.width,y:a.marginBox.height},u={descriptor:e,placeholder:l,displaceBy:c,client:a,page:i};return u}function rk(e){var t=Cd("draggable"),r=e.descriptor,n=e.registry,s=e.getDraggableRef,a=e.canDragInteractiveElements,i=e.shouldRespectForcePress,l=e.isEnabled,c=Z(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:l}},[a,l,i]),u=q(function(p){var g=s();return g||F(),tk(r,g,p)},[r,s]),d=Z(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:u}},[r,u,c,t]),f=j.useRef(d),h=j.useRef(!0);lt(function(){return n.draggable.register(f.current),function(){return n.draggable.unregister(f.current)}},[n.draggable]),lt(function(){if(h.current){h.current=!1;return}var p=f.current;f.current=d,n.draggable.update(d,p)},[d,n.draggable])}function nk(e){e.preventDefault()}function sk(e){var t=j.useRef(null),r=q(function(P){t.current=P},[]),n=q(function(){return t.current},[]),s=Zi(Fo),a=s.contextId,i=s.dragHandleUsageInstructionsId,l=s.registry,c=Zi(Dd),u=c.type,d=c.droppableId,f=Z(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),h=e.children,p=e.draggableId,g=e.isEnabled,x=e.shouldRespectForcePress,w=e.canDragInteractiveElements,y=e.isClone,m=e.mapped,v=e.dropAnimationFinished;if(!y){var b=Z(function(){return{descriptor:f,registry:l,getDraggableRef:n,canDragInteractiveElements:w,shouldRespectForcePress:x,isEnabled:g}},[f,l,n,w,x,g]);rk(b)}var S=Z(function(){return g?{tabIndex:0,role:"button","aria-describedby":i,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:nk}:null},[a,i,p,g]),N=q(function(P){m.type==="DRAGGING"&&m.dropping&&P.propertyName==="transform"&&v()},[v,m]),D=Z(function(){var P=ek(m),_=m.type==="DRAGGING"&&m.dropping?N:null,A={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":p,style:P,onTransitionEnd:_},dragHandleProps:S};return A},[a,S,p,m,N,r]),O=Z(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return h(D,m.snapshot,O)}var r0=function(e,t){return e===t},n0=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},ak=function(t){return t.combine?t.combine.draggableId:null},ik=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function ok(){var e=Ne(function(s,a){return{x:s,y:a}}),t=Ne(function(s,a,i,l,c){return{isDragging:!0,isClone:a,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:i,combineWith:l,combineTargetFor:null}}),r=Ne(function(s,a,i,l,c,u,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:a,offset:s,dimension:i,forceShouldAnimate:d,snapshot:t(a,l,c,u,null)}}}),n=function(a,i){if(a.isDragging){if(a.critical.draggable.id!==i.draggableId)return null;var l=a.current.client.offset,c=a.dimensions.draggables[i.draggableId],u=ot(a.impact),d=ik(a.impact),f=a.forceShouldAnimate;return r(e(l.x,l.y),a.movementMode,c,i.isClone,u,d,f)}if(a.phase==="DROP_ANIMATING"){var h=a.completed;if(h.result.draggableId!==i.draggableId)return null;var p=i.isClone,g=a.dimensions.draggables[i.draggableId],x=h.result,w=x.mode,y=n0(x),m=ak(x),v=a.dropDuration,b={duration:v,curve:bd.drop,moveTo:a.newHomeClientOffset,opacity:m?fa.opacity.drop:null,scale:m?fa.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:g,dropping:b,draggingOver:y,combineWith:m,mode:w,forceShouldAnimate:null,snapshot:t(w,p,y,m,b)}}}return null};return n}function s0(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var lk={mapped:{type:"SECONDARY",offset:ke,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:s0(null)}};function ck(){var e=Ne(function(i,l){return{x:i,y:l}}),t=Ne(s0),r=Ne(function(i,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}}}),n=function(l){return l?r(ke,l,!0):null},s=function(l,c,u,d){var f=u.displaced.visible[l],h=!!(d.inVirtualList&&d.effected[l]),p=$o(u),g=p&&p.draggableId===l?c:null;if(!f){if(!h)return n(g);if(u.displaced.invisible[l])return null;var x=ts(d.displacedBy.point),w=e(x.x,x.y);return r(w,g,!0)}if(h)return n(g);var y=u.displacedBy.point,m=e(y.x,y.y);return r(m,g,f.shouldAnimate)},a=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:s(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var u=l.completed;return u.result.draggableId===c.draggableId?null:s(c.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return a}var uk=function(){var t=ok(),r=ck(),n=function(a,i){return t(a,i)||r(a,i)||lk};return n},dk={dropAnimationFinished:$v},fk=ov(uk,dk,null,{context:kd,pure:!0,areStatePropsEqual:r0})(sk);function a0(e){var t=Zi(Dd),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:se.createElement(fk,e)}function hk(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return se.createElement(a0,G({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function pk(e){var t=j.useContext(Fo);t||F();var r=t.contextId,n=t.isMovementAllowed,s=j.useRef(null),a=j.useRef(null),i=e.children,l=e.droppableId,c=e.type,u=e.mode,d=e.direction,f=e.ignoreContainerClipping,h=e.isDropDisabled,p=e.isCombineEnabled,g=e.snapshot,x=e.useClone,w=e.updateViewportMaxScroll,y=e.getContainerForClone,m=q(function(){return s.current},[]),v=q(function(A){s.current=A},[]);q(function(){return a.current},[]);var b=q(function(A){a.current=A},[]),S=q(function(){n()&&w({maxScroll:zv()})},[n,w]);W2({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:m});var N=se.createElement(K2,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(A){var E=A.onClose,R=A.data,k=A.animate;return se.createElement(V2,{placeholder:R,onClose:E,innerRef:b,animate:k,contextId:r,onTransitionEnd:S})}),D=Z(function(){return{innerRef:v,placeholder:N,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,N,v]),O=x?x.dragging.draggableId:null,P=Z(function(){return{droppableId:l,type:c,isUsingCloneFor:O}},[l,O,c]);function _(){if(!x)return null;var A=x.dragging,E=x.render,R=se.createElement(a0,{draggableId:A.draggableId,index:A.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(k,C){return E(k,C,A)});return Ox.createPortal(R,y())}return se.createElement(Dd.Provider,{value:P},i(D,g),_())}var Rl=function(t,r){return t===r.droppable.type},Qh=function(t,r){return r.draggables[t.draggable.id]},mk=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=G({},t,{shouldAnimatePlaceholder:!1}),n=Ne(function(i){return{draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}}}),s=Ne(function(i,l,c,u,d,f){var h=d.descriptor.id,p=d.descriptor.droppableId===i;if(p){var g=f?{render:f,dragging:n(d.descriptor)}:null,x={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:g}}if(!l)return r;if(!u)return t;var w={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:w,useClone:null}}),a=function(l,c){var u=c.droppableId,d=c.type,f=!c.isDropDisabled,h=c.renderClone;if(l.isDragging){var p=l.critical;if(!Rl(d,p))return r;var g=Qh(p,l.dimensions),x=ot(l.impact)===u;return s(u,f,x,x,g,h)}if(l.phase==="DROP_ANIMATING"){var w=l.completed;if(!Rl(d,w.critical))return r;var y=Qh(w.critical,l.dimensions);return s(u,f,n0(w.result)===u,ot(w.impact)===u,y,h)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var m=l.completed;if(!Rl(d,m.critical))return r;var v=ot(m.impact)===u,b=!!(m.impact.at&&m.impact.at.type==="COMBINE"),S=m.critical.droppable.id===u;return v?b?t:r:S?t:r}return r};return a},gk={updateViewportMaxScroll:SS};function vk(){return document.body||F(),document.body}var yk={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:vk},i0=ov(mk,gk,null,{context:kd,pure:!0,areStatePropsEqual:r0})(pk);i0.defaultProps=yk;const xk=({isOpen:e,onClose:t,onSuccess:r})=>{const[n,s]=j.useState({name:"",code:"",prefecture:"",brand_name:"",store_name:"",address:"",is_active:!0,location_type:"permanent",start_date:"",end_date:""}),[a,i]=j.useState(!1),[l,c]=j.useState(null),[u,d]=j.useState({}),f=(x,w)=>{s(y=>({...y,[x]:w})),u[x]&&d(y=>{const m={...y};return delete m[x],m})},h=()=>{const x={};return n.name.trim()||(x.name=""),n.code.trim()?/^[a-zA-Z0-9_-]+$/.test(n.code)||(x.code=""):x.code="",n.location_type==="popup"&&(n.start_date||(x.start_date="POP-UP"),n.end_date||(x.end_date="POP-UP"),n.start_date&&n.end_date&&n.start_date>n.end_date&&(x.end_date="")),d(x),Object.keys(x).length===0},p=async x=>{if(x.preventDefault(),!!h()){i(!0),c(null);try{if(await gt.checkCodeDuplicate(n.code)){d({code:""}),i(!1);return}await gt.createLocation({name:n.name.trim(),code:n.code.trim(),prefecture:n.prefecture.trim()||void 0,brand_name:n.brand_name.trim()||void 0,store_name:n.store_name.trim()||void 0,address:n.address.trim()||void 0,is_active:n.is_active,location_type:n.location_type,start_date:n.location_type==="popup"&&n.start_date?n.start_date:void 0,end_date:n.location_type==="popup"&&n.end_date?n.end_date:void 0}),s({name:"",code:"",prefecture:"",brand_name:"",store_name:"",address:"",is_active:!0,location_type:"permanent",start_date:"",end_date:""}),r(),t()}catch(w){c(w instanceof Error?w.message:"")}finally{i(!1)}}},g=()=>{a||(s({name:"",code:"",prefecture:"",brand_name:"",store_name:"",address:"",is_active:!0,location_type:"permanent",start_date:"",end_date:""}),c(null),d({}),t())};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Cr,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),o.jsx("button",{onClick:g,disabled:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[l&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:l})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:n.name,onChange:x=>f("name",x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.name?"border-red-300":"border-gray-300"}`,placeholder:": ",maxLength:100}),u.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:n.code,onChange:x=>f("code",x.target.value.toUpperCase()),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.code?"border-red-300":"border-gray-300"}`,placeholder:": HQ",maxLength:20}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:""}),u.code&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.code})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:n.prefecture,onChange:x=>f("prefecture",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:": ",maxLength:50})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:n.brand_name,onChange:x=>f("brand_name",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:": ",maxLength:100}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:n.store_name,onChange:x=>f("store_name",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:": ",maxLength:100}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:n.address,onChange:x=>f("address",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:": ...",maxLength:255})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[o.jsx("input",{type:"radio",name:"location_type",value:"permanent",checked:n.location_type==="permanent",onChange:x=>f("location_type",x.target.value),className:"mr-3 text-blue-600"}),o.jsx(hg,{className:"w-5 h-5 text-blue-600 mr-2"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:""}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]})]}),o.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[o.jsx("input",{type:"radio",name:"location_type",value:"popup",checked:n.location_type==="popup",onChange:x=>f("location_type",x.target.value),className:"mr-3 text-purple-600"}),o.jsx(Rt,{className:"w-5 h-5 text-purple-600 mr-2"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"POP-UP"}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]})]})]})]}),n.location_type==="popup"&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",value:n.start_date,onChange:x=>f("start_date",x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.start_date?"border-red-300":"border-gray-300"}`}),u.start_date&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.start_date})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",value:n.end_date,onChange:x=>f("end_date",x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.end_date?"border-red-300":"border-gray-300"}`}),u.end_date&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.end_date})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",name:"is_active",checked:n.is_active===!0,onChange:()=>f("is_active",!0),className:"mr-2 text-blue-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:""})]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",name:"is_active",checked:n.is_active===!1,onChange:()=>f("is_active",!1),className:"mr-2 text-blue-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:""})]})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[o.jsx("button",{type:"button",onClick:g,disabled:a,className:"px-4 py-2 text-gray-700 font-medium border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),o.jsxs("button",{type:"submit",disabled:a,className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),a?"...":""]})]})]})]})}):null},bk=({isOpen:e,onClose:t})=>{var P;const[r,n]=j.useState([]),[s,a]=j.useState([]),[i,l]=j.useState([]),[c,u]=j.useState(!0),[d,f]=j.useState(!1),[h,p]=j.useState(null),[g,x]=j.useState(null),[w,y]=j.useState({});j.useEffect(()=>{e&&m()},[e]);const m=async()=>{u(!0),p(null);try{const{data:_,error:A}=await z.from("users").select("*").order("display_name",{ascending:!0});if(A)throw A;const E=await gt.getActiveLocations(),{data:R,error:k}=await z.from("user_location_access").select("*");k&&console.warn(":",k);const C={};_==null||_.forEach(I=>{const B=(R||[]).filter(T=>T.user_id===I.id);C[I.id]=B.map(T=>T.location_id)}),n(_||[]),a(E),l(R||[]),y(C),_&&_.length>0&&x(_[0].id)}catch(_){p(_ instanceof Error?_.message:"")}finally{u(!1)}},v=(_,A)=>{y(E=>{const R=E[_]||[],k=R.includes(A)?R.filter(C=>C!==A):[...R,A];return{...E,[_]:k}})},b=async()=>{f(!0),p(null);try{for(const[_,A]of Object.entries(w))if(await z.from("user_location_access").delete().eq("user_id",_),A.length>0){const E=A.map(k=>({user_id:_,location_id:k})),{error:R}=await z.from("user_location_access").insert(E);if(R)throw R}alert(""),t()}catch(_){p(_ instanceof Error?_.message:"")}finally{f(!1)}},S=_=>{y(A=>({...A,[_]:s.map(E=>E.id)}))},N=_=>{y(A=>({...A,[_]:[]}))},D=()=>r.find(_=>_.id===g),O=_=>{var A;return((A=w[_])==null?void 0:A.length)||0};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(zt,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),o.jsx("button",{onClick:t,disabled:d,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),c?o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]}):o.jsxs("div",{className:"flex h-[600px]",children:[o.jsxs("div",{className:"w-1/3 border-r border-gray-200",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsx("h3",{className:"font-semibold text-gray-900",children:""})}),o.jsx("div",{className:"overflow-y-auto h-full",children:r.map(_=>o.jsx("button",{onClick:()=>x(_.id),className:`w-full p-4 text-left hover:bg-gray-50 border-b border-gray-100 ${g===_.id?"bg-blue-50 border-blue-200":""}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[_.picture_url?o.jsx("img",{src:_.picture_url,alt:qe(_.display_name),className:"w-8 h-8 rounded-full object-cover"}):o.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:o.jsx(zt,{className:"w-4 h-4 text-gray-500"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:qe(_.display_name)}),o.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",_.id.slice(0,8),"..."]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[O(_.id),"/",s.length]})]})},_.id))})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"font-semibold text-gray-900",children:[qe((P=D())==null?void 0:P.display_name),""]}),g&&o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>S(g),className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:""}),o.jsx("button",{onClick:()=>N(g),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:""})]})]})}),h&&o.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:o.jsx("div",{className:"text-sm text-red-700",children:h})}),o.jsxs("div",{className:"p-4 space-y-3 overflow-y-auto h-full",children:[g&&s.map(_=>{var E;const A=((E=w[g])==null?void 0:E.includes(_.id))||!1;return o.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-colors cursor-pointer ${A?"border-green-200 bg-green-50":"border-gray-200 bg-white hover:bg-gray-50"}`,onClick:()=>v(g,_.id),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Cr,{className:`w-5 h-5 ${A?"text-green-600":"text-gray-400"}`}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:_.brand_name&&_.store_name?`${_.brand_name} ${_.store_name}`:_.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[": ",_.code,_.prefecture&&`  ${_.prefecture}`,_.address&&`  ${_.address}`]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[!_.is_active&&o.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:""}),o.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${A?"border-green-500 bg-green-500":"border-gray-300 bg-white"}`,children:A&&o.jsx(dg,{className:"w-4 h-4 text-white"})})]})]},_.id)}),s.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Cr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:""})]})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[o.jsx("button",{onClick:t,disabled:d,className:"px-4 py-2 text-gray-700 font-medium border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors",children:""}),o.jsxs("button",{onClick:b,disabled:d,className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),d?"...":""]})]})]})}):null},wk=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[s,a]=j.useState(null),[i,l]=j.useState(!1),[c,u]=j.useState(!1),[d,f]=j.useState(null),[h,p]=j.useState({}),[g,x]=j.useState("permanent");j.useEffect(()=>{w()},[]);const w=async()=>{n(!0),a(null);try{const C=await gt.getAllLocations();t(C)}catch(C){a(C instanceof Error?C.message:"")}finally{n(!1)}},y=C=>{f(C),p({name:C.name,code:C.code,prefecture:C.prefecture||"",brand_name:C.brand_name||"",store_name:C.store_name||"",address:C.address||"",is_active:C.is_active,display_order:C.display_order,location_type:C.location_type||"permanent",start_date:C.start_date||"",end_date:C.end_date||""})},m=async()=>{if(d)try{await gt.updateLocation(d.id,h),f(null),p({}),await w()}catch(C){a(C instanceof Error?C.message:"")}},v=()=>{f(null),p({})},b=async C=>{if(!C.destination)return;const I=_(),B=Array.from(I),[T]=B.splice(C.source.index,1);B.splice(C.destination.index,0,T);const L=B.map((U,V)=>({id:U.id,display_order:V+1}));try{for(const U of L)await gt.updateLocation(U.id,{display_order:U.display_order});await w()}catch(U){a(U instanceof Error?U.message:"")}},S=async(C,I)=>{try{await gt.updateLocation(C,{is_active:!I}),await w()}catch(B){a(B instanceof Error?B.message:"")}},N=async(C,I)=>{if(window.confirm(`${I}`))try{await gt.deleteLocation(C),await w()}catch(B){a(B instanceof Error?B.message:"")}},D=C=>new Date(C).toLocaleString("ja-JP"),O=C=>C?new Date(C).toLocaleDateString("ja-JP"):"-",P=(C,I)=>{p(B=>{const T={...B,[C]:I};return C==="location_type"&&I==="permanent"&&(T.start_date="",T.end_date=""),T})},_=()=>e.filter(C=>(C.location_type||"permanent")===g),A=C=>C==="permanent"?"":"POP-UP",E=C=>C==="permanent"?hg:Rt,R=C=>{const I=C||"permanent",B=A(I),T=I==="permanent"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800";return o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${T}`,children:B})};if(r)return o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]})});const k=_();return o.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx(Cr,{className:"w-6 h-6 text-blue-600"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),o.jsx("p",{className:"text-gray-600",children:""})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{onClick:()=>u(!0),className:"flex items-center px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors",children:[o.jsx(zt,{className:"w-4 h-4 mr-2"}),""]}),o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(Ku,{className:"w-4 h-4 mr-2"}),""]})]})]})}),s&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[o.jsx("div",{className:"text-sm text-red-700",children:s}),o.jsx("button",{onClick:()=>a(null),className:"mt-2 text-xs text-red-600 hover:text-red-800",children:""})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"-mb-px flex",children:["permanent","popup"].map(C=>{const I=E(C),B=g===C,T=e.filter(L=>(L.location_type||"permanent")===C).length;return o.jsx("button",{onClick:()=>x(C),className:`group relative min-w-0 flex-1 overflow-hidden py-4 px-4 text-sm font-medium text-center border-b-2 focus:z-10 transition-colors ${B?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(I,{className:"w-5 h-5"}),o.jsx("span",{children:A(C)}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:T})]})},C)})})}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-4",children:o.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[A(g)," (",k.length,")"]})}),k.length===0?o.jsxs("div",{className:"p-12 text-center",children:[se.createElement(E(g),{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsxs("p",{className:"text-gray-500",children:[A(g),""]}),o.jsx("button",{onClick:()=>l(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsx(I2,{onDragEnd:b,children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),g==="popup"&&o.jsxs(o.Fragment,{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx(i0,{droppableId:"locations",children:C=>o.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",...C.droppableProps,ref:C.innerRef,children:[k.map((I,B)=>o.jsx(hk,{draggableId:I.id,index:B,children:(T,L)=>o.jsxs("tr",{ref:T.innerRef,...T.draggableProps,className:`hover:bg-gray-50 ${I.is_active?"":"opacity-60"} ${L.isDragging?"shadow-lg bg-blue-50":""}`,children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{...T.dragHandleProps,className:"cursor-grab hover:bg-gray-100 p-1 rounded",title:"",children:o.jsx(Wx,{className:"w-4 h-4 text-gray-400"})}),o.jsx("span",{className:"text-sm font-medium text-blue-600",children:B+1})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"text",value:h.name||"",onChange:U=>P("name",U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}):o.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.brand_name&&I.store_name?`${I.brand_name} ${I.store_name}`:I.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"text",value:h.code||"",onChange:U=>P("code",U.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm"}):o.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:I.code})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(d==null?void 0:d.id)===I.id?o.jsxs("select",{value:h.location_type||"permanent",onChange:U=>P("location_type",U.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[o.jsx("option",{value:"permanent",children:""}),o.jsx("option",{value:"popup",children:"POP-UP"})]}):R(I.location_type)}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"text",value:h.prefecture||"",onChange:U=>P("prefecture",U.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:""}):I.prefecture||"-"}),g==="popup"&&o.jsxs(o.Fragment,{children:[o.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"date",value:h.start_date||"",onChange:U=>P("start_date",U.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}):O(I.start_date)}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"date",value:h.end_date||"",onChange:U=>P("end_date",U.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}):O(I.end_date)})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:I.is_active?"":""}),o.jsx("button",{onClick:()=>S(I.id,I.is_active),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:I.is_active?"":"",children:I.is_active?o.jsx(Fx,{className:"w-4 h-4 text-gray-500"}):o.jsx(zx,{className:"w-4 h-4 text-gray-500"})})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D(I.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(d==null?void 0:d.id)===I.id?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:m,className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"",children:o.jsx(Xn,{className:"w-4 h-4"})}),o.jsx("button",{onClick:v,className:"p-2 text-gray-500 hover:bg-gray-50 rounded transition-colors",title:"",children:o.jsx(Er,{className:"w-4 h-4"})})]}):o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>y(I),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"",children:o.jsx(Vu,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(I.id,I.name),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"",children:o.jsx(Ju,{className:"w-4 h-4"})})]})})]})},I.id)),C.placeholder]})})]})})})]})]}),o.jsx(xk,{isOpen:i,onClose:()=>l(!1),onSuccess:w}),o.jsx(bk,{isOpen:c,onClose:()=>u(!1)})]})},_k=({isOpen:e,onClose:t,record:r,onSave:n})=>{const[s,a]=j.useState({record_type:"clock_in",recorded_at:"",location_id:"",location_name:"",note:""}),[i,l]=j.useState([]),[c,u]=j.useState(!1),[d,f]=j.useState(null);j.useEffect(()=>{e&&(h(),r&&a({record_type:r.record_type,recorded_at:r.recorded_at?new Date(r.recorded_at).toISOString().slice(0,16):"",location_id:r.location_id||"",location_name:r.location_name||"",note:r.note||""}))},[e,r]);const h=async()=>{try{const v=await gt.getAllLocations();l(v)}catch(v){console.error(":",v)}},p=(v,b)=>{a(S=>({...S,[v]:b}))},g=v=>{const b=i.find(S=>S.id===v);a(S=>({...S,location_id:v,location_name:b?b.brand_name&&b.store_name?`${b.brand_name} ${b.store_name}`:b.name:""}))},x=async v=>{if(v.preventDefault(),!!r){u(!0),f(null);try{const b={record_type:s.record_type,recorded_at:s.recorded_at?new Date(s.recorded_at).toISOString():r.recorded_at,location_id:s.location_id||null,location_name:s.location_name||null,note:s.note||null,updated_at:new Date().toISOString()},{error:S}=await z.from("time_records").update(b).eq("id",r.id);if(S)throw S;n(),t()}catch(b){f(b instanceof Error?b.message:"")}finally{u(!1)}}},w=async()=>{if(!(!r||!window.confirm(""))){u(!0),f(null);try{const{error:v}=await z.from("time_records").delete().eq("id",r.id);if(v)throw v;n(),t()}catch(v){f(v instanceof Error?v.message:"")}finally{u(!1)}}},y=v=>new Date(v).toLocaleString("ja-JP"),m=v=>{switch(v){case"clock_in":return"";case"clock_out":return"";case"break_start":return"";case"break_end":return"";default:return v}};return!e||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(an,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),o.jsx("button",{onClick:t,disabled:c,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[d&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:d})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:s.record_type,onChange:v=>p("record_type",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"clock_in",children:""}),o.jsx("option",{value:"clock_out",children:""}),o.jsx("option",{value:"break_start",children:""}),o.jsx("option",{value:"break_end",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"datetime-local",value:s.recorded_at,onChange:v=>p("recorded_at",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[": ",y(r.recorded_at)]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:s.location_id,onChange:v=>g(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:""}),i.map(v=>o.jsxs("option",{value:v.id,children:[v.brand_name&&v.store_name?`${v.brand_name} ${v.store_name}`:v.name,v.prefecture&&` (${v.prefecture})`]},v.id))]}),r.location_name&&o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[": ",r.location_name]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("textarea",{value:s.note,onChange:v=>p("note",v.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:""}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"ml-2 font-medium",children:m(r.record_type)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"ml-2 font-medium",children:y(r.recorded_at)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"ml-2 font-medium",children:r.location_name||"-"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"ml-2 font-medium",children:r.note||"-"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[o.jsx("button",{type:"button",onClick:w,disabled:c,className:"px-4 py-2 text-red-700 font-medium border border-red-300 rounded-lg hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:t,disabled:c,className:"px-4 py-2 text-gray-700 font-medium border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),o.jsxs("button",{type:"submit",disabled:c,className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),c?"...":""]})]})]})]})]})})},jk=({userId:e,onBack:t})=>{const[r,n]=j.useState(null),[s,a]=j.useState(null),[i,l]=j.useState([]),[c,u]=j.useState([]),[d,f]=j.useState(!1),[h,p]=j.useState(null),[g,x]=j.useState(!1),[w,y]=j.useState({}),[m,v]=j.useState("sales");j.useEffect(()=>{e&&(b(),S(),N())},[e]);const b=async()=>{if(e){f(!0),p(null);try{const{data:E,error:R}=await z.from("users").select("*").eq("id",e).single();if(R)throw R;n(E),y({display_name:E.display_name,email:E.email||"",address:E.address||"",self_pr:E.self_pr||"",career:E.career||""})}catch(E){p(E instanceof Error?E.message:"")}finally{f(!1)}}},S=async()=>{if(e)try{const{data:E,error:R}=await z.from("daily_reports").select("*").eq("user_id",e);if(R)throw R;if(E&&E.length>0){const k=E.reduce((T,L)=>T+L.sales_amount,0),C=E.reduce((T,L)=>T+L.customer_count,0),I=E.reduce((T,L)=>T+L.items_sold,0),B=E.reduce((T,L)=>T+(L.customer_unit_price||0),0);a({totalReports:E.length,totalSales:k,avgSales:k/E.length,totalCustomers:C,avgCustomers:C/E.length,totalItemsSold:I,avgItemsSold:I/E.length,avgUnitPrice:B/E.length})}else a({totalReports:0,totalSales:0,avgSales:0,totalCustomers:0,avgCustomers:0,totalItemsSold:0,avgItemsSold:0,avgUnitPrice:0})}catch(E){console.warn(":",E)}},N=async()=>{if(e)try{const{data:E,error:R}=await z.from("daily_reports").select("*").eq("user_id",e).order("report_date",{ascending:!0});if(R)throw R;if(l(E||[]),E&&E.length>0){const k=E.map(C=>({date:C.report_date,sales:C.sales_amount,customers:C.customer_count,unitPrice:C.customer_unit_price||0,itemsSold:C.items_sold,formattedDate:new Date(C.report_date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})}));u(k)}}catch(E){console.warn(":",E)}},D=async()=>{if(r){f(!0),p(null);try{const E={display_name:w.display_name,email:w.email||null,address:w.address||null,self_pr:w.self_pr||null,career:w.career||null,updated_at:new Date().toISOString()},{error:R}=await z.from("users").update(E).eq("id",r.id);if(R)throw R;n(k=>k?{...k,...E}:null),x(!1)}catch(E){p(E instanceof Error?E.message:"")}finally{f(!1)}}},O=(E,R)=>{y(k=>({...k,[E]:R}))},P=E=>`${E.toLocaleString()}`,_=E=>new Date(E).toLocaleDateString("ja-JP"),A=()=>{if(c.length===0)return null;const E=I=>{switch(m){case"sales":return I.sales;case"customers":return I.customers;case"unitPrice":return I.unitPrice;case"itemsSold":return I.itemsSold;default:return I.sales}},R=Math.max(...c.map(E)),k=Math.min(...c.map(E)),C=R-k||1;return o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:`p-2 rounded-full ${m==="sales"?"bg-blue-100":m==="customers"?"bg-green-100":m==="unitPrice"?"bg-purple-100":"bg-orange-100"}`,children:[m==="sales"&&o.jsx(zi,{className:"w-5 h-5 text-blue-600"}),m==="customers"&&o.jsx(zt,{className:"w-5 h-5 text-green-600"}),m==="unitPrice"&&o.jsx(Ff,{className:"w-5 h-5 text-purple-600"}),m==="itemsSold"&&o.jsx(Uf,{className:"w-5 h-5 text-orange-600"})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[m==="sales"&&"",m==="customers"&&"",m==="unitPrice"&&"",m==="itemsSold"&&""]}),o.jsx("p",{className:"text-sm text-gray-600",children:"30"})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{onClick:()=>v("sales"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="sales"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),o.jsx("button",{onClick:()=>v("customers"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="customers"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),o.jsx("button",{onClick:()=>v("unitPrice"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="unitPrice"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),o.jsx("button",{onClick:()=>v("itemsSold"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="itemsSold"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]})]}),o.jsx("div",{className:"h-64 relative",children:o.jsx("div",{className:"absolute inset-0 flex items-end space-x-1",children:c.map((I,B)=>{const L=(E(I)-k)/C*100,U=m==="sales"?"bg-blue-500":m==="customers"?"bg-green-500":m==="unitPrice"?"bg-purple-500":"bg-orange-500";return o.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[o.jsx("div",{className:"w-full flex justify-center mb-1",children:o.jsx("div",{className:`w-3/4 ${U} rounded-t-sm transition-all duration-300 hover:opacity-80 relative group`,style:{height:`${L||2}%`},children:o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsxs("div",{className:"bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[m==="sales"&&P(I.sales),m==="customers"&&`${I.customers}`,m==="unitPrice"&&P(I.unitPrice),m==="itemsSold"&&`${I.itemsSold}`]})})})}),o.jsx("div",{className:"text-xs text-gray-500 mt-1 transform rotate-45 origin-center",children:I.formattedDate})]},B)})})}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-4 border-t border-gray-100",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`text-2xl font-bold ${m==="sales"?"text-blue-600":m==="customers"?"text-green-600":m==="unitPrice"?"text-purple-600":"text-orange-600"}`,children:[m==="sales"&&P(c.reduce((I,B)=>I+B.sales,0)),m==="customers"&&`${c.reduce((I,B)=>I+B.customers,0)}`,m==="unitPrice"&&P(c.reduce((I,B)=>I+B.unitPrice,0)),m==="itemsSold"&&`${c.reduce((I,B)=>I+B.itemsSold,0)}`]}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`text-2xl font-bold ${m==="sales"?"text-blue-600":m==="customers"?"text-green-600":m==="unitPrice"?"text-purple-600":"text-orange-600"}`,children:[m==="sales"&&P(Math.round(c.reduce((I,B)=>I+B.sales,0)/c.length)),m==="customers"&&`${Math.round(c.reduce((I,B)=>I+B.customers,0)/c.length)}`,m==="unitPrice"&&P(Math.round(c.reduce((I,B)=>I+B.unitPrice,0)/c.length)),m==="itemsSold"&&`${Math.round(c.reduce((I,B)=>I+B.itemsSold,0)/c.length)}`]}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`text-2xl font-bold ${m==="sales"?"text-blue-600":m==="customers"?"text-green-600":m==="unitPrice"?"text-purple-600":"text-orange-600"}`,children:[m==="sales"&&P(R),m==="customers"&&`${R}`,m==="unitPrice"&&P(R),m==="itemsSold"&&`${R}`]}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]})]})]})};return d&&!r?o.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]}):h&&!r?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-red-600 mb-4",children:h}),o.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:""})]})}):r?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:o.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx($x,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),o.jsx("button",{onClick:()=>{g?D():x(!0)},disabled:d,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?o.jsxs(o.Fragment,{children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),d?"...":""]}):o.jsxs(o.Fragment,{children:[o.jsx(Vu,{className:"w-4 h-4 mr-2"}),""]})})]})})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[h&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:h})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[o.jsxs("div",{className:"text-center mb-6",children:[r.picture_url?o.jsx("img",{src:r.picture_url,alt:qe(r.display_name),className:"w-24 h-24 rounded-full object-cover mx-auto ring-4 ring-white shadow-lg"}):o.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto",children:o.jsx(Ls,{className:"w-12 h-12 text-gray-500"})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"flex items-center justify-center space-x-2 mb-2",children:o.jsxs("span",{className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:["#",r.employee_number||"---"]})}),g?o.jsx("input",{type:"text",value:w.display_name||"",onChange:E=>O("display_name",E.target.value),className:"text-xl font-bold text-gray-900 bg-white border border-gray-300 rounded px-3 py-2 text-center"}):o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:qe(r.display_name)})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Hx,{className:"w-5 h-5 text-gray-400 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g?o.jsx("input",{type:"email",value:w.email||"",onChange:E=>O("email",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"example@company.com"}):o.jsx("p",{className:"text-gray-900",children:r.email||""})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Cr,{className:"w-5 h-5 text-gray-400 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g?o.jsx("textarea",{value:w.address||"",onChange:E=>O("address",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:2,placeholder:""}):o.jsx("p",{className:"text-gray-900",children:r.address||""})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Mx,{className:"w-5 h-5 text-gray-400 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PR"}),g?o.jsx("textarea",{value:w.self_pr||"",onChange:E=>O("self_pr",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"PR"}):o.jsx("p",{className:"text-gray-900",children:Uc(r.self_pr)||""})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Bx,{className:"w-5 h-5 text-gray-400 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g?o.jsx("textarea",{value:w.career||"",onChange:E=>O("career",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:""}):o.jsx("p",{className:"text-gray-900",children:Uc(r.career)||""})]})]})]})]}),s&&o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 rounded-lg mx-auto mb-2",children:o.jsx(Rt,{className:"w-5 h-5 text-blue-600"})}),o.jsx("div",{className:"text-xl font-bold text-gray-900",children:s.totalReports}),o.jsx("div",{className:"text-xs text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-green-100 rounded-lg mx-auto mb-2",children:o.jsx(zi,{className:"w-5 h-5 text-green-600"})}),o.jsx("div",{className:"text-xl font-bold text-gray-900",children:P(s.totalSales)}),o.jsx("div",{className:"text-xs text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-lg mx-auto mb-2",children:o.jsx(Ff,{className:"w-5 h-5 text-purple-600"})}),o.jsx("div",{className:"text-xl font-bold text-gray-900",children:P(Math.round(s.avgUnitPrice))}),o.jsx("div",{className:"text-xs text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-orange-100 rounded-lg mx-auto mb-2",children:o.jsx(Uf,{className:"w-5 h-5 text-orange-600"})}),o.jsx("div",{className:"text-xl font-bold text-gray-900",children:Math.round(s.avgItemsSold)}),o.jsx("div",{className:"text-xs text-gray-600",children:""})]})]})]})]}),o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsx(A,{}),o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),i.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.slice(0,10).map(E=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:_(E.report_date)}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:P(E.sales_amount)}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:[E.customer_count,""]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:P(E.customer_unit_price||0)}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:[E.items_sold,""]})]},E.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Rt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:""})]})]})]})]})]})]}):o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-gray-600 mb-4",children:""}),o.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:""})]})})},Sk=({onLogout:e})=>{const[t,r]=j.useState("dashboard"),[n,s]=j.useState({users:[],time_records:[],shifts:[],daily_reports:[]}),[a,i]=j.useState(!1),[l,c]=j.useState(null),[u,d]=j.useState(!1),[f,h]=j.useState(null),[p,g]=j.useState(!1),[x,w]=j.useState(null),y=async k=>{i(!0),c(null);try{const{data:C,error:I}=await z.from(k).select("*").order("created_at",{ascending:!1}).limit(100);if(I)throw I;s(B=>({...B,[k]:C||[]}))}catch(C){c(C instanceof Error?C.message:"")}finally{i(!1)}};j.useEffect(()=>{t!=="dashboard"&&t!=="shift_management"&&t!=="location_management"&&y(t)},[t]);const m=k=>{h(k),d(!0)},v=()=>{d(!1),h(null)},b=()=>{t==="time_records"&&y("time_records")},S=k=>{w(k),g(!0)},N=()=>{g(!1),w(null)},D=k=>k?new Date(k).toLocaleString("ja-JP"):"-",O=()=>o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"LINE ID"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.users.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>S(k.id),children:[o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["#",k.employee_number||"---"]})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[k.picture_url?o.jsx("img",{src:k.picture_url,alt:qe(k.display_name),className:"w-8 h-8 rounded-full object-cover"}):o.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:o.jsx(zt,{className:"w-4 h-4 text-gray-500"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:qe(k.display_name)}),o.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",k.id.slice(0,8),"..."]})]})]})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.line_user_id}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.email||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:D(k.created_at)})]},k.id))})]})}),P=()=>o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.time_records.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 font-mono",children:[k.user_id.slice(0,8),"..."]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.record_type==="clock_in"?"bg-green-100 text-green-800":k.record_type==="clock_out"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:k.record_type})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:D(k.recorded_at)}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.location_name||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.note||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsx("button",{onClick:()=>m(k),className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:""})})]},k.id))})]})}),_=()=>o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.shifts.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 font-mono",children:[k.user_id.slice(0,8),"..."]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.shift_date}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.shift_type==="normal"?"bg-blue-100 text-blue-800":k.shift_type==="early"?"bg-yellow-100 text-yellow-800":k.shift_type==="late"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:k.shift_type})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.shift_status==="confirmed"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:k.shift_status})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.start_time||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.end_time||"-"})]},k.id))})]})}),A=()=>o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.daily_reports.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 font-mono",children:[k.user_id.slice(0,8),"..."]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.report_date}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:["",k.sales_amount.toLocaleString()]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.customer_count}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.items_sold}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:["",k.customer_unit_price.toLocaleString()]})]},k.id))})]})}),E=()=>{switch(t){case"users":return O();case"time_records":return P();case"shifts":return _();case"daily_reports":return A();default:return null}},R={dashboard:"",shift_management:"",location_management:"",users:"",time_records:"",shifts:"",daily_reports:""};return o.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[o.jsxs("div",{className:"w-80 bg-white shadow-lg border-r border-gray-200 flex flex-col flex-shrink-0",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:""})]}),o.jsx("nav",{className:"flex-1 p-4",children:o.jsx("div",{className:"space-y-2",children:Object.keys(R).map(k=>o.jsx("button",{onClick:()=>r(k),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors ${t===k?"bg-blue-50 text-blue-700 border-blue-200 border":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:R[k]}),k!=="dashboard"&&k!=="shift_management"&&k!=="location_management"&&o.jsx("span",{className:"bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:n[k].length})]})},k))})}),o.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-4",children:[e&&o.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),""]}),o.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[o.jsx("p",{children:" CMS"}),o.jsx("p",{children:" v1.0"})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col min-w-0 max-w-screen-2xl mx-auto",children:o.jsx("div",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:o.jsx("div",{className:t==="dashboard"||t==="shift_management"||t==="location_management"?"":"bg-white rounded-lg shadow p-6",children:t==="dashboard"?o.jsx(R1,{}):t==="shift_management"?o.jsx(B1,{}):t==="location_management"?o.jsx(wk,{}):o.jsxs(o.Fragment,{children:[l&&o.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:l})}),a?o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:[R[t],""]}),o.jsxs("p",{className:"text-gray-600",children:[t==="users"&&"",t==="time_records"&&"",t==="shifts"&&"",t==="daily_reports"&&""]})]}),o.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[R[t],""]}),o.jsx("button",{onClick:()=>y(t),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700",children:""})]}),E()]})]})})})}),o.jsx(_k,{isOpen:u,onClose:v,record:f,onSave:b}),p&&x&&o.jsx("div",{className:"fixed inset-0 bg-white z-50",children:o.jsx(jk,{userId:x,onBack:N})})]})},Nk=()=>{const{isAdminAuthenticated:e,login:t,logout:r}=k1();return e?o.jsx(Sk,{onLogout:r}):o.jsx(P1,{onLogin:t})},kk=()=>{const{user:e,isAuthenticated:t,isLoading:r,logout:n}=on(),{notifyTimeRecordUpdate:s,notifyAttendanceUpdate:a}=Fg(),[i,l]=j.useState(new Date),[c,u]=j.useState("out"),[d,f]=j.useState(""),[h,p]=j.useState([]),[g,x]=j.useState([]),[w,y]=j.useState(!1),[m,v]=j.useState([]),[b,S]=j.useState(!1),[N,D]=j.useState(null);j.useEffect(()=>{const k=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(k)},[]),j.useEffect(()=>{(async()=>{try{const C=await gt.getActiveLocations();if(p(C),C.length>0&&!d){const I=await gt.getDefaultLocation();f((I==null?void 0:I.id)||C[0].id)}}catch(C){console.error(":",C),f("HQ")}})()},[d]),j.useEffect(()=>{(async()=>{if(e)try{const C=await Bs.getTodayTimeRecords(e);if(v(C),C.length>0){switch(C[C.length-1].record_type){case"clock_in":u("in");break;case"clock_out":u("out");break;case"break_start":u("break");break;case"break_end":u("in");break}const B=C.map(T=>{var L;return{id:T.id,type:T.record_type==="clock_in"?"check-in":T.record_type==="clock_out"?"check-out":T.record_type==="break_start"?"break-start":"break-end",timestamp:new Date(T.recorded_at),location:((L=T.note)==null?void 0:L.replace("",""))||""}}).reverse();x(B)}}catch(C){console.error(":",C)}})()},[e]);const O=k=>k.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1}),P=k=>k.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short"}),_=()=>{switch(c){case"out":return"";case"in":return"";case"break":return"";default:return""}},A=()=>{switch(c){case"out":return"bg-gray-100 text-gray-600";case"in":return"bg-blue-100 text-blue-600";case"break":return"bg-orange-100 text-orange-600";default:return"bg-gray-100 text-gray-600"}},E=async k=>{var C,I;if(!e){alert("");return}try{const B={"check-in":"clock_in","check-out":"clock_out","break-start":"break_start","break-end":"break_end"},T=h.find(te=>te.id===d),L=(T==null?void 0:T.name)||"";await Bs.createTimeRecord(e,{recordType:B[k],locationId:d,note:`${L}`});const U={id:Date.now().toString(),type:k,timestamp:new Date,location:((C=h.find(te=>te.id===d))==null?void 0:C.name)||""};switch(x(te=>[U,...te]),k){case"check-in":u("in");break;case"check-out":u("out"),D(new Date().toISOString()),S(!0);break;case"break-start":u("break");break;case"break-end":u("in");break}const V={"check-in":"","check-out":"","break-start":"","break-end":""};s(),a();const J=(I=document.querySelector(`button[data-action="${k}"] span`))==null?void 0:I.textContent,ge=document.querySelector(`button[data-action="${k}"] span`);ge&&(ge.textContent=" ",setTimeout(()=>{ge&&(ge.textContent=J||V[k])},2e3))}catch(B){console.error(":",B);const T=B instanceof Error?B.message:"";alert(`: ${T}`)}},R=k=>{switch(k){case"check-in":return c!=="out";case"check-out":return c==="out";case"break-start":return c!=="in";case"break-end":return c!=="break";default:return!1}};return window.location.pathname==="/auth/callback"?o.jsx(I1,{}):window.location.pathname==="/admin"?o.jsx(Nk,{}):r?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 rounded-lg flex items-center justify-center mb-4",style:{backgroundColor:"#CB8585"},children:o.jsxs("svg",{className:"animate-spin h-8 w-8 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),o.jsx("p",{className:"text-gray-600",children:"..."})]})}):t?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("header",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:o.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"#CB8585"},children:o.jsx(an,{className:"w-4 h-4 text-white"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-xs text-gray-500",children:"Time Tracking"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[e==null?void 0:e.displayName,""]}),o.jsx("p",{className:"text-xs text-gray-500",children:""})]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>y(!w),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(qx,{className:"w-5 h-5 text-gray-600"})}),w&&o.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:o.jsx("div",{className:"py-1",children:o.jsxs("button",{onClick:()=>{n(),y(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),""]})})})]})]})]})})}),o.jsxs("main",{className:"max-w-md mx-auto px-4 py-6",children:[o.jsx("div",{className:"text-white text-center py-3 rounded-lg mb-6",style:{backgroundColor:"#CB8585"},children:o.jsx("p",{className:"text-sm font-medium",children:""})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[o.jsx("p",{className:"text-lg font-medium text-gray-800",children:P(i)}),o.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${A()}`,children:_()})]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[o.jsx(Cr,{className:"w-4 h-4 text-gray-400"}),o.jsx("select",{value:d,onChange:k=>f(k.target.value),className:"bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#CB8585"},disabled:h.length===0,children:h.length===0?o.jsx("option",{value:"",children:"..."}):h.map(k=>o.jsx("option",{value:k.id,children:k.name},k.id))})]})]}),o.jsx("div",{className:"text-center mb-12",children:o.jsxs("div",{className:"text-7xl font-light text-gray-800 mb-2",children:[O(i),o.jsx("span",{className:"text-3xl text-gray-500 ml-2",children:i.getSeconds().toString().padStart(2,"0")})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[o.jsxs("button",{"data-action":"check-in",onClick:()=>E("check-in"),disabled:R("check-in"),className:`flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all ${R("check-in")?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"text-white active:scale-95"}`,style:R("check-in")?{}:{backgroundColor:"#CB8585",borderColor:"#CB8585"},onMouseEnter:k=>{R("check-in")||(k.currentTarget.style.backgroundColor="#B87575",k.currentTarget.style.borderColor="#B87575")},onMouseLeave:k=>{R("check-in")||(k.currentTarget.style.backgroundColor="#CB8585",k.currentTarget.style.borderColor="#CB8585")},children:[o.jsx(Ec,{className:"w-8 h-8 mb-2"}),o.jsx("span",{className:"text-lg font-medium",children:""})]}),o.jsxs("button",{"data-action":"check-out",onClick:()=>E("check-out"),disabled:R("check-out"),className:`flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all ${R("check-out")?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white active:scale-95"}`,style:R("check-out")?{}:{borderColor:"#CB8585",color:"#CB8585"},onMouseEnter:k=>{R("check-out")||(k.currentTarget.style.backgroundColor="#FDF2F2")},onMouseLeave:k=>{R("check-out")||(k.currentTarget.style.backgroundColor="white")},children:[o.jsx(aa,{className:"w-8 h-8 mb-2"}),o.jsx("span",{className:"text-lg font-medium",children:""})]}),o.jsxs("button",{"data-action":"break-start",onClick:()=>E("break-start"),disabled:R("break-start"),className:`flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all ${R("break-start")?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white active:scale-95"}`,style:R("break-start")?{}:{borderColor:"#CB8585",color:"#CB8585"},onMouseEnter:k=>{R("break-start")||(k.currentTarget.style.backgroundColor="#FDF2F2")},onMouseLeave:k=>{R("break-start")||(k.currentTarget.style.backgroundColor="white")},children:[o.jsx(Fi,{className:"w-8 h-8 mb-2"}),o.jsx("span",{className:"text-lg font-medium",children:""})]}),o.jsxs("button",{"data-action":"break-end",onClick:()=>E("break-end"),disabled:R("break-end"),className:`flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all ${R("break-end")?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white active:scale-95"}`,style:R("break-end")?{}:{borderColor:"#CB8585",color:"#CB8585"},onMouseEnter:k=>{R("break-end")||(k.currentTarget.style.backgroundColor="#FDF2F2")},onMouseLeave:k=>{R("break-end")||(k.currentTarget.style.backgroundColor="white")},children:[o.jsx(Fi,{className:"w-8 h-8 mb-2"}),o.jsx("span",{className:"text-lg font-medium",children:""})]})]}),g.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-8",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:""}),o.jsx("div",{className:"space-y-2",children:g.slice(0,5).map(k=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${k.type==="check-in"?"bg-[#CB8585]":k.type==="check-out"?"bg-gray-500":"bg-orange-500"}`}),o.jsx("span",{className:"text-gray-600",children:k.type==="check-in"?"":k.type==="check-out"?"":k.type==="break-start"?"":""})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-gray-900 font-medium",children:O(k.timestamp)}),o.jsx("p",{className:"text-gray-500 text-xs",children:k.location})]})]},k.id))})]})]}),o.jsx("div",{className:"max-w-md mx-auto px-4 mt-8",children:o.jsx(j1,{})}),o.jsx(S1,{isOpen:b,onClose:()=>{S(!1),D(null)},checkoutTime:N}),o.jsx(N1,{})]}):o.jsx(E1,{})};function Ck(){return o.jsx(rb,{children:o.jsx(C1,{children:o.jsx(b1,{children:o.jsx(kk,{})})})})}cg(document.getElementById("root")).render(o.jsx(j.StrictMode,{children:o.jsx(Ck,{})}));
