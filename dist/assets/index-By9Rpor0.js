(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Qh={exports:{}},Zi={},Yh={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=Symbol.for("react.element"),o0=Symbol.for("react.portal"),l0=Symbol.for("react.fragment"),c0=Symbol.for("react.strict_mode"),u0=Symbol.for("react.profiler"),d0=Symbol.for("react.provider"),f0=Symbol.for("react.context"),h0=Symbol.for("react.forward_ref"),p0=Symbol.for("react.suspense"),m0=Symbol.for("react.memo"),g0=Symbol.for("react.lazy"),Pd=Symbol.iterator;function v0(t){return t===null||typeof t!="object"?null:(t=Pd&&t[Pd]||t["@@iterator"],typeof t=="function"?t:null)}var Xh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zh=Object.assign,ep={};function Jn(t,e,r){this.props=t,this.context=e,this.refs=ep,this.updater=r||Xh}Jn.prototype.isReactComponent={};Jn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tp(){}tp.prototype=Jn.prototype;function Jc(t,e,r){this.props=t,this.context=e,this.refs=ep,this.updater=r||Xh}var Qc=Jc.prototype=new tp;Qc.constructor=Jc;Zh(Qc,Jn.prototype);Qc.isPureReactComponent=!0;var Td=Array.isArray,rp=Object.prototype.hasOwnProperty,Yc={current:null},np={key:!0,ref:!0,__self:!0,__source:!0};function sp(t,e,r){var n,s={},a=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(a=""+e.key),e)rp.call(e,n)&&!np.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ha,type:t,key:a,ref:i,props:s,_owner:Yc.current}}function y0(t,e){return{$$typeof:ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ha}function x0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Od=/\/+/g;function Wo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?x0(""+t.key):e.toString(36)}function si(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case ha:case o0:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+Wo(i,0):n,Td(s)?(r="",t!=null&&(r=t.replace(Od,"$&/")+"/"),si(s,e,r,"",function(u){return u})):s!=null&&(Xc(s)&&(s=y0(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Od,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Td(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+Wo(a,l);i+=si(a,e,r,c,s)}else if(c=v0(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+Wo(a,l++),i+=si(a,e,r,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Aa(t,e,r){if(t==null)return t;var n=[],s=0;return si(t,n,"","",function(a){return e.call(r,a,s++)}),n}function b0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ge={current:null},ai={transition:null},w0={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:ai,ReactCurrentOwner:Yc};function ap(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:Aa,forEach:function(t,e,r){Aa(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Aa(t,function(){e++}),e},toArray:function(t){return Aa(t,function(e){return e})||[]},only:function(t){if(!Xc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};X.Component=Jn;X.Fragment=l0;X.Profiler=u0;X.PureComponent=Jc;X.StrictMode=c0;X.Suspense=p0;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w0;X.act=ap;X.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Zh({},t.props),s=t.key,a=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,i=Yc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)rp.call(e,c)&&!np.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ha,type:t.type,key:s,ref:a,props:n,_owner:i}};X.createContext=function(t){return t={$$typeof:f0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:d0,_context:t},t.Consumer=t};X.createElement=sp;X.createFactory=function(t){var e=sp.bind(null,t);return e.type=t,e};X.createRef=function(){return{current:null}};X.forwardRef=function(t){return{$$typeof:h0,render:t}};X.isValidElement=Xc;X.lazy=function(t){return{$$typeof:g0,_payload:{_status:-1,_result:t},_init:b0}};X.memo=function(t,e){return{$$typeof:m0,type:t,compare:e===void 0?null:e}};X.startTransition=function(t){var e=ai.transition;ai.transition={};try{t()}finally{ai.transition=e}};X.unstable_act=ap;X.useCallback=function(t,e){return Ge.current.useCallback(t,e)};X.useContext=function(t){return Ge.current.useContext(t)};X.useDebugValue=function(){};X.useDeferredValue=function(t){return Ge.current.useDeferredValue(t)};X.useEffect=function(t,e){return Ge.current.useEffect(t,e)};X.useId=function(){return Ge.current.useId()};X.useImperativeHandle=function(t,e,r){return Ge.current.useImperativeHandle(t,e,r)};X.useInsertionEffect=function(t,e){return Ge.current.useInsertionEffect(t,e)};X.useLayoutEffect=function(t,e){return Ge.current.useLayoutEffect(t,e)};X.useMemo=function(t,e){return Ge.current.useMemo(t,e)};X.useReducer=function(t,e,r){return Ge.current.useReducer(t,e,r)};X.useRef=function(t){return Ge.current.useRef(t)};X.useState=function(t){return Ge.current.useState(t)};X.useSyncExternalStore=function(t,e,r){return Ge.current.useSyncExternalStore(t,e,r)};X.useTransition=function(){return Ge.current.useTransition()};X.version="18.3.1";Yh.exports=X;var j=Yh.exports;const se=Kc(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0=j,j0=Symbol.for("react.element"),S0=Symbol.for("react.fragment"),N0=Object.prototype.hasOwnProperty,k0=_0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C0={key:!0,ref:!0,__self:!0,__source:!0};function ip(t,e,r){var n,s={},a=null,i=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)N0.call(e,n)&&!C0.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:j0,type:t,key:a,ref:i,props:s,_owner:k0.current}}Zi.Fragment=S0;Zi.jsx=ip;Zi.jsxs=ip;Qh.exports=Zi;var o=Qh.exports,op={exports:{}},ut={},lp={exports:{}},cp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,L){var U=T.length;T.push(L);e:for(;0<U;){var V=U-1>>>1,Q=T[V];if(0<s(Q,L))T[V]=L,T[U]=Q,U=V;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var L=T[0],U=T.pop();if(U!==L){T[0]=U;e:for(var V=0,Q=T.length,ge=Q>>>1;V<ge;){var te=2*(V+1)-1,Ee=T[te],xe=te+1,St=T[xe];if(0>s(Ee,U))xe<Q&&0>s(St,Ee)?(T[V]=St,T[xe]=U,V=xe):(T[V]=Ee,T[te]=U,V=te);else if(xe<Q&&0>s(St,U))T[V]=St,T[xe]=U,V=xe;else break e}}return L}function s(T,L){var U=T.sortIndex-L.sortIndex;return U!==0?U:T.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(T){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=T)n(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=r(u)}}function b(T){if(x=!1,v(T),!g)if(r(c)!==null)g=!0,I(S);else{var L=r(u);L!==null&&B(b,L.startTime-T)}}function S(T,L){g=!1,x&&(x=!1,y(O),O=-1),p=!0;var U=h;try{for(v(L),f=r(c);f!==null&&(!(f.expirationTime>L)||T&&!A());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var Q=V(f.expirationTime<=L);L=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===r(c)&&n(c),v(L)}else n(c);f=r(c)}if(f!==null)var ge=!0;else{var te=r(u);te!==null&&B(b,te.startTime-L),ge=!1}return ge}finally{f=null,h=U,p=!1}}var N=!1,D=null,O=-1,P=5,_=-1;function A(){return!(t.unstable_now()-_<P)}function E(){if(D!==null){var T=t.unstable_now();_=T;var L=!0;try{L=D(!0,T)}finally{L?R():(N=!1,D=null)}}else N=!1}var R;if(typeof m=="function")R=function(){m(E)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,C=k.port2;k.port1.onmessage=E,R=function(){C.postMessage(null)}}else R=function(){w(E,0)};function I(T){D=T,N||(N=!0,R())}function B(T,L){O=w(function(){T(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,I(S))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(T){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var U=h;h=L;try{return T()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,L){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var U=h;h=T;try{return L()}finally{h=U}},t.unstable_scheduleCallback=function(T,L,U){var V=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?V+U:V):U=V,T){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=U+Q,T={id:d++,callback:L,priorityLevel:T,startTime:U,expirationTime:Q,sortIndex:-1},U>V?(T.sortIndex=U,e(u,T),r(c)===null&&T===r(u)&&(x?(y(O),O=-1):x=!0,B(b,U-V))):(T.sortIndex=Q,e(c,T),g||p||(g=!0,I(S))),T},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(T){var L=h;return function(){var U=h;h=L;try{return T.apply(this,arguments)}finally{h=U}}}})(cp);lp.exports=cp;var E0=lp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0=j,ct=E0;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var up=new Set,zs={};function nn(t,e){Mn(t,e),Mn(t+"Capture",e)}function Mn(t,e){for(zs[t]=e,t=0;t<e.length;t++)up.add(e[t])}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rl=Object.prototype.hasOwnProperty,I0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ad={},Rd={};function P0(t){return Rl.call(Rd,t)?!0:Rl.call(Ad,t)?!1:I0.test(t)?Rd[t]=!0:(Ad[t]=!0,!1)}function T0(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O0(t,e,r,n){if(e===null||typeof e>"u"||T0(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,r,n,s,a,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=i}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Oe[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Oe[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Oe[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Oe[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Oe[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Oe[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Oe[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Oe[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Oe[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zc=/[\-:]([a-z])/g;function eu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zc,eu);Oe[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zc,eu);Oe[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zc,eu);Oe[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Oe[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Oe[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function tu(t,e,r,n){var s=Oe.hasOwnProperty(e)?Oe[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O0(e,r,s,n)&&(r=null),n||s===null?P0(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var tr=D0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ra=Symbol.for("react.element"),bn=Symbol.for("react.portal"),wn=Symbol.for("react.fragment"),ru=Symbol.for("react.strict_mode"),Ll=Symbol.for("react.profiler"),dp=Symbol.for("react.provider"),fp=Symbol.for("react.context"),nu=Symbol.for("react.forward_ref"),$l=Symbol.for("react.suspense"),Ml=Symbol.for("react.suspense_list"),su=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),hp=Symbol.for("react.offscreen"),Ld=Symbol.iterator;function cs(t){return t===null||typeof t!="object"?null:(t=Ld&&t[Ld]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Object.assign,Ho;function _s(t){if(Ho===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ho=e&&e[1]||""}return`
`+Ho+t}var qo=!1;function Go(t,e){if(!t||qo)return"";qo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{qo=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?_s(t):""}function A0(t){switch(t.tag){case 5:return _s(t.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 2:case 15:return t=Go(t.type,!1),t;case 11:return t=Go(t.type.render,!1),t;case 1:return t=Go(t.type,!0),t;default:return""}}function Bl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wn:return"Fragment";case bn:return"Portal";case Ll:return"Profiler";case ru:return"StrictMode";case $l:return"Suspense";case Ml:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fp:return(t.displayName||"Context")+".Consumer";case dp:return(t._context.displayName||"Context")+".Provider";case nu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case su:return e=t.displayName||null,e!==null?e:Bl(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return Bl(t(e))}catch{}}return null}function R0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bl(e);case 8:return e===ru?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function L0(t){var e=pp(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function La(t){t._valueTracker||(t._valueTracker=L0(t))}function mp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=pp(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function vi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ul(t,e){var r=e.checked;return pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function $d(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Nr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gp(t,e){e=e.checked,e!=null&&tu(t,"checked",e,!1)}function Fl(t,e){gp(t,e);var r=Nr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zl(t,e.type,r):e.hasOwnProperty("defaultValue")&&zl(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Md(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zl(t,e,r){(e!=="number"||vi(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var js=Array.isArray;function Tn(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Nr(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bd(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(M(92));if(js(r)){if(1<r.length)throw Error(M(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Nr(r)}}function vp(t,e){var r=Nr(e.value),n=Nr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Ud(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $a,xp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$a.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ws(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$0=["Webkit","ms","Moz","O"];Object.keys(Cs).forEach(function(t){$0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Cs[e]=Cs[t]})});function bp(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Cs.hasOwnProperty(t)&&Cs[t]?(""+e).trim():e+"px"}function wp(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=bp(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var M0=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ql(t,e){if(e){if(M0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Gl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vl=null;function au(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kl=null,On=null,An=null;function Fd(t){if(t=ga(t)){if(typeof Kl!="function")throw Error(M(280));var e=t.stateNode;e&&(e=so(e),Kl(t.stateNode,t.type,e))}}function _p(t){On?An?An.push(t):An=[t]:On=t}function jp(){if(On){var t=On,e=An;if(An=On=null,Fd(t),e)for(t=0;t<e.length;t++)Fd(e[t])}}function Sp(t,e){return t(e)}function Np(){}var Vo=!1;function kp(t,e,r){if(Vo)return t(e,r);Vo=!0;try{return Sp(t,e,r)}finally{Vo=!1,(On!==null||An!==null)&&(Np(),jp())}}function Hs(t,e){var r=t.stateNode;if(r===null)return null;var n=so(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(M(231,e,typeof r));return r}var Jl=!1;if(Yt)try{var us={};Object.defineProperty(us,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",us,us),window.removeEventListener("test",us,us)}catch{Jl=!1}function B0(t,e,r,n,s,a,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Es=!1,yi=null,xi=!1,Ql=null,U0={onError:function(t){Es=!0,yi=t}};function F0(t,e,r,n,s,a,i,l,c){Es=!1,yi=null,B0.apply(U0,arguments)}function z0(t,e,r,n,s,a,i,l,c){if(F0.apply(this,arguments),Es){if(Es){var u=yi;Es=!1,yi=null}else throw Error(M(198));xi||(xi=!0,Ql=u)}}function sn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Cp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zd(t){if(sn(t)!==t)throw Error(M(188))}function W0(t){var e=t.alternate;if(!e){if(e=sn(t),e===null)throw Error(M(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return zd(s),t;if(a===n)return zd(s),e;a=a.sibling}throw Error(M(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i)throw Error(M(189))}}if(r.alternate!==n)throw Error(M(190))}if(r.tag!==3)throw Error(M(188));return r.stateNode.current===r?t:e}function Ep(t){return t=W0(t),t!==null?Dp(t):null}function Dp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dp(t);if(e!==null)return e;t=t.sibling}return null}var Ip=ct.unstable_scheduleCallback,Wd=ct.unstable_cancelCallback,H0=ct.unstable_shouldYield,q0=ct.unstable_requestPaint,ve=ct.unstable_now,G0=ct.unstable_getCurrentPriorityLevel,iu=ct.unstable_ImmediatePriority,Pp=ct.unstable_UserBlockingPriority,bi=ct.unstable_NormalPriority,V0=ct.unstable_LowPriority,Tp=ct.unstable_IdlePriority,eo=null,Bt=null;function K0(t){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(eo,t,void 0,(t.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:Y0,J0=Math.log,Q0=Math.LN2;function Y0(t){return t>>>=0,t===0?32:31-(J0(t)/Q0|0)|0}var Ma=64,Ba=4194304;function Ss(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wi(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=Ss(l):(a&=i,a!==0&&(n=Ss(a)))}else i=r&~s,i!==0?n=Ss(i):a!==0&&(n=Ss(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Tt(e),s=1<<r,n|=t[r],e&=~s;return n}function X0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z0(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var i=31-Tt(a),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=X0(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Yl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Op(){var t=Ma;return Ma<<=1,!(Ma&4194240)&&(Ma=64),t}function Ko(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function pa(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tt(e),t[e]=r}function ey(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Tt(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function ou(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Tt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var re=0;function Ap(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rp,lu,Lp,$p,Mp,Xl=!1,Ua=[],pr=null,mr=null,gr=null,qs=new Map,Gs=new Map,cr=[],ty="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hd(t,e){switch(t){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":qs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(e.pointerId)}}function ds(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=ga(e),e!==null&&lu(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ry(t,e,r,n,s){switch(e){case"focusin":return pr=ds(pr,t,e,r,n,s),!0;case"dragenter":return mr=ds(mr,t,e,r,n,s),!0;case"mouseover":return gr=ds(gr,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return qs.set(a,ds(qs.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Gs.set(a,ds(Gs.get(a)||null,t,e,r,n,s)),!0}return!1}function Bp(t){var e=qr(t.target);if(e!==null){var r=sn(e);if(r!==null){if(e=r.tag,e===13){if(e=Cp(r),e!==null){t.blockedOn=e,Mp(t.priority,function(){Lp(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ii(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Zl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Vl=n,r.target.dispatchEvent(n),Vl=null}else return e=ga(r),e!==null&&lu(e),t.blockedOn=r,!1;e.shift()}return!0}function qd(t,e,r){ii(t)&&r.delete(e)}function ny(){Xl=!1,pr!==null&&ii(pr)&&(pr=null),mr!==null&&ii(mr)&&(mr=null),gr!==null&&ii(gr)&&(gr=null),qs.forEach(qd),Gs.forEach(qd)}function fs(t,e){t.blockedOn===e&&(t.blockedOn=null,Xl||(Xl=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,ny)))}function Vs(t){function e(s){return fs(s,t)}if(0<Ua.length){fs(Ua[0],t);for(var r=1;r<Ua.length;r++){var n=Ua[r];n.blockedOn===t&&(n.blockedOn=null)}}for(pr!==null&&fs(pr,t),mr!==null&&fs(mr,t),gr!==null&&fs(gr,t),qs.forEach(e),Gs.forEach(e),r=0;r<cr.length;r++)n=cr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<cr.length&&(r=cr[0],r.blockedOn===null);)Bp(r),r.blockedOn===null&&cr.shift()}var Rn=tr.ReactCurrentBatchConfig,_i=!0;function sy(t,e,r,n){var s=re,a=Rn.transition;Rn.transition=null;try{re=1,cu(t,e,r,n)}finally{re=s,Rn.transition=a}}function ay(t,e,r,n){var s=re,a=Rn.transition;Rn.transition=null;try{re=4,cu(t,e,r,n)}finally{re=s,Rn.transition=a}}function cu(t,e,r,n){if(_i){var s=Zl(t,e,r,n);if(s===null)sl(t,e,n,ji,r),Hd(t,n);else if(ry(s,t,e,r,n))n.stopPropagation();else if(Hd(t,n),e&4&&-1<ty.indexOf(t)){for(;s!==null;){var a=ga(s);if(a!==null&&Rp(a),a=Zl(t,e,r,n),a===null&&sl(t,e,n,ji,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else sl(t,e,n,null,r)}}var ji=null;function Zl(t,e,r,n){if(ji=null,t=au(n),t=qr(t),t!==null)if(e=sn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Cp(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ji=t,null}function Up(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G0()){case iu:return 1;case Pp:return 4;case bi:case V0:return 16;case Tp:return 536870912;default:return 16}default:return 16}}var fr=null,uu=null,oi=null;function Fp(){if(oi)return oi;var t,e=uu,r=e.length,n,s="value"in fr?fr.value:fr.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[a-n];n++);return oi=s.slice(t,1<n?1-n:void 0)}function li(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fa(){return!0}function Gd(){return!1}function dt(t){function e(r,n,s,a,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Fa:Gd,this.isPropagationStopped=Gd,this}return pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),e}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},du=dt(Qn),ma=pe({},Qn,{view:0,detail:0}),iy=dt(ma),Jo,Qo,hs,to=pe({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hs&&(hs&&t.type==="mousemove"?(Jo=t.screenX-hs.screenX,Qo=t.screenY-hs.screenY):Qo=Jo=0,hs=t),Jo)},movementY:function(t){return"movementY"in t?t.movementY:Qo}}),Vd=dt(to),oy=pe({},to,{dataTransfer:0}),ly=dt(oy),cy=pe({},ma,{relatedTarget:0}),Yo=dt(cy),uy=pe({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),dy=dt(uy),fy=pe({},Qn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hy=dt(fy),py=pe({},Qn,{data:0}),Kd=dt(py),my={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vy[t])?!!e[t]:!1}function fu(){return yy}var xy=pe({},ma,{key:function(t){if(t.key){var e=my[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=li(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(t){return t.type==="keypress"?li(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?li(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),by=dt(xy),wy=pe({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jd=dt(wy),_y=pe({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),jy=dt(_y),Sy=pe({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ny=dt(Sy),ky=pe({},to,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cy=dt(ky),Ey=[9,13,27,32],hu=Yt&&"CompositionEvent"in window,Ds=null;Yt&&"documentMode"in document&&(Ds=document.documentMode);var Dy=Yt&&"TextEvent"in window&&!Ds,zp=Yt&&(!hu||Ds&&8<Ds&&11>=Ds),Qd=" ",Yd=!1;function Wp(t,e){switch(t){case"keyup":return Ey.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _n=!1;function Iy(t,e){switch(t){case"compositionend":return Hp(e);case"keypress":return e.which!==32?null:(Yd=!0,Qd);case"textInput":return t=e.data,t===Qd&&Yd?null:t;default:return null}}function Py(t,e){if(_n)return t==="compositionend"||!hu&&Wp(t,e)?(t=Fp(),oi=uu=fr=null,_n=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zp&&e.locale!=="ko"?null:e.data;default:return null}}var Ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ty[t.type]:e==="textarea"}function qp(t,e,r,n){_p(n),e=Si(e,"onChange"),0<e.length&&(r=new du("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Is=null,Ks=null;function Oy(t){rm(t,0)}function ro(t){var e=Nn(t);if(mp(e))return t}function Ay(t,e){if(t==="change")return e}var Gp=!1;if(Yt){var Xo;if(Yt){var Zo="oninput"in document;if(!Zo){var Zd=document.createElement("div");Zd.setAttribute("oninput","return;"),Zo=typeof Zd.oninput=="function"}Xo=Zo}else Xo=!1;Gp=Xo&&(!document.documentMode||9<document.documentMode)}function ef(){Is&&(Is.detachEvent("onpropertychange",Vp),Ks=Is=null)}function Vp(t){if(t.propertyName==="value"&&ro(Ks)){var e=[];qp(e,Ks,t,au(t)),kp(Oy,e)}}function Ry(t,e,r){t==="focusin"?(ef(),Is=e,Ks=r,Is.attachEvent("onpropertychange",Vp)):t==="focusout"&&ef()}function Ly(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ro(Ks)}function $y(t,e){if(t==="click")return ro(e)}function My(t,e){if(t==="input"||t==="change")return ro(e)}function By(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var At=typeof Object.is=="function"?Object.is:By;function Js(t,e){if(At(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Rl.call(e,s)||!At(t[s],e[s]))return!1}return!0}function tf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rf(t,e){var r=tf(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tf(r)}}function Kp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jp(){for(var t=window,e=vi();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=vi(t.document)}return e}function pu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Uy(t){var e=Jp(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Kp(r.ownerDocument.documentElement,r)){if(n!==null&&pu(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=rf(r,a);var i=rf(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fy=Yt&&"documentMode"in document&&11>=document.documentMode,jn=null,ec=null,Ps=null,tc=!1;function nf(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tc||jn==null||jn!==vi(n)||(n=jn,"selectionStart"in n&&pu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ps&&Js(Ps,n)||(Ps=n,n=Si(ec,"onSelect"),0<n.length&&(e=new du("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=jn)))}function za(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Sn={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},el={},Qp={};Yt&&(Qp=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);function no(t){if(el[t])return el[t];if(!Sn[t])return t;var e=Sn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Qp)return el[t]=e[r];return t}var Yp=no("animationend"),Xp=no("animationiteration"),Zp=no("animationstart"),em=no("transitionend"),tm=new Map,sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(t,e){tm.set(t,e),nn(e,[t])}for(var tl=0;tl<sf.length;tl++){var rl=sf[tl],zy=rl.toLowerCase(),Wy=rl[0].toUpperCase()+rl.slice(1);Ir(zy,"on"+Wy)}Ir(Yp,"onAnimationEnd");Ir(Xp,"onAnimationIteration");Ir(Zp,"onAnimationStart");Ir("dblclick","onDoubleClick");Ir("focusin","onFocus");Ir("focusout","onBlur");Ir(em,"onTransitionEnd");Mn("onMouseEnter",["mouseout","mouseover"]);Mn("onMouseLeave",["mouseout","mouseover"]);Mn("onPointerEnter",["pointerout","pointerover"]);Mn("onPointerLeave",["pointerout","pointerover"]);nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nn("onBeforeInput",["compositionend","keypress","textInput","paste"]);nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ns));function af(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,z0(n,e,void 0,t),t.currentTarget=null}function rm(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;af(s,l,u),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;af(s,l,u),a=c}}}if(xi)throw t=Ql,xi=!1,Ql=null,t}function le(t,e){var r=e[ic];r===void 0&&(r=e[ic]=new Set);var n=t+"__bubble";r.has(n)||(nm(e,t,2,!1),r.add(n))}function nl(t,e,r){var n=0;e&&(n|=4),nm(r,t,n,e)}var Wa="_reactListening"+Math.random().toString(36).slice(2);function Qs(t){if(!t[Wa]){t[Wa]=!0,up.forEach(function(r){r!=="selectionchange"&&(Hy.has(r)||nl(r,!1,t),nl(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wa]||(e[Wa]=!0,nl("selectionchange",!1,e))}}function nm(t,e,r,n){switch(Up(e)){case 1:var s=sy;break;case 4:s=ay;break;default:s=cu}r=s.bind(null,e,r,t),s=void 0,!Jl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function sl(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=qr(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}kp(function(){var u=a,d=au(r),f=[];e:{var h=tm.get(t);if(h!==void 0){var p=du,g=t;switch(t){case"keypress":if(li(r)===0)break e;case"keydown":case"keyup":p=by;break;case"focusin":g="focus",p=Yo;break;case"focusout":g="blur",p=Yo;break;case"beforeblur":case"afterblur":p=Yo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=ly;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=jy;break;case Yp:case Xp:case Zp:p=dy;break;case em:p=Ny;break;case"scroll":p=iy;break;case"wheel":p=Cy;break;case"copy":case"cut":case"paste":p=hy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Jd}var x=(e&4)!==0,w=!x&&t==="scroll",y=x?h!==null?h+"Capture":null:h;x=[];for(var m=u,v;m!==null;){v=m;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,y!==null&&(b=Hs(m,y),b!=null&&x.push(Ys(m,b,v)))),w)break;m=m.return}0<x.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==Vl&&(g=r.relatedTarget||r.fromElement)&&(qr(g)||g[Xt]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?qr(g):null,g!==null&&(w=sn(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(x=Vd,b="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(x=Jd,b="onPointerLeave",y="onPointerEnter",m="pointer"),w=p==null?h:Nn(p),v=g==null?h:Nn(g),h=new x(b,m+"leave",p,r,d),h.target=w,h.relatedTarget=v,b=null,qr(d)===u&&(x=new x(y,m+"enter",g,r,d),x.target=v,x.relatedTarget=w,b=x),w=b,p&&g)t:{for(x=p,y=g,m=0,v=x;v;v=dn(v))m++;for(v=0,b=y;b;b=dn(b))v++;for(;0<m-v;)x=dn(x),m--;for(;0<v-m;)y=dn(y),v--;for(;m--;){if(x===y||y!==null&&x===y.alternate)break t;x=dn(x),y=dn(y)}x=null}else x=null;p!==null&&of(f,h,p,x,!1),g!==null&&w!==null&&of(f,w,g,x,!0)}}e:{if(h=u?Nn(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=Ay;else if(Xd(h))if(Gp)S=My;else{S=Ly;var N=Ry}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=$y);if(S&&(S=S(t,u))){qp(f,S,r,d);break e}N&&N(t,h,u),t==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&zl(h,"number",h.value)}switch(N=u?Nn(u):window,t){case"focusin":(Xd(N)||N.contentEditable==="true")&&(jn=N,ec=u,Ps=null);break;case"focusout":Ps=ec=jn=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,nf(f,r,d);break;case"selectionchange":if(Fy)break;case"keydown":case"keyup":nf(f,r,d)}var D;if(hu)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else _n?Wp(t,r)&&(O="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(zp&&r.locale!=="ko"&&(_n||O!=="onCompositionStart"?O==="onCompositionEnd"&&_n&&(D=Fp()):(fr=d,uu="value"in fr?fr.value:fr.textContent,_n=!0)),N=Si(u,O),0<N.length&&(O=new Kd(O,t,null,r,d),f.push({event:O,listeners:N}),D?O.data=D:(D=Hp(r),D!==null&&(O.data=D)))),(D=Dy?Iy(t,r):Py(t,r))&&(u=Si(u,"onBeforeInput"),0<u.length&&(d=new Kd("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=D))}rm(f,e)})}function Ys(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Si(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Hs(t,r),a!=null&&n.unshift(Ys(t,a,s)),a=Hs(t,e),a!=null&&n.push(Ys(t,a,s))),t=t.return}return n}function dn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function of(t,e,r,n,s){for(var a=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Hs(r,a),c!=null&&i.unshift(Ys(r,c,l))):s||(c=Hs(r,a),c!=null&&i.push(Ys(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var qy=/\r\n?/g,Gy=/\u0000|\uFFFD/g;function lf(t){return(typeof t=="string"?t:""+t).replace(qy,`
`).replace(Gy,"")}function Ha(t,e,r){if(e=lf(e),lf(t)!==e&&r)throw Error(M(425))}function Ni(){}var rc=null,nc=null;function sc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ac=typeof setTimeout=="function"?setTimeout:void 0,Vy=typeof clearTimeout=="function"?clearTimeout:void 0,cf=typeof Promise=="function"?Promise:void 0,Ky=typeof queueMicrotask=="function"?queueMicrotask:typeof cf<"u"?function(t){return cf.resolve(null).then(t).catch(Jy)}:ac;function Jy(t){setTimeout(function(){throw t})}function al(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Vs(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Vs(e)}function vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Yn=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Yn,Xs="__reactProps$"+Yn,Xt="__reactContainer$"+Yn,ic="__reactEvents$"+Yn,Qy="__reactListeners$"+Yn,Yy="__reactHandles$"+Yn;function qr(t){var e=t[Mt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Xt]||r[Mt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=uf(t);t!==null;){if(r=t[Mt])return r;t=uf(t)}return e}t=r,r=t.parentNode}return null}function ga(t){return t=t[Mt]||t[Xt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function so(t){return t[Xs]||null}var oc=[],kn=-1;function Pr(t){return{current:t}}function ce(t){0>kn||(t.current=oc[kn],oc[kn]=null,kn--)}function oe(t,e){kn++,oc[kn]=t.current,t.current=e}var kr={},Fe=Pr(kr),Ze=Pr(!1),Yr=kr;function Bn(t,e){var r=t.type.contextTypes;if(!r)return kr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function et(t){return t=t.childContextTypes,t!=null}function ki(){ce(Ze),ce(Fe)}function df(t,e,r){if(Fe.current!==kr)throw Error(M(168));oe(Fe,e),oe(Ze,r)}function sm(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(M(108,R0(t)||"Unknown",s));return pe({},r,n)}function Ci(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,Yr=Fe.current,oe(Fe,t),oe(Ze,Ze.current),!0}function ff(t,e,r){var n=t.stateNode;if(!n)throw Error(M(169));r?(t=sm(t,e,Yr),n.__reactInternalMemoizedMergedChildContext=t,ce(Ze),ce(Fe),oe(Fe,t)):ce(Ze),oe(Ze,r)}var Vt=null,ao=!1,il=!1;function am(t){Vt===null?Vt=[t]:Vt.push(t)}function Xy(t){ao=!0,am(t)}function Tr(){if(!il&&Vt!==null){il=!0;var t=0,e=re;try{var r=Vt;for(re=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Vt=null,ao=!1}catch(s){throw Vt!==null&&(Vt=Vt.slice(t+1)),Ip(iu,Tr),s}finally{re=e,il=!1}}return null}var Cn=[],En=0,Ei=null,Di=0,pt=[],mt=0,Xr=null,Kt=1,Jt="";function Ur(t,e){Cn[En++]=Di,Cn[En++]=Ei,Ei=t,Di=e}function im(t,e,r){pt[mt++]=Kt,pt[mt++]=Jt,pt[mt++]=Xr,Xr=t;var n=Kt;t=Jt;var s=32-Tt(n)-1;n&=~(1<<s),r+=1;var a=32-Tt(e)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Kt=1<<32-Tt(e)+s|r<<s|n,Jt=a+t}else Kt=1<<a|r<<s|n,Jt=t}function mu(t){t.return!==null&&(Ur(t,1),im(t,1,0))}function gu(t){for(;t===Ei;)Ei=Cn[--En],Cn[En]=null,Di=Cn[--En],Cn[En]=null;for(;t===Xr;)Xr=pt[--mt],pt[mt]=null,Jt=pt[--mt],pt[mt]=null,Kt=pt[--mt],pt[mt]=null}var it=null,st=null,ue=!1,It=null;function om(t,e){var r=vt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function hf(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,it=t,st=vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,it=t,st=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Xr!==null?{id:Kt,overflow:Jt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=vt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,it=t,st=null,!0):!1;default:return!1}}function lc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cc(t){if(ue){var e=st;if(e){var r=e;if(!hf(t,e)){if(lc(t))throw Error(M(418));e=vr(r.nextSibling);var n=it;e&&hf(t,e)?om(n,r):(t.flags=t.flags&-4097|2,ue=!1,it=t)}}else{if(lc(t))throw Error(M(418));t.flags=t.flags&-4097|2,ue=!1,it=t}}}function pf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;it=t}function qa(t){if(t!==it)return!1;if(!ue)return pf(t),ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sc(t.type,t.memoizedProps)),e&&(e=st)){if(lc(t))throw lm(),Error(M(418));for(;e;)om(t,e),e=vr(e.nextSibling)}if(pf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){st=vr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}st=null}}else st=it?vr(t.stateNode.nextSibling):null;return!0}function lm(){for(var t=st;t;)t=vr(t.nextSibling)}function Un(){st=it=null,ue=!1}function vu(t){It===null?It=[t]:It.push(t)}var Zy=tr.ReactCurrentBatchConfig;function ps(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(M(309));var n=r.stateNode}if(!n)throw Error(M(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},e._stringRef=a,e)}if(typeof t!="string")throw Error(M(284));if(!r._owner)throw Error(M(290,t))}return t}function Ga(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mf(t){var e=t._init;return e(t._payload)}function cm(t){function e(y,m){if(t){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function r(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=wr(y,m),y.index=0,y.sibling=null,y}function a(y,m,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,m,v,b){return m===null||m.tag!==6?(m=hl(v,y.mode,b),m.return=y,m):(m=s(m,v),m.return=y,m)}function c(y,m,v,b){var S=v.type;return S===wn?d(y,m,v.props.children,b,v.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===or&&mf(S)===m.type)?(b=s(m,v.props),b.ref=ps(y,m,v),b.return=y,b):(b=mi(v.type,v.key,v.props,null,y.mode,b),b.ref=ps(y,m,v),b.return=y,b)}function u(y,m,v,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=pl(v,y.mode,b),m.return=y,m):(m=s(m,v.children||[]),m.return=y,m)}function d(y,m,v,b,S){return m===null||m.tag!==7?(m=Qr(v,y.mode,b,S),m.return=y,m):(m=s(m,v),m.return=y,m)}function f(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=hl(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ra:return v=mi(m.type,m.key,m.props,null,y.mode,v),v.ref=ps(y,null,m),v.return=y,v;case bn:return m=pl(m,y.mode,v),m.return=y,m;case or:var b=m._init;return f(y,b(m._payload),v)}if(js(m)||cs(m))return m=Qr(m,y.mode,v,null),m.return=y,m;Ga(y,m)}return null}function h(y,m,v,b){var S=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:l(y,m,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ra:return v.key===S?c(y,m,v,b):null;case bn:return v.key===S?u(y,m,v,b):null;case or:return S=v._init,h(y,m,S(v._payload),b)}if(js(v)||cs(v))return S!==null?null:d(y,m,v,b,null);Ga(y,v)}return null}function p(y,m,v,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(v)||null,l(m,y,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ra:return y=y.get(b.key===null?v:b.key)||null,c(m,y,b,S);case bn:return y=y.get(b.key===null?v:b.key)||null,u(m,y,b,S);case or:var N=b._init;return p(y,m,v,N(b._payload),S)}if(js(b)||cs(b))return y=y.get(v)||null,d(m,y,b,S,null);Ga(m,b)}return null}function g(y,m,v,b){for(var S=null,N=null,D=m,O=m=0,P=null;D!==null&&O<v.length;O++){D.index>O?(P=D,D=null):P=D.sibling;var _=h(y,D,v[O],b);if(_===null){D===null&&(D=P);break}t&&D&&_.alternate===null&&e(y,D),m=a(_,m,O),N===null?S=_:N.sibling=_,N=_,D=P}if(O===v.length)return r(y,D),ue&&Ur(y,O),S;if(D===null){for(;O<v.length;O++)D=f(y,v[O],b),D!==null&&(m=a(D,m,O),N===null?S=D:N.sibling=D,N=D);return ue&&Ur(y,O),S}for(D=n(y,D);O<v.length;O++)P=p(D,y,O,v[O],b),P!==null&&(t&&P.alternate!==null&&D.delete(P.key===null?O:P.key),m=a(P,m,O),N===null?S=P:N.sibling=P,N=P);return t&&D.forEach(function(A){return e(y,A)}),ue&&Ur(y,O),S}function x(y,m,v,b){var S=cs(v);if(typeof S!="function")throw Error(M(150));if(v=S.call(v),v==null)throw Error(M(151));for(var N=S=null,D=m,O=m=0,P=null,_=v.next();D!==null&&!_.done;O++,_=v.next()){D.index>O?(P=D,D=null):P=D.sibling;var A=h(y,D,_.value,b);if(A===null){D===null&&(D=P);break}t&&D&&A.alternate===null&&e(y,D),m=a(A,m,O),N===null?S=A:N.sibling=A,N=A,D=P}if(_.done)return r(y,D),ue&&Ur(y,O),S;if(D===null){for(;!_.done;O++,_=v.next())_=f(y,_.value,b),_!==null&&(m=a(_,m,O),N===null?S=_:N.sibling=_,N=_);return ue&&Ur(y,O),S}for(D=n(y,D);!_.done;O++,_=v.next())_=p(D,y,O,_.value,b),_!==null&&(t&&_.alternate!==null&&D.delete(_.key===null?O:_.key),m=a(_,m,O),N===null?S=_:N.sibling=_,N=_);return t&&D.forEach(function(E){return e(y,E)}),ue&&Ur(y,O),S}function w(y,m,v,b){if(typeof v=="object"&&v!==null&&v.type===wn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ra:e:{for(var S=v.key,N=m;N!==null;){if(N.key===S){if(S=v.type,S===wn){if(N.tag===7){r(y,N.sibling),m=s(N,v.props.children),m.return=y,y=m;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===or&&mf(S)===N.type){r(y,N.sibling),m=s(N,v.props),m.ref=ps(y,N,v),m.return=y,y=m;break e}r(y,N);break}else e(y,N);N=N.sibling}v.type===wn?(m=Qr(v.props.children,y.mode,b,v.key),m.return=y,y=m):(b=mi(v.type,v.key,v.props,null,y.mode,b),b.ref=ps(y,m,v),b.return=y,y=b)}return i(y);case bn:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(y,m.sibling),m=s(m,v.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else e(y,m);m=m.sibling}m=pl(v,y.mode,b),m.return=y,y=m}return i(y);case or:return N=v._init,w(y,m,N(v._payload),b)}if(js(v))return g(y,m,v,b);if(cs(v))return x(y,m,v,b);Ga(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(y,m.sibling),m=s(m,v),m.return=y,y=m):(r(y,m),m=hl(v,y.mode,b),m.return=y,y=m),i(y)):r(y,m)}return w}var Fn=cm(!0),um=cm(!1),Ii=Pr(null),Pi=null,Dn=null,yu=null;function xu(){yu=Dn=Pi=null}function bu(t){var e=Ii.current;ce(Ii),t._currentValue=e}function uc(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ln(t,e){Pi=t,yu=Dn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xe=!0),t.firstContext=null)}function _t(t){var e=t._currentValue;if(yu!==t)if(t={context:t,memoizedValue:e,next:null},Dn===null){if(Pi===null)throw Error(M(308));Dn=t,Pi.dependencies={lanes:0,firstContext:t}}else Dn=Dn.next=t;return e}var Gr=null;function wu(t){Gr===null?Gr=[t]:Gr.push(t)}function dm(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,wu(e)):(r.next=s.next,s.next=r),e.interleaved=r,Zt(t,n)}function Zt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var lr=!1;function _u(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ee&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Zt(t,r)}return s=n.interleaved,s===null?(e.next=e,wu(n)):(e.next=s.next,s.next=e),n.interleaved=e,Zt(t,r)}function ci(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ou(t,r)}}function gf(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ti(t,e,r,n){var s=t.updateQueue;lr=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;i=0,d=u=c=null,l=a;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,x=l;switch(h=e,p=r,x.tag){case 1:if(g=x.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=pe({},f,h);break e;case 2:lr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,i|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);en|=i,t.lanes=i,t.memoizedState=f}}function vf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(M(191,s));s.call(n)}}}var va={},Ut=Pr(va),Zs=Pr(va),ea=Pr(va);function Vr(t){if(t===va)throw Error(M(174));return t}function ju(t,e){switch(oe(ea,e),oe(Zs,t),oe(Ut,va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hl(e,t)}ce(Ut),oe(Ut,e)}function zn(){ce(Ut),ce(Zs),ce(ea)}function hm(t){Vr(ea.current);var e=Vr(Ut.current),r=Hl(e,t.type);e!==r&&(oe(Zs,t),oe(Ut,r))}function Su(t){Zs.current===t&&(ce(Ut),ce(Zs))}var fe=Pr(0);function Oi(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ol=[];function Nu(){for(var t=0;t<ol.length;t++)ol[t]._workInProgressVersionPrimary=null;ol.length=0}var ui=tr.ReactCurrentDispatcher,ll=tr.ReactCurrentBatchConfig,Zr=0,he=null,be=null,je=null,Ai=!1,Ts=!1,ta=0,ex=0;function Le(){throw Error(M(321))}function ku(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!At(t[r],e[r]))return!1;return!0}function Cu(t,e,r,n,s,a){if(Zr=a,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ui.current=t===null||t.memoizedState===null?sx:ax,t=r(n,s),Ts){a=0;do{if(Ts=!1,ta=0,25<=a)throw Error(M(301));a+=1,je=be=null,e.updateQueue=null,ui.current=ix,t=r(n,s)}while(Ts)}if(ui.current=Ri,e=be!==null&&be.next!==null,Zr=0,je=be=he=null,Ai=!1,e)throw Error(M(300));return t}function Eu(){var t=ta!==0;return ta=0,t}function $t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?he.memoizedState=je=t:je=je.next=t,je}function jt(){if(be===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=je===null?he.memoizedState:je.next;if(e!==null)je=e,be=t;else{if(t===null)throw Error(M(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},je===null?he.memoizedState=je=t:je=je.next=t}return je}function ra(t,e){return typeof e=="function"?e(t):e}function cl(t){var e=jt(),r=e.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=t;var n=be,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=i=null,c=null,u=a;do{var d=u.lane;if((Zr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,he.lanes|=d,en|=d}u=u.next}while(u!==null&&u!==a);c===null?i=n:c.next=l,At(n,e.memoizedState)||(Xe=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,he.lanes|=a,en|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ul(t){var e=jt(),r=e.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do a=t(a,i.action),i=i.next;while(i!==s);At(a,e.memoizedState)||(Xe=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function pm(){}function mm(t,e){var r=he,n=jt(),s=e(),a=!At(n.memoizedState,s);if(a&&(n.memoizedState=s,Xe=!0),n=n.queue,Du(ym.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||je!==null&&je.memoizedState.tag&1){if(r.flags|=2048,na(9,vm.bind(null,r,n,s,e),void 0,null),Se===null)throw Error(M(349));Zr&30||gm(r,e,s)}return s}function gm(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function vm(t,e,r,n){e.value=r,e.getSnapshot=n,xm(e)&&bm(t)}function ym(t,e,r){return r(function(){xm(e)&&bm(t)})}function xm(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!At(t,r)}catch{return!0}}function bm(t){var e=Zt(t,1);e!==null&&Ot(e,t,1,-1)}function yf(t){var e=$t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:t},e.queue=t,t=t.dispatch=nx.bind(null,he,t),[e.memoizedState,t]}function na(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function wm(){return jt().memoizedState}function di(t,e,r,n){var s=$t();he.flags|=t,s.memoizedState=na(1|e,r,void 0,n===void 0?null:n)}function io(t,e,r,n){var s=jt();n=n===void 0?null:n;var a=void 0;if(be!==null){var i=be.memoizedState;if(a=i.destroy,n!==null&&ku(n,i.deps)){s.memoizedState=na(e,r,a,n);return}}he.flags|=t,s.memoizedState=na(1|e,r,a,n)}function xf(t,e){return di(8390656,8,t,e)}function Du(t,e){return io(2048,8,t,e)}function _m(t,e){return io(4,2,t,e)}function jm(t,e){return io(4,4,t,e)}function Sm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Nm(t,e,r){return r=r!=null?r.concat([t]):null,io(4,4,Sm.bind(null,e,t),r)}function Iu(){}function km(t,e){var r=jt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ku(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Cm(t,e){var r=jt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ku(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Em(t,e,r){return Zr&21?(At(r,e)||(r=Op(),he.lanes|=r,en|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xe=!0),t.memoizedState=r)}function tx(t,e){var r=re;re=r!==0&&4>r?r:4,t(!0);var n=ll.transition;ll.transition={};try{t(!1),e()}finally{re=r,ll.transition=n}}function Dm(){return jt().memoizedState}function rx(t,e,r){var n=br(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Im(t))Pm(e,r);else if(r=dm(t,e,r,n),r!==null){var s=He();Ot(r,t,n,s),Tm(r,e,n)}}function nx(t,e,r){var n=br(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Im(t))Pm(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var i=e.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,At(l,i)){var c=e.interleaved;c===null?(s.next=s,wu(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=dm(t,e,s,n),r!==null&&(s=He(),Ot(r,t,n,s),Tm(r,e,n))}}function Im(t){var e=t.alternate;return t===he||e!==null&&e===he}function Pm(t,e){Ts=Ai=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Tm(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ou(t,r)}}var Ri={readContext:_t,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},sx={readContext:_t,useCallback:function(t,e){return $t().memoizedState=[t,e===void 0?null:e],t},useContext:_t,useEffect:xf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,di(4194308,4,Sm.bind(null,e,t),r)},useLayoutEffect:function(t,e){return di(4194308,4,t,e)},useInsertionEffect:function(t,e){return di(4,2,t,e)},useMemo:function(t,e){var r=$t();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=$t();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=rx.bind(null,he,t),[n.memoizedState,t]},useRef:function(t){var e=$t();return t={current:t},e.memoizedState=t},useState:yf,useDebugValue:Iu,useDeferredValue:function(t){return $t().memoizedState=t},useTransition:function(){var t=yf(!1),e=t[0];return t=tx.bind(null,t[1]),$t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=he,s=$t();if(ue){if(r===void 0)throw Error(M(407));r=r()}else{if(r=e(),Se===null)throw Error(M(349));Zr&30||gm(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,xf(ym.bind(null,n,a,t),[t]),n.flags|=2048,na(9,vm.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=$t(),e=Se.identifierPrefix;if(ue){var r=Jt,n=Kt;r=(n&~(1<<32-Tt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ta++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=ex++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ax={readContext:_t,useCallback:km,useContext:_t,useEffect:Du,useImperativeHandle:Nm,useInsertionEffect:_m,useLayoutEffect:jm,useMemo:Cm,useReducer:cl,useRef:wm,useState:function(){return cl(ra)},useDebugValue:Iu,useDeferredValue:function(t){var e=jt();return Em(e,be.memoizedState,t)},useTransition:function(){var t=cl(ra)[0],e=jt().memoizedState;return[t,e]},useMutableSource:pm,useSyncExternalStore:mm,useId:Dm,unstable_isNewReconciler:!1},ix={readContext:_t,useCallback:km,useContext:_t,useEffect:Du,useImperativeHandle:Nm,useInsertionEffect:_m,useLayoutEffect:jm,useMemo:Cm,useReducer:ul,useRef:wm,useState:function(){return ul(ra)},useDebugValue:Iu,useDeferredValue:function(t){var e=jt();return be===null?e.memoizedState=t:Em(e,be.memoizedState,t)},useTransition:function(){var t=ul(ra)[0],e=jt().memoizedState;return[t,e]},useMutableSource:pm,useSyncExternalStore:mm,useId:Dm,unstable_isNewReconciler:!1};function Ct(t,e){if(t&&t.defaultProps){e=pe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function dc(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:pe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var oo={isMounted:function(t){return(t=t._reactInternals)?sn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=He(),s=br(t),a=Qt(n,s);a.payload=e,r!=null&&(a.callback=r),e=yr(t,a,s),e!==null&&(Ot(e,t,s,n),ci(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=He(),s=br(t),a=Qt(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=yr(t,a,s),e!==null&&(Ot(e,t,s,n),ci(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=He(),n=br(t),s=Qt(r,n);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,n),e!==null&&(Ot(e,t,n,r),ci(e,t,n))}};function bf(t,e,r,n,s,a,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,i):e.prototype&&e.prototype.isPureReactComponent?!Js(r,n)||!Js(s,a):!0}function Om(t,e,r){var n=!1,s=kr,a=e.contextType;return typeof a=="object"&&a!==null?a=_t(a):(s=et(e)?Yr:Fe.current,n=e.contextTypes,a=(n=n!=null)?Bn(t,s):kr),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function wf(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&oo.enqueueReplaceState(e,e.state,null)}function fc(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},_u(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=_t(a):(a=et(e)?Yr:Fe.current,s.context=Bn(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(dc(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&oo.enqueueReplaceState(s,s.state,null),Ti(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wn(t,e){try{var r="",n=e;do r+=A0(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function dl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function hc(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ox=typeof WeakMap=="function"?WeakMap:Map;function Am(t,e,r){r=Qt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){$i||($i=!0,jc=n),hc(t,e)},r}function Rm(t,e,r){r=Qt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){hc(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){hc(t,e),typeof n!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function _f(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new ox;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=wx.bind(null,t,e,r),e.then(t,t))}function jf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sf(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Qt(-1,1),e.tag=2,yr(r,e,1))),r.lanes|=1),t)}var lx=tr.ReactCurrentOwner,Xe=!1;function We(t,e,r,n){e.child=t===null?um(e,null,r,n):Fn(e,t.child,r,n)}function Nf(t,e,r,n,s){r=r.render;var a=e.ref;return Ln(e,s),n=Cu(t,e,r,n,a,s),r=Eu(),t!==null&&!Xe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,er(t,e,s)):(ue&&r&&mu(e),e.flags|=1,We(t,e,n,s),e.child)}function kf(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!Mu(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,Lm(t,e,a,n,s)):(t=mi(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Js,r(i,n)&&t.ref===e.ref)return er(t,e,s)}return e.flags|=1,t=wr(a,n),t.ref=e.ref,t.return=e,e.child=t}function Lm(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Js(a,n)&&t.ref===e.ref)if(Xe=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(Xe=!0);else return e.lanes=t.lanes,er(t,e,s)}return pc(t,e,r,n,s)}function $m(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Pn,nt),nt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(Pn,nt),nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,oe(Pn,nt),nt|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,oe(Pn,nt),nt|=n;return We(t,e,s,r),e.child}function Mm(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function pc(t,e,r,n,s){var a=et(r)?Yr:Fe.current;return a=Bn(e,a),Ln(e,s),r=Cu(t,e,r,n,a,s),n=Eu(),t!==null&&!Xe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,er(t,e,s)):(ue&&n&&mu(e),e.flags|=1,We(t,e,r,s),e.child)}function Cf(t,e,r,n,s){if(et(r)){var a=!0;Ci(e)}else a=!1;if(Ln(e,s),e.stateNode===null)fi(t,e),Om(e,r,n),fc(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=_t(u):(u=et(r)?Yr:Fe.current,u=Bn(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&wf(e,i,n,u),lr=!1;var h=e.memoizedState;i.state=h,Ti(e,n,i,s),c=e.memoizedState,l!==n||h!==c||Ze.current||lr?(typeof d=="function"&&(dc(e,r,d,n),c=e.memoizedState),(l=lr||bf(e,r,l,n,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,fm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ct(e.type,l),i.props=u,f=e.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=_t(c):(c=et(r)?Yr:Fe.current,c=Bn(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||h!==c)&&wf(e,i,n,c),lr=!1,h=e.memoizedState,i.state=h,Ti(e,n,i,s);var g=e.memoizedState;l!==f||h!==g||Ze.current||lr?(typeof p=="function"&&(dc(e,r,p,n),g=e.memoizedState),(u=lr||bf(e,r,u,n,h,g,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),i.props=n,i.state=g,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return mc(t,e,r,n,a,s)}function mc(t,e,r,n,s,a){Mm(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&ff(e,r,!1),er(t,e,a);n=e.stateNode,lx.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Fn(e,t.child,null,a),e.child=Fn(e,null,l,a)):We(t,e,l,a),e.memoizedState=n.state,s&&ff(e,r,!0),e.child}function Bm(t){var e=t.stateNode;e.pendingContext?df(t,e.pendingContext,e.pendingContext!==e.context):e.context&&df(t,e.context,!1),ju(t,e.containerInfo)}function Ef(t,e,r,n,s){return Un(),vu(s),e.flags|=256,We(t,e,r,n),e.child}var gc={dehydrated:null,treeContext:null,retryLane:0};function vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Um(t,e,r){var n=e.pendingProps,s=fe.current,a=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),oe(fe,s&1),t===null)return cc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,a?(n=e.mode,a=e.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=uo(i,n,0,null),t=Qr(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=vc(r),e.memoizedState=gc,t):Pu(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return cx(t,e,i,n,l,s,r);if(a){a=n.fallback,i=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=wr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=wr(l,a):(a=Qr(a,i,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,i=t.child.memoizedState,i=i===null?vc(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=t.childLanes&~r,e.memoizedState=gc,n}return a=t.child,t=a.sibling,n=wr(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Pu(t,e){return e=uo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Va(t,e,r,n){return n!==null&&vu(n),Fn(e,t.child,null,r),t=Pu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cx(t,e,r,n,s,a,i){if(r)return e.flags&256?(e.flags&=-257,n=dl(Error(M(422))),Va(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=uo({mode:"visible",children:n.children},s,0,null),a=Qr(a,s,i,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Fn(e,t.child,null,i),e.child.memoizedState=vc(i),e.memoizedState=gc,a);if(!(e.mode&1))return Va(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(M(419)),n=dl(a,n,void 0),Va(t,e,i,n)}if(l=(i&t.childLanes)!==0,Xe||l){if(n=Se,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Zt(t,s),Ot(n,t,s,-1))}return $u(),n=dl(Error(M(421))),Va(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_x.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,st=vr(s.nextSibling),it=e,ue=!0,It=null,t!==null&&(pt[mt++]=Kt,pt[mt++]=Jt,pt[mt++]=Xr,Kt=t.id,Jt=t.overflow,Xr=e),e=Pu(e,n.children),e.flags|=4096,e)}function Df(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),uc(t.return,e,r)}function fl(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Fm(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(We(t,e,n.children,r),n=fe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Df(t,r,e);else if(t.tag===19)Df(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(oe(fe,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Oi(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),fl(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oi(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}fl(e,!0,r,null,a);break;case"together":fl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function er(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),en|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,r=wr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=wr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function ux(t,e,r){switch(e.tag){case 3:Bm(e),Un();break;case 5:hm(e);break;case 1:et(e.type)&&Ci(e);break;case 4:ju(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;oe(Ii,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(oe(fe,fe.current&1),e.flags|=128,null):r&e.child.childLanes?Um(t,e,r):(oe(fe,fe.current&1),t=er(t,e,r),t!==null?t.sibling:null);oe(fe,fe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Fm(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oe(fe,fe.current),n)break;return null;case 22:case 23:return e.lanes=0,$m(t,e,r)}return er(t,e,r)}var zm,yc,Wm,Hm;zm=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yc=function(){};Wm=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Vr(Ut.current);var a=null;switch(r){case"input":s=Ul(t,s),n=Ul(t,n),a=[];break;case"select":s=pe({},s,{value:void 0}),n=pe({},n,{value:void 0}),a=[];break;case"textarea":s=Wl(t,s),n=Wl(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ni)}ql(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zs.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&le("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Hm=function(t,e,r,n){r!==n&&(e.flags|=4)};function ms(t,e){if(!ue)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function $e(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function dx(t,e,r){var n=e.pendingProps;switch(gu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(e),null;case 1:return et(e.type)&&ki(),$e(e),null;case 3:return n=e.stateNode,zn(),ce(Ze),ce(Fe),Nu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(qa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,It!==null&&(kc(It),It=null))),yc(t,e),$e(e),null;case 5:Su(e);var s=Vr(ea.current);if(r=e.type,t!==null&&e.stateNode!=null)Wm(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(M(166));return $e(e),null}if(t=Vr(Ut.current),qa(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Mt]=e,n[Xs]=a,t=(e.mode&1)!==0,r){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(s=0;s<Ns.length;s++)le(Ns[s],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":$d(n,a),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},le("invalid",n);break;case"textarea":Bd(n,a),le("invalid",n)}ql(r,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Ha(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Ha(n.textContent,l,t),s=["children",""+l]):zs.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&le("scroll",n)}switch(r){case"input":La(n),Md(n,a,!0);break;case"textarea":La(n),Ud(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ni)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yp(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Mt]=e,t[Xs]=n,zm(t,e,!1,!1),e.stateNode=t;e:{switch(i=Gl(r,n),r){case"dialog":le("cancel",t),le("close",t),s=n;break;case"iframe":case"object":case"embed":le("load",t),s=n;break;case"video":case"audio":for(s=0;s<Ns.length;s++)le(Ns[s],t);s=n;break;case"source":le("error",t),s=n;break;case"img":case"image":case"link":le("error",t),le("load",t),s=n;break;case"details":le("toggle",t),s=n;break;case"input":$d(t,n),s=Ul(t,n),le("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=pe({},n,{value:void 0}),le("invalid",t);break;case"textarea":Bd(t,n),s=Wl(t,n),le("invalid",t);break;default:s=n}ql(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?wp(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xp(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ws(t,c):typeof c=="number"&&Ws(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(zs.hasOwnProperty(a)?c!=null&&a==="onScroll"&&le("scroll",t):c!=null&&tu(t,a,c,i))}switch(r){case"input":La(t),Md(t,n,!1);break;case"textarea":La(t),Ud(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Nr(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Tn(t,!!n.multiple,a,!1):n.defaultValue!=null&&Tn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ni)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $e(e),null;case 6:if(t&&e.stateNode!=null)Hm(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(M(166));if(r=Vr(ea.current),Vr(Ut.current),qa(e)){if(n=e.stateNode,r=e.memoizedProps,n[Mt]=e,(a=n.nodeValue!==r)&&(t=it,t!==null))switch(t.tag){case 3:Ha(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ha(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Mt]=e,e.stateNode=n}return $e(e),null;case 13:if(ce(fe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ue&&st!==null&&e.mode&1&&!(e.flags&128))lm(),Un(),e.flags|=98560,a=!1;else if(a=qa(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(M(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(M(317));a[Mt]=e}else Un(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$e(e),a=!1}else It!==null&&(kc(It),It=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||fe.current&1?we===0&&(we=3):$u())),e.updateQueue!==null&&(e.flags|=4),$e(e),null);case 4:return zn(),yc(t,e),t===null&&Qs(e.stateNode.containerInfo),$e(e),null;case 10:return bu(e.type._context),$e(e),null;case 17:return et(e.type)&&ki(),$e(e),null;case 19:if(ce(fe),a=e.memoizedState,a===null)return $e(e),null;if(n=(e.flags&128)!==0,i=a.rendering,i===null)if(n)ms(a,!1);else{if(we!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Oi(t),i!==null){for(e.flags|=128,ms(a,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,t=i.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return oe(fe,fe.current&1|2),e.child}t=t.sibling}a.tail!==null&&ve()>Hn&&(e.flags|=128,n=!0,ms(a,!1),e.lanes=4194304)}else{if(!n)if(t=Oi(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ms(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ue)return $e(e),null}else 2*ve()-a.renderingStartTime>Hn&&r!==1073741824&&(e.flags|=128,n=!0,ms(a,!1),e.lanes=4194304);a.isBackwards?(i.sibling=e.child,e.child=i):(r=a.last,r!==null?r.sibling=i:e.child=i,a.last=i)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ve(),e.sibling=null,r=fe.current,oe(fe,n?r&1|2:r&1),e):($e(e),null);case 22:case 23:return Lu(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?nt&1073741824&&($e(e),e.subtreeFlags&6&&(e.flags|=8192)):$e(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function fx(t,e){switch(gu(e),e.tag){case 1:return et(e.type)&&ki(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zn(),ce(Ze),ce(Fe),Nu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Su(e),null;case 13:if(ce(fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Un()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(fe),null;case 4:return zn(),null;case 10:return bu(e.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var Ka=!1,Ue=!1,hx=typeof WeakSet=="function"?WeakSet:Set,W=null;function In(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){me(t,e,n)}else r.current=null}function xc(t,e,r){try{r()}catch(n){me(t,e,n)}}var If=!1;function px(t,e){if(rc=_i,t=Jp(),pu(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=i+s),f!==a||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===r&&++u===s&&(l=i),h===a&&++d===n&&(c=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(nc={focusedElem:t,selectionRange:r},_i=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,w=g.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ct(e.type,x),w);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(b){me(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return g=If,If=!1,g}function Os(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&xc(e,r,a)}s=s.next}while(s!==n)}}function lo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function bc(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function qm(t){var e=t.alternate;e!==null&&(t.alternate=null,qm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mt],delete e[Xs],delete e[ic],delete e[Qy],delete e[Yy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gm(t){return t.tag===5||t.tag===3||t.tag===4}function Pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wc(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ni));else if(n!==4&&(t=t.child,t!==null))for(wc(t,e,r),t=t.sibling;t!==null;)wc(t,e,r),t=t.sibling}function _c(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(_c(t,e,r),t=t.sibling;t!==null;)_c(t,e,r),t=t.sibling}var Ie=null,Et=!1;function sr(t,e,r){for(r=r.child;r!==null;)Vm(t,e,r),r=r.sibling}function Vm(t,e,r){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(eo,r)}catch{}switch(r.tag){case 5:Ue||In(r,e);case 6:var n=Ie,s=Et;Ie=null,sr(t,e,r),Ie=n,Et=s,Ie!==null&&(Et?(t=Ie,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ie.removeChild(r.stateNode));break;case 18:Ie!==null&&(Et?(t=Ie,r=r.stateNode,t.nodeType===8?al(t.parentNode,r):t.nodeType===1&&al(t,r),Vs(t)):al(Ie,r.stateNode));break;case 4:n=Ie,s=Et,Ie=r.stateNode.containerInfo,Et=!0,sr(t,e,r),Ie=n,Et=s;break;case 0:case 11:case 14:case 15:if(!Ue&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&xc(r,e,i),s=s.next}while(s!==n)}sr(t,e,r);break;case 1:if(!Ue&&(In(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){me(r,e,l)}sr(t,e,r);break;case 21:sr(t,e,r);break;case 22:r.mode&1?(Ue=(n=Ue)||r.memoizedState!==null,sr(t,e,r),Ue=n):sr(t,e,r);break;default:sr(t,e,r)}}function Tf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new hx),e.forEach(function(n){var s=jx.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Nt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ie=l.stateNode,Et=!1;break e;case 3:Ie=l.stateNode.containerInfo,Et=!0;break e;case 4:Ie=l.stateNode.containerInfo,Et=!0;break e}l=l.return}if(Ie===null)throw Error(M(160));Vm(a,i,s),Ie=null,Et=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){me(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Km(e,t),e=e.sibling}function Km(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nt(e,t),Lt(t),n&4){try{Os(3,t,t.return),lo(3,t)}catch(x){me(t,t.return,x)}try{Os(5,t,t.return)}catch(x){me(t,t.return,x)}}break;case 1:Nt(e,t),Lt(t),n&512&&r!==null&&In(r,r.return);break;case 5:if(Nt(e,t),Lt(t),n&512&&r!==null&&In(r,r.return),t.flags&32){var s=t.stateNode;try{Ws(s,"")}catch(x){me(t,t.return,x)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,i=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&gp(s,a),Gl(l,i);var u=Gl(l,a);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?wp(s,f):d==="dangerouslySetInnerHTML"?xp(s,f):d==="children"?Ws(s,f):tu(s,d,f,u)}switch(l){case"input":Fl(s,a);break;case"textarea":vp(s,a);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Tn(s,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?Tn(s,!!a.multiple,a.defaultValue,!0):Tn(s,!!a.multiple,a.multiple?[]:"",!1))}s[Xs]=a}catch(x){me(t,t.return,x)}}break;case 6:if(Nt(e,t),Lt(t),n&4){if(t.stateNode===null)throw Error(M(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(x){me(t,t.return,x)}}break;case 3:if(Nt(e,t),Lt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vs(e.containerInfo)}catch(x){me(t,t.return,x)}break;case 4:Nt(e,t),Lt(t);break;case 13:Nt(e,t),Lt(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Au=ve())),n&4&&Tf(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Ue=(u=Ue)||d,Nt(e,t),Ue=u):Nt(e,t),Lt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(W=t,d=t.child;d!==null;){for(f=W=d;W!==null;){switch(h=W,p=h.child,h.tag){case 0:case 11:case 14:case 15:Os(4,h,h.return);break;case 1:In(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){me(n,r,x)}}break;case 5:In(h,h.return);break;case 22:if(h.memoizedState!==null){Af(f);continue}}p!==null?(p.return=h,W=p):Af(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=bp("display",i))}catch(x){me(t,t.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){me(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Nt(e,t),Lt(t),n&4&&Tf(t);break;case 21:break;default:Nt(e,t),Lt(t)}}function Lt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Gm(r)){var n=r;break e}r=r.return}throw Error(M(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ws(s,""),n.flags&=-33);var a=Pf(t);_c(t,a,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Pf(t);wc(t,l,i);break;default:throw Error(M(161))}}catch(c){me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mx(t,e,r){W=t,Jm(t)}function Jm(t,e,r){for(var n=(t.mode&1)!==0;W!==null;){var s=W,a=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Ka;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ue;l=Ka;var u=Ue;if(Ka=i,(Ue=c)&&!u)for(W=s;W!==null;)i=W,c=i.child,i.tag===22&&i.memoizedState!==null?Rf(s):c!==null?(c.return=i,W=c):Rf(s);for(;a!==null;)W=a,Jm(a),a=a.sibling;W=s,Ka=l,Ue=u}Of(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,W=a):Of(t)}}function Of(t){for(;W!==null;){var e=W;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||lo(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ue)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ct(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&vf(e,a,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}vf(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Vs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ue||e.flags&512&&bc(e)}catch(h){me(e,e.return,h)}}if(e===t){W=null;break}if(r=e.sibling,r!==null){r.return=e.return,W=r;break}W=e.return}}function Af(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var r=e.sibling;if(r!==null){r.return=e.return,W=r;break}W=e.return}}function Rf(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{lo(4,e)}catch(c){me(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){me(e,s,c)}}var a=e.return;try{bc(e)}catch(c){me(e,a,c)}break;case 5:var i=e.return;try{bc(e)}catch(c){me(e,i,c)}}}catch(c){me(e,e.return,c)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var gx=Math.ceil,Li=tr.ReactCurrentDispatcher,Tu=tr.ReactCurrentOwner,xt=tr.ReactCurrentBatchConfig,ee=0,Se=null,ye=null,Te=0,nt=0,Pn=Pr(0),we=0,sa=null,en=0,co=0,Ou=0,As=null,Qe=null,Au=0,Hn=1/0,Ht=null,$i=!1,jc=null,xr=null,Ja=!1,hr=null,Mi=0,Rs=0,Sc=null,hi=-1,pi=0;function He(){return ee&6?ve():hi!==-1?hi:hi=ve()}function br(t){return t.mode&1?ee&2&&Te!==0?Te&-Te:Zy.transition!==null?(pi===0&&(pi=Op()),pi):(t=re,t!==0||(t=window.event,t=t===void 0?16:Up(t.type)),t):1}function Ot(t,e,r,n){if(50<Rs)throw Rs=0,Sc=null,Error(M(185));pa(t,r,n),(!(ee&2)||t!==Se)&&(t===Se&&(!(ee&2)&&(co|=r),we===4&&ur(t,Te)),tt(t,n),r===1&&ee===0&&!(e.mode&1)&&(Hn=ve()+500,ao&&Tr()))}function tt(t,e){var r=t.callbackNode;Z0(t,e);var n=wi(t,t===Se?Te:0);if(n===0)r!==null&&Wd(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Wd(r),e===1)t.tag===0?Xy(Lf.bind(null,t)):am(Lf.bind(null,t)),Ky(function(){!(ee&6)&&Tr()}),r=null;else{switch(Ap(n)){case 1:r=iu;break;case 4:r=Pp;break;case 16:r=bi;break;case 536870912:r=Tp;break;default:r=bi}r=ng(r,Qm.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Qm(t,e){if(hi=-1,pi=0,ee&6)throw Error(M(327));var r=t.callbackNode;if($n()&&t.callbackNode!==r)return null;var n=wi(t,t===Se?Te:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Bi(t,n);else{e=n;var s=ee;ee|=2;var a=Xm();(Se!==t||Te!==e)&&(Ht=null,Hn=ve()+500,Jr(t,e));do try{xx();break}catch(l){Ym(t,l)}while(!0);xu(),Li.current=a,ee=s,ye!==null?e=0:(Se=null,Te=0,e=we)}if(e!==0){if(e===2&&(s=Yl(t),s!==0&&(n=s,e=Nc(t,s))),e===1)throw r=sa,Jr(t,0),ur(t,n),tt(t,ve()),r;if(e===6)ur(t,n);else{if(s=t.current.alternate,!(n&30)&&!vx(s)&&(e=Bi(t,n),e===2&&(a=Yl(t),a!==0&&(n=a,e=Nc(t,a))),e===1))throw r=sa,Jr(t,0),ur(t,n),tt(t,ve()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(M(345));case 2:Fr(t,Qe,Ht);break;case 3:if(ur(t,n),(n&130023424)===n&&(e=Au+500-ve(),10<e)){if(wi(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){He(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ac(Fr.bind(null,t,Qe,Ht),e);break}Fr(t,Qe,Ht);break;case 4:if(ur(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-Tt(n);a=1<<i,i=e[i],i>s&&(s=i),n&=~a}if(n=s,n=ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*gx(n/1960))-n,10<n){t.timeoutHandle=ac(Fr.bind(null,t,Qe,Ht),n);break}Fr(t,Qe,Ht);break;case 5:Fr(t,Qe,Ht);break;default:throw Error(M(329))}}}return tt(t,ve()),t.callbackNode===r?Qm.bind(null,t):null}function Nc(t,e){var r=As;return t.current.memoizedState.isDehydrated&&(Jr(t,e).flags|=256),t=Bi(t,e),t!==2&&(e=Qe,Qe=r,e!==null&&kc(e)),t}function kc(t){Qe===null?Qe=t:Qe.push.apply(Qe,t)}function vx(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!At(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~Ou,e&=~co,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Tt(e),n=1<<r;t[r]=-1,e&=~n}}function Lf(t){if(ee&6)throw Error(M(327));$n();var e=wi(t,0);if(!(e&1))return tt(t,ve()),null;var r=Bi(t,e);if(t.tag!==0&&r===2){var n=Yl(t);n!==0&&(e=n,r=Nc(t,n))}if(r===1)throw r=sa,Jr(t,0),ur(t,e),tt(t,ve()),r;if(r===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fr(t,Qe,Ht),tt(t,ve()),null}function Ru(t,e){var r=ee;ee|=1;try{return t(e)}finally{ee=r,ee===0&&(Hn=ve()+500,ao&&Tr())}}function tn(t){hr!==null&&hr.tag===0&&!(ee&6)&&$n();var e=ee;ee|=1;var r=xt.transition,n=re;try{if(xt.transition=null,re=1,t)return t()}finally{re=n,xt.transition=r,ee=e,!(ee&6)&&Tr()}}function Lu(){nt=Pn.current,ce(Pn)}function Jr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Vy(r)),ye!==null)for(r=ye.return;r!==null;){var n=r;switch(gu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ki();break;case 3:zn(),ce(Ze),ce(Fe),Nu();break;case 5:Su(n);break;case 4:zn();break;case 13:ce(fe);break;case 19:ce(fe);break;case 10:bu(n.type._context);break;case 22:case 23:Lu()}r=r.return}if(Se=t,ye=t=wr(t.current,null),Te=nt=e,we=0,sa=null,Ou=co=en=0,Qe=As=null,Gr!==null){for(e=0;e<Gr.length;e++)if(r=Gr[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=s,n.next=i}r.pending=n}Gr=null}return t}function Ym(t,e){do{var r=ye;try{if(xu(),ui.current=Ri,Ai){for(var n=he.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ai=!1}if(Zr=0,je=be=he=null,Ts=!1,ta=0,Tu.current=null,r===null||r.return===null){we=1,sa=e,ye=null;break}e:{var a=t,i=r.return,l=r,c=e;if(e=Te,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=jf(i);if(p!==null){p.flags&=-257,Sf(p,i,l,a,e),p.mode&1&&_f(a,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var x=new Set;x.add(c),e.updateQueue=x}else g.add(c);break e}else{if(!(e&1)){_f(a,u,e),$u();break e}c=Error(M(426))}}else if(ue&&l.mode&1){var w=jf(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Sf(w,i,l,a,e),vu(Wn(c,l));break e}}a=c=Wn(c,l),we!==4&&(we=2),As===null?As=[a]:As.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=Am(a,c,e);gf(a,y);break e;case 1:l=c;var m=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(xr===null||!xr.has(v)))){a.flags|=65536,e&=-e,a.lanes|=e;var b=Rm(a,l,e);gf(a,b);break e}}a=a.return}while(a!==null)}eg(r)}catch(S){e=S,ye===r&&r!==null&&(ye=r=r.return);continue}break}while(!0)}function Xm(){var t=Li.current;return Li.current=Ri,t===null?Ri:t}function $u(){(we===0||we===3||we===2)&&(we=4),Se===null||!(en&268435455)&&!(co&268435455)||ur(Se,Te)}function Bi(t,e){var r=ee;ee|=2;var n=Xm();(Se!==t||Te!==e)&&(Ht=null,Jr(t,e));do try{yx();break}catch(s){Ym(t,s)}while(!0);if(xu(),ee=r,Li.current=n,ye!==null)throw Error(M(261));return Se=null,Te=0,we}function yx(){for(;ye!==null;)Zm(ye)}function xx(){for(;ye!==null&&!H0();)Zm(ye)}function Zm(t){var e=rg(t.alternate,t,nt);t.memoizedProps=t.pendingProps,e===null?eg(t):ye=e,Tu.current=null}function eg(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=fx(r,e),r!==null){r.flags&=32767,ye=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{we=6,ye=null;return}}else if(r=dx(r,e,nt),r!==null){ye=r;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);we===0&&(we=5)}function Fr(t,e,r){var n=re,s=xt.transition;try{xt.transition=null,re=1,bx(t,e,r,n)}finally{xt.transition=s,re=n}return null}function bx(t,e,r,n){do $n();while(hr!==null);if(ee&6)throw Error(M(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(ey(t,a),t===Se&&(ye=Se=null,Te=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ja||(Ja=!0,ng(bi,function(){return $n(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=xt.transition,xt.transition=null;var i=re;re=1;var l=ee;ee|=4,Tu.current=null,px(t,r),Km(r,t),Uy(nc),_i=!!rc,nc=rc=null,t.current=r,mx(r),q0(),ee=l,re=i,xt.transition=a}else t.current=r;if(Ja&&(Ja=!1,hr=t,Mi=s),a=t.pendingLanes,a===0&&(xr=null),K0(r.stateNode),tt(t,ve()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if($i)throw $i=!1,t=jc,jc=null,t;return Mi&1&&t.tag!==0&&$n(),a=t.pendingLanes,a&1?t===Sc?Rs++:(Rs=0,Sc=t):Rs=0,Tr(),null}function $n(){if(hr!==null){var t=Ap(Mi),e=xt.transition,r=re;try{if(xt.transition=null,re=16>t?16:t,hr===null)var n=!1;else{if(t=hr,hr=null,Mi=0,ee&6)throw Error(M(331));var s=ee;for(ee|=4,W=t.current;W!==null;){var a=W,i=a.child;if(W.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(W=u;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:Os(8,d,a)}var f=d.child;if(f!==null)f.return=d,W=f;else for(;W!==null;){d=W;var h=d.sibling,p=d.return;if(qm(d),d===u){W=null;break}if(h!==null){h.return=p,W=h;break}W=p}}}var g=a.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}W=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,W=i;else e:for(;W!==null;){if(a=W,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Os(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,W=y;break e}W=a.return}}var m=t.current;for(W=m;W!==null;){i=W;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,W=v;else e:for(i=m;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lo(9,l)}}catch(S){me(l,l.return,S)}if(l===i){W=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,W=b;break e}W=l.return}}if(ee=s,Tr(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(eo,t)}catch{}n=!0}return n}finally{re=r,xt.transition=e}}return!1}function $f(t,e,r){e=Wn(r,e),e=Am(t,e,1),t=yr(t,e,1),e=He(),t!==null&&(pa(t,1,e),tt(t,e))}function me(t,e,r){if(t.tag===3)$f(t,t,r);else for(;e!==null;){if(e.tag===3){$f(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xr===null||!xr.has(n))){t=Wn(r,t),t=Rm(e,t,1),e=yr(e,t,1),t=He(),e!==null&&(pa(e,1,t),tt(e,t));break}}e=e.return}}function wx(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=He(),t.pingedLanes|=t.suspendedLanes&r,Se===t&&(Te&r)===r&&(we===4||we===3&&(Te&130023424)===Te&&500>ve()-Au?Jr(t,0):Ou|=r),tt(t,e)}function tg(t,e){e===0&&(t.mode&1?(e=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):e=1);var r=He();t=Zt(t,e),t!==null&&(pa(t,e,r),tt(t,r))}function _x(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),tg(t,r)}function jx(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(M(314))}n!==null&&n.delete(e),tg(t,r)}var rg;rg=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ze.current)Xe=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Xe=!1,ux(t,e,r);Xe=!!(t.flags&131072)}else Xe=!1,ue&&e.flags&1048576&&im(e,Di,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;fi(t,e),t=e.pendingProps;var s=Bn(e,Fe.current);Ln(e,r),s=Cu(null,e,n,t,s,r);var a=Eu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(n)?(a=!0,Ci(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_u(e),s.updater=oo,e.stateNode=s,s._reactInternals=e,fc(e,n,t,r),e=mc(null,e,n,!0,a,r)):(e.tag=0,ue&&a&&mu(e),We(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(fi(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Nx(n),t=Ct(n,t),s){case 0:e=pc(null,e,n,t,r);break e;case 1:e=Cf(null,e,n,t,r);break e;case 11:e=Nf(null,e,n,t,r);break e;case 14:e=kf(null,e,n,Ct(n.type,t),r);break e}throw Error(M(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ct(n,s),pc(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ct(n,s),Cf(t,e,n,s,r);case 3:e:{if(Bm(e),t===null)throw Error(M(387));n=e.pendingProps,a=e.memoizedState,s=a.element,fm(t,e),Ti(e,n,null,r);var i=e.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Wn(Error(M(423)),e),e=Ef(t,e,n,r,s);break e}else if(n!==s){s=Wn(Error(M(424)),e),e=Ef(t,e,n,r,s);break e}else for(st=vr(e.stateNode.containerInfo.firstChild),it=e,ue=!0,It=null,r=um(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Un(),n===s){e=er(t,e,r);break e}We(t,e,n,r)}e=e.child}return e;case 5:return hm(e),t===null&&cc(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,sc(n,s)?i=null:a!==null&&sc(n,a)&&(e.flags|=32),Mm(t,e),We(t,e,i,r),e.child;case 6:return t===null&&cc(e),null;case 13:return Um(t,e,r);case 4:return ju(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Fn(e,null,n,r):We(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ct(n,s),Nf(t,e,n,s,r);case 7:return We(t,e,e.pendingProps,r),e.child;case 8:return We(t,e,e.pendingProps.children,r),e.child;case 12:return We(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,i=s.value,oe(Ii,n._currentValue),n._currentValue=i,a!==null)if(At(a.value,i)){if(a.children===s.children&&!Ze.current){e=er(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Qt(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),uc(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===e.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(M(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),uc(i,r,e),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===e){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}We(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Ln(e,r),s=_t(s),n=n(s),e.flags|=1,We(t,e,n,r),e.child;case 14:return n=e.type,s=Ct(n,e.pendingProps),s=Ct(n.type,s),kf(t,e,n,s,r);case 15:return Lm(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ct(n,s),fi(t,e),e.tag=1,et(n)?(t=!0,Ci(e)):t=!1,Ln(e,r),Om(e,n,s),fc(e,n,s,r),mc(null,e,n,!0,t,r);case 19:return Fm(t,e,r);case 22:return $m(t,e,r)}throw Error(M(156,e.tag))};function ng(t,e){return Ip(t,e)}function Sx(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,e,r,n){return new Sx(t,e,r,n)}function Mu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nx(t){if(typeof t=="function")return Mu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nu)return 11;if(t===su)return 14}return 2}function wr(t,e){var r=t.alternate;return r===null?(r=vt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function mi(t,e,r,n,s,a){var i=2;if(n=t,typeof t=="function")Mu(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case wn:return Qr(r.children,s,a,e);case ru:i=8,s|=8;break;case Ll:return t=vt(12,r,e,s|2),t.elementType=Ll,t.lanes=a,t;case $l:return t=vt(13,r,e,s),t.elementType=$l,t.lanes=a,t;case Ml:return t=vt(19,r,e,s),t.elementType=Ml,t.lanes=a,t;case hp:return uo(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dp:i=10;break e;case fp:i=9;break e;case nu:i=11;break e;case su:i=14;break e;case or:i=16,n=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=vt(i,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function Qr(t,e,r,n){return t=vt(7,t,n,e),t.lanes=r,t}function uo(t,e,r,n){return t=vt(22,t,n,e),t.elementType=hp,t.lanes=r,t.stateNode={isHidden:!1},t}function hl(t,e,r){return t=vt(6,t,null,e),t.lanes=r,t}function pl(t,e,r){return e=vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kx(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ko(0),this.expirationTimes=Ko(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ko(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bu(t,e,r,n,s,a,i,l,c){return t=new kx(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=vt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_u(a),t}function Cx(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function sg(t){if(!t)return kr;t=t._reactInternals;e:{if(sn(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var r=t.type;if(et(r))return sm(t,r,e)}return e}function ag(t,e,r,n,s,a,i,l,c){return t=Bu(r,n,!0,t,s,a,i,l,c),t.context=sg(null),r=t.current,n=He(),s=br(r),a=Qt(n,s),a.callback=e??null,yr(r,a,s),t.current.lanes=s,pa(t,s,n),tt(t,n),t}function fo(t,e,r,n){var s=e.current,a=He(),i=br(s);return r=sg(r),e.context===null?e.context=r:e.pendingContext=r,e=Qt(a,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=yr(s,e,i),t!==null&&(Ot(t,s,i,a),ci(t,s,i)),i}function Ui(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Uu(t,e){Mf(t,e),(t=t.alternate)&&Mf(t,e)}function Ex(){return null}var ig=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fu(t){this._internalRoot=t}ho.prototype.render=Fu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));fo(t,e,null,null)};ho.prototype.unmount=Fu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;tn(function(){fo(null,t,null,null)}),e[Xt]=null}};function ho(t){this._internalRoot=t}ho.prototype.unstable_scheduleHydration=function(t){if(t){var e=$p();t={blockedOn:null,target:t,priority:e};for(var r=0;r<cr.length&&e!==0&&e<cr[r].priority;r++);cr.splice(r,0,t),r===0&&Bp(t)}};function zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function po(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bf(){}function Dx(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Ui(i);a.call(u)}}var i=ag(e,n,t,0,null,!1,!1,"",Bf);return t._reactRootContainer=i,t[Xt]=i.current,Qs(t.nodeType===8?t.parentNode:t),tn(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Ui(c);l.call(u)}}var c=Bu(t,0,!1,null,null,!1,!1,"",Bf);return t._reactRootContainer=c,t[Xt]=c.current,Qs(t.nodeType===8?t.parentNode:t),tn(function(){fo(e,c,r,n)}),c}function mo(t,e,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=Ui(i);l.call(c)}}fo(e,i,t,s)}else i=Dx(r,e,t,s,n);return Ui(i)}Rp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ss(e.pendingLanes);r!==0&&(ou(e,r|1),tt(e,ve()),!(ee&6)&&(Hn=ve()+500,Tr()))}break;case 13:tn(function(){var n=Zt(t,1);if(n!==null){var s=He();Ot(n,t,1,s)}}),Uu(t,1)}};lu=function(t){if(t.tag===13){var e=Zt(t,134217728);if(e!==null){var r=He();Ot(e,t,134217728,r)}Uu(t,134217728)}};Lp=function(t){if(t.tag===13){var e=br(t),r=Zt(t,e);if(r!==null){var n=He();Ot(r,t,e,n)}Uu(t,e)}};$p=function(){return re};Mp=function(t,e){var r=re;try{return re=t,e()}finally{re=r}};Kl=function(t,e,r){switch(e){case"input":if(Fl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=so(n);if(!s)throw Error(M(90));mp(n),Fl(n,s)}}}break;case"textarea":vp(t,r);break;case"select":e=r.value,e!=null&&Tn(t,!!r.multiple,e,!1)}};Sp=Ru;Np=tn;var Ix={usingClientEntryPoint:!1,Events:[ga,Nn,so,_p,jp,Ru]},gs={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Px={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ep(t),t===null?null:t.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||Ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{eo=Qa.inject(Px),Bt=Qa}catch{}}ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ix;ut.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zu(e))throw Error(M(200));return Cx(t,e,null,r)};ut.createRoot=function(t,e){if(!zu(t))throw Error(M(299));var r=!1,n="",s=ig;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bu(t,1,!1,null,null,r,!1,n,s),t[Xt]=e.current,Qs(t.nodeType===8?t.parentNode:t),new Fu(e)};ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=Ep(e),t=t===null?null:t.stateNode,t};ut.flushSync=function(t){return tn(t)};ut.hydrate=function(t,e,r){if(!po(e))throw Error(M(200));return mo(null,t,e,!0,r)};ut.hydrateRoot=function(t,e,r){if(!zu(t))throw Error(M(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",i=ig;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=ag(e,null,t,1,r??null,s,!1,a,i),t[Xt]=e.current,Qs(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new ho(e)};ut.render=function(t,e,r){if(!po(e))throw Error(M(200));return mo(null,t,e,!1,r)};ut.unmountComponentAtNode=function(t){if(!po(t))throw Error(M(40));return t._reactRootContainer?(tn(function(){mo(null,null,t,!1,function(){t._reactRootContainer=null,t[Xt]=null})}),!0):!1};ut.unstable_batchedUpdates=Ru;ut.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!po(r))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return mo(t,e,r,!1,n)};ut.version="18.3.1-next-f1338f8080-20240426";function og(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(og)}catch(t){console.error(t)}}og(),op.exports=ut;var Wu=op.exports;const Tx=Kc(Wu);var lg,Uf=Wu;lg=Uf.createRoot,Uf.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ox={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const r=j.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:l="",children:c,...u},d)=>j.createElement("svg",{ref:d,...Ox,width:s,height:s,stroke:n,strokeWidth:i?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Ax(t)}`,l].join(" "),...u},[...e.map(([f,h])=>j.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=J("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=J("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=J("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=J("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=J("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=J("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=J("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=J("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=J("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=J("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=J("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=J("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=J("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=J("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xx=async t=>{try{const e="a18021ea544a00d65b5befab61e61a34",n=await fetch("https://api.line.me/oauth2/v2.1/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:"http://localhost:5173/auth/callback",client_id:"2007845041",client_secret:e})});if(!n.ok){const s=await n.json().catch(()=>({}));throw console.error("LINE API :",s),new Error("")}return n.json()}catch(e){throw console.error(":",e),e instanceof TypeError&&e.message.includes("fetch")?new Error(""):e}},Zx=t=>{try{const e=JSON.parse(atob(t.split(".")[1])),r=Math.floor(Date.now()/1e3);if(e.exp&&e.exp<r)throw new Error("ID");if(e.iss!=="https://access.line.me")throw new Error("IDissuer");if(e.aud!=="2007845041")throw new Error("IDaudience");return{userId:e.sub,displayName:e.name||"LINE ",pictureUrl:e.picture,email:e.email}}catch(e){throw console.error("ID:",e),new Error("ID")}},eb=async t=>{const r=await fetch("https://api.line.me/v2/profile",{headers:{Authorization:`Bearer ${t}`}});if(!r.ok){const s=await r.json().catch(()=>({}));throw console.error(":",s),new Error("")}const n=await r.json();return{userId:n.userId,displayName:n.displayName,pictureUrl:n.pictureUrl,email:void 0}},Ff=t=>{const e=localStorage.getItem("line_auth_timestamp");if(!e)return!0;const r=parseInt(e),n=Date.now(),s=24*60*60*1e3;return n-r>s},hg=()=>{localStorage.setItem("line_auth_timestamp",Date.now().toString())},vs="line_auth_user",tb={user:null,isAuthenticated:!1,isLoading:!0,error:null};function rb(t,e){switch(e.type){case"LOGIN_START":return{...t,isLoading:!0,error:null};case"LOGIN_SUCCESS":return{...t,user:e.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_ERROR":return{...t,user:null,isAuthenticated:!1,isLoading:!1,error:e.payload};case"LOGOUT":return{...t,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"CLEAR_ERROR":return{...t,error:null};case"SET_LOADING":return{...t,isLoading:e.payload};default:return t}}const ml={channelId:"2007845041",redirectUri:"http://localhost:5173/auth/callback",scope:"profile openid email"},pg=j.createContext(void 0),on=()=>{const t=j.useContext(pg);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},nb=({children:t})=>{const[e,r]=j.useReducer(rb,tb);j.useEffect(()=>{(async()=>{try{const d=localStorage.getItem(vs);if(d){const f=JSON.parse(d);Ff(f)?(console.log(""),localStorage.removeItem(vs),localStorage.removeItem("line_auth_timestamp"),r({type:"SET_LOADING",payload:!1})):(hg(),r({type:"LOGIN_SUCCESS",payload:f}))}else r({type:"SET_LOADING",payload:!1})}catch(d){console.error(":",d),localStorage.removeItem(vs),localStorage.removeItem("line_auth_timestamp"),r({type:"SET_LOADING",payload:!1})}})();const u=setInterval(()=>{const d=localStorage.getItem(vs);d&&(JSON.parse(d),Ff()&&(console.log(""),a()))},60*60*1e3);return()=>clearInterval(u)},[]);const n=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),s=()=>{r({type:"LOGIN_START"});const c=n();localStorage.setItem("line_login_state",c);const d=`https://access.line.me/oauth2/v2.1/authorize?${new URLSearchParams({response_type:"code",client_id:ml.channelId,redirect_uri:ml.redirectUri,state:c,scope:ml.scope}).toString()}`;try{window.location.href=d}catch(f){console.error(":",f),r({type:"LOGIN_ERROR",payload:""})}},a=()=>{localStorage.removeItem(vs),localStorage.removeItem("line_login_state"),localStorage.removeItem("line_auth_timestamp"),r({type:"LOGOUT"})},l={...e,login:s,logout:a,clearError:()=>{r({type:"CLEAR_ERROR"})}};return o.jsx(pg.Provider,{value:l,children:t})},sb="modulepreload",ab=function(t){return"/"+t},zf={},ya=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=ab(c),c in zf)return;zf[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":sb,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},ib=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ya(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Yu extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class ob extends Yu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Wf extends Yu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Hf extends Yu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ic;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ic||(Ic={}));var lb=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class cb{constructor(e,{headers:r={},customFetch:n,region:s=Ic.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=ib(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return lb(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:i}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(x=>{throw new ob(x)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new Wf(f);if(!f.ok)throw new Hf(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield f.json():p==="application/octet-stream"?g=yield f.blob():p==="text/event-stream"?g=f:p==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof Hf||s instanceof Wf?s.context:void 0}}})}}var Ye={},Xu={},go={},xa={},vo={},yo={},ub=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qn=ub();const db=qn.fetch,mg=qn.fetch.bind(qn),gg=qn.Headers,fb=qn.Request,hb=qn.Response,Zn=Object.freeze(Object.defineProperty({__proto__:null,Headers:gg,Request:fb,Response:hb,default:mg,fetch:db},Symbol.toStringTag,{value:"Module"})),pb=i0(Zn);var xo={};Object.defineProperty(xo,"__esModule",{value:!0});let mb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};xo.default=mb;var vg=wt&&wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yo,"__esModule",{value:!0});const gb=vg(pb),vb=vg(xo);let yb=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=gb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c;let u=null,d=null,f=null,h=a.status,p=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const x=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),w=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&w&&w.length>1&&(f=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await a.text();try{u=JSON.parse(x),Array.isArray(u)&&a.status===404&&(d=[],u=null,h=200,p="OK")}catch{a.status===404&&x===""?(h=204,p="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new vb.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};yo.default=yb;var xb=wt&&wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vo,"__esModule",{value:!0});const bb=xb(yo);let wb=class extends bb.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};vo.default=wb;var _b=wt&&wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xa,"__esModule",{value:!0});const jb=_b(vo);let Sb=class extends jb.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${i}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};xa.default=Sb;var Nb=wt&&wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(go,"__esModule",{value:!0});const ys=Nb(xa);let kb=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new ys.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ys.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const i="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ys.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new ys.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ys.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};go.default=kb;var bo={},wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.version=void 0;wo.version="0.0.0-automated";Object.defineProperty(bo,"__esModule",{value:!0});bo.DEFAULT_HEADERS=void 0;const Cb=wo;bo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Cb.version}`};var yg=wt&&wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xu,"__esModule",{value:!0});const Eb=yg(go),Db=yg(xa),Ib=bo;let Pb=class xg{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ib.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new Eb.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new xg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){let i;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(i="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new Db.default({method:i,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Xu.default=Pb;var es=wt&&wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.PostgrestError=Ye.PostgrestBuilder=Ye.PostgrestTransformBuilder=Ye.PostgrestFilterBuilder=Ye.PostgrestQueryBuilder=Ye.PostgrestClient=void 0;const bg=es(Xu);Ye.PostgrestClient=bg.default;const wg=es(go);Ye.PostgrestQueryBuilder=wg.default;const _g=es(xa);Ye.PostgrestFilterBuilder=_g.default;const jg=es(vo);Ye.PostgrestTransformBuilder=jg.default;const Sg=es(yo);Ye.PostgrestBuilder=Sg.default;const Ng=es(xo);Ye.PostgrestError=Ng.default;var Tb=Ye.default={PostgrestClient:bg.default,PostgrestQueryBuilder:wg.default,PostgrestFilterBuilder:_g.default,PostgrestTransformBuilder:jg.default,PostgrestBuilder:Sg.default,PostgrestError:Ng.default};const{PostgrestClient:Ob,PostgrestQueryBuilder:Ak,PostgrestFilterBuilder:Rk,PostgrestTransformBuilder:Lk,PostgrestBuilder:$k,PostgrestError:Mk}=Tb;function Ab(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Rb=Ab(),Lb="2.11.15",$b=`realtime-js/${Lb}`,Mb="1.0.0",kg=1e4,Bb=1e3;var $s;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})($s||($s={}));var Be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Be||(Be={}));var Dt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Dt||(Dt={}));var Pc;(function(t){t.websocket="websocket"})(Pc||(Pc={}));var Hr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Hr||(Hr={}));class Ub{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(e.slice(i,i+s));i=i+s;const c=n.decode(e.slice(i,i+a));i=i+a;const u=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Cg{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ie;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ie||(ie={}));const qf=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,i)=>(a[i]=Fb(i,t,e,s),a),{})},Fb=(t,e,r,n)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,i=r[t];return a&&!n.includes(a)?Eg(a,i):Tc(i)},Eg=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return qb(e,r)}switch(t){case ie.bool:return zb(e);case ie.float4:case ie.float8:case ie.int2:case ie.int4:case ie.int8:case ie.numeric:case ie.oid:return Wb(e);case ie.json:case ie.jsonb:return Hb(e);case ie.timestamp:return Gb(e);case ie.abstime:case ie.date:case ie.daterange:case ie.int4range:case ie.int8range:case ie.money:case ie.reltime:case ie.text:case ie.time:case ie.timestamptz:case ie.timetz:case ie.tsrange:case ie.tstzrange:return Tc(e);default:return Tc(e)}},Tc=t=>t,zb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Wb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Hb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},qb=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const i=t.slice(1,r);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>Eg(e,l))}return t},Gb=t=>typeof t=="string"?t.replace(" ","T"):t,Dg=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class gl{constructor(e,r,n={},s=kg){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gf;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Gf||(Gf={}));class Ms{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ms.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=Ms.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ms.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),i=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const f=a[u];if(f){const h=d.map(w=>w.presence_ref),p=f.map(w=>w.presence_ref),g=d.filter(w=>p.indexOf(w.presence_ref)<0),x=f.filter(w=>h.indexOf(w.presence_ref)<0);g.length>0&&(l[u]=g),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const f=e[l].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);e[l].unshift(...h)}n(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Vf||(Vf={}));var Kf;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Kf||(Kf={}));var qt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qt||(qt={}));class Zu{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new gl(this,Dt.join,this.params,this.timeout),this.rejoinTimer=new Cg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Ms(this),this.broadcastEndpointURL=Dg(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:a,presence:i,private:l}}=this.params;this._onError(d=>e==null?void 0:e(qt.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(qt.CLOSED));const c={},u={broadcast:a,presence:i,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(qt.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,g=[];for(let x=0;x<p;x++){const w=h[x],{filter:{event:y,schema:m,table:v,filter:b}}=w,S=d&&d[x];if(S&&S.event===y&&S.schema===m&&S.table===v&&S.filter===b)g.push(Object.assign(Object.assign({},w),{id:S.id}));else{this.unsubscribe(),this.state=Be.errored,e==null||e(qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(qt.SUBSCRIBED);return}}).receive("error",d=>{this.state=Be.errored,e==null||e(qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Be.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new gl(this,Dt.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new gl(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Dt;if(n&&[l,c,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let h=this._onMessage(i,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,x,w;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((w=(x=p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(p=>p.callback(h,n)):(a=this.bindings[i])===null||a===void 0||a.filter(p=>{var g,x,w,y,m,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const b=p.id,S=(g=p.filter)===null||g===void 0?void 0:g.event;return b&&((x=r.ids)===null||x===void 0?void 0:x.includes(b))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return b==="*"||b===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:x,table:w,commit_timestamp:y,type:m,errors:v}=g;h=Object.assign(Object.assign({},{schema:x,table:w,commit_timestamp:y,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Zu.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Dt.close,{},e)}_onError(e){this._on(Dt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=qf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=qf(e.columns,e.old_record)),r}}const Jf=()=>{},Vb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Kb{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kg,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jf,this.ref=0,this.logger=Jf,this.conn=null,this.sendBuffer=[],this.serializer=new Ub,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>ya(async()=>{const{default:c}=await Promise.resolve().then(()=>Zn);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${e}/${Pc.websocket}`,this.httpEndpoint=Dg(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,i)=>i(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Cg(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Rb),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Mb}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case $s.connecting:return Hr.Connecting;case $s.open:return Hr.Open;case $s.closing:return Hr.Closing;default:return Hr.Closed}}isConnected(){return this.connectionState()===Hr.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Zu(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:$b};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Dt.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Bb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:a,ref:i}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${i&&"("+i+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,a,i)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Dt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Vb],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class ed extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _e(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Jb extends ed{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Oc extends ed{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Qb=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Ig=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ya(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Yb=()=>Qb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ya(()=>Promise.resolve().then(()=>Zn),void 0)).Response:Response}),Ac=t=>{if(Array.isArray(t))return t.map(r=>Ac(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Ac(n)}),e},Xb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ln=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const vl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zb=(t,e,r)=>ln(void 0,void 0,void 0,function*(){const n=yield Yb();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const a=t.status||500,i=(s==null?void 0:s.statusCode)||a+"";e(new Jb(vl(s),a,i))}).catch(s=>{e(new Oc(vl(s),s))}):e(new Oc(vl(t),t))}),ew=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(Xb(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function ba(t,e,r,n,s,a){return ln(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,ew(e,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Zb(c,l,n))})})}function zi(t,e,r,n){return ln(this,void 0,void 0,function*(){return ba(t,"GET",e,r,n)})}function Gt(t,e,r,n,s){return ln(this,void 0,void 0,function*(){return ba(t,"POST",e,n,s,r)})}function Rc(t,e,r,n,s){return ln(this,void 0,void 0,function*(){return ba(t,"PUT",e,n,s,r)})}function tw(t,e,r,n){return ln(this,void 0,void 0,function*(){return ba(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Pg(t,e,r,n,s){return ln(this,void 0,void 0,function*(){return ba(t,"DELETE",e,n,s,r)})}var Ke=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const rw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nw{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Ig(s)}uploadOrUpdate(e,r,n,s){return Ke(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Qf),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(e=="PUT"?Rc:Gt)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(_e(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Ke(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Qf.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Rc(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(_e(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Ke(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield Gt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new ed("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}update(e,r,n){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Ke(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Ke(this,void 0,void 0,function*(){try{return{data:{path:(yield Gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Ke(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Gt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Ke(this,void 0,void 0,function*(){try{const s=yield Gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}download(e,r){return Ke(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield zi(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(_e(l))return{data:null,error:l};throw l}})}info(e){return Ke(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield zi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ac(n),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}exists(e){return Ke(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield tw(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(_e(n)&&n instanceof Oc){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield Pg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}list(e,r,n){return Ke(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},rw),r),{prefix:e||""});return{data:yield Gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const sw="2.10.4",aw={"X-Client-Info":`storage-js/${sw}`};var fn=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class iw{constructor(e,r={},n,s){const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},aw),r),this.fetch=Ig(n)}listBuckets(){return fn(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(_e(e))return{data:null,error:e};throw e}})}getBucket(e){return fn(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return fn(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return fn(this,void 0,void 0,function*(){try{return{data:yield Rc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}emptyBucket(e){return fn(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}deleteBucket(e){return fn(this,void 0,void 0,function*(){try{return{data:yield Pg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}}class ow extends iw{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new nw(this.url,this.headers,e,this.fetch)}}const lw="2.53.0";let ks="";typeof Deno<"u"?ks="deno":typeof document<"u"?ks="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ks="react-native":ks="node";const cw={"X-Client-Info":`supabase-js-${ks}/${lw}`},uw={headers:cw},dw={schema:"public"},fw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hw={};var pw=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const mw=t=>{let e;return t?e=t:typeof fetch>"u"?e=mg:e=fetch,(...r)=>e(...r)},gw=()=>typeof Headers>"u"?gg:Headers,vw=(t,e,r)=>{const n=mw(r),s=gw();return(a,i)=>pw(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},i),{headers:u}))})};var yw=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function xw(t){return t.endsWith("/")?t:t+"/"}function bw(t,e){var r,n;const{db:s,auth:a,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>yw(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const Tg="2.71.1",yn=30*1e3,Lc=3,yl=Lc*yn,ww="http://localhost:9999",_w="supabase.auth.token",jw={"X-Client-Info":`gotrue-js/${Tg}`},$c="X-Supabase-Api-Version",Og={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Sw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Nw=10*60*1e3;class td extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function K(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class kw extends td{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Cw(t){return K(t)&&t.name==="AuthApiError"}class Ag extends td{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Or extends td{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class ir extends Or{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ew(t){return K(t)&&t.name==="AuthSessionMissingError"}class Ya extends Or{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xa extends Or{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Za extends Or{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Dw(t){return K(t)&&t.name==="AuthImplicitGrantRedirectError"}class Yf extends Or{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mc extends Or{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function xl(t){return K(t)&&t.name==="AuthRetryableFetchError"}class Xf extends Or{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Bc extends Or{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Zf=` 	
\r=`.split(""),Iw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Zf.length;e+=1)t[Zf[e].charCodeAt(0)]=-2;for(let e=0;e<Wi.length;e+=1)t[Wi[e].charCodeAt(0)]=e;return t})();function eh(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Wi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Wi[n]),e.queuedBits-=6}}function Rg(t,e,r){const n=Iw[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function th(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{Ow(i,n,r)};for(let i=0;i<t.length;i+=1)Rg(t.charCodeAt(i),s,a);return e.join("")}function Pw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Tw(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Pw(n,e)}}function Ow(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Aw(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Rg(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Rw(t){const e=[];return Tw(t,r=>e.push(r)),new Uint8Array(e)}function Lw(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>eh(s,r,n)),eh(null,r,n),e.join("")}function $w(t){return Math.round(Date.now()/1e3)+t}function Mw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const kt=()=>typeof window<"u"&&typeof document<"u",$r={tested:!1,writable:!1},Lg=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($r.tested)return $r.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),$r.tested=!0,$r.writable=!0}catch{$r.tested=!0,$r.writable=!1}return $r.writable};function Bw(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const $g=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ya(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Uw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",xn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Mr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ar=async(t,e)=>{await t.removeItem(e)};class _o{constructor(){this.promise=new _o.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}_o.promiseConstructor=Promise;function bl(t){const e=t.split(".");if(e.length!==3)throw new Bc("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Sw.test(e[n]))throw new Bc("JWT not in base64url format");return{header:JSON.parse(th(e[0])),payload:JSON.parse(th(e[1])),signature:Aw(e[2]),raw:{header:e[0],payload:e[1]}}}async function Fw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function zw(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await t(a);if(!e(a,null,i)){n(i);return}}catch(i){if(!e(a,i)){s(i);return}}})()})}function Ww(t){return("0"+t.toString(16)).substr(-2)}function Hw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Ww).join("")}async function qw(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Gw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await qw(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hn(t,e,r=!1){const n=Hw();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await xn(t,`${e}-code-verifier`,s);const a=await Gw(n);return[a,n===a?"plain":"s256"]}const Vw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Kw(t){const e=t.headers.get($c);if(!e||!e.match(Vw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Jw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Qw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Yw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pn(t){if(!Yw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wl(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function rh(t){return JSON.parse(JSON.stringify(t))}var Xw=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const zr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zw=[502,503,504];async function nh(t){var e;if(!Uw(t))throw new Mc(zr(t),0);if(Zw.includes(t.status))throw new Mc(zr(t),t.status);let r;try{r=await t.json()}catch(a){throw new Ag(zr(a),a)}let n;const s=Kw(t);if(s&&s.getTime()>=Og["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Xf(zr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ir}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Xf(zr(r),t.status,r.weak_password.reasons);throw new kw(zr(r),t.status||500,n)}const e1=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Y(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[$c]||(a[$c]=Og["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await t1(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function t1(t,e,r,n,s,a){const i=e1(e,n,s,a);let l;try{l=await t(r,Object.assign({},i))}catch(c){throw console.error(c),new Mc(zr(c),0)}if(l.ok||await nh(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await nh(c)}}function Wt(t){var e;let r=null;a1(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=$w(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function sh(t){const e=Wt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function dr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function r1(t){return{data:t,error:null}}function n1(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,i=Xw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function s1(t){return t}function a1(t){return t.access_token&&t.refresh_token&&t.expires_in}const _l=["global","local","others"];var i1=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class o1{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=$g(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=_l[0]){if(_l.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_l.join(", ")}`);try{return await Y(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Y(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:dr})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=i1(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Y(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:n1,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(K(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Y(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:dr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Y(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:s1});if(d.error)throw d.error;const f=await d.json(),h=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(K(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){pn(e);try{return await Y(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:dr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){pn(e);try{return await Y(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:dr})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){pn(e);try{return await Y(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:dr})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){pn(e.userId);try{const{data:r,error:n}=await Y(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(K(r))return{data:null,error:r};throw r}}async _deleteFactor(e){pn(e.userId),pn(e.id);try{return{data:await Y(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}}function ah(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function l1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const mn={debug:!!(globalThis&&Lg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class c1 extends Mg{}async function u1(t,e,r){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),mn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new c1(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(mn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}l1();const d1={url:ww,storageKey:_w,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ih(t,e,r){return await r()}const gn={};class ia{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ia.nextInstanceID,ia.nextInstanceID+=1,this.instanceID>0&&kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},d1),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new o1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=$g(s.fetch),this.lock=s.lock||ih,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:kt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=u1:this.lock=ih,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Lg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ah(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ah(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=gn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=gn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Tg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Bw(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),kt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Dw(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return K(r)?{error:r}:{error:new Ag("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Wt}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:d,password:f,options:h}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await hn(this.storage,this.storageKey)),a=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:Wt})}else if("phone"in e){const{phone:d,password:f,options:h}=e;a=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Wt})}else throw new Xa("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:i,options:l}=e;r=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sh})}else if("phone"in e){const{phone:a,password:i,options:l}=e;r=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sh})}else throw new Xa("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ya}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,a,i,l,c,u,d,f,h,p;let g,x;if("message"in e)g=e.message,x=e.signature;else{const{chain:w,wallet:y,statement:m,options:v}=e;let b;if(kt())if(typeof y=="object")b=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))b=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const N=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),m?{statement:m}:null));let D;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")D=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)D=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)g=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),x=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const N=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:w,error:y}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Lw(x)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Wt});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Ya}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(K(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const r=await Mr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:i}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Wt});if(await ar(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ya}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(K(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:i}=e,l=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Wt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ya}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,a,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await hn(this.storage,this.storageKey));const{error:f}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Xa("You must provide either an email or phone number.")}catch(l){if(K(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await Y(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Wt});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await hn(this.storage,this.storageKey)),await Y(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:r1})}catch(a){if(K(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new ir;const{error:s}=await Y(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(K(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:i}=await Y(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:i,error:l}=await Y(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Xa("You must provide either an email or phone number and a type")}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<yl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const i=await Mr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=wl()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:dr}):await this._useSession(async r=>{var n,s,a;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ir}:await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:dr})})}catch(r){if(K(r))return Ew(r)&&(await this._removeSession(),await ar(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new ir;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await hn(this.storage,this.storageKey));const{data:u,error:d}=await Y(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:dr});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ir;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:i}=bl(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(K(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:l}=r;if(l)throw l;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new ir;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!kt())throw new Za("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Za(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Yf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Za("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Yf("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!i||!u)throw new Za("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=yn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:x,error:w}=await this._getUser(a);if(w)throw w;const y={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:h,refresh_token:i,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(K(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Mr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Cw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ar(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Mw(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await hn(this.storage,this.storageKey,!0));try{return await Y(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(K(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var i,l,c,u,d;const{data:f,error:h}=a;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Y(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return kt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(K(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)throw i;return await Y(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await zw(async s=>(s>0&&await Fw(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Y(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wt})),(s,a)=>{const i=200*Math.pow(2,s);return a&&xl(a)&&Date.now()+i-n<yn})}catch(n){if(this._debug(r,"error",n),K(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),kt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Mr(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Mr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await xn(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:wl()}else if(s&&!s.user&&!s.user){const i=await Mr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await ar(this.storage,this.storageKey+"-user"),await xn(this.storage,this.storageKey,s)):s.user=wl()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<yl;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${yl}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),xl(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new ir;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new _o;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new ir;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),K(a)){const i={session:null,error:a};return xl(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await xn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=rh(s);await xn(this.storage,this.storageKey,a)}else{const s=rh(r);await xn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ar(this.storage,this.storageKey),await ar(this.storage,this.storageKey+"-code-verifier"),await ar(this.storage,this.storageKey+"-user"),this.userStorage&&await ar(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/yn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${yn}ms, refresh threshold is ${Lc} ticks`),s<=Lc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Mg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await hn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Y(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Y(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:i,error:l}=await Y(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(K(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Y(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(K(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=bl(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+Nw>s)return n;const{data:a,error:i}=await Y(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=bl(n);r!=null&&r.allowExpired||Jw(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:s,signature:i},error:null}}const d=Qw(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,Rw(`${l}.${c}`)))throw new Bc("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}}ia.nextInstanceID=0;const f1=ia;class h1 extends f1{constructor(e){super(e)}}var p1=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class m1{constructor(e,r,n){var s,a,i;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=xw(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:dw,realtime:hw,auth:Object.assign(Object.assign({},fw),{storageKey:u}),global:uw},f=bw(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=vw(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Ob(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new ow(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new cb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return p1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:i,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new h1({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Kb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const g1=(t,e,r)=>new m1(t,e,r);function v1(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}v1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const y1="https://gbfqtdcgoiuwuhvmamdo.supabase.co",x1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdiZnF0ZGNnb2l1d3Vodm1hbWRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NjE1MjAsImV4cCI6MjA2OTQzNzUyMH0.P88rqeA3iq5DC_DLfA5c7r79E6VwZvAxYhwPfzF0Ja8",z=g1(y1,x1);class Me{static async setUserContext(e){return console.log(" User context (RLS):",e),!0}static async createOrUpdateShift(e,r){if(console.log(" /:",{lineUser:e.userId,shiftData:r}),await this.setUserContext(e.userId),!r.shiftType)return console.log(" "),await this.deleteShift(e,r.date),null;const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(s||!n)throw console.error(" :",s),new Error(`: ${s==null?void 0:s.message}`);console.log(" ID:",n.id);const{data:a,error:i}=await z.from("shifts").select("*").eq("user_id",n.id).eq("shift_date",r.date).maybeSingle();if(i)throw console.error(" :",i),new Error(`: ${i.message}`);const l={user_id:n.id,shift_date:r.date,shift_type:r.shiftType,shift_status:r.shiftStatus||"adjusting",start_time:r.startTime||null,end_time:r.endTime||null,note:r.note||null,updated_at:new Date().toISOString()};console.log(" upsert");const{data:c,error:u}=await z.from("shifts").upsert(l,{onConflict:"user_id,shift_date"}).select("*").single();if(u)throw console.error(" upsert:",u),new Error(`: ${u.message}`);return console.log(" upsert:",c),c}static async getMonthlyShifts(e,r,n){console.log(" :",{user:e.userId,year:r,month:n}),await this.setUserContext(e.userId);const s=`${r}-${n.toString().padStart(2,"0")}-01`,a=new Date(r,n,0).toISOString().split("T")[0],{data:i,error:l}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(l||!i)return console.error(" :",l),[];const{data:c,error:u}=await z.from("shifts").select("*").eq("user_id",i.id).gte("shift_date",s).lte("shift_date",a).order("shift_date",{ascending:!0});return u?(console.error(" :",u),[]):(console.log(" :",c==null?void 0:c.length,""),c||[])}static async deleteShift(e,r){console.log(" :",{user:e.userId,date:r}),await this.setUserContext(e.userId);const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(s||!n)throw new Error(`: ${s==null?void 0:s.message}`);const{error:a}=await z.from("shifts").delete().eq("user_id",n.id).eq("shift_date",r);if(a)throw console.error(" :",a),new Error(`: ${a.message}`);console.log(" ")}static getShiftTypeLabel(e){return{early:"()",late:"()",normal:"",off:""}[e]||e}static getShiftTypeColor(e){return{early:"#059669",late:"#dc2626",normal:"#CB8585",off:"#6b7280"}[e]||"#6b7280"}static formatTime(e){return e?e.substring(0,5):""}static getShiftStatusLabel(e){return{adjusting:"",confirmed:""}[e]||e}static isShiftEditable(e){return e.shift_status==="adjusting"}static canConfirmShift(e){return e.shift_status==="adjusting"}}const b1=({availableDates:t=[]})=>{const{user:e}=on(),[r,n]=j.useState(new Date),[s,a]=j.useState([]),[i,l]=j.useState([]),[c,u]=j.useState(!1),[d,f]=j.useState(null),[h,p]=j.useState(null),g=r.getFullYear(),x=r.getMonth(),w=new Date(g,x,1),y=new Date(g,x+1,0);w.getDay(),y.getDate();const m=async()=>{if(e){u(!0);try{const C=await Me.getMonthlyShifts(e,g,x+1);a(C);const I=x+1,B=I>11?g+1:g,T=I>11?0:I,L=await Me.getMonthlyShifts(e,B,T+1);l(L),console.log(" :",{current:C.length,next:L.length})}catch(C){console.error(" :",C)}finally{u(!1)}}};j.useEffect(()=>{m()},[e,r]);const v=(C,I)=>C.find(B=>B.shift_date===I),b=()=>{n(new Date(g,x-1,1))},S=()=>{n(new Date(g,x+1,1))},N=(C,I,B,T=!1)=>{const L=new Date(C,I,1),U=new Date(C,I+1,0),V=L.getDay(),Q=U.getDate(),ge=[];for(let te=0;te<V;te++)ge.push(o.jsx("div",{className:"aspect-square flex items-center justify-center text-gray-300",children:"-"},`empty-${te}`));for(let te=1;te<=Q;te++){const Ee=`${C}-${(I+1).toString().padStart(2,"0")}-${te.toString().padStart(2,"0")}`,xe=v(B,Ee);ge.push(o.jsxs("div",{className:"aspect-square flex items-center justify-center text-sm font-medium relative cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>D(Ee,xe),children:[xe?o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-medium text-sm",style:{backgroundColor:Me.getShiftTypeColor(xe.shift_type)},children:te}):o.jsx("span",{className:"text-gray-800 hover:text-gray-600",children:te}),!xe&&o.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-gray-300 rounded-full flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:o.jsx(Ju,{className:"w-2 h-2 text-white"})})]},te))}return ge},D=(C,I)=>{if(!e)return;const B=new Date(C),T=r.getMonth(),L=r.getFullYear();(B.getMonth()!==T||B.getFullYear()!==L)&&n(new Date(B.getFullYear(),B.getMonth(),1)),f(C),p(I?{date:C,shiftType:I.shift_type,shiftStatus:I.shift_status,startTime:I.start_time?Me.formatTime(I.start_time):"",endTime:I.end_time?Me.formatTime(I.end_time):"",note:I.note||""}:{date:C,shiftType:"",shiftStatus:"adjusting",startTime:"09:00",endTime:"17:00",note:""})},O=async()=>{if(!(!e||!h))try{await Me.createOrUpdateShift(e,h),p(null),f(null),await m(),console.log(" ")}catch(C){console.error(" :",C),alert(": "+(C instanceof Error?C.message:""))}},P=async()=>{if(!(!e||!d))try{await Me.deleteShift(e,d),p(null),f(null),await m(),console.log(" ")}catch(C){console.error(" :",C),alert(": "+(C instanceof Error?C.message:""))}},_=["1","2","3","4","5","6","7","8","9","10","11","12"],A=["","","","","","",""],E=x+1,R=E>11?g+1:g,k=E>11?0:E;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 aspect-square",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:b,className:"p-1 hover:bg-gray-100 rounded transition-colors",style:{color:"#CB8585"},children:o.jsx(qu,{className:"w-5 h-5"})}),o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[g," ",_[x]]}),o.jsx("button",{onClick:S,className:"p-1 hover:bg-gray-100 rounded transition-colors",style:{color:"#CB8585"},children:o.jsx(Gu,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:A.map((C,I)=>o.jsx("div",{className:`aspect-square flex items-center justify-center text-sm font-medium ${I===5?"text-blue-600":I===6?"text-red-600":"text-gray-600"}`,children:C},C))}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4 flex-1",children:N(g,x,s,!0)}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("early")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("late")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("normal")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("off")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]})]}),o.jsx("span",{className:"text-gray-500",children:c?"...":`${s.length}`})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 aspect-square",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"w-6 h-6"})," ",o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[R," ",_[k]]}),o.jsx("div",{className:"w-6 h-6"})," "]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:A.map((C,I)=>o.jsx("div",{className:`aspect-square flex items-center justify-center text-sm font-medium ${I===5?"text-blue-600":I===6?"text-red-600":"text-gray-600"}`,children:C},C))}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4 flex-1",children:N(R,k,i,!0)}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("early")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("late")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("normal")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Me.getShiftTypeColor("off")}}),o.jsx("span",{className:"text-gray-600 text-xs",children:""})]})]}),o.jsxs("span",{className:"text-gray-500",children:["",i.length,""]})]})]}),h&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[" - ",new Date(h.date).toLocaleDateString("ja-JP")]}),o.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${h.shiftStatus==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Me.getShiftStatusLabel(h.shiftStatus||"adjusting")})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:h.shiftType,onChange:C=>p({...h,shiftType:C.target.value}),disabled:h.shiftStatus==="confirmed",className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.shiftStatus==="confirmed"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`,children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"early",children:"()"}),o.jsx("option",{value:"late",children:"()"}),o.jsx("option",{value:"normal",children:""}),o.jsx("option",{value:"off",children:""})]})]}),h.shiftType&&h.shiftType!=="off"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"time",value:h.startTime||"",onChange:C=>p({...h,startTime:C.target.value}),disabled:h.shiftStatus==="confirmed",className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.shiftStatus==="confirmed"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),h.shiftType&&h.shiftType!=="off"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"time",value:h.endTime||"",onChange:C=>p({...h,endTime:C.target.value}),disabled:h.shiftStatus==="confirmed",className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.shiftStatus==="confirmed"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("textarea",{value:h.note||"",onChange:C=>p({...h,note:C.target.value}),disabled:h.shiftStatus==="confirmed",rows:3,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.shiftStatus==="confirmed"?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`,placeholder:""})]})]}),o.jsxs("div",{className:"flex justify-between items-center mt-6",children:[o.jsx("div",{children:d&&(v(s,d)||v(i,d))&&(h.shiftStatus==="adjusting"||!h.shiftStatus)&&o.jsx("button",{onClick:P,className:"px-4 py-2 text-red-600 hover:text-red-800 transition-colors",children:""})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>{p(null),f(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:h.shiftStatus==="confirmed"?"":""}),(h.shiftStatus==="adjusting"||!h.shiftStatus)&&o.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:""})]})]})]})})]})},Bg=j.createContext(void 0),w1=({children:t})=>{const[e,r]=j.useState(new Set),[n,s]=j.useState(new Set),u={notifyTimeRecordUpdate:()=>{console.log(" :",e.size,""),e.forEach(d=>{try{d()}catch(f){console.error(":",f)}})},onTimeRecordUpdate:d=>(r(f=>new Set(f).add(d)),()=>{r(f=>{const h=new Set(f);return h.delete(d),h})}),notifyAttendanceUpdate:()=>{console.log(" :",n.size,""),n.forEach(d=>{try{d()}catch(f){console.error(":",f)}})},onAttendanceUpdate:d=>(s(f=>new Set(f).add(d)),()=>{s(f=>{const h=new Set(f);return h.delete(d),h})})};return o.jsx(Bg.Provider,{value:u,children:t})},Ug=()=>{const t=j.useContext(Bg);if(t===void 0)throw new Error("useRealtime must be used within a RealtimeProvider");return t};class Bs{static async createTimeRecord(e,r){var c,u,d;console.log(" :",{lineUser:e.userId,recordData:r});const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(s||!n)throw console.error(" :",s),new Error(`: ${s==null?void 0:s.message}`);console.log(" ID:",n.id);const a={user_id:n.id,record_type:r.recordType,recorded_at:new Date().toISOString(),location_id:r.locationId||null,location_lat:(c=r.location)==null?void 0:c.latitude,location_lng:(u=r.location)==null?void 0:u.longitude,location_name:(d=r.location)==null?void 0:d.locationName,note:r.note};console.log(" :",a);const{data:i,error:l}=await z.from("time_records").insert(a).select("*").single();if(l)throw console.error(" :",l),new Error(`: ${l.message}`);return console.log(" :",i),i}static async getUserTimeRecords(e,r=20){console.log(" :",e.userId);const{data:n,error:s}=await z.from("time_records").select(`
        *,
        users!inner(line_user_id)
      `).eq("users.line_user_id",e.userId).order("recorded_at",{ascending:!1}).limit(r);if(s)throw console.error(" :",s),new Error(`: ${s.message}`);return console.log(" :",n==null?void 0:n.length,""),n||[]}static async getTodayTimeRecords(e){console.log(" :",e.userId);const r=new Date,n=new Date(r.getFullYear(),r.getMonth(),r.getDate()),s=new Date(n);s.setDate(s.getDate()+1);const{data:a,error:i}=await z.from("time_records").select(`
        *,
        users!inner(line_user_id)
      `).eq("users.line_user_id",e.userId).gte("recorded_at",n.toISOString()).lt("recorded_at",s.toISOString()).order("recorded_at",{ascending:!0});if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a==null?void 0:a.length,""),a||[]}static getRecordTypeLabel(e){return{clock_in:"",clock_out:"",break_start:"",break_end:""}[e]||e}static getNextRecordType(e){if(e.length===0)return"clock_in";switch(e[e.length-1].record_type){case"clock_in":return"break_start";case"break_start":return"break_end";case"break_end":return"break_start";case"clock_out":return"clock_in";default:return"clock_in"}}static canClockOut(e){if(e.length===0)return!1;const r=e[e.length-1];return r.record_type==="clock_in"||r.record_type==="break_end"}static async getMonthlyTimeRecords(e,r,n){console.log(" :",{user:e.userId,year:r,month:n});const s=`${r}-${n.toString().padStart(2,"0")}-01`,a=new Date(r,n,0).toISOString().split("T")[0],{data:i,error:l}=await z.from("time_records").select(`
        *,
        users!inner(line_user_id)
      `).eq("users.line_user_id",e.userId).gte("recorded_at",s).lte("recorded_at",a+"T23:59:59.999Z").order("recorded_at",{ascending:!0});return l?(console.error(" :",l),[]):(console.log(" :",i==null?void 0:i.length,""),i||[])}static async getDayTimeRecords(e,r){console.log(" :",{user:e.userId,date:r});const n=`${r}T00:00:00.000Z`,s=`${r}T23:59:59.999Z`,{data:a,error:i}=await z.from("time_records").select(`
        *,
        users!inner(line_user_id)
      `).eq("users.line_user_id",e.userId).gte("recorded_at",n).lte("recorded_at",s).order("recorded_at",{ascending:!0});return i?(console.error(" :",i),[]):(console.log(" :",a==null?void 0:a.length,""),a||[])}}class oh{static async setUserContext(e){return console.log(" User context (RLS):",e),!0}static async editTimeRecord(e,r,n){console.log(" :",{user:e.userId,timeRecordId:r,editData:n}),await this.setUserContext(e.userId);const{data:s,error:a}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(a||!s)throw console.error(" :",a),new Error(`: ${a==null?void 0:a.message}`);const{data:i,error:l}=await z.from("time_records").select("*").eq("id",r).eq("user_id",s.id).single();if(l||!i)throw console.error(" :",l),new Error(`: ${l==null?void 0:l.message}`);const{data:c,error:u}=await z.from("time_records").update({record_type:n.recordType,recorded_at:n.recordedAt,location_name:n.locationName||null,note:n.note||null,updated_at:new Date().toISOString()}).eq("id",r).eq("user_id",s.id).select("*").single();if(u)throw console.error(" :",u),new Error(`: ${u.message}`);const{error:d}=await z.from("time_record_changes").insert({user_id:s.id,time_record_id:r,change_type:"edit",reason:n.reason,original_record_type:i.record_type,original_recorded_at:i.recorded_at,original_location_name:i.location_name,original_note:i.note,new_record_type:n.recordType,new_recorded_at:n.recordedAt,new_location_name:n.locationName||null,new_note:n.note||null});return d&&(console.error(" :",d),console.warn("")),console.log(" :",c),c}static async deleteTimeRecord(e,r,n){console.log(" :",{user:e.userId,timeRecordId:r,deleteData:n}),await this.setUserContext(e.userId);const{data:s,error:a}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(a||!s)throw console.error(" :",a),new Error(`: ${a==null?void 0:a.message}`);const{data:i,error:l}=await z.from("time_records").select("*").eq("id",r).eq("user_id",s.id).single();if(l||!i)throw console.error(" :",l),new Error(`: ${l==null?void 0:l.message}`);const{error:c}=await z.from("time_record_changes").insert({user_id:s.id,time_record_id:r,change_type:"delete",reason:n.reason,original_record_type:i.record_type,original_recorded_at:i.recorded_at,original_location_name:i.location_name,original_note:i.note,new_record_type:null,new_recorded_at:null,new_location_name:null,new_note:null});if(c)throw console.error(" :",c),new Error(`: ${c.message}`);const{error:u}=await z.from("time_records").delete().eq("id",r).eq("user_id",s.id);if(u)throw console.error(" :",u),new Error(`: ${u.message}`);console.log(" ")}static async getChangeHistory(e,r){console.log(" :",{user:e.userId,timeRecordId:r}),await this.setUserContext(e.userId);const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(s||!n)return console.error(" :",s),[];let a=z.from("time_record_changes").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});r&&(a=a.eq("time_record_id",r));const{data:i,error:l}=await a;return l?(console.error(" :",l),[]):(console.log(" :",i==null?void 0:i.length,""),i||[])}static getChangeTypeLabel(e){return{edit:"",delete:""}[e]||e}static formatChangeDescription(e){if(e.change_type==="delete")return`${this.getRecordTypeLabel(e.original_record_type)}`;const r=[];if(e.original_record_type!==e.new_record_type&&r.push(`: ${this.getRecordTypeLabel(e.original_record_type)}  ${this.getRecordTypeLabel(e.new_record_type)}`),e.original_recorded_at!==e.new_recorded_at){const n=new Date(e.original_recorded_at).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),s=new Date(e.new_recorded_at).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});r.push(`: ${n}  ${s}`)}return r.length>0?r.join(", "):""}static getRecordTypeLabel(e){return{clock_in:"",clock_out:"",break_start:"",break_end:""}[e]||e}}class Kr{static async setUserContext(e){return console.log(" User context (RLS):",e),!0}static async createDailyReport(e,r){console.log(" :",{lineUser:e.userId,reportData:r}),await this.setUserContext(e.userId);const{data:n,error:s}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(s||!n)throw console.error(" :",s),new Error(`: ${s==null?void 0:s.message}`);console.log(" ID:",n.id);const a=new Date().toISOString().split("T")[0],i=r.customerCount>0?Math.round(r.salesAmount/r.customerCount):0,l=r.customerCount>0?Math.round(r.itemsSold/r.customerCount*10)/10:0,{data:c,error:u}=await z.from("daily_reports").select("*").eq("user_id",n.id).eq("report_date",a).maybeSingle();if(u)throw console.error(" :",u),new Error(`: ${u.message}`);if(c){console.log(" :",c.id);const p={sales_amount:r.salesAmount,customer_count:r.customerCount,items_sold:r.itemsSold,customer_unit_price:i,items_per_customer:l,checkout_time:r.checkoutTime,notes:r.notes||null,updated_at:new Date().toISOString()},{data:g,error:x}=await z.from("daily_reports").update(p).eq("id",c.id).select("*").single();if(x)throw console.error(" :",x),new Error(`: ${x.message}`);return console.log(" :",g),g}const d={user_id:n.id,report_date:a,sales_amount:r.salesAmount,customer_count:r.customerCount,items_sold:r.itemsSold,customer_unit_price:i,items_per_customer:l,checkout_time:r.checkoutTime,notes:r.notes||null};console.log(" ");const{data:f,error:h}=await z.from("daily_reports").insert(d).select("*").single();if(h)throw console.error(" :",h),new Error(`: ${h.message}`);return console.log(" :",f),f}static async getTodayReport(e){console.log(" :",{user:e.userId}),await this.setUserContext(e.userId);const{data:r,error:n}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(n||!r)return console.error(" :",n),null;const s=new Date().toISOString().split("T")[0],{data:a,error:i}=await z.from("daily_reports").select("*").eq("user_id",r.id).eq("report_date",s).maybeSingle();return i?(console.error(" :",i),null):(console.log(" :",a?"":""),a)}static async getMonthlyReports(e,r,n){console.log(" :",{user:e.userId,year:r,month:n}),await this.setUserContext(e.userId);const{data:s,error:a}=await z.from("users").select("id").eq("line_user_id",e.userId).single();if(a||!s)return console.error(" :",a),[];const i=`${r}-${n.toString().padStart(2,"0")}-01`,l=new Date(r,n,0).toISOString().split("T")[0],{data:c,error:u}=await z.from("daily_reports").select("*").eq("user_id",s.id).gte("report_date",i).lte("report_date",l).order("report_date",{ascending:!1});return u?(console.error(" :",u),[]):(console.log(" :",c==null?void 0:c.length,""),c||[])}}const _1=()=>{const{user:t}=on(),[e,r]=j.useState("day"),[n,s]=j.useState([]),[a,i]=j.useState(!1),[l,c]=j.useState(0),[u,d]=j.useState(0),[f,h]=j.useState(0),p=async()=>{if(t){i(!0);try{const w=new Date;let y=[];if(e==="day"){const S=await Kr.getMonthlyReports(t,w.getFullYear(),w.getMonth()+1),N=await Kr.getMonthlyReports(t,w.getFullYear(),w.getMonth()),D=[...S,...N];for(let O=30;O>=0;O--){const P=new Date(w);P.setDate(P.getDate()-O);const _=P.toISOString().split("T")[0],A=D.find(E=>E.report_date===_);y.push({label:P.getDate().toString(),value:(A==null?void 0:A.sales_amount)||0,date:_})}}else if(e==="week"){const N=[];for(let D=2;D>=0;D--){const O=new Date(w);O.setMonth(O.getMonth()-D);const P=await Kr.getMonthlyReports(t,O.getFullYear(),O.getMonth()+1);N.push(...P)}for(let D=11;D>=0;D--){const O=new Date(w);O.setDate(O.getDate()-D*7-(w.getDay()||7)+1);const P=new Date(O);P.setDate(O.getDate()+6);const _=N.filter(A=>{const E=new Date(A.report_date);return E>=O&&E<=P}).reduce((A,E)=>A+E.sales_amount,0);y.push({label:`${O.getMonth()+1}/${O.getDate()}`,value:_,date:O.toISOString().split("T")[0]})}}else if(e==="month")for(let S=11;S>=0;S--){const N=new Date(w);N.setMonth(N.getMonth()-S);const O=(await Kr.getMonthlyReports(t,N.getFullYear(),N.getMonth()+1)).reduce((P,_)=>P+_.sales_amount,0);y.push({label:`${N.getFullYear()}/${N.getMonth()+1}`,value:O,date:N.toISOString().split("T")[0]})}s(y);const m=y.reduce((S,N)=>S+N.value,0),v=Math.max(...y.map(S=>S.value)),b=y.length>0?m/y.length:0;c(m),d(v),h(b)}catch(w){console.error(":",w)}finally{i(!1)}}};j.useEffect(()=>{p()},[t,e]);const g=()=>{if(n.length===0)return o.jsx("div",{className:"h-40 flex items-center justify-center text-gray-500",children:o.jsx("span",{className:"text-sm",children:""})});const w=Math.max(...n.map(I=>I.value)),y=120,m=40,v=12,b=280,S=n.length*(m+v),N=Math.max(b,S),D=Math.max(m,(N-n.length*v)/n.length),O=0,P=25,A=y+P+25,E=N+O,k=(I=>{if(I===0)return[0];const B=Math.pow(10,Math.floor(Math.log10(I))),T=I/B;let L;T<=1?L=.2*B:T<=2?L=.4*B:T<=5?L=B:L=2*B;const U=[];for(let V=0;V<=Math.ceil(I/L);V++)U.push(V*L);return U})(w),C=Math.max(...k);return o.jsx("div",{className:"relative overflow-x-auto",children:o.jsx("div",{style:{width:`${Math.max(b,E)}px`},children:o.jsxs("svg",{width:E,height:A,children:[k.map((I,B)=>{const T=P+y*(1-I/C);return o.jsx("g",{children:o.jsx("line",{x1:0,y1:T,x2:E,y2:T,stroke:"#e5e7eb",strokeWidth:"1",opacity:"0.5"})},B)}),n.map((I,B)=>{const T=C>0?I.value/C*y:0,L=O+B*(D+v)+v/2,U=P+y-T;return o.jsxs("g",{children:[o.jsx("rect",{x:L,y:U,width:D,height:T,fill:"#CB8585",rx:"2",opacity:"0.8"}),I.value>0&&o.jsxs("text",{x:L+D/2,y:U-5,textAnchor:"middle",fontSize:"9",fill:"#6b7280",children:["",I.value.toLocaleString()]}),o.jsx("text",{x:L+D/2,y:P+y+18,textAnchor:"middle",fontSize:"10",fill:"#6b7280",children:I.label})]},B)})]})})})},x=()=>{switch(e){case"day":return"31";case"week":return"3";case"month":return"1";default:return""}};return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx(Dc,{className:"w-5 h-5",style:{color:"#CB8585"}}),o.jsx("h4",{className:"text-md font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1",children:[{key:"day",label:"",icon:Ft},{key:"week",label:"",icon:Hu},{key:"month",label:"",icon:Dc}].map(({key:w,label:y,icon:m})=>o.jsxs("button",{onClick:()=>r(w),className:`flex-1 flex items-center justify-center space-x-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${e===w?"bg-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,style:e===w?{color:"#CB8585"}:{},children:[o.jsx(m,{className:"w-4 h-4"}),o.jsx("span",{children:y})]},w))}),o.jsx("div",{className:"rounded-lg p-3 mb-4",style:{backgroundColor:"#FDF2F2"},children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-sm text-gray-600 flex-shrink-0",children:[x(),""]}),o.jsxs("p",{className:"text-lg font-bold text-right",style:{color:"#CB8585"},children:["",l.toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-gray-600 flex-shrink-0",children:""}),o.jsxs("p",{className:"text-lg font-semibold text-right",style:{color:"#CB8585"},children:["",u.toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-gray-600 flex-shrink-0",children:""}),o.jsxs("p",{className:"text-lg font-semibold text-right",style:{color:"#CB8585"},children:["",Math.round(f).toLocaleString()]})]})]})}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:a?o.jsx("div",{className:"h-40 flex items-center justify-center",children:o.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-t-transparent rounded-full",style:{borderColor:"#CB8585",borderTopColor:"transparent"}}),o.jsx("span",{className:"text-sm",children:"..."})]})}):g()})]})},j1=({availableDates:t=[]})=>{const{user:e}=on(),{onAttendanceUpdate:r,notifyTimeRecordUpdate:n,notifyAttendanceUpdate:s}=Ug(),[a,i]=j.useState(new Date),[l,c]=j.useState([]),[u,d]=j.useState([]),[f,h]=j.useState({workingDays:0,totalMinutes:0}),[p,g]=j.useState(!1),[x,w]=j.useState(null),[y,m]=j.useState([]),[v,b]=j.useState(null),[S,N]=j.useState(null),[D,O]=j.useState(null),[P,_]=j.useState({recordType:"",recordedAt:"",locationName:"",note:"",reason:""}),[A,E]=j.useState(""),R=a.getFullYear(),k=a.getMonth(),C=new Date(R,k,1),I=new Date(R,k+1,0),B=C.getDay(),T=I.getDate(),L=async()=>{if(e){g(!0);try{const $=await Bs.getMonthlyTimeRecords(e,R,k+1),H={};$.forEach(Ae=>{const Re=new Date(Ae.recorded_at).toLocaleDateString("sv-SE");H[Re]||(H[Re]={date:Re,hasAttendance:!1,records:[],workingHours:0}),H[Re].records.push(Ae),H[Re].hasAttendance=!0}),Object.values(H).forEach(Ae=>{Ae.workingHours=U(Ae.records)});const de=Object.values(H);c(de),V(de),console.log(" :",Object.keys(H).length,"")}catch($){console.error(" :",$)}finally{g(!1)}}},U=$=>{let H=0,de=null;for(const Ae of $){const Re=new Date(Ae.recorded_at);switch(Ae.record_type){case"clock_in":de=Re;break;case"break_start":de&&(H+=(Re.getTime()-de.getTime())/(1e3*60));break;case"break_end":de=Re;break;case"clock_out":de&&(H+=(Re.getTime()-de.getTime())/(1e3*60)),de=null;break}}return Math.round(H)},V=$=>{const H=new Map;let de=0,Ae=0;$.forEach(rt=>{if(!rt.hasAttendance||!rt.records.length)return;const nr=new Set;rt.records.forEach(un=>{if(un.note){const ls=un.note.match(/(.+)/);ls&&nr.add(ls[1])}}),nr.size===0&&nr.add(""),nr.forEach(un=>{H.has(un)||H.set(un,{workingDays:new Set,totalMinutes:0});const ls=H.get(un);ls.workingDays.add(rt.date),ls.totalMinutes+=rt.workingHours||0}),de++,Ae+=rt.workingHours||0});const Re=[];H.forEach((rt,nr)=>{Re.push({location:nr,workingDays:rt.workingDays.size,totalMinutes:rt.totalMinutes})}),Re.sort((rt,nr)=>rt.location.localeCompare(nr.location)),d(Re),h({workingDays:de,totalMinutes:Ae})};j.useEffect(()=>{L()},[e,a]),j.useEffect(()=>r(()=>{console.log(" AttendanceCalendar: "),L()}),[r,L]);const Q=$=>l.find(H=>H.date===$),ge=()=>{i(new Date(R,k-1,1))},te=()=>{i(new Date(R,k+1,1))},Ee=async $=>{if(!e)return;const H=Q($);if(!(!H||!H.hasAttendance)){w($),m(H.records);try{const de=new Date($),Re=(await Kr.getMonthlyReports(e,de.getFullYear(),de.getMonth()+1)).find(rt=>rt.report_date===$);b(Re||null)}catch(de){console.error(":",de),b(null)}}},xe=$=>{N($);const H=new Date($.recorded_at);_({recordType:$.record_type,recordedAt:H.toISOString().slice(0,16),locationName:$.location_name||"",note:$.note||"",reason:""})},St=async()=>{if(!(!e||!S)){if(!P.reason.trim()){alert("");return}try{const $={recordType:P.recordType,recordedAt:new Date(P.recordedAt).toISOString(),locationName:P.locationName||void 0,note:P.note||void 0,reason:P.reason};await oh.editTimeRecord(e,S.id,$),n(),s(),await L(),N(null),w(null),m([]),b(null),_({recordType:"",recordedAt:"",locationName:"",note:"",reason:""}),alert("")}catch($){console.error(":",$),alert(`: ${$ instanceof Error?$.message:""}`)}}},cn=$=>{O($),E("")},ss=async()=>{if(!(!e||!D)){if(!A.trim()){alert("");return}try{const $={reason:A};await oh.deleteTimeRecord(e,D.id,$),n(),s(),await L(),O(null),w(null),m([]),b(null),E(""),alert("")}catch($){console.error(":",$),alert(`: ${$ instanceof Error?$.message:""}`)}}},rr=$=>{if(!$.hasAttendance)return"#e5e7eb";const H=($.workingHours||0)/60;return H>=8?"#059669":H>=4?"#CB8585":"#f59e0b"},as=()=>{const $=[];for(let H=0;H<B;H++)$.push(o.jsx("div",{className:"aspect-square flex items-center justify-center text-gray-300",children:"-"},`empty-${H}`));for(let H=1;H<=T;H++){const de=`${R}-${(k+1).toString().padStart(2,"0")}-${H.toString().padStart(2,"0")}`,Ae=Q(de);$.push(o.jsx("div",{className:"aspect-square flex items-center justify-center text-sm font-medium relative cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>Ee(de),children:Ae&&Ae.hasAttendance?o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-medium text-sm",style:{backgroundColor:rr(Ae)},children:H}):o.jsx("span",{className:"text-gray-800 hover:text-gray-600",children:H})},H))}return $},Ta=["1","2","3","4","5","6","7","8","9","10","11","12"],is=["","","","","","",""],Rr=$=>new Date($).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1}),Oa=$=>{const H=Math.floor($/60),de=$%60;return`${H}:${de.toString().padStart(2,"0")}`},Lr=$=>`${Math.floor($/60)}${$%60}`,os=($,H)=>H===0?0:Math.round($/H),zo=($,H)=>H===0?0:Math.round($/H*10)/10;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 aspect-square",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:ge,className:"p-1 hover:bg-gray-100 rounded transition-colors",style:{color:"#CB8585"},children:o.jsx(qu,{className:"w-5 h-5"})}),o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[R," ",Ta[k]," "]}),o.jsx("button",{onClick:te,className:"p-1 hover:bg-gray-100 rounded transition-colors",style:{color:"#CB8585"},children:o.jsx(Gu,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:is.map(($,H)=>o.jsx("div",{className:`aspect-square flex items-center justify-center text-sm font-medium ${H===5?"text-blue-600":H===6?"text-red-600":"text-gray-600"}`,children:$},$))}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4 flex-1",children:as()}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-600"}),o.jsx("span",{className:"text-gray-600 text-xs",children:"8"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#CB8585"}}),o.jsx("span",{className:"text-gray-600 text-xs",children:"4-8"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),o.jsx("span",{className:"text-gray-600 text-xs",children:"4"})]})]}),o.jsx("span",{className:"text-gray-500",children:p?"...":`${l.length}`})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx(Hu,{className:"w-5 h-5 text-blue-600"}),o.jsx("h4",{className:"text-md font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:""}),o.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[f.workingDays,""]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Lr(f.totalMinutes)})]})]})})]}),u.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx(Cr,{className:"w-5 h-5 text-gray-600"}),o.jsx("h4",{className:"text-md font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"space-y-3",children:u.map(($,H)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:`hsl(${H*60}, 60%, 50%)`}}),o.jsx("span",{className:"font-medium text-gray-900",children:$.location})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[$.workingDays," / ",Lr($.totalMinutes)]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[" ",Lr(Math.round($.totalMinutes/$.workingDays))," / "]})]})]},$.location))})]}),o.jsx(_1,{})]}),x&&y.length>0&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>{w(null),m([])},children:o.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-96 overflow-y-auto",onClick:$=>$.stopPropagation(),children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[new Date(x).toLocaleDateString("ja-JP")," "]}),o.jsx("div",{className:"space-y-3",children:y.map(($,H)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:"flex items-center space-x-3",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[$.record_type==="clock_in"&&o.jsx(Ec,{className:"w-4 h-4 text-green-600"}),$.record_type==="clock_out"&&o.jsx(aa,{className:"w-4 h-4 text-red-600"}),($.record_type==="break_start"||$.record_type==="break_end")&&o.jsx(Fi,{className:"w-4 h-4 text-orange-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:Bs.getRecordTypeLabel($.record_type)})]})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:Rr($.recorded_at)}),$.note&&o.jsx("p",{className:"text-xs text-gray-500",children:$.note})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("button",{onClick:()=>xe($),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:o.jsx(Ku,{className:"w-3 h-3 text-gray-600"})}),o.jsx("button",{onClick:()=>cn($),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:"",children:o.jsx(Qu,{className:"w-3 h-3 text-red-600"})})]})]})]},$.id))}),o.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:""}),o.jsx("span",{className:"text-lg font-bold text-blue-600",children:Oa(U(y))})]})}),v&&o.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-green-700",children:["",v.sales_amount.toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-green-700",children:[v.customer_count,""]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-green-700",children:[v.items_sold,""]})]})]}),o.jsx("div",{className:"border-t border-green-200 pt-2 mb-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["",(v.customer_unit_price||os(v.sales_amount,v.customer_count)).toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-600",children:""}),o.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[v.items_per_customer||zo(v.items_sold,v.customer_count),"/"]})]})]})}),v.notes&&o.jsxs("div",{className:"mb-2",children:[o.jsx("span",{className:"text-xs text-gray-600",children:":"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:v.notes})]}),o.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t border-green-200 space-y-1",children:[v.checkout_time&&o.jsxs("div",{children:[": ",new Date(v.checkout_time).toLocaleString("ja-JP")]}),o.jsxs("div",{children:[": ",new Date(v.created_at).toLocaleString("ja-JP")]})]})]}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsx("button",{onClick:()=>{w(null),m([]),b(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:""})})]})}),S&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-96 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:P.recordType,onChange:$=>_({...P,recordType:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"clock_in",children:""}),o.jsx("option",{value:"clock_out",children:""}),o.jsx("option",{value:"break_start",children:""}),o.jsx("option",{value:"break_end",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"datetime-local",value:P.recordedAt,onChange:$=>_({...P,recordedAt:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:P.locationName,onChange:$=>_({...P,locationName:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:": "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:P.note,onChange:$=>_({...P,note:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{value:P.reason,onChange:$=>_({...P,reason:$.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx("button",{onClick:()=>N(null),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:""}),o.jsx("button",{onClick:St,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:""})]})]})}),D&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsx("button",{onClick:()=>O(null),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-gray-700 mb-2",children:""}),o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[D.record_type==="clock_in"&&o.jsx(Ec,{className:"w-4 h-4 text-green-600"}),D.record_type==="clock_out"&&o.jsx(aa,{className:"w-4 h-4 text-red-600"}),(D.record_type==="break_start"||D.record_type==="break_end")&&o.jsx(Fi,{className:"w-4 h-4 text-orange-600"}),o.jsx("span",{className:"font-medium",children:Bs.getRecordTypeLabel(D.record_type)})]}),o.jsx("p",{className:"text-sm text-gray-600",children:Rr(D.recorded_at)}),D.note&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D.note})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{value:A,onChange:$=>E($.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:""})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:""}),o.jsx("button",{onClick:ss,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors",children:""})]})]})})]})},S1=()=>{const[t,e]=j.useState("schedule");return o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:o.jsxs("div",{className:"flex border-b border-gray-200",children:[o.jsxs("button",{onClick:()=>e("schedule"),className:`flex-1 flex items-center justify-center px-4 py-3 text-sm font-medium transition-colors ${t==="schedule"?"text-white border-b-2 border-transparent":"text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300"}`,style:t==="schedule"?{backgroundColor:"#CB8585",borderBottomColor:"#CB8585"}:{},children:[o.jsx(Ft,{className:"w-4 h-4 mr-2"}),""]}),o.jsxs("button",{onClick:()=>e("attendance"),className:`flex-1 flex items-center justify-center px-4 py-3 text-sm font-medium transition-colors ${t==="attendance"?"text-white border-b-2 border-transparent":"text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300"}`,style:t==="attendance"?{backgroundColor:"#CB8585",borderBottomColor:"#CB8585"}:{},children:[o.jsx(an,{className:"w-4 h-4 mr-2"}),""]})]})}),o.jsxs("div",{className:"min-h-0",children:[t==="schedule"&&o.jsx(b1,{}),t==="attendance"&&o.jsx(j1,{})]})]})},N1=({isOpen:t,onClose:e,checkoutTime:r})=>{var x;const{user:n}=on(),[s,a]=j.useState({sales:"",customerCount:"",itemsSold:"",notes:""}),[i,l]=j.useState(!1),[c,u]=j.useState(!1),[d,f]=j.useState(null);se.useEffect(()=>{(async()=>{if(!(!t||!n))try{const y=await Kr.getTodayReport(n);y?(f(y),a({sales:y.sales_amount>0?y.sales_amount.toString():"",customerCount:y.customer_count>0?y.customer_count.toString():"",itemsSold:y.items_sold>0?y.items_sold.toString():"",notes:y.notes?y.notes.split(`
[`)[0]:""})):a({sales:"",customerCount:"",itemsSold:"",notes:""})}catch(y){console.error(":",y)}})()},[t,n]);const h=(w,y)=>{a(m=>({...m,[w]:y}))},p=async w=>{if(w.preventDefault(),!n){alert("");return}u(!0);try{const y={salesAmount:parseInt(s.sales)||0,customerCount:parseInt(s.customerCount)||0,itemsSold:parseInt(s.itemsSold)||0,notes:s.notes.trim()||void 0,checkoutTime:r||new Date().toISOString()};console.log("DB:",y),await Kr.createDailyReport(n,y),l(!0),setTimeout(()=>{g()},3e3)}catch(y){console.error(":",y);const m=y instanceof Error?y.message:"";alert(`: ${m}`),u(!1)}},g=()=>{a({sales:"",customerCount:"",itemsSold:"",notes:""}),l(!1),u(!1),f(null),e()};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:i?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"#E8F5E8"},children:o.jsx(cg,{className:"w-8 h-8",style:{color:"#059669"}})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:""}),o.jsx("p",{className:"text-gray-600 mb-4",children:""}),o.jsx("div",{className:"text-2xl font-medium mb-6",style:{color:"#CB8585"},children:""}),o.jsx("p",{className:"text-sm text-gray-500",children:""})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""}),o.jsx("button",{onClick:g,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),d&&o.jsx("div",{className:"mx-6 mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:""}),o.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[o.jsx("p",{children:""}),o.jsxs("p",{className:"mt-1",children:[o.jsx("strong",{children:":"})," ",((x=d.sales_amount)==null?void 0:x.toLocaleString())||"0","",o.jsx("strong",{children:":"})," ",d.customer_count||0,"",o.jsx("strong",{children:":"})," ",d.items_sold||0,""]}),o.jsx("p",{className:"mt-1 text-xs",children:" "})]})]})]})}),o.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Vu,{className:"w-4 h-4 mr-2",style:{color:"#CB8585"}}),""]}),o.jsx("input",{type:"number",value:s.sales,onChange:w=>h("sales",w.target.value),required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#CB8585] focus:border-transparent",placeholder:": 150000"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[o.jsx(zt,{className:"w-4 h-4 mr-2",style:{color:"#CB8585"}}),""]}),o.jsx("input",{type:"number",value:s.customerCount,onChange:w=>h("customerCount",w.target.value),required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#CB8585] focus:border-transparent",placeholder:": 25"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Gx,{className:"w-4 h-4 mr-2",style:{color:"#CB8585"}}),""]}),o.jsx("input",{type:"number",value:s.itemsSold,onChange:w=>h("itemsSold",w.target.value),required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#CB8585] focus:border-transparent",placeholder:": 40"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[o.jsx(qx,{className:"w-4 h-4 mr-2",style:{color:"#CB8585"}}),""]}),o.jsx("textarea",{value:s.notes,onChange:w=>h("notes",w.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#CB8585] focus:border-transparent resize-none",placeholder:""})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:g,disabled:c,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:""}),o.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#CB8585"},onMouseEnter:w=>{c||(w.currentTarget.style.backgroundColor="#B87575")},onMouseLeave:w=>{c||(w.currentTarget.style.backgroundColor="#CB8585")},children:c?"...":""})]})]})]})})}):null},k1=()=>{const t=new Date().getFullYear();return o.jsx("footer",{className:"mt-8",style:{backgroundColor:"#9c9c9c"},children:o.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:o.jsxs("div",{className:"text-left space-y-2",children:[o.jsx("div",{children:o.jsx("h3",{className:"text-sm font-medium text-white",children:""})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("a",{href:"#",className:"block text-xs text-white hover:text-gray-200 transition-colors",onClick:e=>{e.preventDefault()},children:""}),o.jsx("a",{href:"#",className:"block text-xs text-white hover:text-gray-200 transition-colors",onClick:e=>{e.preventDefault()},children:""}),o.jsx("a",{href:"#",className:"block text-xs text-white hover:text-gray-200 transition-colors",onClick:e=>{e.preventDefault()},children:""})]}),o.jsx("div",{className:"pt-2 border-t border-gray-400",children:o.jsxs("p",{className:"text-xs text-white",children:[" ",t," Make Me Team. All rights reserved."]})})]})})})},Fg=j.createContext(void 0),C1=()=>{const t=j.useContext(Fg);if(t===void 0)throw new Error("useAdmin must be used within an AdminProvider");return t},E1=({children:t})=>{const[e,r]=j.useState(!1);j.useEffect(()=>{sessionStorage.getItem("admin_authenticated")==="true"&&r(!0)},[]);const a={isAdminAuthenticated:e,login:i=>i==="admin123"?(r(!0),sessionStorage.setItem("admin_authenticated","true"),!0):!1,logout:()=>{r(!1),sessionStorage.removeItem("admin_authenticated")}};return o.jsx(Fg.Provider,{value:a,children:t})},D1=()=>{const{login:t,error:e,isLoading:r,clearError:n}=on();return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 flex items-center justify-center px-6",children:o.jsx("div",{className:"max-w-md w-full",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-slate-800 via-gray-700 to-slate-600 bg-clip-text text-transparent mb-4 tracking-tight whitespace-nowrap",children:""}),o.jsx("p",{className:"text-gray-600 text-base",children:"LINE"})]}),e&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:[o.jsx("div",{className:"text-sm text-red-700 mb-2",children:e}),o.jsx("button",{type:"button",className:"text-xs text-red-600 hover:text-red-800",onClick:n,children:""})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("button",{onClick:t,disabled:r,className:`w-full py-4 text-lg font-medium rounded-xl text-white transition-all duration-200 ${r?"bg-gray-400 cursor-not-allowed":"bg-[#00B900] hover:bg-[#009900]"}`,children:r?"...":"LINE"}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["",o.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 underline",children:""}),"",o.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 underline",children:""}),""]})})]})]})})})};class I1{static async findOrCreateUser(e){console.log(" :",e.userId);let{data:r,error:n}=await z.from("users").select("*").eq("line_user_id",e.userId).single();if(console.log(" :",{existingUser:r,findError:n}),n&&n.code!=="PGRST116")throw console.error(" :",n),new Error(`: ${n.message}`);if(r){console.log(" ");const s={display_name:e.displayName,picture_url:e.pictureUrl,email:e.email,updated_at:new Date().toISOString()},{data:a,error:i}=await z.from("users").update(s).eq("id",r.id).select("*").single();if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a),a}else{console.log(" ");const s={line_user_id:e.userId,display_name:e.displayName,picture_url:e.pictureUrl,email:e.email},{data:a,error:i}=await z.from("users").insert(s).select("*").single();if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a),a}}}const P1=()=>{const{logout:t}=on();return j.useEffect(()=>{(async()=>{try{const r=new URLSearchParams(window.location.search),n=r.get("code"),s=r.get("state"),a=r.get("error");if(a){console.error("LINE:",a),alert(""),window.location.href="/";return}if(!n||!s){console.error(""),alert(""),window.location.href="/";return}const i=localStorage.getItem("line_login_state");if(console.log(" State:",{received:s,stored:i,match:s===i}),s!==i){console.error("State "),localStorage.removeItem("line_login_state"),alert(""),window.location.href="/";return}const l=await Xx(n);let c;l.id_token?c=Zx(l.id_token):c=await eb(l.access_token);try{console.log(" Supabase");const u=await I1.findOrCreateUser(c);console.log(" DB:",u)}catch(u){console.error(" DB:",u)}localStorage.setItem("line_auth_user",JSON.stringify(c)),localStorage.removeItem("line_login_state"),hg(),console.log(":",c.displayName),window.location.href="/"}catch(r){console.error(":",r),r instanceof Error?r.message.includes("")?alert("LINE"):r.message.includes("ID")?alert(""):r.message.includes("Channel Secret")?alert("Channel Secret"):alert(`: ${r.message}`):alert(""),localStorage.removeItem("line_auth_user"),localStorage.removeItem("line_login_state"),localStorage.removeItem("line_auth_timestamp"),window.location.href="/"}})()},[t]),o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 rounded-lg flex items-center justify-center mb-4",style:{backgroundColor:"#CB8585"},children:o.jsxs("svg",{className:"animate-spin h-8 w-8 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"..."}),o.jsx("p",{className:"text-gray-600",children:"LINE"}),o.jsx("div",{className:"mt-4",children:o.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-400 text-sm",children:[o.jsx("span",{children:""}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse"}),o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse delay-75"}),o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse delay-150"})]})]})})]})})},T1=({onLogin:t})=>{const[e,r]=j.useState(""),[n,s]=j.useState(null),[a,i]=j.useState(!1),l=c=>{c.preventDefault(),s(null),i(!0),t(e)||(s(""),r("")),i(!1)};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 flex items-center justify-center px-6",children:o.jsx("div",{className:"max-w-md w-full",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-8 shadow-md bg-red-600",children:o.jsx("div",{className:"text-white text-3xl font-bold",children:""})}),o.jsx("h1",{className:"text-4xl font-black text-slate-800 mb-4 tracking-tight",children:""}),o.jsx("p",{className:"text-gray-600 text-base",children:""})]}),n&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:o.jsx("div",{className:"text-sm text-red-700 mb-2",children:n})}),o.jsxs("form",{onSubmit:l,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"password",id:"password",value:e,onChange:c=>r(c.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",disabled:a,className:`w-full py-4 text-lg font-medium rounded-xl text-white transition-all duration-200 ${a?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:a?"...":""})]})]})})})};class O1{static async getTotalUsers(){const{count:e,error:r}=await z.from("users").select("*",{count:"exact",head:!0});if(r)throw r;return e||0}static async getTodayAttendance(){const e=new Date().toISOString().split("T")[0],{data:r,error:n}=await z.from("time_records").select("user_id").eq("record_type","clock_in").gte("recorded_at",`${e}T00:00:00`).lt("recorded_at",`${e}T23:59:59`);if(n)throw n;return new Set(r==null?void 0:r.map(a=>a.user_id)).size}static async getCurrentlyWorking(){const e=new Date().toISOString().split("T")[0],{data:r,error:n}=await z.from("time_records").select("user_id, record_type, recorded_at").gte("recorded_at",`${e}T00:00:00`).lt("recorded_at",`${e}T23:59:59`).order("recorded_at",{ascending:!0});if(n)throw n;const s=new Map;r==null||r.forEach(i=>{s.set(i.user_id,i.record_type)});let a=0;return s.forEach(i=>{(i==="clock_in"||i==="break_end")&&a++}),a}static async getTodaySales(){const e=new Date().toISOString().split("T")[0],{data:r,error:n}=await z.from("daily_reports").select("sales_amount").eq("report_date",e);if(n)throw n;return(r==null?void 0:r.reduce((a,i)=>a+i.sales_amount,0))||0}static async getAvgSalesPerUser(){const e=new Date().toISOString().split("T")[0],{data:r,error:n}=await z.from("daily_reports").select("sales_amount").eq("report_date",e);if(n)throw n;if(!r||r.length===0)return 0;const s=r.reduce((a,i)=>a+i.sales_amount,0);return Math.round(s/r.length)}static async getMonthlyShifts(){const e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],n=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0],{data:s,error:a}=await z.from("shifts").select("shift_status").gte("shift_date",r).lte("shift_date",n);if(a)throw a;const i=(s==null?void 0:s.length)||0,l=(s==null?void 0:s.filter(c=>c.shift_status==="confirmed").length)||0;return{total:i,completed:l}}static async getMonthlyAttendanceRate(){const e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],n=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0],{data:s,error:a}=await z.from("shifts").select("id").gte("shift_date",r).lte("shift_date",n).neq("shift_type","off");if(a)throw a;const{data:i,error:l}=await z.from("time_records").select("id").eq("record_type","clock_in").gte("recorded_at",`${r}T00:00:00`).lt("recorded_at",`${n}T23:59:59`);if(l)throw l;const c=(s==null?void 0:s.length)||0,u=(i==null?void 0:i.length)||0;return c>0?Math.round(u/c*100):0}static async getAvgWorkingHours(){const e=new Date,r=new Date(e.setDate(e.getDate()-e.getDay())).toISOString().split("T")[0],n=new Date(e.setDate(e.getDate()-e.getDay()+6)).toISOString().split("T")[0],{data:s,error:a}=await z.from("time_records").select("user_id, record_type, recorded_at").gte("recorded_at",`${r}T00:00:00`).lt("recorded_at",`${n}T23:59:59`).order("recorded_at",{ascending:!0});if(a)throw a;const i=new Map,l=new Map;s==null||s.forEach(d=>{const f=d.user_id,h=new Date(d.recorded_at);if(i.has(f)||i.set(f,0),d.record_type==="clock_in")l.set(f,{type:"work",startTime:h});else if(d.record_type==="clock_out"){const p=l.get(f);if(p&&p.type==="work"){const g=(h.getTime()-p.startTime.getTime())/36e5;i.set(f,i.get(f)+g)}l.set(f,{type:"off"})}});const c=Array.from(i.values()).reduce((d,f)=>d+f,0),u=i.size;return u>0?Math.round(c/u*10)/10:0}static async getRecentActivity(){const{data:e,error:r}=await z.from("time_records").select(`
        record_type,
        recorded_at,
        users (
          display_name
        )
      `).order("recorded_at",{ascending:!1}).limit(10);if(r)throw r;const n={clock_in:"",clock_out:"",break_start:"",break_end:""};return(e==null?void 0:e.map(s=>{var a;return{user_display_name:((a=s.users)==null?void 0:a.display_name)||"",action:n[s.record_type]||s.record_type,timestamp:s.recorded_at}}))||[]}static async getAllKPIData(){try{const[e,r,n,s,a,i,l,c,u]=await Promise.all([this.getTotalUsers(),this.getTodayAttendance(),this.getCurrentlyWorking(),this.getTodaySales(),this.getAvgSalesPerUser(),this.getMonthlyShifts(),this.getMonthlyAttendanceRate(),this.getAvgWorkingHours(),this.getRecentActivity()]);return{totalUsers:e,todayAttendance:r,currentlyWorking:n,todaySales:s,avgSalesPerUser:a,totalShifts:i.total,completedShifts:i.completed,monthlyAttendanceRate:l,avgWorkingHours:c,recentActivity:u}}catch(e){throw console.error("KPI data fetch error:",e),e}}}class gt{static async setUserContext(e){return console.log(" User context (RLS):",e),!0}static identifyMakemeLocation(e){const r=["","makeme","MAKEME"],n=[e.name,e.brand_name,e.store_name,e.code].filter(Boolean).join(" ").toLowerCase();return r.some(s=>n.includes(s.toLowerCase()))}static async getAllLocations(){console.log(" ");try{const{data:e,error:r}=await z.from("locations").select("*").order("display_order",{ascending:!0});if(r)throw console.error(" :",r),new Error(`: ${r.message}`);return console.log(" :",e==null?void 0:e.length,""),(e||[]).map(s=>({...s,location_type:this.identifyMakemeLocation(s)?"makeme":s.location_type}))}catch(e){throw console.error(" :",e),e}}static async createLocation(e){console.log(" :",e.name);try{const{data:r}=await z.from("locations").select("display_order").order("display_order",{ascending:!1}).limit(1).single(),n=((r==null?void 0:r.display_order)||0)+1,s={...e};s.start_date===""&&(s.start_date=void 0),s.end_date===""&&(s.end_date=void 0),s.location_type==="makeme"&&(s.location_type="permanent",(!s.brand_name||!s.brand_name.includes(""))&&(s.brand_name=s.brand_name?` ${s.brand_name}`:""));const{data:a,error:i}=await z.from("locations").insert([{...s,is_active:s.is_active??!0,display_order:s.display_order??n,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a.name),a}catch(r){throw console.error(" :",r),r}}static async updateLocation(e,r){console.log(" :",e);try{const n={...r};n.start_date===""&&(n.start_date=null),n.end_date===""&&(n.end_date=null),n.location_type==="makeme"&&(n.location_type="permanent",(!n.brand_name||!n.brand_name.includes(""))&&(n.brand_name=n.brand_name?` ${n.brand_name}`:""));const{data:s,error:a}=await z.from("locations").update({...n,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw console.error(" :",a),new Error(`: ${a.message}`);return console.log(" :",s.name),s}catch(n){throw console.error(" :",n),n}}static async deleteLocation(e){console.log(" :",e);try{const{error:r}=await z.from("locations").update({is_active:!1,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw console.error(" :",r),new Error(`: ${r.message}`);console.log(" ")}catch(r){throw console.error(" :",r),r}}static async checkCodeDuplicate(e,r){console.log(" :",e);try{let n=z.from("locations").select("id").eq("code",e);r&&(n=n.neq("id",r));const{data:s,error:a}=await n;if(a)throw console.error(" :",a),new Error(`: ${a.message}`);const i=(s||[]).length>0;return console.log(" :",i?"":""),i}catch(n){throw console.error(" :",n),n}}static async getActiveLocations(){console.log(" ");try{const{data:e,error:r}=await z.from("locations").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(r)throw console.error(" :",r),new Error(`: ${r.message}`);return console.log(" :",e==null?void 0:e.length,""),(e||[]).map(s=>({...s,location_type:this.identifyMakemeLocation(s)?"makeme":s.location_type}))}catch(e){throw console.error(" :",e),e}}static async getLocationById(e){console.log(" :",e);try{const{data:r,error:n}=await z.from("locations").select("*").eq("id",e).single();return n?(console.error(" :",n),null):(console.log(" :",r==null?void 0:r.name),r)}catch(r){return console.error(" :",r),null}}static async getLocationByCode(e){console.log(" :",e);try{const{data:r,error:n}=await z.from("locations").select("*").eq("code",e).eq("is_active",!0).single();return n?(console.error(" :",n),null):(console.log(" :",r==null?void 0:r.name),r)}catch(r){return console.error(" :",r),null}}static async getDefaultLocation(){console.log(" ");try{const{data:e,error:r}=await z.from("locations").select("*").eq("is_active",!0).order("display_order",{ascending:!0}).limit(1).single();return r?(console.error(" :",r),null):(console.log(" :",e==null?void 0:e.name),e)}catch(e){return console.error(" :",e),null}}static async getLocationUsageStats(e,r,n){console.log(" :",{startDate:r,endDate:n}),await this.setUserContext(e.userId);try{let s=z.from("time_records").select(`
          location_id,
          locations!inner(name),
          count()
        `).not("location_id","is",null);r&&(s=s.gte("recorded_at",r)),n&&(s=s.lte("recorded_at",n));const{data:a,error:i}=await s;if(i)throw console.error(" :",i),new Error(`: ${i.message}`);return console.log(" :",a==null?void 0:a.length,""),a||[]}catch(s){throw console.error(" :",s),s}}static async getCurrentLocation(){return console.log(" "),new Promise((e,r)=>{if(!navigator.geolocation){console.error(" Geolocation API not supported"),r(new Error(""));return}navigator.geolocation.getCurrentPosition(n=>{const s={latitude:n.coords.latitude,longitude:n.coords.longitude,locationName:""};console.log(" :",s),e(s)},n=>{console.error(" :",n),r(new Error(""))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}}const Uc=(t,e)=>{if(!t)return"";try{let r=t.replace(/[\x00-\x1F\x7F-\x9F]/g,"").replace(/\uFFFD/g,"").replace(/\s+/g," ").trim();return e&&r.length>e,r}catch(r){return console.warn(":",r),""}},qe=t=>Uc(t)||"Unknown User",A1=(t,e=10)=>{const r=qe(t);return r.length<=e?r:r.substring(0,e)+"..."},R1=()=>{const[t,e]=j.useState([]),[r,n]=j.useState([]),[s,a]=j.useState([]),[i,l]=j.useState("all"),[c,u]=j.useState(new Date().toISOString().split("T")[0]),[d,f]=j.useState(!0),[h,p]=j.useState(null),g=8,x=23,w=x-g,y=60,m=15;j.useEffect(()=>{v()},[c,i]);const v=async()=>{f(!0),p(null);try{const _=await gt.getAllLocations();a(_);let A=z.from("users").select("*");if(i!=="all"){const{data:L}=await z.from("user_location_access").select("user_id").eq("location_id",i);if(L&&L.length>0){const U=L.map(V=>V.user_id);A=A.in("id",U)}else{e([]),n([]),f(!1);return}}const{data:E,error:R}=await A.order("display_name");if(R)throw R;e(E||[]);const k=new Date(c);k.setHours(0,0,0,0);const C=new Date(c);C.setHours(23,59,59,999);const{data:I,error:B}=await z.from("time_records").select("*").gte("recorded_at",k.toISOString()).lte("recorded_at",C.toISOString()).order("recorded_at");if(B)throw B;const T={};(E||[]).forEach(L=>{T[L.id]={user:L,timeRecords:[],workPeriods:[]}}),(I||[]).forEach(L=>{T[L.user_id]&&T[L.user_id].timeRecords.push(L)}),Object.values(T).forEach(L=>{L.workPeriods=b(L.timeRecords)}),n(Object.values(T))}catch(_){p(_ instanceof Error?_.message:"")}finally{f(!1)}},b=_=>{const A=[];let E=null,R=null;return _.forEach(k=>{const C=new Date(k.recorded_at);switch(k.record_type){case"clock_in":E||(E=C);break;case"break_start":E&&!R&&(A.push({start:E,end:C,type:"work",location:k.location_name||void 0}),R=C);break;case"break_end":R&&(A.push({start:R,end:C,type:"break",location:k.location_name||void 0}),R=null,E=C);break;case"clock_out":E&&(A.push({start:E,end:C,type:"work",location:k.location_name||void 0}),E=null),R&&(A.push({start:R,end:C,type:"break",location:k.location_name||void 0}),R=null);break}}),E&&A.push({start:E,end:null,type:"work"}),A},S=()=>{const _=[];for(let A=g;A<=x;A++)_.push(o.jsx("div",{className:"flex-none w-24 text-center",children:o.jsxs("div",{className:"text-xs font-medium text-gray-700 border-r border-gray-200 py-2",children:[A.toString().padStart(2,"0"),":00"]})},A));return _},N=()=>{const _=[];for(let A=g;A<=x;A++)for(let E=0;E<y;E+=m){const R=E===0;_.push(o.jsx("div",{className:`absolute top-0 bottom-0 w-px ${R?"bg-gray-300":"bg-gray-100"}`,style:{left:`${((A-g)*y+E)*(96/y)}px`}},`${A}-${E}`))}return _},D=_=>{const A=_.getHours(),E=_.getMinutes(),R=(A-g)*y+E;return Math.max(0,R/y*96)},O=(_,A)=>{const E=D(_.start),R=_.end?D(_.end):w*96,k=Math.max(8,R-E);return E<0&&R<0?null:o.jsx("div",{className:`absolute h-6 rounded-sm shadow-sm border ${_.type==="work"?"bg-green-100 border-green-300 text-green-800":"bg-orange-100 border-orange-300 text-orange-800"} ${_.end?"":"animate-pulse"}`,style:{left:`${Math.max(0,E)}px`,width:`${k}px`,top:`${A*48+12}px`},title:`${_.type==="work"?"":""}: ${_.start.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})} - ${_.end?_.end.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):""}${_.location?` (${_.location})`:""}`,children:o.jsxs("div",{className:"text-xs px-1 truncate",children:[_.type==="work"?"":"",!_.end&&" ()"]})},`${_.start.getTime()}-${_.type}`)},P=_=>new Date(_).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"long"});return d?o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]})}):o.jsxs("div",{className:"bg-white rounded-lg shadow",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ft,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:P(c)})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ft,{className:"w-4 h-4 text-gray-500"}),o.jsx("input",{type:"date",value:c,onChange:_=>u(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Cr,{className:"w-4 h-4 text-gray-500"}),o.jsxs("select",{value:i,onChange:_=>l(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"all",children:""}),s.map(_=>o.jsx("option",{value:_.id,children:_.brand_name&&_.store_name?`${_.brand_name} ${_.store_name}`:_.name},_.id))]})]})]})]})}),h&&o.jsx("div",{className:"p-6 bg-red-50 border-b border-red-200",children:o.jsx("div",{className:"text-sm text-red-700",children:h})}),o.jsx("div",{className:"p-6",children:r.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(zt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:i==="all"?"":""})]}):o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"relative overflow-x-auto border border-gray-200 rounded-lg",children:o.jsxs("div",{className:"flex",children:[o.jsxs("div",{className:"flex-none w-48 bg-gray-50 border-r border-gray-200",children:[o.jsxs("div",{className:"h-10 border-b border-gray-200 bg-gray-100 flex items-center px-4",children:[o.jsx(an,{className:"w-4 h-4 text-gray-500 mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:""})]}),r.map((_,A)=>o.jsx("div",{className:"h-12 flex items-center px-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[_.user.picture_url?o.jsx("img",{src:_.user.picture_url,alt:qe(_.user.display_name),className:"w-8 h-8 rounded-full object-cover flex-shrink-0 ring-2 ring-white shadow-sm"}):o.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(zt,{className:"w-4 h-4 text-gray-500"})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded-full flex-shrink-0",children:["#",_.user.employee_number||"---"]}),o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:qe(_.user.display_name)})]})})]})},_.user.id))]}),o.jsx("div",{className:"flex-1 overflow-x-auto",children:o.jsxs("div",{style:{width:`${w*96+96}px`},children:[o.jsx("div",{className:"h-10 border-b border-gray-200 bg-gray-50 flex",children:S()}),o.jsxs("div",{className:"relative bg-white",style:{height:`${r.length*48}px`},children:[N(),r.map((_,A)=>o.jsxs("div",{children:[o.jsx("div",{className:"absolute left-0 right-0 h-px bg-gray-100",style:{top:`${(A+1)*48}px`}}),_.workPeriods.map(E=>O(E,A))]},_.user.id))]})]})})]})}),o.jsxs("div",{className:"mt-6 flex items-center space-x-6 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded-sm"}),o.jsx("span",{className:"text-gray-600",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 bg-orange-100 border border-orange-300 rounded-sm"}),o.jsx("span",{className:"text-gray-600",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded-sm animate-pulse"}),o.jsx("span",{className:"text-gray-600",children:""})]})]})]})})]})},L1=()=>{const[t,e]=j.useState(null),[r,n]=j.useState(!0),[s,a]=j.useState(null),[i,l]=j.useState(new Date),[c,u]=j.useState(!0),d=async()=>{n(!0),a(null);try{const g=await O1.getAllKPIData();e(g),l(new Date)}catch(g){a(g instanceof Error?g.message:"KPI")}finally{n(!1)}};j.useEffect(()=>{d()},[]);const f=g=>`${g.toLocaleString()}`,h=g=>new Date(g).toLocaleString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=g=>g.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});return r&&!t?o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"KPI..."})]})}):s&&!t?o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[o.jsx("div",{className:"text-sm text-red-700",children:s}),o.jsx("button",{onClick:d,className:"mt-2 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 text-sm rounded",children:""})]})}):o.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"KPI "}),o.jsxs("p",{className:"text-gray-600",children:[": ",p(i)]})]}),o.jsx("button",{onClick:d,disabled:r,className:`px-4 py-2 text-white text-sm font-medium rounded-lg transition-colors ${r?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:r?"...":""})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(zt,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t==null?void 0:t.totalUsers})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(Yx,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t==null?void 0:t.todayAttendance})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:o.jsx(an,{className:"w-6 h-6 text-orange-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t==null?void 0:t.currentlyWorking})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(Vu,{className:"w-6 h-6 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f((t==null?void 0:t.todaySales)||0)})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:o.jsx(Dc,{className:"w-6 h-6 text-indigo-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f((t==null?void 0:t.avgSalesPerUser)||0)})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-cyan-100 rounded-lg",children:o.jsx(Ft,{className:"w-6 h-6 text-cyan-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t==null?void 0:t.completedShifts," / ",t==null?void 0:t.totalShifts]})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:o.jsx(cg,{className:"w-6 h-6 text-emerald-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t==null?void 0:t.monthlyAttendanceRate,"%"]})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-rose-100 rounded-lg",children:o.jsx(Hu,{className:"w-6 h-6 text-rose-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:""}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t==null?void 0:t.avgWorkingHours,"h"]})]})]})})]}),o.jsx(R1,{}),o.jsxs("div",{className:"bg-white rounded-lg shadow",children:[o.jsx("div",{className:"p-6 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>u(!c),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Rx,{className:"w-5 h-5 text-gray-500 mr-2"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"flex items-center text-gray-400",children:c?o.jsx(dg,{className:"w-5 h-5"}):o.jsx(Bx,{className:"w-5 h-5"})})]})}),!c&&o.jsx("div",{className:"p-6",children:t!=null&&t.recentActivity&&t.recentActivity.length>0?o.jsx("div",{className:"space-y-4",children:t.recentActivity.map((g,x)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.user_display_name}),o.jsx("p",{className:"text-sm text-gray-500",children:g.action})]})]}),o.jsx("div",{className:"text-xs text-gray-400",children:h(g.timestamp)})]},x))}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:""})})]})]})},$1=({selectedUserId:t,onUserSelect:e,placeholder:r=""})=>{const[n,s]=j.useState([]),[a,i]=j.useState(!0),[l,c]=j.useState(null),[u,d]=j.useState(!1);j.useEffect(()=>{f()},[]);const f=async()=>{i(!0),c(null);try{const{data:g,error:x}=await z.from("users").select("*").order("display_name",{ascending:!0});if(x)throw x;s(g||[])}catch(g){c(g instanceof Error?g.message:"")}finally{i(!1)}},h=n.find(g=>g.id===t),p=g=>{e(g),d(!1)};return a?o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent mr-2"}),o.jsx("span",{className:"text-gray-500",children:"..."})]})}):l?o.jsx("div",{className:"relative",children:o.jsx("div",{className:"w-full px-4 py-3 bg-red-50 border border-red-300 rounded-lg",children:o.jsx("span",{className:"text-red-700 text-sm",children:l})})}):o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",onClick:()=>d(!u),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ls,{className:"w-4 h-4 text-gray-400 mr-3"}),o.jsx("span",{className:h?"text-gray-900":"text-gray-500",children:h?qe(h.display_name):r})]}),o.jsx(dg,{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${u?"transform rotate-180":""}`})]}),u&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),o.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[o.jsxs("button",{type:"button",onClick:()=>p(null),className:`w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center ${t?"text-gray-900":"bg-blue-50 text-blue-700"}`,children:[o.jsx(Ls,{className:"w-4 h-4 mr-3 text-gray-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:""}),o.jsx("div",{className:"text-sm text-gray-500",children:""})]})]}),n.map(g=>o.jsxs("button",{type:"button",onClick:()=>p(g.id),className:`w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center ${t===g.id?"bg-blue-50 text-blue-700":"text-gray-900"}`,children:[g.picture_url?o.jsx("img",{src:g.picture_url,alt:qe(g.display_name),className:"w-8 h-8 rounded-full mr-3 object-cover"}):o.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-3 flex items-center justify-center",children:o.jsx(Ls,{className:"w-4 h-4 text-gray-500"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:qe(g.display_name)}),o.jsxs("div",{className:"text-sm text-gray-500 truncate",children:["ID: ",g.id.slice(0,8),"..."]})]}),t===g.id&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2"})]},g.id)),n.length===0&&o.jsx("div",{className:"px-4 py-3 text-gray-500 text-center",children:""})]})]})]})},M1=({selectedUserId:t,onShiftEdit:e,onAddShift:r})=>{const[n,s]=j.useState(new Date),[a,i]=j.useState([]),[l,c]=j.useState(!1),[u,d]=j.useState(null);j.useEffect(()=>{f()},[n,t]);const f=async()=>{c(!0),d(null);try{const b=new Date(n.getFullYear(),n.getMonth(),1),S=new Date(n.getFullYear(),n.getMonth()+1,0);let N=z.from("shifts").select(`
          *,
          users (
            display_name,
            picture_url
          )
        `).gte("shift_date",b.toISOString().split("T")[0]).lte("shift_date",S.toISOString().split("T")[0]).order("shift_date",{ascending:!0});t&&(N=N.eq("user_id",t));const{data:D,error:O}=await N;if(O)throw O;i(D||[])}catch(b){d(b instanceof Error?b.message:"")}finally{c(!1)}},h=async b=>{try{const{error:S}=await z.from("shifts").update({shift_status:"confirmed"}).eq("id",b);if(S)throw S;i(N=>N.map(D=>D.id===b?{...D,shift_status:"confirmed"}:D))}catch(S){console.error("Shift approval error:",S),alert("")}},p=()=>{const b=n.getFullYear(),S=n.getMonth(),N=new Date(b,S,1),O=new Date(b,S+1,0).getDate(),P=N.getDay(),_=[];for(let E=P-1;E>=0;E--){const R=new Date(b,S,-E);_.push({date:R,isCurrentMonth:!1})}for(let E=1;E<=O;E++){const R=new Date(b,S,E);_.push({date:R,isCurrentMonth:!0})}const A=42-_.length;for(let E=1;E<=A;E++){const R=new Date(b,S+1,E);_.push({date:R,isCurrentMonth:!1})}return _},g=b=>{const S=b.toISOString().split("T")[0];return a.filter(N=>N.shift_date===S)},x=b=>({normal:"",early:"",late:"",off:""})[b]||b,w=b=>({normal:"bg-blue-100 text-blue-800",early:"bg-yellow-100 text-yellow-800",late:"bg-purple-100 text-purple-800",off:"bg-gray-100 text-gray-800"})[b]||"bg-gray-100 text-gray-800",y=b=>{s(S=>{const N=new Date(S);return b==="prev"?N.setMonth(N.getMonth()-1):N.setMonth(N.getMonth()+1),N})},m=["1","2","3","4","5","6","7","8","9","10","11","12"],v=["","","","","","",""];return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ft,{className:"w-6 h-6 text-gray-500"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>y("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(qu,{className:"w-5 h-5 text-gray-600"})}),o.jsx("div",{className:"px-4 py-2 bg-gray-50 rounded-lg min-w-[120px] text-center",children:o.jsxs("span",{className:"text-lg font-medium text-gray-900",children:[n.getFullYear(),"",m[n.getMonth()]]})}),o.jsx("button",{onClick:()=>y("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Gu,{className:"w-5 h-5 text-gray-600"})})]})]}),t&&o.jsx("div",{className:"mt-2 text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"p-6",children:[u&&o.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:u})}),l?o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]}):o.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[v.map((b,S)=>o.jsx("div",{className:`p-3 text-center text-sm font-medium ${S===0?"text-red-600":S===6?"text-blue-600":"text-gray-700"}`,children:b},b)),p().map(({date:b,isCurrentMonth:S},N)=>{const D=g(b),O=b.toDateString()===new Date().toDateString();return o.jsxs("div",{className:`min-h-[120px] border border-gray-200 p-2 relative group ${S?"bg-white":"bg-gray-50"} ${O?"ring-2 ring-blue-500":""}`,children:[o.jsx("div",{className:`text-sm font-medium mb-2 ${S?"text-gray-900":"text-gray-400"} ${N%7===0?"text-red-600":N%7===6?"text-blue-600":""}`,children:b.getDate()}),o.jsxs("div",{className:"space-y-1 flex-1",children:[D.map(P=>{var _;return o.jsx("div",{className:"relative group",children:o.jsxs("div",{className:`text-xs px-2 py-1 rounded cursor-pointer hover:shadow-sm transition-shadow ${w(P.shift_type)}`,onClick:()=>e(P),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"truncate",children:!t&&((_=P.users)==null?void 0:_.display_name)&&o.jsx("span",{className:"font-medium",children:A1(P.users.display_name,4)})}),o.jsxs("div",{className:"flex items-center space-x-1",children:[P.shift_status==="adjusting"&&o.jsx("button",{onClick:A=>{A.stopPropagation(),h(P.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-0.5 hover:bg-green-200 rounded",title:"",children:o.jsx(ug,{className:"w-3 h-3 text-green-600"})}),o.jsx(Jx,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-1",children:[o.jsx("span",{children:x(P.shift_type)}),o.jsxs("div",{className:"flex items-center space-x-1",children:[P.shift_status==="adjusting"&&o.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full",title:""}),P.shift_status==="confirmed"&&o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full",title:""})]})]}),(P.start_time||P.end_time)&&o.jsxs("div",{className:"text-xs text-gray-600 mt-1 flex items-center",children:[o.jsx(an,{className:"w-3 h-3 mr-1"}),P.start_time||"--","",P.end_time||"--"]})]})},P.id)}),t&&r&&S&&o.jsxs("button",{onClick:()=>r(b),className:"w-full mt-1 p-1 text-xs text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors opacity-0 group-hover:opacity-100 flex items-center justify-center",title:"",children:[o.jsx(Ju,{className:"w-3 h-3 mr-1"}),""]})]})]},N)})]})]}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:o.jsxs("div",{className:"flex flex-wrap items-center space-x-6",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:""})]})]})})]})},B1=({isOpen:t,onClose:e,shift:r,onSave:n})=>{const[s,a]=j.useState({shift_date:"",shift_type:"normal",shift_status:"adjusting",start_time:"",end_time:"",note:""}),[i,l]=j.useState(!1),[c,u]=j.useState(null),[d,f]=j.useState(null);j.useEffect(()=>{r&&t&&(a({shift_date:r.shift_date,shift_type:r.shift_type,shift_status:r.shift_status,start_time:r.start_time||"",end_time:r.end_time||"",note:r.note||""}),h(r.user_id))},[r,t]),j.useEffect(()=>{u(null)},[s]);const h=async m=>{try{const{data:v,error:b}=await z.from("users").select("display_name, picture_url").eq("id",m).single();if(b)throw b;f(v)}catch(v){console.error("User info fetch error:",v)}},p=(m,v)=>{a(b=>({...b,[m]:v}))},g=async()=>{if(r){l(!0),u(null);try{const m={user_id:r.user_id,shift_date:s.shift_date,shift_type:s.shift_type,shift_status:s.shift_status,start_time:s.start_time||null,end_time:s.end_time||null,note:s.note||null,updated_at:new Date().toISOString()};if(r.id){const{error:v}=await z.from("shifts").update(m).eq("id",r.id);if(v)throw v}else{const{error:v}=await z.from("shifts").insert([{...m,created_at:new Date().toISOString()}]);if(v)throw v}n(),e()}catch(m){u(m instanceof Error?m.message:"")}finally{l(!1)}}},x=async()=>{if(r&&window.confirm("")){l(!0),u(null);try{const{error:m}=await z.from("shifts").delete().eq("id",r.id);if(m)throw m;n(),e()}catch(m){u(m instanceof Error?m.message:"")}finally{l(!1)}}},w=async()=>{if(r){l(!0),u(null);try{const{error:m}=await z.from("shifts").update({shift_status:"confirmed",updated_at:new Date().toISOString()}).eq("id",r.id);if(m)throw m;a(v=>({...v,shift_status:"confirmed"})),n()}catch(m){u(m instanceof Error?m.message:"")}finally{l(!1)}}},y=m=>new Date(m).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short"});return!t||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ft,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r!=null&&r.id?"":""}),o.jsx("p",{className:"text-sm text-gray-600",children:y(r.shift_date)})]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[d&&o.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[d.picture_url?o.jsx("img",{src:d.picture_url,alt:qe(d.display_name),className:"w-10 h-10 rounded-full object-cover"}):o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:o.jsx(Ls,{className:"w-5 h-5 text-gray-500"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:qe(d.display_name)}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ID: ",r.user_id.slice(0,8),"..."]})]})]})}),c&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:c})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"date",value:s.shift_date,onChange:m=>p("shift_date",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:s.shift_type,onChange:m=>p("shift_type",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"normal",children:""}),o.jsx("option",{value:"early",children:""}),o.jsx("option",{value:"late",children:""}),o.jsx("option",{value:"off",children:""})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"time",value:s.start_time,onChange:m=>p("start_time",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"time",value:s.end_time,onChange:m=>p("end_time",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:s.shift_status,onChange:m=>p("shift_status",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"adjusting",children:""}),o.jsx("option",{value:"confirmed",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("textarea",{value:s.note,onChange:m=>p("note",m.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:""})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[o.jsxs("div",{className:"flex space-x-3",children:[s.shift_status==="adjusting"&&o.jsxs("button",{onClick:w,disabled:i,className:"flex items-center px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(an,{className:"w-4 h-4 mr-2"}),""]}),(r==null?void 0:r.id)&&o.jsxs("button",{onClick:x,disabled:i,className:"flex items-center px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Qu,{className:"w-4 h-4 mr-2"}),""]})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:e,disabled:i,className:"px-4 py-2 text-gray-700 font-medium border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),o.jsxs("button",{onClick:g,disabled:i,className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),i?"...":""]})]})]})]})]})})},U1=()=>{const[t,e]=j.useState(null),[r,n]=j.useState(null),[s,a]=j.useState(!1),[i,l]=j.useState(0),[c,u]=j.useState(null),d=x=>{e(x)},f=x=>{n(x),a(!0)},h=()=>{a(!1),n(null)},p=()=>{l(x=>x+1),a(!1),n(null),u(null)},g=x=>{if(!t){alert("");return}const w={id:"",user_id:t,shift_date:x.toISOString().split("T")[0],shift_type:"normal",shift_status:"confirmed",start_time:null,end_time:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(w),u(x),a(!0)};return o.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx(Vx,{className:"w-6 h-6 text-blue-600"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),o.jsx("p",{className:"text-gray-600",children:""})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(zt,{className:"w-5 h-5 text-gray-500"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""})]}),o.jsx("div",{className:"max-w-md",children:o.jsx($1,{selectedUserId:t,onUserSelect:d,placeholder:""})}),t&&o.jsx("div",{className:"mt-3 text-sm text-gray-600",children:""})]}),o.jsx(M1,{selectedUserId:t,onShiftEdit:f,onAddShift:g},i),o.jsx(B1,{isOpen:s,onClose:h,shift:r,onSave:p})]})};function Fc(t,e){return Fc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Fc(t,e)}function zg(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Fc(t,e)}function G(){return G=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},G.apply(null,arguments)}function oa(t){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa(t)}function F1(t,e){if(oa(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z1(t){var e=F1(t,"string");return oa(e)=="symbol"?e:e+""}function W1(t,e,r){return(e=z1(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ch(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lh(Object(r),!0).forEach(function(n){W1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Je(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var uh=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),jl=function(){return Math.random().toString(36).substring(7).split("").join(".")},dh={INIT:"@@redux/INIT"+jl(),REPLACE:"@@redux/REPLACE"+jl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+jl()}};function H1(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Wg(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Je(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Je(1));return r(Wg)(t,e)}if(typeof t!="function")throw new Error(Je(2));var s=t,a=e,i=[],l=i,c=!1;function u(){l===i&&(l=i.slice())}function d(){if(c)throw new Error(Je(3));return a}function f(x){if(typeof x!="function")throw new Error(Je(4));if(c)throw new Error(Je(5));var w=!0;return u(),l.push(x),function(){if(w){if(c)throw new Error(Je(6));w=!1,u();var m=l.indexOf(x);l.splice(m,1),i=null}}}function h(x){if(!H1(x))throw new Error(Je(7));if(typeof x.type>"u")throw new Error(Je(8));if(c)throw new Error(Je(9));try{c=!0,a=s(a,x)}finally{c=!1}for(var w=i=l,y=0;y<w.length;y++){var m=w[y];m()}return x}function p(x){if(typeof x!="function")throw new Error(Je(10));s=x,h({type:dh.REPLACE})}function g(){var x,w=f;return x={subscribe:function(m){if(typeof m!="object"||m===null)throw new Error(Je(11));function v(){m.next&&m.next(d())}v();var b=w(v);return{unsubscribe:b}}},x[uh]=function(){return this},x}return h({type:dh.INIT}),n={dispatch:h,subscribe:f,getState:d,replaceReducer:p},n[uh]=g,n}function fh(t,e){return function(){return e(t.apply(this,arguments))}}function hh(t,e){if(typeof t=="function")return fh(t,e);if(typeof t!="object"||t===null)throw new Error(Je(16));var r={};for(var n in t){var s=t[n];typeof s=="function"&&(r[n]=fh(s,e))}return r}function Hg(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}function q1(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var s=n.apply(void 0,arguments),a=function(){throw new Error(Je(15))},i={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=e.map(function(c){return c(i)});return a=Hg.apply(void 0,l)(s.dispatch),ch(ch({},s),{},{dispatch:a})}}}var qg=se.createContext(null);function G1(t){t()}var Gg=G1,V1=function(e){return Gg=e},K1=function(){return Gg};function J1(){var t=K1(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var s=e;s;)s.callback(),s=s.next})},get:function(){for(var s=[],a=e;a;)s.push(a),a=a.next;return s},subscribe:function(s){var a=!0,i=r={callback:s,next:null,prev:r};return i.prev?i.prev.next=i:e=i,function(){!a||e===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var ph={notify:function(){},get:function(){return[]}};function Vg(t,e){var r,n=ph;function s(f){return c(),n.subscribe(f)}function a(){n.notify()}function i(){d.onStateChange&&d.onStateChange()}function l(){return!!r}function c(){r||(r=e?e.addNestedSub(i):t.subscribe(i),n=J1())}function u(){r&&(r(),r=void 0,n.clear(),n=ph)}var d={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:i,isSubscribed:l,trySubscribe:c,tryUnsubscribe:u,getListeners:function(){return n}};return d}var Kg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect;function Q1(t){var e=t.store,r=t.context,n=t.children,s=j.useMemo(function(){var l=Vg(e);return{store:e,subscription:l}},[e]),a=j.useMemo(function(){return e.getState()},[e]);Kg(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,a]);var i=r||qg;return se.createElement(i.Provider,{value:s},n)}function Hi(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Jg={exports:{}},ne={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ce=typeof Symbol=="function"&&Symbol.for,rd=Ce?Symbol.for("react.element"):60103,nd=Ce?Symbol.for("react.portal"):60106,jo=Ce?Symbol.for("react.fragment"):60107,So=Ce?Symbol.for("react.strict_mode"):60108,No=Ce?Symbol.for("react.profiler"):60114,ko=Ce?Symbol.for("react.provider"):60109,Co=Ce?Symbol.for("react.context"):60110,sd=Ce?Symbol.for("react.async_mode"):60111,Eo=Ce?Symbol.for("react.concurrent_mode"):60111,Do=Ce?Symbol.for("react.forward_ref"):60112,Io=Ce?Symbol.for("react.suspense"):60113,Y1=Ce?Symbol.for("react.suspense_list"):60120,Po=Ce?Symbol.for("react.memo"):60115,To=Ce?Symbol.for("react.lazy"):60116,X1=Ce?Symbol.for("react.block"):60121,Z1=Ce?Symbol.for("react.fundamental"):60117,e_=Ce?Symbol.for("react.responder"):60118,t_=Ce?Symbol.for("react.scope"):60119;function ft(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case rd:switch(t=t.type,t){case sd:case Eo:case jo:case No:case So:case Io:return t;default:switch(t=t&&t.$$typeof,t){case Co:case Do:case To:case Po:case ko:return t;default:return e}}case nd:return e}}}function Qg(t){return ft(t)===Eo}ne.AsyncMode=sd;ne.ConcurrentMode=Eo;ne.ContextConsumer=Co;ne.ContextProvider=ko;ne.Element=rd;ne.ForwardRef=Do;ne.Fragment=jo;ne.Lazy=To;ne.Memo=Po;ne.Portal=nd;ne.Profiler=No;ne.StrictMode=So;ne.Suspense=Io;ne.isAsyncMode=function(t){return Qg(t)||ft(t)===sd};ne.isConcurrentMode=Qg;ne.isContextConsumer=function(t){return ft(t)===Co};ne.isContextProvider=function(t){return ft(t)===ko};ne.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===rd};ne.isForwardRef=function(t){return ft(t)===Do};ne.isFragment=function(t){return ft(t)===jo};ne.isLazy=function(t){return ft(t)===To};ne.isMemo=function(t){return ft(t)===Po};ne.isPortal=function(t){return ft(t)===nd};ne.isProfiler=function(t){return ft(t)===No};ne.isStrictMode=function(t){return ft(t)===So};ne.isSuspense=function(t){return ft(t)===Io};ne.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===jo||t===Eo||t===No||t===So||t===Io||t===Y1||typeof t=="object"&&t!==null&&(t.$$typeof===To||t.$$typeof===Po||t.$$typeof===ko||t.$$typeof===Co||t.$$typeof===Do||t.$$typeof===Z1||t.$$typeof===e_||t.$$typeof===t_||t.$$typeof===X1)};ne.typeOf=ft;Jg.exports=ne;var r_=Jg.exports,ad=r_,n_={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s_={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a_={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Yg={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},id={};id[ad.ForwardRef]=a_;id[ad.Memo]=Yg;function mh(t){return ad.isMemo(t)?Yg:id[t.$$typeof]||n_}var i_=Object.defineProperty,o_=Object.getOwnPropertyNames,gh=Object.getOwnPropertySymbols,l_=Object.getOwnPropertyDescriptor,c_=Object.getPrototypeOf,vh=Object.prototype;function Xg(t,e,r){if(typeof e!="string"){if(vh){var n=c_(e);n&&n!==vh&&Xg(t,n,r)}var s=o_(e);gh&&(s=s.concat(gh(e)));for(var a=mh(t),i=mh(e),l=0;l<s.length;++l){var c=s[l];if(!s_[c]&&!(r&&r[c])&&!(i&&i[c])&&!(a&&a[c])){var u=l_(e,c);try{i_(t,c,u)}catch{}}}}return t}var u_=Xg;const yh=Kc(u_);var Zg={exports:{}},ae={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oo=60103,Ao=60106,wa=60107,_a=60108,ja=60114,Sa=60109,Na=60110,ka=60112,Ca=60113,od=60120,Ea=60115,Da=60116,ev=60121,tv=60122,rv=60117,nv=60129,sv=60131;if(typeof Symbol=="function"&&Symbol.for){var De=Symbol.for;Oo=De("react.element"),Ao=De("react.portal"),wa=De("react.fragment"),_a=De("react.strict_mode"),ja=De("react.profiler"),Sa=De("react.provider"),Na=De("react.context"),ka=De("react.forward_ref"),Ca=De("react.suspense"),od=De("react.suspense_list"),Ea=De("react.memo"),Da=De("react.lazy"),ev=De("react.block"),tv=De("react.server.block"),rv=De("react.fundamental"),nv=De("react.debug_trace_mode"),sv=De("react.legacy_hidden")}function Rt(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Oo:switch(t=t.type,t){case wa:case ja:case _a:case Ca:case od:return t;default:switch(t=t&&t.$$typeof,t){case Na:case ka:case Da:case Ea:case Sa:return t;default:return e}}case Ao:return e}}}var d_=Sa,f_=Oo,h_=ka,p_=wa,m_=Da,g_=Ea,v_=Ao,y_=ja,x_=_a,b_=Ca;ae.ContextConsumer=Na;ae.ContextProvider=d_;ae.Element=f_;ae.ForwardRef=h_;ae.Fragment=p_;ae.Lazy=m_;ae.Memo=g_;ae.Portal=v_;ae.Profiler=y_;ae.StrictMode=x_;ae.Suspense=b_;ae.isAsyncMode=function(){return!1};ae.isConcurrentMode=function(){return!1};ae.isContextConsumer=function(t){return Rt(t)===Na};ae.isContextProvider=function(t){return Rt(t)===Sa};ae.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oo};ae.isForwardRef=function(t){return Rt(t)===ka};ae.isFragment=function(t){return Rt(t)===wa};ae.isLazy=function(t){return Rt(t)===Da};ae.isMemo=function(t){return Rt(t)===Ea};ae.isPortal=function(t){return Rt(t)===Ao};ae.isProfiler=function(t){return Rt(t)===ja};ae.isStrictMode=function(t){return Rt(t)===_a};ae.isSuspense=function(t){return Rt(t)===Ca};ae.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wa||t===ja||t===nv||t===_a||t===Ca||t===od||t===sv||typeof t=="object"&&t!==null&&(t.$$typeof===Da||t.$$typeof===Ea||t.$$typeof===Sa||t.$$typeof===Na||t.$$typeof===ka||t.$$typeof===rv||t.$$typeof===ev||t[0]===tv)};ae.typeOf=Rt;Zg.exports=ae;var w_=Zg.exports,__=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],j_=["reactReduxForwardedRef"],S_=[],N_=[null,null];function k_(t,e){var r=t[1];return[e.payload,r+1]}function xh(t,e,r){Kg(function(){return t.apply(void 0,e)},r)}function C_(t,e,r,n,s,a,i){t.current=n,e.current=s,r.current=!1,a.current&&(a.current=null,i())}function E_(t,e,r,n,s,a,i,l,c,u){if(t){var d=!1,f=null,h=function(){if(!d){var x=e.getState(),w,y;try{w=n(x,s.current)}catch(m){y=m,f=m}y||(f=null),w===a.current?i.current||c():(a.current=w,l.current=w,i.current=!0,u({type:"STORE_UPDATED",payload:{error:y}}))}};r.onStateChange=h,r.trySubscribe(),h();var p=function(){if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return p}}var D_=function(){return[null,0]};function I_(t,e){e===void 0&&(e={});var r=e,n=r.getDisplayName,s=n===void 0?function(v){return"ConnectAdvanced("+v+")"}:n,a=r.methodName,i=a===void 0?"connectAdvanced":a,l=r.renderCountProp,c=l===void 0?void 0:l,u=r.shouldHandleStateChanges,d=u===void 0?!0:u,f=r.storeKey,h=f===void 0?"store":f;r.withRef;var p=r.forwardRef,g=p===void 0?!1:p,x=r.context,w=x===void 0?qg:x,y=Hi(r,__),m=w;return function(b){var S=b.displayName||b.name||"Component",N=s(S),D=G({},y,{getDisplayName:s,methodName:i,renderCountProp:c,shouldHandleStateChanges:d,storeKey:h,displayName:N,wrappedComponentName:S,WrappedComponent:b}),O=y.pure;function P(k){return t(k.dispatch,D)}var _=O?j.useMemo:function(k){return k()};function A(k){var C=j.useMemo(function(){var $=k.reactReduxForwardedRef,H=Hi(k,j_);return[k.context,$,H]},[k]),I=C[0],B=C[1],T=C[2],L=j.useMemo(function(){return I&&I.Consumer&&w_.isContextConsumer(se.createElement(I.Consumer,null))?I:m},[I,m]),U=j.useContext(L),V=!!k.store&&!!k.store.getState&&!!k.store.dispatch;U&&U.store;var Q=V?k.store:U.store,ge=j.useMemo(function(){return P(Q)},[Q]),te=j.useMemo(function(){if(!d)return N_;var $=Vg(Q,V?null:U.subscription),H=$.notifyNestedSubs.bind($);return[$,H]},[Q,V,U]),Ee=te[0],xe=te[1],St=j.useMemo(function(){return V?U:G({},U,{subscription:Ee})},[V,U,Ee]),cn=j.useReducer(k_,S_,D_),ss=cn[0],rr=ss[0],as=cn[1];if(rr&&rr.error)throw rr.error;var Ta=j.useRef(),is=j.useRef(T),Rr=j.useRef(),Oa=j.useRef(!1),Lr=_(function(){return Rr.current&&T===is.current?Rr.current:ge(Q.getState(),T)},[Q,rr,T]);xh(C_,[is,Ta,Oa,T,Lr,Rr,xe]),xh(E_,[d,Q,Ee,ge,is,Ta,Oa,Rr,xe,as],[Q,Ee,ge]);var os=j.useMemo(function(){return se.createElement(b,G({},Lr,{ref:B}))},[B,b,Lr]),zo=j.useMemo(function(){return d?se.createElement(L.Provider,{value:St},os):os},[L,os,St]);return zo}var E=O?se.memo(A):A;if(E.WrappedComponent=b,E.displayName=A.displayName=N,g){var R=se.forwardRef(function(C,I){return se.createElement(E,G({},C,{reactReduxForwardedRef:I}))});return R.displayName=N,R.WrappedComponent=b,yh(R,b)}return yh(E,b)}}function bh(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Sl(t,e){if(bh(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(e,r[s])||!bh(t[r[s]],e[r[s]]))return!1;return!0}function P_(t,e){var r={},n=function(i){var l=t[i];typeof l=="function"&&(r[i]=function(){return e(l.apply(void 0,arguments))})};for(var s in t)n(s);return r}function ld(t){return function(r,n){var s=t(r,n);function a(){return s}return a.dependsOnOwnProps=!1,a}}function wh(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function av(t,e){return function(n,s){s.displayName;var a=function(l,c){return a.dependsOnOwnProps?a.mapToProps(l,c):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,c){a.mapToProps=t,a.dependsOnOwnProps=wh(t);var u=a(l,c);return typeof u=="function"&&(a.mapToProps=u,a.dependsOnOwnProps=wh(u),u=a(l,c)),u},a}}function T_(t){return typeof t=="function"?av(t):void 0}function O_(t){return t?void 0:ld(function(e){return{dispatch:e}})}function A_(t){return t&&typeof t=="object"?ld(function(e){return P_(t,e)}):void 0}const R_=[T_,O_,A_];function L_(t){return typeof t=="function"?av(t):void 0}function $_(t){return t?void 0:ld(function(){return{}})}const M_=[L_,$_];function B_(t,e,r){return G({},r,t,e)}function U_(t){return function(r,n){n.displayName;var s=n.pure,a=n.areMergedPropsEqual,i=!1,l;return function(u,d,f){var h=t(u,d,f);return i?(!s||!a(h,l))&&(l=h):(i=!0,l=h),l}}}function F_(t){return typeof t=="function"?U_(t):void 0}function z_(t){return t?void 0:function(){return B_}}const W_=[F_,z_];var H_=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function q_(t,e,r,n){return function(a,i){return r(t(a,i),e(n,i),i)}}function G_(t,e,r,n,s){var a=s.areStatesEqual,i=s.areOwnPropsEqual,l=s.areStatePropsEqual,c=!1,u,d,f,h,p;function g(v,b){return u=v,d=b,f=t(u,d),h=e(n,d),p=r(f,h,d),c=!0,p}function x(){return f=t(u,d),e.dependsOnOwnProps&&(h=e(n,d)),p=r(f,h,d),p}function w(){return t.dependsOnOwnProps&&(f=t(u,d)),e.dependsOnOwnProps&&(h=e(n,d)),p=r(f,h,d),p}function y(){var v=t(u,d),b=!l(v,f);return f=v,b&&(p=r(f,h,d)),p}function m(v,b){var S=!i(b,d),N=!a(v,u,b,d);return u=v,d=b,S&&N?x():S?w():N?y():p}return function(b,S){return c?m(b,S):g(b,S)}}function V_(t,e){var r=e.initMapStateToProps,n=e.initMapDispatchToProps,s=e.initMergeProps,a=Hi(e,H_),i=r(t,a),l=n(t,a),c=s(t,a),u=a.pure?G_:q_;return u(i,l,c,t,a)}var K_=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Nl(t,e,r){for(var n=e.length-1;n>=0;n--){var s=e[n](t);if(s)return s}return function(a,i){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+i.wrappedComponentName+".")}}function J_(t,e){return t===e}function Q_(t){var e=t===void 0?{}:t,r=e.connectHOC,n=r===void 0?I_:r,s=e.mapStateToPropsFactories,a=s===void 0?M_:s,i=e.mapDispatchToPropsFactories,l=i===void 0?R_:i,c=e.mergePropsFactories,u=c===void 0?W_:c,d=e.selectorFactory,f=d===void 0?V_:d;return function(p,g,x,w){w===void 0&&(w={});var y=w,m=y.pure,v=m===void 0?!0:m,b=y.areStatesEqual,S=b===void 0?J_:b,N=y.areOwnPropsEqual,D=N===void 0?Sl:N,O=y.areStatePropsEqual,P=O===void 0?Sl:O,_=y.areMergedPropsEqual,A=_===void 0?Sl:_,E=Hi(y,K_),R=Nl(p,a,"mapStateToProps"),k=Nl(g,l,"mapDispatchToProps"),C=Nl(x,u,"mergeProps");return n(f,G({methodName:"connect",getDisplayName:function(B){return"Connect("+B+")"},shouldHandleStateChanges:!!p,initMapStateToProps:R,initMapDispatchToProps:k,initMergeProps:C,pure:v,areStatesEqual:S,areOwnPropsEqual:D,areStatePropsEqual:P,areMergedPropsEqual:A},E))}}const iv=Q_();V1(Wu.unstable_batchedUpdates);function Y_(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function ov(t,e){var r=j.useState(function(){return{inputs:e,result:t()}})[0],n=j.useRef(!0),s=j.useRef(r),a=n.current||!!(e&&s.current.inputs&&Y_(e,s.current.inputs)),i=a?s.current:{inputs:e,result:t()};return j.useEffect(function(){n.current=!1,s.current=i},[i]),i.result}function X_(t,e){return ov(function(){return t},e)}var Z=ov,q=X_,Z_="Invariant failed";function ej(t,e){throw new Error(Z_)}var Pt=function(e){var r=e.top,n=e.right,s=e.bottom,a=e.left,i=n-a,l=s-r,c={top:r,right:n,bottom:s,left:a,width:i,height:l,x:a,y:r,center:{x:(n+a)/2,y:(s+r)/2}};return c},cd=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},_h=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},tj=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},kl={top:0,right:0,bottom:0,left:0},ud=function(e){var r=e.borderBox,n=e.margin,s=n===void 0?kl:n,a=e.border,i=a===void 0?kl:a,l=e.padding,c=l===void 0?kl:l,u=Pt(cd(r,s)),d=Pt(_h(r,i)),f=Pt(_h(d,c));return{marginBox:u,borderBox:Pt(r),paddingBox:d,contentBox:f,margin:s,border:i,padding:c}},ht=function(e){var r=e.slice(0,-2),n=e.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&ej(),s},rj=function(){return{x:window.pageXOffset,y:window.pageYOffset}},qi=function(e,r){var n=e.borderBox,s=e.border,a=e.margin,i=e.padding,l=tj(n,r);return ud({borderBox:l,border:s,margin:a,padding:i})},Gi=function(e,r){return r===void 0&&(r=rj()),qi(e,r)},lv=function(e,r){var n={top:ht(r.marginTop),right:ht(r.marginRight),bottom:ht(r.marginBottom),left:ht(r.marginLeft)},s={top:ht(r.paddingTop),right:ht(r.paddingRight),bottom:ht(r.paddingBottom),left:ht(r.paddingLeft)},a={top:ht(r.borderTopWidth),right:ht(r.borderRightWidth),bottom:ht(r.borderBottomWidth),left:ht(r.borderLeftWidth)};return ud({borderBox:e,margin:n,padding:s,border:a})},cv=function(e){var r=e.getBoundingClientRect(),n=window.getComputedStyle(e);return lv(r,n)},jh=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function nj(t,e){return!!(t===e||jh(t)&&jh(e))}function sj(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!nj(t[r],e[r]))return!1;return!0}function Ne(t,e){e===void 0&&(e=sj);var r,n=[],s,a=!1;function i(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return a&&r===this&&e(l,n)||(s=t.apply(this,l),a=!0,r=this,n=l),s}return i}var la=function(e){var r=[],n=null,s=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};function uv(t,e){}uv.bind(null,"warn");uv.bind(null,"error");function _r(){}function aj(t,e){return G({},t,{},e)}function yt(t,e,r){var n=e.map(function(s){var a=aj(r,s.options);return t.addEventListener(s.eventName,s.fn,a),function(){t.removeEventListener(s.eventName,s.fn,a)}});return function(){n.forEach(function(a){a()})}}var ij="Invariant failed";function Vi(t){this.message=t}Vi.prototype.toString=function(){return this.message};function F(t,e){throw new Vi(ij)}var oj=function(t){zg(e,t);function e(){for(var n,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=t.call.apply(t,[this].concat(a))||this,n.callbacks=null,n.unbind=_r,n.onWindowError=function(l){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var u=l.error;u instanceof Vi&&l.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(l){n.callbacks=l},n}var r=e.prototype;return r.componentDidMount=function(){this.unbind=yt(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof Vi){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(se.Component),lj=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ki=function(e){return e+1},cj=function(e){return`
  You have lifted an item in position `+Ki(e.source.index)+`
`},dv=function(e,r){var n=e.droppableId===r.droppableId,s=Ki(e.index),a=Ki(r.index);return n?`
      You have moved the item from position `+s+`
      to position `+a+`
    `:`
    You have moved the item from position `+s+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},fv=function(e,r,n){var s=r.droppableId===n.droppableId;return s?`
      The item `+e+`
      has been combined with `+n.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},uj=function(e){var r=e.destination;if(r)return dv(e.source,r);var n=e.combine;return n?fv(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Sh=function(e){return`
  The item has returned to its starting position
  of `+Ki(e.index)+`
`},dj=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+Sh(e.source)+`
    `;var r=e.destination,n=e.combine;return r?`
      You have dropped the item.
      `+dv(e.source,r)+`
    `:n?`
      You have dropped the item.
      `+fv(e.draggableId,e.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Sh(e.source)+`
  `},gi={dragHandleUsageInstructions:lj,onDragStart:cj,onDragUpdate:uj,onDragEnd:dj},ke={x:0,y:0},Pe=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},at=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},jr=function(e,r){return e.x===r.x&&e.y===r.y},ts=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},rn=function(e,r,n){var s;return n===void 0&&(n=0),s={},s[e]=r,s[e==="x"?"y":"x"]=n,s},ca=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},Nh=function(e,r){return Math.min.apply(Math,r.map(function(n){return ca(e,n)}))},hv=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},fj=function(t,e){var r=Pt({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},Ia=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},kh=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},hj={top:0,right:0,bottom:0,left:0},pj=function(e,r){return r?Ia(e,r.scroll.diff.displacement):e},mj=function(e,r,n){if(n&&n.increasedBy){var s;return G({},e,(s={},s[r.end]=e[r.end]+n.increasedBy[r.line],s))}return e},gj=function(e,r){return r&&r.shouldClipSubject?fj(r.pageMarginBox,e):Pt(e)},Gn=function(t){var e=t.page,r=t.withPlaceholder,n=t.axis,s=t.frame,a=pj(e.marginBox,s),i=mj(a,n,r),l=gj(i,s);return{page:e,withPlaceholder:r,active:l}},dd=function(t,e){t.frame||F();var r=t.frame,n=at(e,r.scroll.initial),s=ts(n),a=G({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:n,displacement:s},max:r.scroll.max}}),i=Gn({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a}),l=G({},t,{frame:a,subject:i});return l};function Ji(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function fd(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function Ar(t,e){if(t.find)return t.find(e);var r=fd(t,e);if(r!==-1)return t[r]}function pv(t){return Array.prototype.slice.call(t)}var mv=Ne(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),gv=Ne(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),Ro=Ne(function(t){return Ji(t)}),vj=Ne(function(t){return Ji(t)}),rs=Ne(function(t,e){var r=vj(e).filter(function(n){return t===n.descriptor.droppableId}).sort(function(n,s){return n.descriptor.index-s.descriptor.index});return r});function hd(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function Lo(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var $o=Ne(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),yj=function(t){var e=t.isMovingForward,r=t.draggable,n=t.destination,s=t.insideDestination,a=t.previousImpact;if(!n.isCombineEnabled)return null;var i=hd(a);if(!i)return null;function l(x){var w={type:"COMBINE",combine:{draggableId:x,droppableId:n.descriptor.id}};return G({},a,{at:w})}var c=a.displaced.all,u=c.length?c[0]:null;if(e)return u?l(u):null;var d=$o(r,s);if(!u){if(!d.length)return null;var f=d[d.length-1];return l(f.descriptor.id)}var h=fd(d,function(x){return x.descriptor.id===u});h===-1&&F();var p=h-1;if(p<0)return null;var g=d[p];return l(g.descriptor.id)},ns=function(t,e){return t.descriptor.droppableId===e.descriptor.id},vv={point:ke,value:0},ua={invisible:{},visible:{},all:[]},xj={displaced:ua,displacedBy:vv,at:null},bt=function(t,e){return function(r){return t<=r&&r<=e}},yv=function(t){var e=bt(t.top,t.bottom),r=bt(t.left,t.right);return function(n){var s=e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right);if(s)return!0;var a=e(n.top)||e(n.bottom),i=r(n.left)||r(n.right),l=a&&i;if(l)return!0;var c=n.top<t.top&&n.bottom>t.bottom,u=n.left<t.left&&n.right>t.right,d=c&&u;if(d)return!0;var f=c&&i||u&&a;return f}},bj=function(t){var e=bt(t.top,t.bottom),r=bt(t.left,t.right);return function(n){var s=e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right);return s}},pd={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},xv={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},wj=function(t){return function(e){var r=bt(e.top,e.bottom),n=bt(e.left,e.right);return function(s){return t===pd?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)}}},_j=function(e,r){var n=r.frame?r.frame.scroll.diff.displacement:ke;return Ia(e,n)},jj=function(e,r,n){return r.subject.active?n(r.subject.active)(e):!1},Sj=function(e,r,n){return n(r)(e)},md=function(e){var r=e.target,n=e.destination,s=e.viewport,a=e.withDroppableDisplacement,i=e.isVisibleThroughFrameFn,l=a?_j(r,n):r;return jj(l,n,i)&&Sj(l,s,i)},Nj=function(e){return md(G({},e,{isVisibleThroughFrameFn:yv}))},bv=function(e){return md(G({},e,{isVisibleThroughFrameFn:bj}))},kj=function(e){return md(G({},e,{isVisibleThroughFrameFn:wj(e.destination.axis)}))},Cj=function(e,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var s=r.invisible,a=r.visible;if(s[e])return!1;var i=a[e];return i?i.shouldAnimate:!0};function Ej(t,e){var r=t.page.marginBox,n={top:e.point.y,right:0,bottom:0,left:e.point.x};return Pt(cd(r,n))}function da(t){var e=t.afterDragging,r=t.destination,n=t.displacedBy,s=t.viewport,a=t.forceShouldAnimate,i=t.last;return e.reduce(function(c,u){var d=Ej(u,n),f=u.descriptor.id;c.all.push(f);var h=Nj({target:d,destination:r,viewport:s,withDroppableDisplacement:!0});if(!h)return c.invisible[u.descriptor.id]=!0,c;var p=Cj(f,i,a),g={draggableId:f,shouldAnimate:p};return c.visible[f]=g,c},{all:[],visible:{},invisible:{}})}function Dj(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function Ch(t){var e=t.insideDestination,r=t.inHomeList,n=t.displacedBy,s=t.destination,a=Dj(e,{inHomeList:r});return{displaced:ua,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Qi(t){var e=t.draggable,r=t.insideDestination,n=t.destination,s=t.viewport,a=t.displacedBy,i=t.last,l=t.index,c=t.forceShouldAnimate,u=ns(e,n);if(l==null)return Ch({insideDestination:r,inHomeList:u,displacedBy:a,destination:n});var d=Ar(r,function(x){return x.descriptor.index===l});if(!d)return Ch({insideDestination:r,inHomeList:u,displacedBy:a,destination:n});var f=$o(e,r),h=r.indexOf(d),p=f.slice(h),g=da({afterDragging:p,destination:n,displacedBy:a,last:i,viewport:s.frame,forceShouldAnimate:c});return{displaced:g,displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function Dr(t,e){return!!e.effected[t]}var Ij=function(t){var e=t.isMovingForward,r=t.destination,n=t.draggables,s=t.combine,a=t.afterCritical;if(!r.isCombineEnabled)return null;var i=s.draggableId,l=n[i],c=l.descriptor.index,u=Dr(i,a);return u?e?c:c-1:e?c+1:c},Pj=function(t){var e=t.isMovingForward,r=t.isInHomeList,n=t.insideDestination,s=t.location;if(!n.length)return null;var a=s.index,i=e?a+1:a-1,l=n[0].descriptor.index,c=n[n.length-1].descriptor.index,u=r?c:c+1;return i<l||i>u?null:i},Tj=function(t){var e=t.isMovingForward,r=t.isInHomeList,n=t.draggable,s=t.draggables,a=t.destination,i=t.insideDestination,l=t.previousImpact,c=t.viewport,u=t.afterCritical,d=l.at;if(d||F(),d.type==="REORDER"){var f=Pj({isMovingForward:e,isInHomeList:r,location:d.destination,insideDestination:i});return f==null?null:Qi({draggable:n,insideDestination:i,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:f})}var h=Ij({isMovingForward:e,destination:a,displaced:l.displaced,draggables:s,combine:d.combine,afterCritical:u});return h==null?null:Qi({draggable:n,insideDestination:i,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})},Oj=function(t){var e=t.displaced,r=t.afterCritical,n=t.combineWith,s=t.displacedBy,a=!!(e.visible[n]||e.invisible[n]);return Dr(n,r)?a?ke:ts(s.point):a?s.point:ke},Aj=function(t){var e=t.afterCritical,r=t.impact,n=t.draggables,s=Lo(r);s||F();var a=s.draggableId,i=n[a].page.borderBox.center,l=Oj({displaced:r.displaced,afterCritical:e,combineWith:a,displacedBy:r.displacedBy});return Pe(i,l)},wv=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},Rj=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},gd=function(e,r,n){return r[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},Eh=function(e){var r=e.axis,n=e.moveRelativeTo,s=e.isMoving;return rn(r.line,n.marginBox[r.end]+wv(r,s),gd(r,n.marginBox,s))},Dh=function(e){var r=e.axis,n=e.moveRelativeTo,s=e.isMoving;return rn(r.line,n.marginBox[r.start]-Rj(r,s),gd(r,n.marginBox,s))},Lj=function(e){var r=e.axis,n=e.moveInto,s=e.isMoving;return rn(r.line,n.contentBox[r.start]+wv(r,s),gd(r,n.contentBox,s))},$j=function(t){var e=t.impact,r=t.draggable,n=t.draggables,s=t.droppable,a=t.afterCritical,i=rs(s.descriptor.id,n),l=r.page,c=s.axis;if(!i.length)return Lj({axis:c,moveInto:s.page,isMoving:l});var u=e.displaced,d=e.displacedBy,f=u.all[0];if(f){var h=n[f];if(Dr(f,a))return Dh({axis:c,moveRelativeTo:h.page,isMoving:l});var p=qi(h.page,d.point);return Dh({axis:c,moveRelativeTo:p,isMoving:l})}var g=i[i.length-1];if(g.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Dr(g.descriptor.id,a)){var x=qi(g.page,ts(a.displacedBy.point));return Eh({axis:c,moveRelativeTo:x,isMoving:l})}return Eh({axis:c,moveRelativeTo:g.page,isMoving:l})},zc=function(t,e){var r=t.frame;return r?Pe(e,r.scroll.diff.displacement):e},Mj=function(e){var r=e.impact,n=e.draggable,s=e.droppable,a=e.draggables,i=e.afterCritical,l=n.page.borderBox.center,c=r.at;return!s||!c?l:c.type==="REORDER"?$j({impact:r,draggable:n,draggables:a,droppable:s,afterCritical:i}):Aj({impact:r,draggables:a,afterCritical:i})},Mo=function(t){var e=Mj(t),r=t.droppable,n=r?zc(r,e):e;return n},_v=function(t,e){var r=at(e,t.scroll.initial),n=ts(r),s=Pt({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),a={frame:s,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:n}}};return a};function Ih(t,e){return t.map(function(r){return e[r]})}function Bj(t,e){for(var r=0;r<e.length;r++){var n=e[r].visible[t];if(n)return n}return null}var Uj=function(t){var e=t.impact,r=t.viewport,n=t.destination,s=t.draggables,a=t.maxScrollChange,i=_v(r,Pe(r.scroll.current,a)),l=n.frame?dd(n,Pe(n.frame.scroll.current,a)):n,c=e.displaced,u=da({afterDragging:Ih(c.all,s),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:c,forceShouldAnimate:!1}),d=da({afterDragging:Ih(c.all,s),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),f={},h={},p=[c,u,d];c.all.forEach(function(x){var w=Bj(x,p);if(w){h[x]=w;return}f[x]=!0});var g=G({},e,{displaced:{all:c.all,invisible:f,visible:h}});return g},Fj=function(t,e){return Pe(t.scroll.diff.displacement,e)},vd=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,n=t.viewport,s=Fj(n,e),a=at(s,r.page.borderBox.center);return Pe(r.client.borderBox.center,a)},jv=function(t){var e=t.draggable,r=t.destination,n=t.newPageBorderBoxCenter,s=t.viewport,a=t.withDroppableDisplacement,i=t.onlyOnMainAxis,l=i===void 0?!1:i,c=at(n,e.page.borderBox.center),u=Ia(e.page.borderBox,c),d={target:u,destination:r,withDroppableDisplacement:a,viewport:s};return l?kj(d):bv(d)},zj=function(t){var e=t.isMovingForward,r=t.draggable,n=t.destination,s=t.draggables,a=t.previousImpact,i=t.viewport,l=t.previousPageBorderBoxCenter,c=t.previousClientSelection,u=t.afterCritical;if(!n.isEnabled)return null;var d=rs(n.descriptor.id,s),f=ns(r,n),h=yj({isMovingForward:e,draggable:r,destination:n,insideDestination:d,previousImpact:a})||Tj({isMovingForward:e,isInHomeList:f,draggable:r,draggables:s,destination:n,insideDestination:d,previousImpact:a,viewport:i,afterCritical:u});if(!h)return null;var p=Mo({impact:h,draggable:r,droppable:n,draggables:s,afterCritical:u}),g=jv({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(g){var x=vd({pageBorderBoxCenter:p,draggable:r,viewport:i});return{clientSelection:x,impact:h,scrollJumpRequest:null}}var w=at(p,l),y=Uj({impact:h,viewport:i,destination:n,draggables:s,maxScrollChange:w});return{clientSelection:c,impact:y,scrollJumpRequest:w}},ze=function(e){var r=e.subject.active;return r||F(),r},Wj=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,n=t.source,s=t.droppables,a=t.viewport,i=n.subject.active;if(!i)return null;var l=n.axis,c=bt(i[l.start],i[l.end]),u=Ro(s).filter(function(f){return f!==n}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return yv(a.frame)(ze(f))}).filter(function(f){var h=ze(f);return e?i[l.crossAxisEnd]<h[l.crossAxisEnd]:h[l.crossAxisStart]<i[l.crossAxisStart]}).filter(function(f){var h=ze(f),p=bt(h[l.start],h[l.end]);return c(h[l.start])||c(h[l.end])||p(i[l.start])||p(i[l.end])}).sort(function(f,h){var p=ze(f)[l.crossAxisStart],g=ze(h)[l.crossAxisStart];return e?p-g:g-p}).filter(function(f,h,p){return ze(f)[l.crossAxisStart]===ze(p[0])[l.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var d=u.filter(function(f){var h=bt(ze(f)[l.start],ze(f)[l.end]);return h(r[l.line])});return d.length===1?d[0]:d.length>1?d.sort(function(f,h){return ze(f)[l.start]-ze(h)[l.start]})[0]:u.sort(function(f,h){var p=Nh(r,kh(ze(f))),g=Nh(r,kh(ze(h)));return p!==g?p-g:ze(f)[l.start]-ze(h)[l.start]})[0]},Ph=function(e,r){var n=e.page.borderBox.center;return Dr(e.descriptor.id,r)?at(n,r.displacedBy.point):n},Hj=function(e,r){var n=e.page.borderBox;return Dr(e.descriptor.id,r)?Ia(n,ts(r.displacedBy.point)):n},qj=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,n=t.destination,s=t.insideDestination,a=t.afterCritical,i=s.filter(function(l){return bv({target:Hj(l,a),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var u=ca(e,zc(n,Ph(l,a))),d=ca(e,zc(n,Ph(c,a)));return u<d?-1:d<u?1:l.descriptor.index-c.descriptor.index});return i[0]||null},Pa=Ne(function(e,r){var n=r[e.line];return{value:n,point:rn(e.line,n)}}),Gj=function(e,r,n){var s=e.axis;if(e.descriptor.mode==="virtual")return rn(s.line,r[s.line]);var a=e.subject.page.contentBox[s.size],i=rs(e.descriptor.id,n),l=i.reduce(function(d,f){return d+f.client.marginBox[s.size]},0),c=l+r[s.line],u=c-a;return u<=0?null:rn(s.line,u)},Sv=function(e,r){return G({},e,{scroll:G({},e.scroll,{max:r})})},Nv=function(e,r,n){var s=e.frame;ns(r,e)&&F(),e.subject.withPlaceholder&&F();var a=Pa(e.axis,r.displaceBy).point,i=Gj(e,a,n),l={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){var c=Gn({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return G({},e,{subject:c})}var u=i?Pe(s.scroll.max,i):s.scroll.max,d=Sv(s,u),f=Gn({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:d});return G({},e,{subject:f,frame:d})},Vj=function(e){var r=e.subject.withPlaceholder;r||F();var n=e.frame;if(!n){var s=Gn({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return G({},e,{subject:s})}var a=r.oldFrameMaxScroll;a||F();var i=Sv(n,a),l=Gn({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return G({},e,{subject:l,frame:i})},Kj=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,n=t.insideDestination,s=t.draggable,a=t.draggables,i=t.destination,l=t.viewport,c=t.afterCritical;if(!r){if(n.length)return null;var u={displaced:ua,displacedBy:vv,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},d=Mo({impact:u,draggable:s,droppable:i,draggables:a,afterCritical:c}),f=ns(s,i)?i:Nv(i,s,a),h=jv({draggable:s,destination:f,newPageBorderBoxCenter:d,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?u:null}var p=e[i.axis.line]<=r.page.borderBox.center[i.axis.line],g=function(){var w=r.descriptor.index;return r.descriptor.id===s.descriptor.id||p?w:w+1}(),x=Pa(i.axis,s.displaceBy);return Qi({draggable:s,insideDestination:n,destination:i,viewport:l,displacedBy:x,last:ua,index:g})},Jj=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,n=t.draggable,s=t.isOver,a=t.draggables,i=t.droppables,l=t.viewport,c=t.afterCritical,u=Wj({isMovingForward:e,pageBorderBoxCenter:r,source:s,droppables:i,viewport:l});if(!u)return null;var d=rs(u.descriptor.id,a),f=qj({pageBorderBoxCenter:r,viewport:l,destination:u,insideDestination:d,afterCritical:c}),h=Kj({previousPageBorderBoxCenter:r,destination:u,draggable:n,draggables:a,moveRelativeTo:f,insideDestination:d,viewport:l,afterCritical:c});if(!h)return null;var p=Mo({impact:h,draggable:n,droppable:u,draggables:a,afterCritical:c}),g=vd({pageBorderBoxCenter:p,draggable:n,viewport:l});return{clientSelection:g,impact:h,scrollJumpRequest:null}},ot=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},Qj=function(e,r){var n=ot(e);return n?r[n]:null},Yj=function(t){var e=t.state,r=t.type,n=Qj(e.impact,e.dimensions.droppables),s=!!n,a=e.dimensions.droppables[e.critical.droppable.id],i=n||a,l=i.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!s)return null;var u=r==="MOVE_DOWN"||r==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,h=e.dimensions,p=h.draggables,g=h.droppables;return c?zj({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,destination:i,draggables:p,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Jj({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,isOver:i,draggables:p,droppables:g,viewport:e.viewport,afterCritical:e.afterCritical})};function Wr(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function kv(t){var e=bt(t.top,t.bottom),r=bt(t.left,t.right);return function(s){return e(s.y)&&r(s.x)}}function Xj(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function Zj(t){var e=t.pageBorderBox,r=t.draggable,n=t.candidates,s=r.page.borderBox.center,a=n.map(function(i){var l=i.axis,c=rn(i.axis.line,e.center[l.line],i.page.borderBox.center[l.crossAxisLine]);return{id:i.descriptor.id,distance:ca(s,c)}}).sort(function(i,l){return l.distance-i.distance});return a[0]?a[0].id:null}function eS(t){var e=t.pageBorderBox,r=t.draggable,n=t.droppables,s=Ro(n).filter(function(a){if(!a.isEnabled)return!1;var i=a.subject.active;if(!i||!Xj(e,i))return!1;if(kv(i)(e.center))return!0;var l=a.axis,c=i.center[l.crossAxisLine],u=e[l.crossAxisStart],d=e[l.crossAxisEnd],f=bt(i[l.crossAxisStart],i[l.crossAxisEnd]),h=f(u),p=f(d);return!h&&!p?!0:h?u<c:d>c});return s.length?s.length===1?s[0].descriptor.id:Zj({pageBorderBox:e,draggable:r,candidates:s}):null}var Cv=function(e,r){return Pt(Ia(e,r))},tS=function(t,e){var r=t.frame;return r?Cv(e,r.scroll.diff.value):e};function Ev(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function rS(t){var e=t.draggable,r=t.closest,n=t.inHomeList;return r?n&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var nS=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,n=t.destination,s=t.insideDestination,a=t.last,i=t.viewport,l=t.afterCritical,c=n.axis,u=Pa(n.axis,r.displaceBy),d=u.value,f=e[c.start],h=e[c.end],p=$o(r,s),g=Ar(p,function(w){var y=w.descriptor.id,m=w.page.borderBox.center[c.line],v=Dr(y,l),b=Ev({displaced:a,id:y});return v?b?h<=m:f<m-d:b?h<=m+d:f<m}),x=rS({draggable:r,closest:g,inHomeList:ns(r,n)});return Qi({draggable:r,insideDestination:s,destination:n,viewport:i,last:a,displacedBy:u,index:x})},sS=4,aS=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,n=t.previousImpact,s=t.destination,a=t.insideDestination,i=t.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,c=Pa(s.axis,e.displaceBy),u=c.value,d=r[l.start],f=r[l.end],h=$o(e,a),p=Ar(h,function(x){var w=x.descriptor.id,y=x.page.borderBox,m=y[l.size],v=m/sS,b=Dr(w,i),S=Ev({displaced:n.displaced,id:w});return b?S?f>y[l.start]+v&&f<y[l.end]-v:d>y[l.start]-u+v&&d<y[l.end]-u-v:S?f>y[l.start]+u+v&&f<y[l.end]+u-v:d>y[l.start]+v&&d<y[l.end]-v});if(!p)return null;var g={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:s.descriptor.id}}};return g},Dv=function(t){var e=t.pageOffset,r=t.draggable,n=t.draggables,s=t.droppables,a=t.previousImpact,i=t.viewport,l=t.afterCritical,c=Cv(r.page.borderBox,e),u=eS({pageBorderBox:c,draggable:r,droppables:s});if(!u)return xj;var d=s[u],f=rs(d.descriptor.id,n),h=tS(d,c);return aS({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:a,destination:d,insideDestination:f,afterCritical:l})||nS({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:d,insideDestination:f,last:a.displaced,viewport:i,afterCritical:l})},yd=function(t,e){var r;return G({},t,(r={},r[e.descriptor.id]=e,r))},iS=function(e){var r=e.previousImpact,n=e.impact,s=e.droppables,a=ot(r),i=ot(n);if(!a||a===i)return s;var l=s[a];if(!l.subject.withPlaceholder)return s;var c=Vj(l);return yd(s,c)},oS=function(t){var e=t.draggable,r=t.draggables,n=t.droppables,s=t.previousImpact,a=t.impact,i=iS({previousImpact:s,impact:a,droppables:n}),l=ot(a);if(!l)return i;var c=n[l];if(ns(e,c)||c.subject.withPlaceholder)return i;var u=Nv(c,e,r);return yd(i,u)},Us=function(t){var e=t.state,r=t.clientSelection,n=t.dimensions,s=t.viewport,a=t.impact,i=t.scrollJumpRequest,l=s||e.viewport,c=n||e.dimensions,u=r||e.current.client.selection,d=at(u,e.initial.client.selection),f={offset:d,selection:u,borderBoxCenter:Pe(e.initial.client.borderBoxCenter,d)},h={selection:Pe(f.selection,l.scroll.current),borderBoxCenter:Pe(f.borderBoxCenter,l.scroll.current),offset:Pe(f.offset,l.scroll.diff.value)},p={client:f,page:h};if(e.phase==="COLLECTING")return G({phase:"COLLECTING"},e,{dimensions:c,viewport:l,current:p});var g=c.draggables[e.critical.draggable.id],x=a||Dv({pageOffset:h.offset,draggable:g,draggables:c.draggables,droppables:c.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),w=oS({draggable:g,impact:x,previousImpact:e.impact,draggables:c.draggables,droppables:c.droppables}),y=G({},e,{current:p,dimensions:{draggables:c.draggables,droppables:w},impact:x,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null});return y};function lS(t,e){return t.map(function(r){return e[r]})}var Iv=function(t){var e=t.impact,r=t.viewport,n=t.draggables,s=t.destination,a=t.forceShouldAnimate,i=e.displaced,l=lS(i.all,n),c=da({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:i});return G({},e,{displaced:c})},Pv=function(t){var e=t.impact,r=t.draggable,n=t.droppable,s=t.draggables,a=t.viewport,i=t.afterCritical,l=Mo({impact:e,draggable:r,draggables:s,droppable:n,afterCritical:i});return vd({pageBorderBoxCenter:l,draggable:r,viewport:a})},Tv=function(t){var e=t.state,r=t.dimensions,n=t.viewport;e.movementMode!=="SNAP"&&F();var s=e.impact,a=n||e.viewport,i=r||e.dimensions,l=i.draggables,c=i.droppables,u=l[e.critical.draggable.id],d=ot(s);d||F();var f=c[d],h=Iv({impact:s,viewport:a,destination:f,draggables:l}),p=Pv({impact:h,draggable:u,droppable:f,draggables:l,viewport:a,afterCritical:e.afterCritical});return Us({impact:h,clientSelection:p,state:e,dimensions:i,viewport:a})},cS=function(t){return{index:t.index,droppableId:t.droppableId}},Ov=function(t){var e=t.draggable,r=t.home,n=t.draggables,s=t.viewport,a=Pa(r.axis,e.displaceBy),i=rs(r.descriptor.id,n),l=i.indexOf(e);l===-1&&F();var c=i.slice(l+1),u=c.reduce(function(p,g){return p[g.descriptor.id]=!0,p},{}),d={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:u},f=da({afterDragging:c,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),h={displaced:f,displacedBy:a,at:{type:"REORDER",destination:cS(e.descriptor)}};return{impact:h,afterCritical:d}},uS=function(t,e){return{draggables:t.draggables,droppables:yd(t.droppables,e)}},dS=function(t){var e=t.draggable,r=t.offset,n=t.initialWindowScroll,s=qi(e.client,r),a=Gi(s,n),i=G({},e,{placeholder:G({},e.placeholder,{client:s}),client:s,page:a});return i},fS=function(t){var e=t.frame;return e||F(),e},hS=function(t){var e=t.additions,r=t.updatedDroppables,n=t.viewport,s=n.scroll.diff.value;return e.map(function(a){var i=a.descriptor.droppableId,l=r[i],c=fS(l),u=c.scroll.diff.value,d=Pe(s,u),f=dS({draggable:a,offset:d,initialWindowScroll:n.scroll.initial});return f})},pS=function(t){var e=t.state,r=t.published,n=r.modified.map(function(v){var b=e.dimensions.droppables[v.droppableId],S=dd(b,v.scroll);return S}),s=G({},e.dimensions.droppables,{},mv(n)),a=gv(hS({additions:r.additions,updatedDroppables:s,viewport:e.viewport})),i=G({},e.dimensions.draggables,{},a);r.removals.forEach(function(v){delete i[v]});var l={droppables:s,draggables:i},c=ot(e.impact),u=c?l.droppables[c]:null,d=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],h=Ov({draggable:d,home:f,draggables:i,viewport:e.viewport}),p=h.impact,g=h.afterCritical,x=u&&u.isCombineEnabled?e.impact:p,w=Dv({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:x,viewport:e.viewport,afterCritical:g}),y=G({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:w,onLiftImpact:p,dimensions:l,afterCritical:g,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return y;var m=G({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return m},Wc=function(e){return e.movementMode==="SNAP"},Cl=function(e,r,n){var s=uS(e.dimensions,r);return!Wc(e)||n?Us({state:e,dimensions:s}):Tv({state:e,dimensions:s})};function El(t){return t.isDragging&&t.movementMode==="SNAP"?G({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var Th={phase:"IDLE",completed:null,shouldFlush:!1},mS=function(t,e){if(t===void 0&&(t=Th),e.type==="FLUSH")return G({},Th,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&F();var r=e.payload,n=r.critical,s=r.clientSelection,a=r.viewport,i=r.dimensions,l=r.movementMode,c=i.draggables[n.draggable.id],u=i.droppables[n.droppable.id],d={selection:s,borderBoxCenter:c.client.borderBox.center,offset:ke},f={client:d,page:{selection:Pe(d.selection,a.scroll.initial),borderBoxCenter:Pe(d.selection,a.scroll.initial),offset:Pe(d.selection,a.scroll.diff.value)}},h=Ro(i.droppables).every(function(as){return!as.isFixedOnPage}),p=Ov({draggable:c,home:u,draggables:i.draggables,viewport:a}),g=p.impact,x=p.afterCritical,w={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:i,initial:f,current:f,isWindowScrollAllowed:h,impact:g,afterCritical:x,onLiftImpact:g,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return w}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&F();var y=G({phase:"COLLECTING"},t,{phase:"COLLECTING"});return y}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||F(),pS({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Wr(t)||F();var m=e.payload.client;return jr(m,t.current.client.selection)?t:Us({state:t,clientSelection:m,impact:Wc(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return El(t);Wr(t)||F();var v=e.payload,b=v.id,S=v.newScroll,N=t.dimensions.droppables[b];if(!N)return t;var D=dd(N,S);return Cl(t,D,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Wr(t)||F();var O=e.payload,P=O.id,_=O.isEnabled,A=t.dimensions.droppables[P];A||F(),A.isEnabled===_&&F();var E=G({},A,{isEnabled:_});return Cl(t,E,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Wr(t)||F();var R=e.payload,k=R.id,C=R.isCombineEnabled,I=t.dimensions.droppables[k];I||F(),I.isCombineEnabled===C&&F();var B=G({},I,{isCombineEnabled:C});return Cl(t,B,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Wr(t)||F(),t.isWindowScrollAllowed||F();var T=e.payload.newScroll;if(jr(t.viewport.scroll.current,T))return El(t);var L=_v(t.viewport,T);return Wc(t)?Tv({state:t,viewport:L}):Us({state:t,viewport:L})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Wr(t))return t;var U=e.payload.maxScroll;if(jr(U,t.viewport.scroll.max))return t;var V=G({},t.viewport,{scroll:G({},t.viewport.scroll,{max:U})});return G({phase:"DRAGGING"},t,{viewport:V})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&F();var Q=Yj({state:t,type:e.type});return Q?Us({state:t,impact:Q.impact,clientSelection:Q.clientSelection,scrollJumpRequest:Q.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var ge=e.payload.reason;t.phase!=="COLLECTING"&&F();var te=G({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:ge});return te}if(e.type==="DROP_ANIMATE"){var Ee=e.payload,xe=Ee.completed,St=Ee.dropDuration,cn=Ee.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||F();var ss={phase:"DROP_ANIMATING",completed:xe,dropDuration:St,newHomeClientOffset:cn,dimensions:t.dimensions};return ss}if(e.type==="DROP_COMPLETE"){var rr=e.payload.completed;return{phase:"IDLE",completed:rr,shouldFlush:!1}}return t},gS=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},vS=function(e){return{type:"LIFT",payload:e}},yS=function(e){return{type:"INITIAL_PUBLISH",payload:e}},xS=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},bS=function(){return{type:"COLLECTION_STARTING",payload:null}},wS=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},_S=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},jS=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},Av=function(e){return{type:"MOVE",payload:e}},SS=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},NS=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},kS=function(){return{type:"MOVE_UP",payload:null}},CS=function(){return{type:"MOVE_DOWN",payload:null}},ES=function(){return{type:"MOVE_RIGHT",payload:null}},DS=function(){return{type:"MOVE_LEFT",payload:null}},xd=function(){return{type:"FLUSH",payload:null}},IS=function(e){return{type:"DROP_ANIMATE",payload:e}},bd=function(e){return{type:"DROP_COMPLETE",payload:e}},Rv=function(e){return{type:"DROP",payload:e}},PS=function(e){return{type:"DROP_PENDING",payload:e}},Lv=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},TS=function(t){return function(e){var r=e.getState,n=e.dispatch;return function(s){return function(a){if(a.type!=="LIFT"){s(a);return}var i=a.payload,l=i.id,c=i.clientSelection,u=i.movementMode,d=r();d.phase==="DROP_ANIMATING"&&n(bd({completed:d.completed})),r().phase!=="IDLE"&&F(),n(xd()),n(gS({draggableId:l,movementMode:u}));var f={shouldPublishImmediately:u==="SNAP"},h={draggableId:l,scrollOptions:f},p=t.startPublishing(h),g=p.critical,x=p.dimensions,w=p.viewport;n(yS({critical:g,dimensions:x,clientSelection:c,movementMode:u,viewport:w}))}}}},OS=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},wd={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},fa={opacity:{drop:0,combining:.7},scale:{drop:.75}},_d={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Br=_d.outOfTheWay+"s "+wd.outOfTheWay,Fs={fluid:"opacity "+Br,snap:"transform "+Br+", opacity "+Br,drop:function(e){var r=e+"s "+wd.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Br,placeholder:"height "+Br+", width "+Br+", margin "+Br},Oh=function(e){return jr(e,ke)?null:"translate("+e.x+"px, "+e.y+"px)"},Hc={moveTo:Oh,drop:function(e,r){var n=Oh(e);return n?r?n+" scale("+fa.scale.drop+")":n:null}},qc=_d.minDropTime,$v=_d.maxDropTime,AS=$v-qc,Ah=1500,RS=.6,LS=function(t){var e=t.current,r=t.destination,n=t.reason,s=ca(e,r);if(s<=0)return qc;if(s>=Ah)return $v;var a=s/Ah,i=qc+AS*a,l=n==="CANCEL"?i*RS:i;return Number(l.toFixed(2))},$S=function(t){var e=t.impact,r=t.draggable,n=t.dimensions,s=t.viewport,a=t.afterCritical,i=n.draggables,l=n.droppables,c=ot(e),u=c?l[c]:null,d=l[r.descriptor.droppableId],f=Pv({impact:e,draggable:r,draggables:i,afterCritical:a,droppable:u||d,viewport:s}),h=at(f,r.client.borderBox.center);return h},MS=function(t){var e=t.draggables,r=t.reason,n=t.lastImpact,s=t.home,a=t.viewport,i=t.onLiftImpact;if(!n.at||r!=="DROP"){var l=Iv({draggables:e,impact:i,destination:s,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=G({},n,{displaced:ua});return{impact:c,didDropInsideDroppable:!0}},BS=function(t){var e=t.getState,r=t.dispatch;return function(n){return function(s){if(s.type!=="DROP"){n(s);return}var a=e(),i=s.payload.reason;if(a.phase==="COLLECTING"){r(PS({reason:i}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&F(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||F();var c=a.critical,u=a.dimensions,d=u.draggables[a.critical.draggable.id],f=MS({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),h=f.impact,p=f.didDropInsideDroppable,g=p?hd(h):null,x=p?Lo(h):null,w={index:c.draggable.index,droppableId:c.droppable.id},y={draggableId:d.descriptor.id,type:d.descriptor.type,source:w,reason:i,mode:a.movementMode,destination:g,combine:x},m=$S({impact:h,draggable:d,dimensions:u,viewport:a.viewport,afterCritical:a.afterCritical}),v={critical:a.critical,afterCritical:a.afterCritical,result:y,impact:h},b=!jr(a.current.client.offset,m)||!!y.combine;if(!b){r(bd({completed:v}));return}var S=LS({current:a.current.client.offset,destination:m,reason:i}),N={newHomeClientOffset:m,dropDuration:S,completed:v};r(IS(N))}}}},Mv=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function US(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function FS(t){var e=t.onWindowScroll;function r(){e(Mv())}var n=la(r),s=US(n),a=_r;function i(){return a!==_r}function l(){i()&&F(),a=yt(window,[s])}function c(){i()||F(),n.cancel(),a(),a=_r}return{start:l,stop:c,isActive:i}}var zS=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},WS=function(t){var e=FS({onWindowScroll:function(n){t.dispatch(SS({newScroll:n}))}});return function(r){return function(n){!e.isActive()&&n.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&zS(n)&&e.stop(),r(n)}}},HS=function(t){var e=!1,r=!1,n=setTimeout(function(){r=!0}),s=function(i){e||r||(e=!0,t(i),clearTimeout(n))};return s.wasCalled=function(){return e},s},qS=function(){var t=[],e=function(a){var i=fd(t,function(u){return u.timerId===a});i===-1&&F();var l=t.splice(i,1),c=l[0];c.callback()},r=function(a){var i=setTimeout(function(){return e(i)}),l={timerId:i,callback:a};t.push(l)},n=function(){if(t.length){var a=[].concat(t);t.length=0,a.forEach(function(i){clearTimeout(i.timerId),i.callback()})}};return{add:r,flush:n}},GS=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},VS=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},KS=function(e,r){if(e===r)return!0;var n=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,s=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return n&&s},xs=function(e,r){r()},ei=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},Dl=function(e,r,n,s){if(!e){n(s(r));return}var a=HS(n),i={announce:a};e(r,i),a.wasCalled()||n(s(r))},JS=function(t,e){var r=qS(),n=null,s=function(h,p){n&&F(),xs("onBeforeCapture",function(){var g=t().onBeforeCapture;if(g){var x={draggableId:h,mode:p};g(x)}})},a=function(h,p){n&&F(),xs("onBeforeDragStart",function(){var g=t().onBeforeDragStart;g&&g(ei(h,p))})},i=function(h,p){n&&F();var g=ei(h,p);n={mode:p,lastCritical:h,lastLocation:g.source,lastCombine:null},r.add(function(){xs("onDragStart",function(){return Dl(t().onDragStart,g,e,gi.onDragStart)})})},l=function(h,p){var g=hd(p),x=Lo(p);n||F();var w=!KS(h,n.lastCritical);w&&(n.lastCritical=h);var y=!GS(n.lastLocation,g);y&&(n.lastLocation=g);var m=!VS(n.lastCombine,x);if(m&&(n.lastCombine=x),!(!w&&!y&&!m)){var v=G({},ei(h,n.mode),{combine:x,destination:g});r.add(function(){xs("onDragUpdate",function(){return Dl(t().onDragUpdate,v,e,gi.onDragUpdate)})})}},c=function(){n||F(),r.flush()},u=function(h){n||F(),n=null,xs("onDragEnd",function(){return Dl(t().onDragEnd,h,e,gi.onDragEnd)})},d=function(){if(n){var h=G({},ei(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});u(h)}};return{beforeCapture:s,beforeStart:a,start:i,update:l,flush:c,drop:u,abort:d}},QS=function(t,e){var r=JS(t,e);return function(n){return function(s){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var i=a.payload.critical;r.beforeStart(i,a.payload.movementMode),s(a),r.start(i,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),a.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},YS=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var n=t.getState();n.phase!=="DROP_ANIMATING"&&F(),t.dispatch(bd({completed:n.completed}))}}},XS=function(t){var e=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(s){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&n(),s(a),a.type==="DROP_ANIMATE"){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=t.getState();c.phase==="DROP_ANIMATING"&&t.dispatch(Lv())}};r=requestAnimationFrame(function(){r=null,e=yt(window,[i])})}}}},ZS=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},eN=function(t){var e=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(n.payload.critical.draggable.id),r(n),t.tryRestoreFocusRecorded();return}if(r(n),!!e){if(n.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){e=!1;var s=n.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},tN=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},rN=function(t){return function(e){return function(r){return function(n){if(tN(n)){t.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var s=e.getState();s.phase!=="DRAGGING"&&F(),t.start(s);return}r(n),t.scroll(e.getState())}}}},nN=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=t.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||t.dispatch(Rv({reason:n.reason})))}}}},sN=Hg,aN=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,n=t.styleMarshal,s=t.getResponders,a=t.announce,i=t.autoScroller;return Wg(mS,sN(q1(OS(n),ZS(e),TS(e),BS,YS,XS,nN,rN(i),WS,eN(r),QS(s,a))))},Il=function(){return{additions:{},removals:{},modified:{}}};function iN(t){var e=t.registry,r=t.callbacks,n=Il(),s=null,a=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var d=n,f=d.additions,h=d.removals,p=d.modified,g=Object.keys(f).map(function(y){return e.draggable.getById(y).getDimension(ke)}).sort(function(y,m){return y.descriptor.index-m.descriptor.index}),x=Object.keys(p).map(function(y){var m=e.droppable.getById(y),v=m.callbacks.getScrollWhileDragging();return{droppableId:y,scroll:v}}),w={additions:g,removals:Object.keys(h),modified:x};n=Il(),r.publish(w)}))},i=function(d){var f=d.descriptor.id;n.additions[f]=d,n.modified[d.descriptor.droppableId]=!0,n.removals[f]&&delete n.removals[f],a()},l=function(d){var f=d.descriptor;n.removals[f.id]=!0,n.modified[f.droppableId]=!0,n.additions[f.id]&&delete n.additions[f.id],a()},c=function(){s&&(cancelAnimationFrame(s),s=null,n=Il())};return{add:i,remove:l,stop:c}}var Bv=function(t){var e=t.scrollHeight,r=t.scrollWidth,n=t.height,s=t.width,a=at({x:r,y:e},{x:s,y:n}),i={x:Math.max(0,a.x),y:Math.max(0,a.y)};return i},Uv=function(){var t=document.documentElement;return t||F(),t},Fv=function(){var t=Uv(),e=Bv({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},oN=function(){var t=Mv(),e=Fv(),r=t.y,n=t.x,s=Uv(),a=s.clientWidth,i=s.clientHeight,l=n+a,c=r+i,u=Pt({top:r,left:n,right:l,bottom:c}),d={frame:u,scroll:{initial:t,current:t,max:e,diff:{value:ke,displacement:ke}}};return d},lN=function(t){var e=t.critical,r=t.scrollOptions,n=t.registry,s=oN(),a=s.scroll.current,i=e.droppable,l=n.droppable.getAllByType(i.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(a,r)}),c=n.draggable.getAllByType(e.draggable.type).map(function(f){return f.getDimension(a)}),u={draggables:gv(c),droppables:mv(l)},d={dimensions:u,critical:e,viewport:s};return d};function Rh(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var n=t.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var cN=function(t,e){var r=null,n=iN({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=function(p,g){t.droppable.exists(p)||F(),r&&e.updateDroppableIsEnabled({id:p,isEnabled:g})},a=function(p,g){r&&(t.droppable.exists(p)||F(),e.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:g}))},i=function(p,g){r&&(t.droppable.exists(p)||F(),e.updateDroppableScroll({id:p,newScroll:g}))},l=function(p,g){r&&t.droppable.getById(p).callbacks.scroll(g)},c=function(){if(r){n.stop();var p=r.critical.droppable;t.droppable.getAllByType(p.type).forEach(function(g){return g.callbacks.dragStopped()}),r.unsubscribe(),r=null}},u=function(p){r||F();var g=r.critical.draggable;p.type==="ADDITION"&&Rh(t,g,p.value)&&n.add(p.value),p.type==="REMOVAL"&&Rh(t,g,p.value)&&n.remove(p.value)},d=function(p){r&&F();var g=t.draggable.getById(p.draggableId),x=t.droppable.getById(g.descriptor.droppableId),w={draggable:g.descriptor,droppable:x.descriptor},y=t.subscribe(u);return r={critical:w,unsubscribe:y},lN({critical:w,registry:t,scrollOptions:p.scrollOptions})},f={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:i,startPublishing:d,stopPublishing:c};return f},zv=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},uN=function(t){window.scrollBy(t.x,t.y)},dN=Ne(function(t){return Ro(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),fN=function(e,r){var n=Ar(dN(r),function(s){return s.frame||F(),kv(s.frame.pageMarginBox)(e)});return n},hN=function(t){var e=t.center,r=t.destination,n=t.droppables;if(r){var s=n[r];return s.frame?s:null}var a=fN(e,n);return a},Sr={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},pN=function(t,e){var r=t[e.size]*Sr.startFromPercentage,n=t[e.size]*Sr.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:n};return s},Wv=function(t){var e=t.startOfRange,r=t.endOfRange,n=t.current,s=r-e;if(s===0)return 0;var a=n-e,i=a/s;return i},jd=1,mN=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return Sr.maxPixelScroll;if(t===e.startScrollingFrom)return jd;var r=Wv({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),n=1-r,s=Sr.maxPixelScroll*Sr.ease(n);return Math.ceil(s)},Lh=Sr.durationDampening.accelerateAt,$h=Sr.durationDampening.stopDampeningAt,gN=function(t,e){var r=e,n=$h,s=Date.now(),a=s-r;if(a>=$h)return t;if(a<Lh)return jd;var i=Wv({startOfRange:Lh,endOfRange:n,current:a}),l=t*Sr.ease(i);return Math.ceil(l)},Mh=function(t){var e=t.distanceToEdge,r=t.thresholds,n=t.dragStartTime,s=t.shouldUseTimeDampening,a=mN(e,r);return a===0?0:s?Math.max(gN(a,n),jd):a},Bh=function(t){var e=t.container,r=t.distanceToEdges,n=t.dragStartTime,s=t.axis,a=t.shouldUseTimeDampening,i=pN(e,s),l=r[s.end]<r[s.start];return l?Mh({distanceToEdge:r[s.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a}):-1*Mh({distanceToEdge:r[s.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a})},vN=function(t){var e=t.container,r=t.subject,n=t.proposedScroll,s=r.height>e.height,a=r.width>e.width;return!a&&!s?n:a&&s?null:{x:a?0:n.x,y:s?0:n.y}},yN=hv(function(t){return t===0?0:t}),Hv=function(t){var e=t.dragStartTime,r=t.container,n=t.subject,s=t.center,a=t.shouldUseTimeDampening,i={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=Bh({container:r,distanceToEdges:i,dragStartTime:e,axis:pd,shouldUseTimeDampening:a}),c=Bh({container:r,distanceToEdges:i,dragStartTime:e,axis:xv,shouldUseTimeDampening:a}),u=yN({x:c,y:l});if(jr(u,ke))return null;var d=vN({container:r,subject:n,proposedScroll:u});return d?jr(d,ke)?null:d:null},xN=hv(function(t){return t===0?0:t>0?1:-1}),Sd=function(){var t=function(r,n){return r<0?r:r>n?r-n:0};return function(e){var r=e.current,n=e.max,s=e.change,a=Pe(r,s),i={x:t(a.x,n.x),y:t(a.y,n.y)};return jr(i,ke)?null:i}}(),qv=function(e){var r=e.max,n=e.current,s=e.change,a={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},i=xN(s),l=Sd({max:a,current:n,change:i});return!l||i.x!==0&&l.x===0||i.y!==0&&l.y===0},Nd=function(e,r){return qv({current:e.scroll.current,max:e.scroll.max,change:r})},bN=function(e,r){if(!Nd(e,r))return null;var n=e.scroll.max,s=e.scroll.current;return Sd({current:s,max:n,change:r})},kd=function(e,r){var n=e.frame;return n?qv({current:n.scroll.current,max:n.scroll.max,change:r}):!1},wN=function(e,r){var n=e.frame;return!n||!kd(e,r)?null:Sd({current:n.scroll.current,max:n.scroll.max,change:r})},_N=function(t){var e=t.viewport,r=t.subject,n=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,i=Hv({dragStartTime:s,container:e.frame,subject:r,center:n,shouldUseTimeDampening:a});return i&&Nd(e,i)?i:null},jN=function(t){var e=t.droppable,r=t.subject,n=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,i=e.frame;if(!i)return null;var l=Hv({dragStartTime:s,container:i.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:a});return l&&kd(e,l)?l:null},Uh=function(t){var e=t.state,r=t.dragStartTime,n=t.shouldUseTimeDampening,s=t.scrollWindow,a=t.scrollDroppable,i=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],c=l.page.marginBox;if(e.isWindowScrollAllowed){var u=e.viewport,d=_N({dragStartTime:r,viewport:u,subject:c,center:i,shouldUseTimeDampening:n});if(d){s(d);return}}var f=hN({center:i,destination:ot(e.impact),droppables:e.dimensions.droppables});if(f){var h=jN({dragStartTime:r,droppable:f,subject:c,center:i,shouldUseTimeDampening:n});h&&a(f.descriptor.id,h)}},SN=function(t){var e=t.scrollWindow,r=t.scrollDroppable,n=la(e),s=la(r),a=null,i=function(d){a||F();var f=a,h=f.shouldUseTimeDampening,p=f.dragStartTime;Uh({state:d,scrollWindow:n,scrollDroppable:s,dragStartTime:p,shouldUseTimeDampening:h})},l=function(d){a&&F();var f=Date.now(),h=!1,p=function(){h=!0};Uh({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),a={dragStartTime:f,shouldUseTimeDampening:h},h&&i(d)},c=function(){a&&(n.cancel(),s.cancel(),a=null)};return{start:l,stop:c,scroll:i}},NN=function(t){var e=t.move,r=t.scrollDroppable,n=t.scrollWindow,s=function(u,d){var f=Pe(u.current.client.selection,d);e({client:f})},a=function(u,d){if(!kd(u,d))return d;var f=wN(u,d);if(!f)return r(u.descriptor.id,d),null;var h=at(d,f);r(u.descriptor.id,h);var p=at(d,h);return p},i=function(u,d,f){if(!u||!Nd(d,f))return f;var h=bN(d,f);if(!h)return n(f),null;var p=at(f,h);n(p);var g=at(f,p);return g},l=function(u){var d=u.scrollJumpRequest;if(d){var f=ot(u.impact);f||F();var h=a(u.dimensions.droppables[f],d);if(h){var p=u.viewport,g=i(u.isWindowScrollAllowed,p,h);g&&s(u,g)}}};return l},kN=function(t){var e=t.scrollDroppable,r=t.scrollWindow,n=t.move,s=SN({scrollWindow:r,scrollDroppable:e}),a=NN({move:n,scrollWindow:r,scrollDroppable:e}),i=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){s.scroll(u);return}u.scrollJumpRequest&&a(u)}},l={scroll:i,start:s.start,stop:s.stop};return l},Vn="data-rbd",Kn=function(){var t=Vn+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),Gc=function(){var t=Vn+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),CN=function(){var t=Vn+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),Fh={contextId:Vn+"-scroll-container-context-id"},EN=function(e){return function(r){return"["+r+'="'+e+'"]'}},bs=function(e,r){return e.map(function(n){var s=n.styles[r];return s?n.selector+" { "+s+" }":""}).join(" ")},DN="pointer-events: none;",IN=function(t){var e=EN(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Kn.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:DN,dropAnimating:l}}}(),n=function(){var l=`
      transition: `+Fs.outOfTheWay+`;
    `;return{selector:e(Gc.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:e(CN.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},i=[n,r,s,a];return{always:bs(i,"always"),resting:bs(i,"resting"),dragging:bs(i,"dragging"),dropAnimating:bs(i,"dropAnimating"),userCancel:bs(i,"userCancel")}},lt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect,Pl=function(){var e=document.querySelector("head");return e||F(),e},zh=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function PN(t,e){var r=Z(function(){return IN(t)},[t]),n=j.useRef(null),s=j.useRef(null),a=q(Ne(function(f){var h=s.current;h||F(),h.textContent=f}),[]),i=q(function(f){var h=n.current;h||F(),h.textContent=f},[]);lt(function(){!n.current&&!s.current||F();var f=zh(e),h=zh(e);return n.current=f,s.current=h,f.setAttribute(Vn+"-always",t),h.setAttribute(Vn+"-dynamic",t),Pl().appendChild(f),Pl().appendChild(h),i(r.always),a(r.resting),function(){var p=function(x){var w=x.current;w||F(),Pl().removeChild(w),x.current=null};p(n),p(s)}},[e,i,a,r.always,r.resting,t]);var l=q(function(){return a(r.dragging)},[a,r.dragging]),c=q(function(f){if(f==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),u=q(function(){s.current&&a(r.resting)},[a,r.resting]),d=Z(function(){return{dragging:l,dropping:c,resting:u}},[l,c,u]);return d}var Gv=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function Bo(t){return t instanceof Gv(t).HTMLElement}function TN(t,e){var r="["+Kn.contextId+'="'+t+'"]',n=pv(document.querySelectorAll(r));if(!n.length)return null;var s=Ar(n,function(a){return a.getAttribute(Kn.draggableId)===e});return!s||!Bo(s)?null:s}function ON(t){var e=j.useRef({}),r=j.useRef(null),n=j.useRef(null),s=j.useRef(!1),a=q(function(h,p){var g={id:h,focus:p};return e.current[h]=g,function(){var w=e.current,y=w[h];y!==g&&delete w[h]}},[]),i=q(function(h){var p=TN(t,h);p&&p!==document.activeElement&&p.focus()},[t]),l=q(function(h,p){r.current===h&&(r.current=p)},[]),c=q(function(){n.current||s.current&&(n.current=requestAnimationFrame(function(){n.current=null;var h=r.current;h&&i(h)}))},[i]),u=q(function(h){r.current=null;var p=document.activeElement;p&&p.getAttribute(Kn.draggableId)===h&&(r.current=h)},[]);lt(function(){return s.current=!0,function(){s.current=!1;var h=n.current;h&&cancelAnimationFrame(h)}},[]);var d=Z(function(){return{register:a,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[a,u,c,l]);return d}function AN(){var t={draggables:{},droppables:{}},e=[];function r(f){return e.push(f),function(){var p=e.indexOf(f);p!==-1&&e.splice(p,1)}}function n(f){e.length&&e.forEach(function(h){return h(f)})}function s(f){return t.draggables[f]||null}function a(f){var h=s(f);return h||F(),h}var i={register:function(h){t.draggables[h.descriptor.id]=h,n({type:"ADDITION",value:h})},update:function(h,p){var g=t.draggables[p.descriptor.id];g&&g.uniqueId===h.uniqueId&&(delete t.draggables[p.descriptor.id],t.draggables[h.descriptor.id]=h)},unregister:function(h){var p=h.descriptor.id,g=s(p);g&&h.uniqueId===g.uniqueId&&(delete t.draggables[p],n({type:"REMOVAL",value:h}))},getById:a,findById:s,exists:function(h){return!!s(h)},getAllByType:function(h){return Ji(t.draggables).filter(function(p){return p.descriptor.type===h})}};function l(f){return t.droppables[f]||null}function c(f){var h=l(f);return h||F(),h}var u={register:function(h){t.droppables[h.descriptor.id]=h},unregister:function(h){var p=l(h.descriptor.id);p&&h.uniqueId===p.uniqueId&&delete t.droppables[h.descriptor.id]},getById:c,findById:l,exists:function(h){return!!l(h)},getAllByType:function(h){return Ji(t.droppables).filter(function(p){return p.descriptor.type===h})}};function d(){t.draggables={},t.droppables={},e.length=0}return{draggable:i,droppable:u,subscribe:r,clean:d}}function RN(){var t=Z(AN,[]);return j.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var Cd=se.createContext(null),Yi=function(){var t=document.body;return t||F(),t},LN={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},$N=function(e){return"rbd-announcement-"+e};function MN(t){var e=Z(function(){return $N(t)},[t]),r=j.useRef(null);j.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),G(a.style,LN),Yi().appendChild(a),function(){setTimeout(function(){var c=Yi();c.contains(a)&&c.removeChild(a),a===r.current&&(r.current=null)})}},[e]);var n=q(function(s){var a=r.current;if(a){a.textContent=s;return}},[]);return n}var BN=0,UN={separator:"::"};function Ed(t,e){return e===void 0&&(e=UN),Z(function(){return""+t+e.separator+BN++},[e.separator,t])}function FN(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function zN(t){var e=t.contextId,r=t.text,n=Ed("hidden-text",{separator:"-"}),s=Z(function(){return FN({contextId:e,uniqueId:n})},[n,e]);return j.useEffect(function(){var i=document.createElement("div");return i.id=s,i.textContent=r,i.style.display="none",Yi().appendChild(i),function(){var c=Yi();c.contains(i)&&c.removeChild(i)}},[s,r]),s}var Uo=se.createContext(null);function Vv(t){var e=j.useRef(t);return j.useEffect(function(){e.current=t}),e}function WN(){var t=null;function e(){return!!t}function r(i){return i===t}function n(i){t&&F();var l={abandon:i};return t=l,l}function s(){t||F(),t=null}function a(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:r,claim:n,release:s,tryAbandon:a}}var HN=9,qN=13,Dd=27,Kv=32,GN=33,VN=34,KN=35,JN=36,QN=37,YN=38,XN=39,ZN=40,ti,e2=(ti={},ti[qN]=!0,ti[HN]=!0,ti),Jv=function(t){e2[t.keyCode]&&t.preventDefault()},Fo=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=Ar(e,function(n){return"on"+n in document});return r||t}(),Qv=0,Wh=5;function t2(t,e){return Math.abs(e.x-t.x)>=Wh||Math.abs(e.y-t.y)>=Wh}var Hh={type:"IDLE"};function r2(t){var e=t.cancel,r=t.completed,n=t.getPhase,s=t.setPhase;return[{eventName:"mousemove",fn:function(i){var l=i.button,c=i.clientX,u=i.clientY;if(l===Qv){var d={x:c,y:u},f=n();if(f.type==="DRAGGING"){i.preventDefault(),f.actions.move(d);return}f.type!=="PENDING"&&F();var h=f.point;if(t2(h,d)){i.preventDefault();var p=f.actions.fluidLift(d);s({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(i){var l=n();if(l.type!=="DRAGGING"){e();return}i.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(i){n().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:function(i){var l=n();if(l.type==="PENDING"){e();return}if(i.keyCode===Dd){i.preventDefault(),e();return}Jv(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(i){var l=n();if(l.type==="IDLE"&&F(),l.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:Fo,fn:e}]}function n2(t){var e=j.useRef(Hh),r=j.useRef(_r),n=Z(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===Qv&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var h=t.findClosestDraggableId(f);if(h){var p=t.tryGetLock(h,i,{sourceEvent:f});if(p){f.preventDefault();var g={x:f.clientX,y:f.clientY};r.current(),u(p,g)}}}}}},[t]),s=Z(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var h=t.findClosestDraggableId(f);if(h){var p=t.findOptionsForDraggable(h);p&&(p.shouldRespectForcePress||t.canGetLock(h)&&f.preventDefault())}}}}},[t]),a=q(function(){var f={passive:!1,capture:!0};r.current=yt(window,[s,n],f)},[s,n]),i=q(function(){var d=e.current;d.type!=="IDLE"&&(e.current=Hh,r.current(),a())},[a]),l=q(function(){var d=e.current;i(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[i]),c=q(function(){var f={capture:!0,passive:!1},h=r2({cancel:l,completed:i,getPhase:function(){return e.current},setPhase:function(g){e.current=g}});r.current=yt(window,h,f)},[l,i]),u=q(function(f,h){e.current.type!=="IDLE"&&F(),e.current={type:"PENDING",point:h,actions:f},c()},[c]);lt(function(){return a(),function(){r.current()}},[a])}var vn;function s2(){}var a2=(vn={},vn[VN]=!0,vn[GN]=!0,vn[JN]=!0,vn[KN]=!0,vn);function i2(t,e){function r(){e(),t.cancel()}function n(){e(),t.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===Dd){a.preventDefault(),r();return}if(a.keyCode===Kv){a.preventDefault(),n();return}if(a.keyCode===ZN){a.preventDefault(),t.moveDown();return}if(a.keyCode===YN){a.preventDefault(),t.moveUp();return}if(a.keyCode===XN){a.preventDefault(),t.moveRight();return}if(a.keyCode===QN){a.preventDefault(),t.moveLeft();return}if(a2[a.keyCode]){a.preventDefault();return}Jv(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Fo,fn:r}]}function o2(t){var e=j.useRef(s2),r=Z(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Kv)return;var i=t.findClosestDraggableId(a);if(!i)return;var l=t.tryGetLock(i,d,{sourceEvent:a});if(!l)return;a.preventDefault();var c=!0,u=l.snapLift();e.current();function d(){c||F(),c=!1,e.current(),n()}e.current=yt(window,i2(u,d),{capture:!0,passive:!1})}}},[t]),n=q(function(){var a={passive:!1,capture:!0};e.current=yt(window,[r],a)},[r]);lt(function(){return n(),function(){e.current()}},[n])}var Tl={type:"IDLE"},l2=120,c2=.15;function u2(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){e();return}s.keyCode===Dd&&s.preventDefault(),e()}},{eventName:Fo,fn:e}]}function d2(t){var e=t.cancel,r=t.completed,n=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var i=n();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;var l=a.touches[0],c=l.clientX,u=l.clientY,d={x:c,y:u};a.preventDefault(),i.actions.move(d)}},{eventName:"touchend",fn:function(a){var i=n();if(i.type!=="DRAGGING"){e();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(n().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(a){var i=n();i.type==="IDLE"&&F();var l=a.touches[0];if(l){var c=l.force>=c2;if(c){var u=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){u&&e();return}if(u){if(i.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}}}},{eventName:Fo,fn:e}]}function f2(t){var e=j.useRef(Tl),r=j.useRef(_r),n=q(function(){return e.current},[]),s=q(function(p){e.current=p},[]),a=Z(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var g=t.findClosestDraggableId(p);if(g){var x=t.tryGetLock(g,l,{sourceEvent:p});if(x){var w=p.touches[0],y=w.clientX,m=w.clientY,v={x:y,y:m};r.current(),f(x,v)}}}}}},[t]),i=q(function(){var p={capture:!0,passive:!1};r.current=yt(window,[a],p)},[a]),l=q(function(){var h=e.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(Tl),r.current(),i())},[i,s]),c=q(function(){var h=e.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),u=q(function(){var p={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:n},x=yt(window,d2(g),p),w=yt(window,u2(g),p);r.current=function(){x(),w()}},[c,n,l]),d=q(function(){var p=n();p.type!=="PENDING"&&F();var g=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:g,hasMoved:!1})},[n,s]),f=q(function(p,g){n().type!=="IDLE"&&F();var x=setTimeout(d,l2);s({type:"PENDING",point:g,actions:p,longPressTimerId:x}),u()},[u,n,s,d]);lt(function(){return i(),function(){r.current();var g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),s(Tl))}},[n,i,s]),lt(function(){var p=yt(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var h2={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Yv(t,e){if(e==null)return!1;var r=!!h2[e.tagName.toLowerCase()];if(r)return!0;var n=e.getAttribute("contenteditable");return n==="true"||n===""?!0:e===t?!1:Yv(t,e.parentElement)}function p2(t,e){var r=e.target;return Bo(r)?Yv(t,r):!1}var m2=function(t){return Pt(t.getBoundingClientRect()).center};function g2(t){return t instanceof Gv(t).Element}var v2=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=Ar(e,function(n){return n in Element.prototype});return r||t}();function Xv(t,e){return t==null?null:t[v2](e)?t:Xv(t.parentElement,e)}function y2(t,e){return t.closest?t.closest(e):Xv(t,e)}function x2(t){return"["+Kn.contextId+'="'+t+'"]'}function b2(t,e){var r=e.target;if(!g2(r))return null;var n=x2(t),s=y2(r,n);return!s||!Bo(s)?null:s}function w2(t,e){var r=b2(t,e);return r?r.getAttribute(Kn.draggableId):null}function _2(t,e){var r="["+Gc.contextId+'="'+t+'"]',n=pv(document.querySelectorAll(r)),s=Ar(n,function(a){return a.getAttribute(Gc.id)===e});return!s||!Bo(s)?null:s}function j2(t){t.preventDefault()}function ri(t){var e=t.expected,r=t.phase,n=t.isLockActive;return t.shouldWarn,!(!n()||e!==r)}function Zv(t){var e=t.lockAPI,r=t.store,n=t.registry,s=t.draggableId;if(e.isClaimed())return!1;var a=n.draggable.findById(s);return!(!a||!a.options.isEnabled||!zv(r.getState(),s))}function S2(t){var e=t.lockAPI,r=t.contextId,n=t.store,s=t.registry,a=t.draggableId,i=t.forceSensorStop,l=t.sourceEvent,c=Zv({lockAPI:e,store:n,registry:s,draggableId:a});if(!c)return null;var u=s.draggable.getById(a),d=_2(r,u.descriptor.id);if(!d||l&&!u.options.canDragInteractiveElements&&p2(d,l))return null;var f=e.claim(i||_r),h="PRE_DRAG";function p(){return u.options.shouldRespectForcePress}function g(){return e.isActive(f)}function x(N,D){ri({expected:N,phase:h,isLockActive:g,shouldWarn:!0})&&n.dispatch(D())}var w=x.bind(null,"DRAGGING");function y(N){function D(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(D(),h!=="PRE_DRAG"&&F()),n.dispatch(vS(N.liftActionArgs)),h="DRAGGING";function O(P,_){if(_===void 0&&(_={shouldBlockNextClick:!1}),N.cleanup(),_.shouldBlockNextClick){var A=yt(window,[{eventName:"click",fn:j2,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(A)}D(),n.dispatch(Rv({reason:P}))}return G({isActive:function(){return ri({expected:"DRAGGING",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(_){return O("DROP",_)},cancel:function(_){return O("CANCEL",_)}},N.actions)}function m(N){var D=la(function(P){w(function(){return Av({client:P})})}),O=y({liftActionArgs:{id:a,clientSelection:N,movementMode:"FLUID"},cleanup:function(){return D.cancel()},actions:{move:D}});return G({},O,{move:D})}function v(){var N={moveUp:function(){return w(kS)},moveRight:function(){return w(ES)},moveDown:function(){return w(CS)},moveLeft:function(){return w(DS)}};return y({liftActionArgs:{id:a,clientSelection:m2(d),movementMode:"SNAP"},cleanup:_r,actions:N})}function b(){var N=ri({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!0});N&&e.release()}var S={isActive:function(){return ri({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:m,snapLift:v,abort:b};return S}var N2=[n2,o2,f2];function k2(t){var e=t.contextId,r=t.store,n=t.registry,s=t.customSensors,a=t.enableDefaultSensors,i=[].concat(a?N2:[],s||[]),l=j.useState(function(){return WN()})[0],c=q(function(m,v){m.isDragging&&!v.isDragging&&l.tryAbandon()},[l]);lt(function(){var m=r.getState(),v=r.subscribe(function(){var b=r.getState();c(m,b),m=b});return v},[l,r,c]),lt(function(){return l.tryAbandon},[l.tryAbandon]);for(var u=q(function(y){return Zv({lockAPI:l,registry:n,store:r,draggableId:y})},[l,n,r]),d=q(function(y,m,v){return S2({lockAPI:l,registry:n,contextId:e,store:r,draggableId:y,forceSensorStop:m,sourceEvent:v&&v.sourceEvent?v.sourceEvent:null})},[e,l,n,r]),f=q(function(y){return w2(e,y)},[e]),h=q(function(y){var m=n.draggable.findById(y);return m?m.options:null},[n.draggable]),p=q(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(xd()))},[l,r]),g=q(l.isClaimed,[l]),x=Z(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:g}},[u,d,f,h,p,g]),w=0;w<i.length;w++)i[w](x)}var C2=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function ws(t){return t.current||F(),t.current}function E2(t){var e=t.contextId,r=t.setCallbacks,n=t.sensors,s=t.nonce,a=t.dragHandleUsageInstructions,i=j.useRef(null),l=Vv(t),c=q(function(){return C2(l.current)},[l]),u=MN(e),d=zN({contextId:e,text:a}),f=PN(e,s),h=q(function(P){ws(i).dispatch(P)},[]),p=Z(function(){return hh({publishWhileDragging:xS,updateDroppableScroll:wS,updateDroppableIsEnabled:_S,updateDroppableIsCombineEnabled:jS,collectionStarting:bS},h)},[h]),g=RN(),x=Z(function(){return cN(g,p)},[g,p]),w=Z(function(){return kN(G({scrollWindow:uN,scrollDroppable:x.scrollDroppable},hh({move:Av},h)))},[x.scrollDroppable,h]),y=ON(e),m=Z(function(){return aN({announce:u,autoScroller:w,dimensionMarshal:x,focusMarshal:y,getResponders:c,styleMarshal:f})},[u,w,x,y,c,f]);i.current=m;var v=q(function(){var P=ws(i),_=P.getState();_.phase!=="IDLE"&&P.dispatch(xd())},[]),b=q(function(){var P=ws(i).getState();return P.isDragging||P.phase==="DROP_ANIMATING"},[]),S=Z(function(){return{isDragging:b,tryAbort:v}},[b,v]);r(S);var N=q(function(P){return zv(ws(i).getState(),P)},[]),D=q(function(){return Wr(ws(i).getState())},[]),O=Z(function(){return{marshal:x,focus:y,contextId:e,canLift:N,isMovementAllowed:D,dragHandleUsageInstructionsId:d,registry:g}},[e,x,d,y,N,D,g]);return k2({contextId:e,store:m,registry:g,customSensors:n,enableDefaultSensors:t.enableDefaultSensors!==!1}),j.useEffect(function(){return v},[v]),se.createElement(Uo.Provider,{value:O},se.createElement(Q1,{context:Cd,store:m},t.children))}var D2=0;function I2(){return Z(function(){return""+D2++},[])}function P2(t){var e=I2(),r=t.dragHandleUsageInstructions||gi.dragHandleUsageInstructions;return se.createElement(oj,null,function(n){return se.createElement(E2,{nonce:t.nonce,contextId:e,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var e0=function(e){return function(r){return e===r}},T2=e0("scroll"),O2=e0("auto"),qh=function(e,r){return r(e.overflowX)||r(e.overflowY)},A2=function(e){var r=window.getComputedStyle(e),n={overflowX:r.overflowX,overflowY:r.overflowY};return qh(n,T2)||qh(n,O2)},R2=function(){return!1},L2=function t(e){return e==null?null:e===document.body?R2()?e:null:e===document.documentElement?null:A2(e)?e:t(e.parentElement)},Vc=function(t){return{x:t.scrollLeft,y:t.scrollTop}},$2=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},M2=function(t){var e=L2(t),r=$2(t);return{closestScrollable:e,isFixedOnPage:r}},B2=function(t){var e=t.descriptor,r=t.isEnabled,n=t.isCombineEnabled,s=t.isFixedOnPage,a=t.direction,i=t.client,l=t.page,c=t.closest,u=function(){if(!c)return null;var p=c.scrollSize,g=c.client,x=Bv({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:g,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:x,diff:{value:ke,displacement:ke}}}}(),d=a==="vertical"?pd:xv,f=Gn({page:l,withPlaceholder:null,axis:d,frame:u}),h={descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:d,isEnabled:r,client:i,page:l,frame:u,subject:f};return h},U2=function(e,r){var n=cv(e);if(!r||e!==r)return n;var s=n.paddingBox.top-r.scrollTop,a=n.paddingBox.left-r.scrollLeft,i=s+r.scrollHeight,l=a+r.scrollWidth,c={top:s,right:l,bottom:i,left:a},u=cd(c,n.border),d=ud({borderBox:u,margin:n.margin,border:n.border,padding:n.padding});return d},F2=function(t){var e=t.ref,r=t.descriptor,n=t.env,s=t.windowScroll,a=t.direction,i=t.isDropDisabled,l=t.isCombineEnabled,c=t.shouldClipSubject,u=n.closestScrollable,d=U2(e,u),f=Gi(d,s),h=function(){if(!u)return null;var g=cv(u),x={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:g,page:Gi(g,s),scroll:Vc(u),scrollSize:x,shouldClipSubject:c}}(),p=B2({descriptor:r,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:a,client:d,page:f,closest:h});return p},z2={passive:!1},W2={passive:!0},Gh=function(t){return t.shouldPublishImmediately?z2:W2};function Xi(t){var e=j.useContext(t);return e||F(),e}var ni=function(e){return e&&e.env.closestScrollable||null};function H2(t){var e=j.useRef(null),r=Xi(Uo),n=Ed("droppable"),s=r.registry,a=r.marshal,i=Vv(t),l=Z(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),c=j.useRef(l),u=Z(function(){return Ne(function(b,S){e.current||F();var N={x:b,y:S};a.updateDroppableScroll(l.id,N)})},[l.id,a]),d=q(function(){var b=e.current;return!b||!b.env.closestScrollable?ke:Vc(b.env.closestScrollable)},[]),f=q(function(){var b=d();u(b.x,b.y)},[d,u]),h=Z(function(){return la(f)},[f]),p=q(function(){var b=e.current,S=ni(b);b&&S||F();var N=b.scrollOptions;if(N.shouldPublishImmediately){f();return}h()},[h,f]),g=q(function(b,S){e.current&&F();var N=i.current,D=N.getDroppableRef();D||F();var O=M2(D),P={ref:D,descriptor:l,env:O,scrollOptions:S};e.current=P;var _=F2({ref:D,descriptor:l,env:O,windowScroll:b,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),A=O.closestScrollable;return A&&(A.setAttribute(Fh.contextId,r.contextId),A.addEventListener("scroll",p,Gh(P.scrollOptions))),_},[r.contextId,l,p,i]),x=q(function(){var b=e.current,S=ni(b);return b&&S||F(),Vc(S)},[]),w=q(function(){var b=e.current;b||F();var S=ni(b);e.current=null,S&&(h.cancel(),S.removeAttribute(Fh.contextId),S.removeEventListener("scroll",p,Gh(b.scrollOptions)))},[p,h]),y=q(function(b){var S=e.current;S||F();var N=ni(S);N||F(),N.scrollTop+=b.y,N.scrollLeft+=b.x},[]),m=Z(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:x,dragStopped:w,scroll:y}},[w,g,x,y]),v=Z(function(){return{uniqueId:n,descriptor:l,callbacks:m}},[m,l,n]);lt(function(){return c.current=v.descriptor,s.droppable.register(v),function(){e.current&&w(),s.droppable.unregister(v)}},[m,l,w,v,a,s.droppable]),lt(function(){e.current&&a.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),lt(function(){e.current&&a.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function Ol(){}var Vh={width:0,height:0,margin:hj},q2=function(e){var r=e.isAnimatingOpenOnMount,n=e.placeholder,s=e.animate;return r||s==="close"?Vh:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},G2=function(e){var r=e.isAnimatingOpenOnMount,n=e.placeholder,s=e.animate,a=q2({isAnimatingOpenOnMount:r,placeholder:n,animate:s});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?Fs.placeholder:null}};function V2(t){var e=j.useRef(null),r=q(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),n=t.animate,s=t.onTransitionEnd,a=t.onClose,i=t.contextId,l=j.useState(t.animate==="open"),c=l[0],u=l[1];j.useEffect(function(){return c?n!=="open"?(r(),u(!1),Ol):e.current?Ol:(e.current=setTimeout(function(){e.current=null,u(!1)}),r):Ol},[n,c,r]);var d=q(function(h){h.propertyName==="height"&&(s(),n==="close"&&a())},[n,a,s]),f=G2({isAnimatingOpenOnMount:c,animate:t.animate,placeholder:t.placeholder});return se.createElement(t.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":i,onTransitionEnd:d,ref:t.innerRef})}var K2=se.memo(V2),Id=se.createContext(null),J2=function(t){zg(e,t);function e(){for(var n,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=t.call.apply(t,[this].concat(a))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}e.getDerivedStateFromProps=function(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},e}(se.PureComponent),Kh={dragging:5e3,dropAnimating:4500},Q2=function(e,r){return r?Fs.drop(r.duration):e?Fs.snap:Fs.fluid},Y2=function(e,r){return e?r?fa.opacity.drop:fa.opacity.combining:null},X2=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function Z2(t){var e=t.dimension,r=e.client,n=t.offset,s=t.combineWith,a=t.dropping,i=!!s,l=X2(t),c=!!a,u=c?Hc.drop(n,i):Hc.moveTo(n),d={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Q2(l,a),transform:u,opacity:Y2(i,c),zIndex:c?Kh.dropAnimating:Kh.dragging,pointerEvents:"none"};return d}function ek(t){return{transform:Hc.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function tk(t){return t.type==="DRAGGING"?Z2(t):ek(t)}function rk(t,e,r){r===void 0&&(r=ke);var n=window.getComputedStyle(e),s=e.getBoundingClientRect(),a=lv(s,n),i=Gi(a,r),l={client:a,tagName:e.tagName.toLowerCase(),display:n.display},c={x:a.marginBox.width,y:a.marginBox.height},u={descriptor:t,placeholder:l,displaceBy:c,client:a,page:i};return u}function nk(t){var e=Ed("draggable"),r=t.descriptor,n=t.registry,s=t.getDraggableRef,a=t.canDragInteractiveElements,i=t.shouldRespectForcePress,l=t.isEnabled,c=Z(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:l}},[a,l,i]),u=q(function(p){var g=s();return g||F(),rk(r,g,p)},[r,s]),d=Z(function(){return{uniqueId:e,descriptor:r,options:c,getDimension:u}},[r,u,c,e]),f=j.useRef(d),h=j.useRef(!0);lt(function(){return n.draggable.register(f.current),function(){return n.draggable.unregister(f.current)}},[n.draggable]),lt(function(){if(h.current){h.current=!1;return}var p=f.current;f.current=d,n.draggable.update(d,p)},[d,n.draggable])}function sk(t){t.preventDefault()}function ak(t){var e=j.useRef(null),r=q(function(P){e.current=P},[]),n=q(function(){return e.current},[]),s=Xi(Uo),a=s.contextId,i=s.dragHandleUsageInstructionsId,l=s.registry,c=Xi(Id),u=c.type,d=c.droppableId,f=Z(function(){return{id:t.draggableId,index:t.index,type:u,droppableId:d}},[t.draggableId,t.index,u,d]),h=t.children,p=t.draggableId,g=t.isEnabled,x=t.shouldRespectForcePress,w=t.canDragInteractiveElements,y=t.isClone,m=t.mapped,v=t.dropAnimationFinished;if(!y){var b=Z(function(){return{descriptor:f,registry:l,getDraggableRef:n,canDragInteractiveElements:w,shouldRespectForcePress:x,isEnabled:g}},[f,l,n,w,x,g]);nk(b)}var S=Z(function(){return g?{tabIndex:0,role:"button","aria-describedby":i,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:sk}:null},[a,i,p,g]),N=q(function(P){m.type==="DRAGGING"&&m.dropping&&P.propertyName==="transform"&&v()},[v,m]),D=Z(function(){var P=tk(m),_=m.type==="DRAGGING"&&m.dropping?N:null,A={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":p,style:P,onTransitionEnd:_},dragHandleProps:S};return A},[a,S,p,m,N,r]),O=Z(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return h(D,m.snapshot,O)}var t0=function(t,e){return t===e},r0=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},ik=function(e){return e.combine?e.combine.draggableId:null},ok=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function lk(){var t=Ne(function(s,a){return{x:s,y:a}}),e=Ne(function(s,a,i,l,c){return{isDragging:!0,isClone:a,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:i,combineWith:l,combineTargetFor:null}}),r=Ne(function(s,a,i,l,c,u,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:a,offset:s,dimension:i,forceShouldAnimate:d,snapshot:e(a,l,c,u,null)}}}),n=function(a,i){if(a.isDragging){if(a.critical.draggable.id!==i.draggableId)return null;var l=a.current.client.offset,c=a.dimensions.draggables[i.draggableId],u=ot(a.impact),d=ok(a.impact),f=a.forceShouldAnimate;return r(t(l.x,l.y),a.movementMode,c,i.isClone,u,d,f)}if(a.phase==="DROP_ANIMATING"){var h=a.completed;if(h.result.draggableId!==i.draggableId)return null;var p=i.isClone,g=a.dimensions.draggables[i.draggableId],x=h.result,w=x.mode,y=r0(x),m=ik(x),v=a.dropDuration,b={duration:v,curve:wd.drop,moveTo:a.newHomeClientOffset,opacity:m?fa.opacity.drop:null,scale:m?fa.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:g,dropping:b,draggingOver:y,combineWith:m,mode:w,forceShouldAnimate:null,snapshot:e(w,p,y,m,b)}}}return null};return n}function n0(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var ck={mapped:{type:"SECONDARY",offset:ke,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:n0(null)}};function uk(){var t=Ne(function(i,l){return{x:i,y:l}}),e=Ne(n0),r=Ne(function(i,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:e(l)}}}),n=function(l){return l?r(ke,l,!0):null},s=function(l,c,u,d){var f=u.displaced.visible[l],h=!!(d.inVirtualList&&d.effected[l]),p=Lo(u),g=p&&p.draggableId===l?c:null;if(!f){if(!h)return n(g);if(u.displaced.invisible[l])return null;var x=ts(d.displacedBy.point),w=t(x.x,x.y);return r(w,g,!0)}if(h)return n(g);var y=u.displacedBy.point,m=t(y.x,y.y);return r(m,g,f.shouldAnimate)},a=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:s(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var u=l.completed;return u.result.draggableId===c.draggableId?null:s(c.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return a}var dk=function(){var e=lk(),r=uk(),n=function(a,i){return e(a,i)||r(a,i)||ck};return n},fk={dropAnimationFinished:Lv},hk=iv(dk,fk,null,{context:Cd,pure:!0,areStatePropsEqual:t0})(ak);function s0(t){var e=Xi(Id),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:se.createElement(hk,t)}function pk(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,n=!!t.shouldRespectForcePress;return se.createElement(s0,G({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function mk(t){var e=j.useContext(Uo);e||F();var r=e.contextId,n=e.isMovementAllowed,s=j.useRef(null),a=j.useRef(null),i=t.children,l=t.droppableId,c=t.type,u=t.mode,d=t.direction,f=t.ignoreContainerClipping,h=t.isDropDisabled,p=t.isCombineEnabled,g=t.snapshot,x=t.useClone,w=t.updateViewportMaxScroll,y=t.getContainerForClone,m=q(function(){return s.current},[]),v=q(function(A){s.current=A},[]);q(function(){return a.current},[]);var b=q(function(A){a.current=A},[]),S=q(function(){n()&&w({maxScroll:Fv()})},[n,w]);H2({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:m});var N=se.createElement(J2,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(A){var E=A.onClose,R=A.data,k=A.animate;return se.createElement(K2,{placeholder:R,onClose:E,innerRef:b,animate:k,contextId:r,onTransitionEnd:S})}),D=Z(function(){return{innerRef:v,placeholder:N,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,N,v]),O=x?x.dragging.draggableId:null,P=Z(function(){return{droppableId:l,type:c,isUsingCloneFor:O}},[l,O,c]);function _(){if(!x)return null;var A=x.dragging,E=x.render,R=se.createElement(s0,{draggableId:A.draggableId,index:A.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(k,C){return E(k,C,A)});return Tx.createPortal(R,y())}return se.createElement(Id.Provider,{value:P},i(D,g),_())}var Al=function(e,r){return e===r.droppable.type},Jh=function(e,r){return r.draggables[e.draggable.id]},gk=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=G({},e,{shouldAnimatePlaceholder:!1}),n=Ne(function(i){return{draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}}}),s=Ne(function(i,l,c,u,d,f){var h=d.descriptor.id,p=d.descriptor.droppableId===i;if(p){var g=f?{render:f,dragging:n(d.descriptor)}:null,x={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:g}}if(!l)return r;if(!u)return e;var w={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:w,useClone:null}}),a=function(l,c){var u=c.droppableId,d=c.type,f=!c.isDropDisabled,h=c.renderClone;if(l.isDragging){var p=l.critical;if(!Al(d,p))return r;var g=Jh(p,l.dimensions),x=ot(l.impact)===u;return s(u,f,x,x,g,h)}if(l.phase==="DROP_ANIMATING"){var w=l.completed;if(!Al(d,w.critical))return r;var y=Jh(w.critical,l.dimensions);return s(u,f,r0(w.result)===u,ot(w.impact)===u,y,h)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var m=l.completed;if(!Al(d,m.critical))return r;var v=ot(m.impact)===u,b=!!(m.impact.at&&m.impact.at.type==="COMBINE"),S=m.critical.droppable.id===u;return v?b?e:r:S?e:r}return r};return a},vk={updateViewportMaxScroll:NS};function yk(){return document.body||F(),document.body}var xk={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:yk},a0=iv(gk,vk,null,{context:Cd,pure:!0,areStatePropsEqual:t0})(mk);a0.defaultProps=xk;const bk=({isOpen:t,onClose:e,onSuccess:r})=>{const[n,s]=j.useState({name:"",code:"",prefecture:"",brand_name:"",store_name:"",address:"",is_active:!0,location_type:"permanent",start_date:"",end_date:""}),[a,i]=j.useState(!1),[l,c]=j.useState(null),[u,d]=j.useState({}),f=(x,w)=>{s(y=>({...y,[x]:w})),u[x]&&d(y=>{const m={...y};return delete m[x],m})},h=()=>{const x={};return n.name.trim()||(x.name=""),n.code.trim()?/^[a-zA-Z0-9_-]+$/.test(n.code)||(x.code=""):x.code="",n.location_type==="event"&&(n.start_date||(x.start_date=""),n.end_date||(x.end_date=""),n.start_date&&n.end_date&&n.start_date>n.end_date&&(x.end_date="")),d(x),Object.keys(x).length===0},p=async x=>{if(x.preventDefault(),!!h()){i(!0),c(null);try{if(await gt.checkCodeDuplicate(n.code)){d({code:""}),i(!1);return}await gt.createLocation({name:n.name.trim(),code:n.code.trim(),prefecture:n.prefecture.trim()||void 0,brand_name:n.brand_name.trim()||void 0,store_name:n.store_name.trim()||void 0,address:n.address.trim()||void 0,is_active:n.is_active,location_type:n.location_type,start_date:n.location_type==="event"&&n.start_date?n.start_date:void 0,end_date:n.location_type==="event"&&n.end_date?n.end_date:void 0}),s({name:"",code:"",prefecture:"",brand_name:"",store_name:"",address:"",is_active:!0,location_type:"permanent",start_date:"",end_date:""}),r(),e()}catch(w){c(w instanceof Error?w.message:"")}finally{i(!1)}}},g=()=>{a||(s({name:"",code:"",prefecture:"",brand_name:"",store_name:"",address:"",is_active:!0,location_type:"permanent",start_date:"",end_date:""}),c(null),d({}),e())};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Cr,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),o.jsx("button",{onClick:g,disabled:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[l&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:l})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:n.name,onChange:x=>f("name",x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.name?"border-red-300":"border-gray-300"}`,placeholder:": ",maxLength:100}),u.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:n.code,onChange:x=>f("code",x.target.value.toUpperCase()),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.code?"border-red-300":"border-gray-300"}`,placeholder:": HQ",maxLength:20}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:""}),u.code&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.code})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:n.prefecture,onChange:x=>f("prefecture",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:": ",maxLength:50})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:n.brand_name,onChange:x=>f("brand_name",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:": ",maxLength:100}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:n.store_name,onChange:x=>f("store_name",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:": ",maxLength:100}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"text",value:n.address,onChange:x=>f("address",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:": ...",maxLength:255})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[o.jsx("input",{type:"radio",name:"location_type",value:"permanent",checked:n.location_type==="permanent",onChange:x=>f("location_type",x.target.value),className:"mr-3 text-blue-600"}),o.jsx(fg,{className:"w-5 h-5 text-blue-600 mr-2"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:""}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]})]}),o.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[o.jsx("input",{type:"radio",name:"location_type",value:"event",checked:n.location_type==="event",onChange:x=>f("location_type",x.target.value),className:"mr-3 text-purple-600"}),o.jsx(Ft,{className:"w-5 h-5 text-purple-600 mr-2"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:""}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]})]}),o.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[o.jsx("input",{type:"radio",name:"location_type",value:"makeme",checked:n.location_type==="makeme",onChange:x=>f("location_type",x.target.value),className:"mr-3 text-pink-600"}),o.jsx(Cc,{className:"w-5 h-5 text-pink-600 mr-2"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:""}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]})]})]})]}),n.location_type==="event"&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",value:n.start_date,onChange:x=>f("start_date",x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.start_date?"border-red-300":"border-gray-300"}`}),u.start_date&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.start_date})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",value:n.end_date,onChange:x=>f("end_date",x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.end_date?"border-red-300":"border-gray-300"}`}),u.end_date&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.end_date})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",name:"is_active",checked:n.is_active===!0,onChange:()=>f("is_active",!0),className:"mr-2 text-blue-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:""})]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",name:"is_active",checked:n.is_active===!1,onChange:()=>f("is_active",!1),className:"mr-2 text-blue-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:""})]})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[o.jsx("button",{type:"button",onClick:g,disabled:a,className:"px-4 py-2 text-gray-700 font-medium border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),o.jsxs("button",{type:"submit",disabled:a,className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),a?"...":""]})]})]})]})}):null},wk=({isOpen:t,onClose:e})=>{var P;const[r,n]=j.useState([]),[s,a]=j.useState([]),[i,l]=j.useState([]),[c,u]=j.useState(!0),[d,f]=j.useState(!1),[h,p]=j.useState(null),[g,x]=j.useState(null),[w,y]=j.useState({});j.useEffect(()=>{t&&m()},[t]);const m=async()=>{u(!0),p(null);try{const{data:_,error:A}=await z.from("users").select("*").order("display_name",{ascending:!0});if(A)throw A;const E=await gt.getActiveLocations(),{data:R,error:k}=await z.from("user_location_access").select("*");k&&console.warn(":",k);const C={};_==null||_.forEach(I=>{const B=(R||[]).filter(T=>T.user_id===I.id);C[I.id]=B.map(T=>T.location_id)}),n(_||[]),a(E),l(R||[]),y(C),_&&_.length>0&&x(_[0].id)}catch(_){p(_ instanceof Error?_.message:"")}finally{u(!1)}},v=(_,A)=>{y(E=>{const R=E[_]||[],k=R.includes(A)?R.filter(C=>C!==A):[...R,A];return{...E,[_]:k}})},b=async()=>{f(!0),p(null);try{for(const[_,A]of Object.entries(w))if(await z.from("user_location_access").delete().eq("user_id",_),A.length>0){const E=A.map(k=>({user_id:_,location_id:k})),{error:R}=await z.from("user_location_access").insert(E);if(R)throw R}alert(""),e()}catch(_){p(_ instanceof Error?_.message:"")}finally{f(!1)}},S=_=>{y(A=>({...A,[_]:s.map(E=>E.id)}))},N=_=>{y(A=>({...A,[_]:[]}))},D=()=>r.find(_=>_.id===g),O=_=>{var A;return((A=w[_])==null?void 0:A.length)||0};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(zt,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),o.jsx("button",{onClick:e,disabled:d,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),c?o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]}):o.jsxs("div",{className:"flex h-[600px]",children:[o.jsxs("div",{className:"w-1/3 border-r border-gray-200",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsx("h3",{className:"font-semibold text-gray-900",children:""})}),o.jsx("div",{className:"overflow-y-auto h-full",children:r.map(_=>o.jsx("button",{onClick:()=>x(_.id),className:`w-full p-4 text-left hover:bg-gray-50 border-b border-gray-100 ${g===_.id?"bg-blue-50 border-blue-200":""}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[_.picture_url?o.jsx("img",{src:_.picture_url,alt:qe(_.display_name),className:"w-8 h-8 rounded-full object-cover"}):o.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:o.jsx(zt,{className:"w-4 h-4 text-gray-500"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:qe(_.display_name)}),o.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",_.id.slice(0,8),"..."]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[O(_.id),"/",s.length]})]})},_.id))})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"font-semibold text-gray-900",children:[qe((P=D())==null?void 0:P.display_name),""]}),g&&o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>S(g),className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:""}),o.jsx("button",{onClick:()=>N(g),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:""})]})]})}),h&&o.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:o.jsx("div",{className:"text-sm text-red-700",children:h})}),o.jsxs("div",{className:"p-4 space-y-3 overflow-y-auto h-full",children:[g&&s.map(_=>{var E;const A=((E=w[g])==null?void 0:E.includes(_.id))||!1;return o.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-colors cursor-pointer ${A?"border-green-200 bg-green-50":"border-gray-200 bg-white hover:bg-gray-50"}`,onClick:()=>v(g,_.id),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Cr,{className:`w-5 h-5 ${A?"text-green-600":"text-gray-400"}`}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:_.brand_name&&_.store_name?`${_.brand_name} ${_.store_name}`:_.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[": ",_.code,_.prefecture&&`  ${_.prefecture}`,_.address&&`  ${_.address}`]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[!_.is_active&&o.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:""}),o.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${A?"border-green-500 bg-green-500":"border-gray-300 bg-white"}`,children:A&&o.jsx(ug,{className:"w-4 h-4 text-white"})})]})]},_.id)}),s.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Cr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:""})]})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[o.jsx("button",{onClick:e,disabled:d,className:"px-4 py-2 text-gray-700 font-medium border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors",children:""}),o.jsxs("button",{onClick:b,disabled:d,className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),d?"...":""]})]})]})}):null},_k=()=>{const[t,e]=j.useState([]),[r,n]=j.useState(!0),[s,a]=j.useState(null),[i,l]=j.useState(!1),[c,u]=j.useState(!1),[d,f]=j.useState(null),[h,p]=j.useState({}),[g,x]=j.useState("permanent");j.useEffect(()=>{w()},[]);const w=async()=>{n(!0),a(null);try{const C=await gt.getAllLocations();e(C)}catch(C){a(C instanceof Error?C.message:"")}finally{n(!1)}},y=C=>{f(C),p({name:C.name,code:C.code,prefecture:C.prefecture||"",brand_name:C.brand_name||"",store_name:C.store_name||"",address:C.address||"",is_active:C.is_active,display_order:C.display_order,location_type:C.location_type||"permanent",start_date:C.start_date||"",end_date:C.end_date||""})},m=async()=>{if(d)try{await gt.updateLocation(d.id,h),f(null),p({}),await w()}catch(C){a(C instanceof Error?C.message:"")}},v=()=>{f(null),p({})},b=async C=>{if(!C.destination)return;const I=_(),B=Array.from(I),[T]=B.splice(C.source.index,1);B.splice(C.destination.index,0,T);const L=B.map((U,V)=>({id:U.id,display_order:V+1}));try{for(const U of L)await gt.updateLocation(U.id,{display_order:U.display_order});await w()}catch(U){a(U instanceof Error?U.message:"")}},S=async(C,I)=>{try{await gt.updateLocation(C,{is_active:!I}),await w()}catch(B){a(B instanceof Error?B.message:"")}},N=async(C,I)=>{if(window.confirm(`${I}`))try{await gt.deleteLocation(C),await w()}catch(B){a(B instanceof Error?B.message:"")}},D=C=>new Date(C).toLocaleString("ja-JP"),O=C=>C?new Date(C).toLocaleDateString("ja-JP"):"-",P=(C,I)=>{p(B=>{const T={...B,[C]:I};return C==="location_type"&&(I==="makeme"||I==="permanent")&&(T.start_date="",T.end_date=""),T})},_=()=>t.filter(C=>(C.location_type||"permanent")===g),A=C=>{switch(C){case"makeme":return"";case"permanent":return"";case"event":return"";default:return""}},E=C=>{switch(C){case"makeme":return Cc;case"permanent":return fg;case"event":return Ft;default:return Cc}},R=C=>{const I=C||"permanent",B=A(I),T=I==="makeme"?"bg-pink-100 text-pink-800":I==="permanent"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800";return o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${T}`,children:B})};if(r)return o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]})});const k=_();return o.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx(Cr,{className:"w-6 h-6 text-blue-600"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""})]}),o.jsx("p",{className:"text-gray-600",children:""})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{onClick:()=>u(!0),className:"flex items-center px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors",children:[o.jsx(zt,{className:"w-4 h-4 mr-2"}),""]}),o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(Ju,{className:"w-4 h-4 mr-2"}),""]})]})]})}),s&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[o.jsx("div",{className:"text-sm text-red-700",children:s}),o.jsx("button",{onClick:()=>a(null),className:"mt-2 text-xs text-red-600 hover:text-red-800",children:""})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"-mb-px flex",children:["permanent","event","makeme"].map(C=>{const I=E(C),B=g===C,T=t.filter(L=>(L.location_type||"permanent")===C).length;return o.jsx("button",{onClick:()=>x(C),className:`group relative min-w-0 flex-1 overflow-hidden py-4 px-4 text-sm font-medium text-center border-b-2 focus:z-10 transition-colors ${B?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(I,{className:"w-5 h-5"}),o.jsx("span",{children:A(C)}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:T})]})},C)})})}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-4",children:o.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[A(g)," (",k.length,")"]})}),k.length===0?o.jsxs("div",{className:"p-12 text-center",children:[se.createElement(E(g),{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsxs("p",{className:"text-gray-500",children:[A(g),""]}),o.jsx("button",{onClick:()=>l(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsx(P2,{onDragEnd:b,children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),g==="event"&&o.jsxs(o.Fragment,{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx(a0,{droppableId:"locations",children:C=>o.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",...C.droppableProps,ref:C.innerRef,children:[k.map((I,B)=>o.jsx(pk,{draggableId:I.id,index:B,children:(T,L)=>o.jsxs("tr",{ref:T.innerRef,...T.draggableProps,className:`hover:bg-gray-50 ${I.is_active?"":"opacity-60"} ${L.isDragging?"shadow-lg bg-blue-50":""}`,children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{...T.dragHandleProps,className:"cursor-grab hover:bg-gray-100 p-1 rounded",title:"",children:o.jsx(zx,{className:"w-4 h-4 text-gray-400"})}),o.jsx("span",{className:"text-sm font-medium text-blue-600",children:B+1})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"text",value:h.name||"",onChange:U=>P("name",U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}):o.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.brand_name&&I.store_name?`${I.brand_name} ${I.store_name}`:I.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"text",value:h.code||"",onChange:U=>P("code",U.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm"}):o.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:I.code})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(d==null?void 0:d.id)===I.id?o.jsxs("select",{value:h.location_type||"permanent",onChange:U=>P("location_type",U.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[o.jsx("option",{value:"permanent",children:""}),o.jsx("option",{value:"event",children:""}),o.jsx("option",{value:"makeme",children:""})]}):R(I.location_type)}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"text",value:h.prefecture||"",onChange:U=>P("prefecture",U.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:""}):I.prefecture||"-"}),g==="event"&&o.jsxs(o.Fragment,{children:[o.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"date",value:h.start_date||"",onChange:U=>P("start_date",U.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}):O(I.start_date)}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(d==null?void 0:d.id)===I.id?o.jsx("input",{type:"date",value:h.end_date||"",onChange:U=>P("end_date",U.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}):O(I.end_date)})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:I.is_active?"":""}),o.jsx("button",{onClick:()=>S(I.id,I.is_active),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:I.is_active?"":"",children:I.is_active?o.jsx(Ux,{className:"w-4 h-4 text-gray-500"}):o.jsx(Fx,{className:"w-4 h-4 text-gray-500"})})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D(I.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(d==null?void 0:d.id)===I.id?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:m,className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"",children:o.jsx(Xn,{className:"w-4 h-4"})}),o.jsx("button",{onClick:v,className:"p-2 text-gray-500 hover:bg-gray-50 rounded transition-colors",title:"",children:o.jsx(Er,{className:"w-4 h-4"})})]}):o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>y(I),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"",children:o.jsx(Ku,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(I.id,I.name),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"",children:o.jsx(Qu,{className:"w-4 h-4"})})]})})]})},I.id)),C.placeholder]})})]})})})]})]}),o.jsx(bk,{isOpen:i,onClose:()=>l(!1),onSuccess:w}),o.jsx(wk,{isOpen:c,onClose:()=>u(!1)})]})},jk=({isOpen:t,onClose:e,record:r,onSave:n})=>{const[s,a]=j.useState({record_type:"clock_in",recorded_at:"",location_id:"",location_name:"",note:""}),[i,l]=j.useState([]),[c,u]=j.useState(!1),[d,f]=j.useState(null);j.useEffect(()=>{t&&(h(),r&&a({record_type:r.record_type,recorded_at:r.recorded_at?new Date(r.recorded_at).toISOString().slice(0,16):"",location_id:r.location_id||"",location_name:r.location_name||"",note:r.note||""}))},[t,r]);const h=async()=>{try{const v=await gt.getAllLocations();l(v)}catch(v){console.error(":",v)}},p=(v,b)=>{a(S=>({...S,[v]:b}))},g=v=>{const b=i.find(S=>S.id===v);a(S=>({...S,location_id:v,location_name:b?b.brand_name&&b.store_name?`${b.brand_name} ${b.store_name}`:b.name:""}))},x=async v=>{if(v.preventDefault(),!!r){u(!0),f(null);try{const b={record_type:s.record_type,recorded_at:s.recorded_at?new Date(s.recorded_at).toISOString():r.recorded_at,location_id:s.location_id||null,location_name:s.location_name||null,note:s.note||null,updated_at:new Date().toISOString()},{error:S}=await z.from("time_records").update(b).eq("id",r.id);if(S)throw S;n(),e()}catch(b){f(b instanceof Error?b.message:"")}finally{u(!1)}}},w=async()=>{if(!(!r||!window.confirm(""))){u(!0),f(null);try{const{error:v}=await z.from("time_records").delete().eq("id",r.id);if(v)throw v;n(),e()}catch(v){f(v instanceof Error?v.message:"")}finally{u(!1)}}},y=v=>new Date(v).toLocaleString("ja-JP"),m=v=>{switch(v){case"clock_in":return"";case"clock_out":return"";case"break_start":return"";case"break_end":return"";default:return v}};return!t||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(an,{className:"w-6 h-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),o.jsx("button",{onClick:e,disabled:c,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:o.jsx(Er,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[d&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:d})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:s.record_type,onChange:v=>p("record_type",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"clock_in",children:""}),o.jsx("option",{value:"clock_out",children:""}),o.jsx("option",{value:"break_start",children:""}),o.jsx("option",{value:"break_end",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("input",{type:"datetime-local",value:s.recorded_at,onChange:v=>p("recorded_at",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[": ",y(r.recorded_at)]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsxs("select",{value:s.location_id,onChange:v=>g(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:""}),i.map(v=>o.jsxs("option",{value:v.id,children:[v.brand_name&&v.store_name?`${v.brand_name} ${v.store_name}`:v.name,v.prefecture&&` (${v.prefecture})`]},v.id))]}),r.location_name&&o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[": ",r.location_name]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),o.jsx("textarea",{value:s.note,onChange:v=>p("note",v.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:""}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"ml-2 font-medium",children:m(r.record_type)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"ml-2 font-medium",children:y(r.recorded_at)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"ml-2 font-medium",children:r.location_name||"-"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"ml-2 font-medium",children:r.note||"-"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[o.jsx("button",{type:"button",onClick:w,disabled:c,className:"px-4 py-2 text-red-700 font-medium border border-red-300 rounded-lg hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:e,disabled:c,className:"px-4 py-2 text-gray-700 font-medium border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),o.jsxs("button",{type:"submit",disabled:c,className:"flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),c?"...":""]})]})]})]})]})})},Sk=({userId:t,onBack:e})=>{const[r,n]=j.useState(null),[s,a]=j.useState(null),[i,l]=j.useState([]),[c,u]=j.useState([]),[d,f]=j.useState(!1),[h,p]=j.useState(null),[g,x]=j.useState(!1),[w,y]=j.useState({}),[m,v]=j.useState("sales");j.useEffect(()=>{t&&(b(),S(),N())},[t]);const b=async()=>{if(t){f(!0),p(null);try{const{data:E,error:R}=await z.from("users").select("*").eq("id",t).single();if(R)throw R;n(E),y({display_name:E.display_name,email:E.email||"",address:E.address||"",self_pr:E.self_pr||"",career:E.career||""})}catch(E){p(E instanceof Error?E.message:"")}finally{f(!1)}}},S=async()=>{if(t)try{const{data:E,error:R}=await z.from("daily_reports").select("*").eq("user_id",t);if(R)throw R;if(E&&E.length>0){const k=E.reduce((T,L)=>T+L.sales_amount,0),C=E.reduce((T,L)=>T+L.customer_count,0),I=E.reduce((T,L)=>T+L.items_sold,0),B=E.reduce((T,L)=>T+(L.customer_unit_price||0),0);a({totalReports:E.length,totalSales:k,avgSales:k/E.length,totalCustomers:C,avgCustomers:C/E.length,totalItemsSold:I,avgItemsSold:I/E.length,avgUnitPrice:B/E.length})}else a({totalReports:0,totalSales:0,avgSales:0,totalCustomers:0,avgCustomers:0,totalItemsSold:0,avgItemsSold:0,avgUnitPrice:0})}catch(E){console.warn(":",E)}},N=async()=>{if(t)try{const{data:E,error:R}=await z.from("daily_reports").select("*").eq("user_id",t).order("report_date",{ascending:!0});if(R)throw R;if(l(E||[]),E&&E.length>0){const k=E.map(C=>({date:C.report_date,sales:C.sales_amount,customers:C.customer_count,unitPrice:C.customer_unit_price||0,itemsSold:C.items_sold,formattedDate:new Date(C.report_date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})}));u(k)}}catch(E){console.warn(":",E)}},D=async()=>{if(r){f(!0),p(null);try{const E={display_name:w.display_name,email:w.email||null,address:w.address||null,self_pr:w.self_pr||null,career:w.career||null,updated_at:new Date().toISOString()},{error:R}=await z.from("users").update(E).eq("id",r.id);if(R)throw R;n(k=>k?{...k,...E}:null),x(!1)}catch(E){p(E instanceof Error?E.message:"")}finally{f(!1)}}},O=(E,R)=>{y(k=>({...k,[E]:R}))},P=E=>`${E.toLocaleString()}`,_=E=>new Date(E).toLocaleDateString("ja-JP"),A=()=>{if(c.length===0)return null;const E=I=>{switch(m){case"sales":return I.sales;case"customers":return I.customers;case"unitPrice":return I.unitPrice;case"itemsSold":return I.itemsSold;default:return I.sales}},R=Math.max(...c.map(E)),k=Math.min(...c.map(E)),C=R-k||1;return o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:`p-2 rounded-full ${m==="sales"?"bg-blue-100":m==="customers"?"bg-green-100":m==="unitPrice"?"bg-purple-100":"bg-orange-100"}`,children:[m==="sales"&&o.jsx(Vu,{className:"w-5 h-5 text-blue-600"}),m==="customers"&&o.jsx(zt,{className:"w-5 h-5 text-green-600"}),m==="unitPrice"&&o.jsx(Qx,{className:"w-5 h-5 text-purple-600"}),m==="itemsSold"&&o.jsx(Kx,{className:"w-5 h-5 text-orange-600"})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[m==="sales"&&"",m==="customers"&&"",m==="unitPrice"&&"",m==="itemsSold"&&""]}),o.jsx("p",{className:"text-sm text-gray-600",children:"30"})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{onClick:()=>v("sales"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="sales"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),o.jsx("button",{onClick:()=>v("customers"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="customers"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),o.jsx("button",{onClick:()=>v("unitPrice"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="unitPrice"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),o.jsx("button",{onClick:()=>v("itemsSold"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="itemsSold"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]})]}),o.jsx("div",{className:"h-64 relative",children:o.jsx("div",{className:"absolute inset-0 flex items-end space-x-1",children:c.map((I,B)=>{const L=(E(I)-k)/C*100,U=m==="sales"?"bg-blue-500":m==="customers"?"bg-green-500":m==="unitPrice"?"bg-purple-500":"bg-orange-500";return o.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[o.jsx("div",{className:"w-full flex justify-center mb-1",children:o.jsx("div",{className:`w-3/4 ${U} rounded-t-sm transition-all duration-300 hover:opacity-80 relative group`,style:{height:`${L||2}%`},children:o.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsxs("div",{className:"bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[m==="sales"&&P(I.sales),m==="customers"&&`${I.customers}`,m==="unitPrice"&&P(I.unitPrice),m==="itemsSold"&&`${I.itemsSold}`]})})})}),o.jsx("div",{className:"text-xs text-gray-500 mt-1 transform rotate-45 origin-center",children:I.formattedDate})]},B)})})}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-4 border-t border-gray-100",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`text-2xl font-bold ${m==="sales"?"text-blue-600":m==="customers"?"text-green-600":m==="unitPrice"?"text-purple-600":"text-orange-600"}`,children:[m==="sales"&&P(c.reduce((I,B)=>I+B.sales,0)),m==="customers"&&`${c.reduce((I,B)=>I+B.customers,0)}`,m==="unitPrice"&&P(c.reduce((I,B)=>I+B.unitPrice,0)),m==="itemsSold"&&`${c.reduce((I,B)=>I+B.itemsSold,0)}`]}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`text-2xl font-bold ${m==="sales"?"text-blue-600":m==="customers"?"text-green-600":m==="unitPrice"?"text-purple-600":"text-orange-600"}`,children:[m==="sales"&&P(Math.round(c.reduce((I,B)=>I+B.sales,0)/c.length)),m==="customers"&&`${Math.round(c.reduce((I,B)=>I+B.customers,0)/c.length)}`,m==="unitPrice"&&P(Math.round(c.reduce((I,B)=>I+B.unitPrice,0)/c.length)),m==="itemsSold"&&`${Math.round(c.reduce((I,B)=>I+B.itemsSold,0)/c.length)}`]}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`text-2xl font-bold ${m==="sales"?"text-blue-600":m==="customers"?"text-green-600":m==="unitPrice"?"text-purple-600":"text-orange-600"}`,children:[m==="sales"&&P(R),m==="customers"&&`${R}`,m==="unitPrice"&&P(R),m==="itemsSold"&&`${R}`]}),o.jsx("div",{className:"text-sm text-gray-600",children:""})]})]})]})};return d&&!r?o.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]}):h&&!r?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-red-600 mb-4",children:h}),o.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:""})]})}):r?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:o.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Lx,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),o.jsx("button",{onClick:()=>{g?D():x(!0)},disabled:d,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?o.jsxs(o.Fragment,{children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),d?"...":""]}):o.jsxs(o.Fragment,{children:[o.jsx(Ku,{className:"w-4 h-4 mr-2"}),""]})})]})})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[h&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:h})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-1 space-y-6",children:o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[o.jsxs("div",{className:"text-center mb-6",children:[r.picture_url?o.jsx("img",{src:r.picture_url,alt:qe(r.display_name),className:"w-24 h-24 rounded-full object-cover mx-auto ring-4 ring-white shadow-lg"}):o.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto",children:o.jsx(Ls,{className:"w-12 h-12 text-gray-500"})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"flex items-center justify-center space-x-2 mb-2",children:o.jsxs("span",{className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:["#",r.employee_number||"---"]})}),g?o.jsx("input",{type:"text",value:w.display_name||"",onChange:E=>O("display_name",E.target.value),className:"text-xl font-bold text-gray-900 bg-white border border-gray-300 rounded px-3 py-2 text-center"}):o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:qe(r.display_name)})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Wx,{className:"w-5 h-5 text-gray-400 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g?o.jsx("input",{type:"email",value:w.email||"",onChange:E=>O("email",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"example@company.com"}):o.jsx("p",{className:"text-gray-900",children:r.email||""})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Cr,{className:"w-5 h-5 text-gray-400 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g?o.jsx("textarea",{value:w.address||"",onChange:E=>O("address",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:2,placeholder:""}):o.jsx("p",{className:"text-gray-900",children:r.address||""})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx($x,{className:"w-5 h-5 text-gray-400 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PR"}),g?o.jsx("textarea",{value:w.self_pr||"",onChange:E=>O("self_pr",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"PR"}):o.jsx("p",{className:"text-gray-900",children:Uc(r.self_pr)||""})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Mx,{className:"w-5 h-5 text-gray-400 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g?o.jsx("textarea",{value:w.career||"",onChange:E=>O("career",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:""}):o.jsx("p",{className:"text-gray-900",children:Uc(r.career)||""})]})]})]})]})}),o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsx(A,{}),o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),i.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.slice(0,10).map(E=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:_(E.report_date)}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:P(E.sales_amount)}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:[E.customer_count,""]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:P(E.customer_unit_price||0)}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:[E.items_sold,""]})]},E.id))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ft,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:""})]})]})]})]})]})]}):o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-gray-600 mb-4",children:""}),o.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:""})]})})},Nk=({onLogout:t})=>{const[e,r]=j.useState("dashboard"),[n,s]=j.useState({users:[],time_records:[],shifts:[],daily_reports:[]}),[a,i]=j.useState(!1),[l,c]=j.useState(null),[u,d]=j.useState(!1),[f,h]=j.useState(null),[p,g]=j.useState(!1),[x,w]=j.useState(null),y=async k=>{i(!0),c(null);try{const{data:C,error:I}=await z.from(k).select("*").order("created_at",{ascending:!1}).limit(100);if(I)throw I;s(B=>({...B,[k]:C||[]}))}catch(C){c(C instanceof Error?C.message:"")}finally{i(!1)}};j.useEffect(()=>{e!=="dashboard"&&e!=="shift_management"&&e!=="location_management"&&y(e)},[e]);const m=k=>{h(k),d(!0)},v=()=>{d(!1),h(null)},b=()=>{e==="time_records"&&y("time_records")},S=k=>{w(k),g(!0)},N=()=>{g(!1),w(null)},D=k=>k?new Date(k).toLocaleString("ja-JP"):"-",O=()=>o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"LINE ID"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.users.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>S(k.id),children:[o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["#",k.employee_number||"---"]})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[k.picture_url?o.jsx("img",{src:k.picture_url,alt:qe(k.display_name),className:"w-8 h-8 rounded-full object-cover"}):o.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:o.jsx(zt,{className:"w-4 h-4 text-gray-500"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:qe(k.display_name)}),o.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",k.id.slice(0,8),"..."]})]})]})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.line_user_id}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.email||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:D(k.created_at)})]},k.id))})]})}),P=()=>o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.time_records.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 font-mono",children:[k.user_id.slice(0,8),"..."]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.record_type==="clock_in"?"bg-green-100 text-green-800":k.record_type==="clock_out"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:k.record_type})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:D(k.recorded_at)}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.location_name||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.note||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsx("button",{onClick:()=>m(k),className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:""})})]},k.id))})]})}),_=()=>o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.shifts.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 font-mono",children:[k.user_id.slice(0,8),"..."]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.shift_date}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.shift_type==="normal"?"bg-blue-100 text-blue-800":k.shift_type==="early"?"bg-yellow-100 text-yellow-800":k.shift_type==="late"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:k.shift_type})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.shift_status==="confirmed"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:k.shift_status})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.start_time||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.end_time||"-"})]},k.id))})]})}),A=()=>o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.daily_reports.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 font-mono",children:[k.user_id.slice(0,8),"..."]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.report_date}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:["",k.sales_amount.toLocaleString()]}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.customer_count}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k.items_sold}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:["",k.customer_unit_price.toLocaleString()]})]},k.id))})]})}),E=()=>{switch(e){case"users":return O();case"time_records":return P();case"shifts":return _();case"daily_reports":return A();default:return null}},R={dashboard:"",shift_management:"",location_management:"",users:"",time_records:"",shifts:"",daily_reports:""};return o.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[o.jsxs("div",{className:"w-80 bg-white shadow-lg border-r border-gray-200 flex flex-col flex-shrink-0",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:""})]}),o.jsx("nav",{className:"flex-1 p-4",children:o.jsx("div",{className:"space-y-2",children:Object.keys(R).map(k=>o.jsx("button",{onClick:()=>r(k),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors ${e===k?"bg-blue-50 text-blue-700 border-blue-200 border":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:R[k]}),k!=="dashboard"&&k!=="shift_management"&&k!=="location_management"&&o.jsx("span",{className:"bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:n[k].length})]})},k))})}),o.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-4",children:[t&&o.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),""]}),o.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[o.jsx("p",{children:" CMS"}),o.jsx("p",{children:" v1.0"})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col min-w-0 max-w-screen-2xl mx-auto",children:o.jsx("div",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:o.jsx("div",{className:e==="dashboard"||e==="shift_management"||e==="location_management"?"":"bg-white rounded-lg shadow p-6",children:e==="dashboard"?o.jsx(L1,{}):e==="shift_management"?o.jsx(U1,{}):e==="location_management"?o.jsx(_k,{}):o.jsxs(o.Fragment,{children:[l&&o.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:l})}),a?o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"..."})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:[R[e],""]}),o.jsxs("p",{className:"text-gray-600",children:[e==="users"&&"",e==="time_records"&&"",e==="shifts"&&"",e==="daily_reports"&&""]})]}),o.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[R[e],""]}),o.jsx("button",{onClick:()=>y(e),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700",children:""})]}),E()]})]})})})}),o.jsx(jk,{isOpen:u,onClose:v,record:f,onSave:b}),p&&x&&o.jsx("div",{className:"fixed inset-0 bg-white z-50",children:o.jsx(Sk,{userId:x,onBack:N})})]})},kk=()=>{const{isAdminAuthenticated:t,login:e,logout:r}=C1();return t?o.jsx(Nk,{onLogout:r}):o.jsx(T1,{onLogin:e})},Ck=()=>{const{user:t,isAuthenticated:e,isLoading:r,logout:n}=on(),{notifyTimeRecordUpdate:s,notifyAttendanceUpdate:a}=Ug(),[i,l]=j.useState(new Date),[c,u]=j.useState("out"),[d,f]=j.useState(""),[h,p]=j.useState([]),[g,x]=j.useState([]),[w,y]=j.useState(!1),[m,v]=j.useState([]),[b,S]=j.useState(!1),[N,D]=j.useState(null);j.useEffect(()=>{const k=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(k)},[]),j.useEffect(()=>{(async()=>{try{const C=await gt.getActiveLocations();if(p(C),C.length>0&&!d){const I=await gt.getDefaultLocation();f((I==null?void 0:I.id)||C[0].id)}}catch(C){console.error(":",C),f("HQ")}})()},[d]),j.useEffect(()=>{(async()=>{if(t)try{const C=await Bs.getTodayTimeRecords(t);if(v(C),C.length>0){switch(C[C.length-1].record_type){case"clock_in":u("in");break;case"clock_out":u("out");break;case"break_start":u("break");break;case"break_end":u("in");break}const B=C.map(T=>{var L;return{id:T.id,type:T.record_type==="clock_in"?"check-in":T.record_type==="clock_out"?"check-out":T.record_type==="break_start"?"break-start":"break-end",timestamp:new Date(T.recorded_at),location:((L=T.note)==null?void 0:L.replace("",""))||""}}).reverse();x(B)}}catch(C){console.error(":",C)}})()},[t]);const O=k=>k.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1}),P=k=>k.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short"}),_=()=>{switch(c){case"out":return"";case"in":return"";case"break":return"";default:return""}},A=()=>{switch(c){case"out":return"bg-gray-100 text-gray-600";case"in":return"bg-blue-100 text-blue-600";case"break":return"bg-orange-100 text-orange-600";default:return"bg-gray-100 text-gray-600"}},E=async k=>{var C,I;if(!t){alert("");return}try{const B={"check-in":"clock_in","check-out":"clock_out","break-start":"break_start","break-end":"break_end"},T=h.find(te=>te.id===d),L=(T==null?void 0:T.name)||"";await Bs.createTimeRecord(t,{recordType:B[k],locationId:d,note:`${L}`});const U={id:Date.now().toString(),type:k,timestamp:new Date,location:((C=h.find(te=>te.id===d))==null?void 0:C.name)||""};switch(x(te=>[U,...te]),k){case"check-in":u("in");break;case"check-out":u("out"),D(new Date().toISOString()),S(!0);break;case"break-start":u("break");break;case"break-end":u("in");break}const V={"check-in":"","check-out":"","break-start":"","break-end":""};s(),a();const Q=(I=document.querySelector(`button[data-action="${k}"] span`))==null?void 0:I.textContent,ge=document.querySelector(`button[data-action="${k}"] span`);ge&&(ge.textContent=" ",setTimeout(()=>{ge&&(ge.textContent=Q||V[k])},2e3))}catch(B){console.error(":",B);const T=B instanceof Error?B.message:"";alert(`: ${T}`)}},R=k=>{switch(k){case"check-in":return c!=="out";case"check-out":return c==="out";case"break-start":return c!=="in";case"break-end":return c!=="break";default:return!1}};return window.location.pathname==="/auth/callback"?o.jsx(P1,{}):window.location.pathname==="/admin"?o.jsx(kk,{}):r?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 rounded-lg flex items-center justify-center mb-4",style:{backgroundColor:"#CB8585"},children:o.jsxs("svg",{className:"animate-spin h-8 w-8 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),o.jsx("p",{className:"text-gray-600",children:"..."})]})}):e?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("header",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:o.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"#CB8585"},children:o.jsx(an,{className:"w-4 h-4 text-white"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-gray-900",children:""}),o.jsx("p",{className:"text-xs text-gray-500",children:"Time Tracking"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t==null?void 0:t.displayName,""]}),o.jsx("p",{className:"text-xs text-gray-500",children:""})]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>y(!w),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Hx,{className:"w-5 h-5 text-gray-600"})}),w&&o.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:o.jsx("div",{className:"py-1",children:o.jsxs("button",{onClick:()=>{n(),y(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),""]})})})]})]})]})})}),o.jsxs("main",{className:"max-w-md mx-auto px-4 py-6",children:[o.jsx("div",{className:"text-white text-center py-3 rounded-lg mb-6",style:{backgroundColor:"#CB8585"},children:o.jsx("p",{className:"text-sm font-medium",children:""})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[o.jsx("p",{className:"text-lg font-medium text-gray-800",children:P(i)}),o.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${A()}`,children:_()})]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[o.jsx(Cr,{className:"w-4 h-4 text-gray-400"}),o.jsx("select",{value:d,onChange:k=>f(k.target.value),className:"bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#CB8585"},disabled:h.length===0,children:h.length===0?o.jsx("option",{value:"",children:"..."}):h.map(k=>o.jsx("option",{value:k.id,children:k.name},k.id))})]})]}),o.jsx("div",{className:"text-center mb-12",children:o.jsxs("div",{className:"text-7xl font-light text-gray-800 mb-2",children:[O(i),o.jsx("span",{className:"text-3xl text-gray-500 ml-2",children:i.getSeconds().toString().padStart(2,"0")})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[o.jsxs("button",{"data-action":"check-in",onClick:()=>E("check-in"),disabled:R("check-in"),className:`flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all ${R("check-in")?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"text-white active:scale-95"}`,style:R("check-in")?{}:{backgroundColor:"#CB8585",borderColor:"#CB8585"},onMouseEnter:k=>{R("check-in")||(k.currentTarget.style.backgroundColor="#B87575",k.currentTarget.style.borderColor="#B87575")},onMouseLeave:k=>{R("check-in")||(k.currentTarget.style.backgroundColor="#CB8585",k.currentTarget.style.borderColor="#CB8585")},children:[o.jsx(Ec,{className:"w-8 h-8 mb-2"}),o.jsx("span",{className:"text-lg font-medium",children:""})]}),o.jsxs("button",{"data-action":"check-out",onClick:()=>E("check-out"),disabled:R("check-out"),className:`flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all ${R("check-out")?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white active:scale-95"}`,style:R("check-out")?{}:{borderColor:"#CB8585",color:"#CB8585"},onMouseEnter:k=>{R("check-out")||(k.currentTarget.style.backgroundColor="#FDF2F2")},onMouseLeave:k=>{R("check-out")||(k.currentTarget.style.backgroundColor="white")},children:[o.jsx(aa,{className:"w-8 h-8 mb-2"}),o.jsx("span",{className:"text-lg font-medium",children:""})]}),o.jsxs("button",{"data-action":"break-start",onClick:()=>E("break-start"),disabled:R("break-start"),className:`flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all ${R("break-start")?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white active:scale-95"}`,style:R("break-start")?{}:{borderColor:"#CB8585",color:"#CB8585"},onMouseEnter:k=>{R("break-start")||(k.currentTarget.style.backgroundColor="#FDF2F2")},onMouseLeave:k=>{R("break-start")||(k.currentTarget.style.backgroundColor="white")},children:[o.jsx(Fi,{className:"w-8 h-8 mb-2"}),o.jsx("span",{className:"text-lg font-medium",children:""})]}),o.jsxs("button",{"data-action":"break-end",onClick:()=>E("break-end"),disabled:R("break-end"),className:`flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all ${R("break-end")?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white active:scale-95"}`,style:R("break-end")?{}:{borderColor:"#CB8585",color:"#CB8585"},onMouseEnter:k=>{R("break-end")||(k.currentTarget.style.backgroundColor="#FDF2F2")},onMouseLeave:k=>{R("break-end")||(k.currentTarget.style.backgroundColor="white")},children:[o.jsx(Fi,{className:"w-8 h-8 mb-2"}),o.jsx("span",{className:"text-lg font-medium",children:""})]})]}),g.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-8",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:""}),o.jsx("div",{className:"space-y-2",children:g.slice(0,5).map(k=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${k.type==="check-in"?"bg-[#CB8585]":k.type==="check-out"?"bg-gray-500":"bg-orange-500"}`}),o.jsx("span",{className:"text-gray-600",children:k.type==="check-in"?"":k.type==="check-out"?"":k.type==="break-start"?"":""})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-gray-900 font-medium",children:O(k.timestamp)}),o.jsx("p",{className:"text-gray-500 text-xs",children:k.location})]})]},k.id))})]})]}),o.jsx("div",{className:"max-w-md mx-auto px-4 mt-8",children:o.jsx(S1,{})}),o.jsx(N1,{isOpen:b,onClose:()=>{S(!1),D(null)},checkoutTime:N}),o.jsx(k1,{})]}):o.jsx(D1,{})};function Ek(){return o.jsx(nb,{children:o.jsx(E1,{children:o.jsx(w1,{children:o.jsx(Ck,{})})})})}lg(document.getElementById("root")).render(o.jsx(j.StrictMode,{children:o.jsx(Ek,{})}));
