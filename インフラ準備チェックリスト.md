# ãƒ¡ã‚¤ã‚¯ãƒŸãƒ¼å‹¤æ€ ã‚·ã‚¹ãƒ†ãƒ  ã‚¤ãƒ³ãƒ•ãƒ©æº–å‚™ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
# Infrastructure & API Setup Checklist

## ğŸš€ Sprint 1 å¿…é ˆé …ç›®ï¼ˆå³åº§ã«å¿…è¦ï¼‰

### Supabase ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] **Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ**
  - https://app.supabase.com ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
  - ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹èªè¨¼å®Œäº†
  - çµ„ç¹”ä½œæˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

- [ ] **Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåï¼š`makeme-attendance` ã¾ãŸã¯é¡ä¼¼å
  - åœ°åŸŸé¸æŠï¼š`Northeast Asia (Tokyo)` æ¨å¥¨
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šãƒ»è¨˜éŒ²
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆURLãƒ»API Keyå–å¾—

- [ ] **ç’°å¢ƒå¤‰æ•°è¨­å®šç”¨ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ**
  ```bash
  # .env.localä½œæˆ
  NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
  NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
  SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
  ```

- [ ] **Supabase CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
  ```bash
  # Mac
  brew install supabase/tap/supabase
  
  # Windows/Linux
  npm install -g supabase
  ```

- [ ] **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ã‚«ãƒ«åˆæœŸåŒ–**
  ```bash
  supabase login
  supabase init
  supabase link --project-ref your-project-ref
  ```

### é–‹ç™ºç’°å¢ƒæº–å‚™
- [ ] **Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª**
  - Node.js 18+ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ç¢ºèª
  - npm ã¾ãŸã¯ yarn ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª

- [ ] **å¿…è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¿½åŠ **
  ```bash
  npm install @supabase/supabase-js
  npm install -D @types/node
  ```

- [ ] **Gitè¨­å®š**
  - `.env.local` ã‚’ `.gitignore` ã«è¿½åŠ 
  - ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªè¨­å®šï¼ˆGitHubç­‰ï¼‰

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸè¨­å®š
- [ ] **time_entries ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ**
  ```sql
  -- Supabase SQL Editorã§å®Ÿè¡Œ
  CREATE TABLE time_entries (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
    type TEXT NOT NULL CHECK (type IN ('check-in', 'check-out', 'break-start', 'break-end')),
    timestamp TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    created_at TIMESTAMPTZ DEFAULT NOW()
  );
  ```

- [ ] **Row Level Security (RLS) è¨­å®š**
  ```sql
  -- RLSæœ‰åŠ¹åŒ–
  ALTER TABLE time_entries ENABLE ROW LEVEL SECURITY;
  
  -- ãƒãƒªã‚·ãƒ¼ä½œæˆ
  CREATE POLICY "Users can view own time entries"
    ON time_entries FOR SELECT
    USING (auth.uid() = user_id);
    
  CREATE POLICY "Users can insert own time entries"
    ON time_entries FOR INSERT
    WITH CHECK (auth.uid() = user_id);
  ```

## ğŸ“… Sprint 2 æº–å‚™é …ç›®ï¼ˆ2é€±é–“å¾Œï¼‰

### èªè¨¼ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µ
- [ ] **Supabase Authè¨­å®šå¼·åŒ–**
  - ãƒ¡ãƒ¼ãƒ«èªè¨¼è¨­å®š
  - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒªã‚·ãƒ¼è¨­å®š
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†è¨­å®š

- [ ] **è¿½åŠ ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ**
  ```sql
  -- stores ãƒ†ãƒ¼ãƒ–ãƒ«
  CREATE TABLE stores (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    name TEXT NOT NULL,
    region TEXT,
    area TEXT,
    brand TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
  );
  
  -- user_store_assignments ãƒ†ãƒ¼ãƒ–ãƒ«
  CREATE TABLE user_store_assignments (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
    store_id UUID REFERENCES stores(id) ON DELETE CASCADE,
    role TEXT NOT NULL CHECK (role IN ('staff', 'client', 'admin')),
    created_at TIMESTAMPTZ DEFAULT NOW()
  );
  ```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
- [ ] **API Rate Limiting è¨­å®š**
  - Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¨­å®š
  - ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹å¯¾ç­–è¨­å®š

- [ ] **CORSè¨­å®š**
  - æœ¬ç•ªãƒ‰ãƒ¡ã‚¤ãƒ³ã®äº‹å‰ç™»éŒ²
  - é–‹ç™ºç’°å¢ƒURLè¨±å¯è¨­å®š

## ğŸ”§ Sprint 3-4 æº–å‚™é …ç›®ï¼ˆ4-6é€±é–“å¾Œï¼‰

### ã‚·ãƒ•ãƒˆç®¡ç†æ©Ÿèƒ½æº–å‚™
- [ ] **ã‚·ãƒ•ãƒˆé–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ**
  ```sql
  -- shifts ãƒ†ãƒ¼ãƒ–ãƒ«
  CREATE TABLE shifts (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    staff_id UUID REFERENCES auth.users(id),
    store_id UUID REFERENCES stores(id),
    shift_date DATE NOT NULL,
    start_time TIME NOT NULL,
    end_time TIME NOT NULL,
    status TEXT NOT NULL CHECK (status IN ('draft', 'submitted', 'approved')),
    created_at TIMESTAMPTZ DEFAULT NOW()
  );
  
  -- shift_requests ãƒ†ãƒ¼ãƒ–ãƒ«
  CREATE TABLE shift_requests (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    staff_id UUID REFERENCES auth.users(id),
    store_id UUID REFERENCES stores(id),
    available_dates JSONB,
    status TEXT NOT NULL CHECK (status IN ('draft', 'submitted')),
    submitted_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW()
  );
  ```

### é€šçŸ¥æ©Ÿèƒ½æº–å‚™ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] **ãƒ¡ãƒ¼ãƒ«é€šçŸ¥è¨­å®š**
  - SendGrid ã¾ãŸã¯ Resend ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
  - API ã‚­ãƒ¼å–å¾—ãƒ»è¨­å®š
  - ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ

## ğŸŒ Sprint 5-6 æº–å‚™é …ç›®ï¼ˆ8-12é€±é–“å¾Œï¼‰

### ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›æ©Ÿèƒ½æº–å‚™
- [ ] **ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¿½åŠ **
  ```bash
  # CSVå‡ºåŠ›
  npm install papaparse
  npm install -D @types/papaparse
  
  # Excelå‡ºåŠ›
  npm install xlsx
  
  # PDFå‡ºåŠ›
  npm install jspdf html2canvas
  ```

### Google Sheets API é€£æºæº–å‚™
- [ ] **Google Cloud Consoleè¨­å®š**
  - Google Cloud Consoleã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
  - æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
  - Google Sheets APIæœ‰åŠ¹åŒ–
  - ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

- [ ] **èªè¨¼è¨­å®š**
  - ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ï¼ˆJSONï¼‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
  - ç’°å¢ƒå¤‰æ•°ã«è¿½åŠ ï¼š
  ```bash
  GOOGLE_SHEETS_PRIVATE_KEY=your-private-key
  GOOGLE_SHEETS_CLIENT_EMAIL=your-service-account-email
  ```

- [ ] **Google Sheets API ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**
  ```bash
  npm install googleapis
  ```

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆç’°å¢ƒæº–å‚™

### Vercel ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ¨å¥¨ï¼‰
- [ ] **Vercelã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ**
  - https://vercel.com ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
  - GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æº

- [ ] **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆãƒ»è¨­å®š**
  - GitHubãƒªãƒã‚¸ãƒˆãƒªé€£æº
  - ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆæœ¬ç•ªç”¨ï¼‰
  - ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

### Netlify ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆä»£æ›¿æ¡ˆï¼‰
- [ ] **Netlifyã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ**
  - https://netlify.com ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
  - GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æº

- [ ] **ãƒ“ãƒ«ãƒ‰è¨­å®š**
  - Build command: `npm run build`
  - Publish directory: `dist`
  - ç’°å¢ƒå¤‰æ•°è¨­å®š

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ç›£è¦–æº–å‚™

### SSLè¨¼æ˜æ›¸ãƒ»ãƒ‰ãƒ¡ã‚¤ãƒ³
- [ ] **ãƒ‰ãƒ¡ã‚¤ãƒ³å–å¾—**ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
  - æœ¬ç•ªç”¨ãƒ‰ãƒ¡ã‚¤ãƒ³è³¼å…¥
  - DNSè¨­å®š

- [ ] **SSLè¨¼æ˜æ›¸**
  - Vercel/Netlifyè‡ªå‹•SSLè¨­å®šç¢ºèª
  - HTTPSå¼·åˆ¶è¨­å®š

### ç›£è¦–ãƒ»ãƒ­ã‚°è¨­å®š
- [ ] **Supabase Analyticsè¨­å®š**
  - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§åˆ©ç”¨çŠ¶æ³ç›£è¦–è¨­å®š
  - ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

- [ ] **ã‚¨ãƒ©ãƒ¼ç›£è¦–ãƒ„ãƒ¼ãƒ«**ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  - Sentry ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãƒ»è¨­å®š
  ```bash
  npm install @sentry/react
  ```

## ğŸ§ª ãƒ†ã‚¹ãƒˆç’°å¢ƒæº–å‚™

### Stagingç’°å¢ƒ
- [ ] **Supabase Staging ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**
  - æœ¬ç•ªã¨ã¯åˆ¥ã®Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
  - ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š

- [ ] **ãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ**
  - Adminæ¨©é™ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
  - Clientæ¨©é™ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
  - Staffæ¨©é™ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ

## ğŸ“± é–‹ç™ºãƒ„ãƒ¼ãƒ«ãƒ»æ‹¡å¼µæ©Ÿèƒ½

### VS Code æ¨å¥¨æ‹¡å¼µæ©Ÿèƒ½
- [ ] **å¿…é ˆæ‹¡å¼µæ©Ÿèƒ½ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
  - ES7+ React/Redux/React-Native snippets
  - TypeScript Importer
  - Tailwind CSS IntelliSense
  - Prettier - Code formatter
  - ESLint

### ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½
- [ ] **é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«**
  - React Developer Tools
  - Redux DevToolsï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–æº–å‚™

### åˆ†æãƒ„ãƒ¼ãƒ«
- [ ] **Web Vitalsç›£è¦–**
  - Google Analytics 4 è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  - PageSpeed Insightså®šæœŸãƒã‚§ãƒƒã‚¯è¨­å®š

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–
- [ ] **Supabaseã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š**
  ```sql
  -- ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹æ¤œç´¢ç”¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  CREATE INDEX idx_time_entries_user_timestamp 
    ON time_entries(user_id, timestamp DESC);
  
  CREATE INDEX idx_time_entries_type 
    ON time_entries(type, timestamp DESC);
  ```

## âœ… æœ€çµ‚ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Sprint 1 é–‹å§‹å‰
- [ ] Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‹•ä½œç¢ºèª
- [ ] ç’°å¢ƒå¤‰æ•°ã™ã¹ã¦è¨­å®šå®Œäº†
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ
- [ ] é–‹ç™ºç’°å¢ƒã§ã®ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- [ ] Gitç®¡ç†ä¸‹ã§ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥æˆåŠŸ

### å„Sprinté–‹å§‹å‰
- [ ] å‰Sprintæ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
- [ ] å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªäº‹å‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒæ›´æ–°å®Œäº†
- [ ] ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®å‹•ä½œç¢ºèª

---

## ğŸš¨ é‡è¦ãªæ³¨æ„äº‹é …

1. **æ©Ÿå¯†æƒ…å ±ç®¡ç†**: API ã‚­ãƒ¼ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯çµ¶å¯¾ã«Gitã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„
2. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šå¤‰æ›´å‰ã¯å¿…ãšãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å–å¾—
3. **æ®µéšçš„é©ç”¨**: ä¸€åº¦ã«ã™ã¹ã¦è¨­å®šã›ãšã€å¿…è¦ã«å¿œã˜ã¦æ®µéšçš„ã«è¿½åŠ 
4. **ãƒ†ã‚¹ãƒˆå„ªå…ˆ**: æœ¬ç•ªç’°å¢ƒé©ç”¨å‰ã¯å¿…ãšStagingã§å‹•ä½œç¢ºèª

ã“ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã«å¾“ã£ã¦æº–å‚™ã‚’é€²ã‚ã‚‹ã“ã¨ã§ã€ã‚¹ãƒ ãƒ¼ã‚ºãªé–‹ç™ºé€²è¡ŒãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ 